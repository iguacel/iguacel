(this["webpackJsonpraster-react-canvas2"]=this["webpackJsonpraster-react-canvas2"]||[]).push([[19],{102:function(e,a,t){"use strict";t.d(a,"a",(function(){return c})),t.d(a,"b",(function(){return n}));var c=void 0!==window.safari,n=function(){return!("undefined"===typeof window||!("ontouchstart"in window||window.DocumentTouch&&"undefined"!==typeof document&&document instanceof window.DocumentTouch))||!("undefined"===typeof navigator||!navigator.maxTouchPoints&&!navigator.msMaxTouchPoints)}},105:function(e,a,t){"use strict";var c=t(3),n=t(0);a.a=function(){var e="object"===typeof window;function a(){return e?window.innerWidth>window.innerHeight?window.innerHeight:window.innerWidth:void 0}var t=Object(n.useState)(a),i=Object(c.a)(t,2),l=i[0],s=i[1];return Object(n.useEffect)((function(){if(!e)return!1;function t(){s(a())}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),l}},106:function(e,a,t){"use strict";var c=t(0),n=t.n(c);a.a=function(e){var a=e.width,t=e.height,i=e.draw,l=e.border,s=Object(c.useRef)();return Object(c.useEffect)((function(){var e=s.current,c=e.getContext("2d");!function(e,c){var n=window.devicePixelRatio||1;e.width=a*n,e.height=t*n,e.style.width="".concat(a,"px"),e.style.height="".concat(t,"px"),c.scale(n,n)}(e,c),i(e,c)})),n.a.createElement("canvas",{style:{border:l?"1px solid white":""},ref:s,width:a,height:t})}},239:function(e,a,t){},377:function(e,a,t){"use strict";t.r(a);var c=t(32),n=t(142),i=t(5),l=t(17),s=t(12),o=t(3),r=t(26),d=t(0),u=t.n(d),m=t(79),v=t(89),b={c56:{ine:"2",id:"c2",name_s:"Albacete",name:"Albacete",ccaa:"Castilla - La Mancha",ccaa_es:"CM",abv:"AB",abv2:"AB",cell:56},c57:{ine:"3",id:"c3",name_s:"Alicante",name:"Alicante/Alacant",ccaa:"Comunitat Valenciana",ccaa_es:"VC",abv:"A",abv2:"A",cell:57},c76:{ine:"4",id:"c4",name_s:"Almer\xeda",name:"Almer\xeda",ccaa:"Andaluc\xeda",ccaa_es:"AN",abv:"AL",abv2:"AL",cell:76},c15:{ine:"1",id:"c1",name_s:"Araba",name:"Araba/\xc1lava",ccaa:"Pa\xeds Vasco",ccaa_es:"PV",abv:"VI",abv2:"AR",cell:15},c2:{ine:"33",id:"c33",name_s:"Asturias",name:"Asturias",ccaa:"Asturias",ccaa_es:"AS",abv:"O",abv2:"AS",cell:2},c44:{ine:"5",id:"c5",name_s:"\xc1vila",name:"\xc1vila",ccaa:"Castilla y Le\xf3n",ccaa_es:"CL",abv:"AV",abv2:"AV",cell:44},c53:{ine:"6",id:"c6",name_s:"Badajoz",name:"Badajoz",ccaa:"Extremadura",ccaa_es:"EX",abv:"BA",abv2:"BA",cell:53},c49:{ine:"7",id:"c7",name_s:"Balears",name:"Balears, Illes",ccaa:"Illes Balears",ccaa_es:"IB",abv:"IB",abv2:"IB",cell:49},c29:{ine:"8",id:"c8",name_s:"Barcelona",name:"Barcelona",ccaa:"Catalu\xf1a",ccaa_es:"CT",abv:"B",abv2:"B",cell:29},c4:{ine:"48",id:"c48",name_s:"Bizkaia",name:"Bizkaia",ccaa:"Pa\xeds Vasco",ccaa_es:"PV",abv:"BI",abv2:"BI",cell:4},c14:{ine:"9",id:"c9",name_s:"Burgos",name:"Burgos",ccaa:"Castilla y Le\xf3n",ccaa_es:"CL",abv:"BU",abv2:"BU",cell:14},c43:{ine:"10",id:"c10",name_s:"C\xe1ceres",name:"C\xe1ceres",ccaa:"Extremadura",ccaa_es:"EX",abv:"CC",abv2:"CC",cell:43},c73:{ine:"11",id:"c11",name_s:"C\xe1diz",name:"C\xe1diz",ccaa:"Andaluc\xeda",ccaa_es:"AN",abv:"CA",abv2:"CA",cell:73},c3:{ine:"39",id:"c39",name_s:"Cantabria",name:"Cantabria",ccaa:"Cantabria",ccaa_es:"CB",abv:"S",abv2:"CN",cell:3},c37:{ine:"12",id:"c12",name_s:"Castell\xf3n",name:"Castell\xf3n/Castell\xf3",ccaa:"Comunitat Valenciana",ccaa_es:"VC",abv:"CS",abv2:"CS",cell:37},c54:{ine:"13",id:"c13",name_s:"Ciudad Real",name:"Ciudad Real",ccaa:"Castilla - La Mancha",ccaa_es:"CM",abv:"CR",abv2:"CR",cell:54},c65:{ine:"14",id:"c14",name_s:"C\xf3rdoba",name:"C\xf3rdoba",ccaa:"Andaluc\xeda",ccaa_es:"AN",abv:"CO",abv2:"CO",cell:65},c0:{ine:"15",id:"c15",name_s:"A Coru\xf1a",name:"Coru\xf1a, A",ccaa:"Galicia",ccaa_es:"GA",abv:"C",abv2:"C",cell:0},c46:{ine:"16",id:"c16",name_s:"Cuenca",name:"Cuenca",ccaa:"Castilla - La Mancha",ccaa_es:"CM",abv:"CU",abv2:"CU",cell:46},c5:{ine:"20",id:"c20",name_s:"Gipuzkoa",name:"Gipuzkoa",ccaa:"Pa\xeds Vasco",ccaa_es:"PV",abv:"SS",abv2:"G",cell:5},c19:{ine:"17",id:"c17",name_s:"Girona",name:"Girona",ccaa:"Catalu\xf1a",ccaa_es:"CT",abv:"GI",abv2:"GI",cell:19},c75:{ine:"18",id:"c18",name_s:"Granada",name:"Granada",ccaa:"Andaluc\xeda",ccaa_es:"AN",abv:"GR",abv2:"GR",cell:75},c35:{ine:"19",id:"c19",name_s:"Guadalajara",name:"Guadalajara",ccaa:"Castilla - La Mancha",ccaa_es:"CM",abv:"GU",abv2:"GU",cell:35},c63:{ine:"21",id:"c21",name_s:"Huelva",name:"Huelva",ccaa:"Andaluc\xeda",ccaa_es:"AN",abv:"H",abv2:"H",cell:63},c17:{ine:"22",id:"c22",name_s:"Huesca",name:"Huesca",ccaa:"Arag\xf3n",ccaa_es:"AR",abv:"HU",abv2:"HU",cell:17},c66:{ine:"23",id:"c23",name_s:"Ja\xe9n",name:"Ja\xe9n",ccaa:"Andaluc\xeda",ccaa_es:"AN",abv:"J",abv2:"J",cell:66},c12:{ine:"24",id:"c24",name_s:"Le\xf3n",name:"Le\xf3n",ccaa:"Castilla y Le\xf3n",ccaa_es:"CL",abv:"LE",abv2:"LE",cell:12},c18:{ine:"25",id:"c25",name_s:"Lleida",name:"Lleida",ccaa:"Catalu\xf1a",ccaa_es:"CT",abv:"L",abv2:"L",cell:18},c1:{ine:"27",id:"c27",name_s:"Lugo",name:"Lugo",ccaa:"Galicia",ccaa_es:"GA",abv:"LU",abv2:"LU",cell:1},c45:{ine:"28",id:"c28",name_s:"Madrid",name:"Madrid",ccaa:"Comunidad de Madrid",ccaa_es:"MD",abv:"M",abv2:"M",cell:45},c74:{ine:"29",id:"c29",name_s:"M\xe1laga",name:"M\xe1laga",ccaa:"Andaluc\xeda",ccaa_es:"AN",abv:"MA",abv2:"MA",cell:74},c67:{ine:"30",id:"c30",name_s:"Murcia",name:"Murcia",ccaa:"Regi\xf3n de Murcia",ccaa_es:"MC",abv:"MU",abv2:"MU",cell:67},c16:{ine:"31",id:"c31",name_s:"Navarra",name:"Navarra",ccaa:"Comunidad Foral de Navarra",ccaa_es:"NC",abv:"NA",abv2:"NA",cell:16},c11:{ine:"32",id:"c32",name_s:"Ourense",name:"Ourense",ccaa:"Galicia",ccaa_es:"GA",abv:"OU",abv2:"OU",cell:11},c13:{ine:"34",id:"c34",name_s:"Palencia",name:"Palencia",ccaa:"Castilla y Le\xf3n",ccaa_es:"CL",abv:"P",abv2:"P",cell:13},c91:{ine:"35",id:"c35",name_s:"Las Palmas",name:"Palmas, Las",ccaa:"Canarias",ccaa_es:"CN",abv:"GC",abv2:"GC",cell:91},c10:{ine:"36",id:"c36",name_s:"Pontevedra",name:"Pontevedra",ccaa:"Galicia",ccaa_es:"GA",abv:"PO",abv2:"PO",cell:10},c26:{ine:"26",id:"c26",name_s:"La Rioja",name:"Rioja, La",ccaa:"La Rioja",ccaa_es:"LR",abv:"LO",abv2:"LR",cell:26},c33:{ine:"37",id:"c37",name_s:"Salamanca",name:"Salamanca",ccaa:"Castilla y Le\xf3n",ccaa_es:"CL",abv:"SA",abv2:"SA",cell:33},c90:{ine:"38",id:"c38",name_s:"Tenerife",name:"Santa Cruz de Tenerife",ccaa:"Canarias",ccaa_es:"CN",abv:"TF",abv2:"TF",cell:90},c34:{ine:"40",id:"c40",name_s:"Segovia",name:"Segovia",ccaa:"Castilla y Le\xf3n",ccaa_es:"CL",abv:"SG",abv2:"SG",cell:34},c64:{ine:"41",id:"c41",name_s:"Sevilla",name:"Sevilla",ccaa:"Andaluc\xeda",ccaa_es:"AN",abv:"SE",abv2:"SE",cell:64},c25:{ine:"42",id:"c42",name_s:"Soria",name:"Soria",ccaa:"Castilla y Le\xf3n",ccaa_es:"CL",abv:"SO",abv2:"SO",cell:25},c28:{ine:"43",id:"c43",name_s:"Tarragona",name:"Tarragona",ccaa:"Catalu\xf1a",ccaa_es:"CT",abv:"T",abv2:"T",cell:28},c36:{ine:"44",id:"c44",name_s:"Teruel",name:"Teruel",ccaa:"Arag\xf3n",ccaa_es:"AR",abv:"TE",abv2:"TE",cell:36},c55:{ine:"45",id:"c45",name_s:"Toledo",name:"Toledo",ccaa:"Castilla - La Mancha",ccaa_es:"CM",abv:"TO",abv2:"TO",cell:55},c47:{ine:"46",id:"c46",name_s:"Valencia",name:"Valencia/Val\xe8ncia",ccaa:"Comunitat Valenciana",ccaa_es:"VC",abv:"V",abv2:"V",cell:47},c24:{ine:"47",id:"c47",name_s:"Valladolid",name:"Valladolid",ccaa:"Castilla y Le\xf3n",ccaa_es:"CL",abv:"VA",abv2:"VA",cell:24},c23:{ine:"49",id:"c49",name_s:"Zamora",name:"Zamora",ccaa:"Castilla y Le\xf3n",ccaa_es:"CL",abv:"ZA",abv2:"ZA",cell:23},c27:{ine:"50",id:"c50",name_s:"Zaragoza",name:"Zaragoza",ccaa:"Arag\xf3n",ccaa_es:"AR",abv:"Z",abv2:"Z",cell:27},c83:{ine:"51",id:"c51",name_s:"Ceuta",name:"Ceuta",ccaa:"Ceuta",ccaa_es:"CE",abv:"CE",abv2:"CE",cell:83},c84:{ine:"52",id:"c52",name_s:"Melilla",name:"Melilla",ccaa:"Melilla",ccaa_es:"ME",abv:"ML",abv2:"ML",cell:84}},h=t(16),f=[{value:"cases_accumulated",label:"Cases",label_es:"Casos",desc:"Cases (cumulative).",desc_es:"Casos (acumulado).",max:12e4},{value:"new_cases",label:"New cases reported",label_es:"Nuevos casos",desc:"New cases.",desc_es:"Nuevos casos.",max:2e3},{value:"deceased",label:"Deaths",label_es:"Muertos",desc:"Deaths (cumulative).",desc_es:"Muertes (acumulado).",max:15e3},{value:"activos",label:"Active cases",label_es:"Casos activos",desc:"Active cases.",desc_es:"Casos activos.",max:12e3},{value:"recovered",label:"Recovered",label_es:"Recuperados",desc:"Recovered (cumulative).",desc_es:"Recuperados (acumulado).",max:25e3},Object(h.a)({value:"hospitalized",label:"Hospitalized",label_es:"Hospitalizados",max:1e3,desc:u.a.createElement("p",null,"Hospitalized."," ",u.a.createElement("a",{href:"https://github.com/montera34/escovid19data/wiki#hospitalizados",title:"Wiki",target:"_blank",rel:"noopener noreferrer"},"Mix of cumulative and daily.")),desc_es:u.a.createElement("p",null,"Hospitalizados.",u.a.createElement("a",{href:"https://github.com/montera34/escovid19data/wiki#hospitalizados",title:"Wiki",target:"_blank",rel:"noopener noreferrer"},"Mezcla acumulados y diarios."))},"max",8e4),{value:"intensive_care",label:"Intensive care",label_es:"Cuidados intensivos",desc:"Intensive care patients. Cumulative.",desc_es:"Pacientes UCI. Acumulado.",max:6e3},{value:"daily_cases",label:"Daily cases",label_es:"Casos diarios",desc:"Daily cases. Calculated.",desc_es:"Casos diarios. Calculado.",max:4e3},{value:"daily_cases_avg7",label:"Daily cases avg 7 days",label_es:"Casos diarios media 7 d.",desc:"Average daily cases in the last 7 days.",desc_es:"Media de casos diarios en la \xfaltima semana.",max:5e3},{value:"cases_per_cienmil",label:"Cases per 100K",label_es:"Casos por 100k hab.",desc:"Cumulative cases per 100,000 inhabitants.",desc_es:"Casos por cada 100.000 habitantes (acumulado).",max:3e3},{value:"intensive_care_per_1000000",label:"Intensive care per 1M",label_es:"UCI por 1m hab.",desc:"Cumulative cases per 1,000,000 inhabitants.",desc_es:"Pacientes UCI. Casos por cada 1.000.000 habitantes (acumulado).",max:60},{value:"deceassed_per_100000",label:"Deaths per 100K",label_es:"Muertos por 100k hab.",desc:"Cumulative deaths per 100,000 inhabitants.",desc_es:"Muertes por cada 100.000 habitantes (acumulado).",max:250},{value:"daily_deaths",label:"Daily deaths",label_es:"Muertes diarias",desc:"Reported daily deaths.",desc_es:"Muertes diarias reportadas (calculado).",max:500},{value:"daily_deaths_inc",label:"Daily deaths inc.",label_es:"Muertes diarias inc.",desc:"Daily deaths. Calculated as the percentage from last day (cumulative).",desc_es:"Incremento porcentual de muertes sobre el d\xeda anterior.",max:1e3},{value:"daily_deaths_avg3",label:"Daily deaths avg. 3 days",label_es:"Media muertes 3 d.",desc:"Average daily deaths in the last 3 days.",desc_es:"Media de muertes diarias en los \xfaltimos 3 d\xedas.",max:500},{value:"daily_deaths_avg7",label:"Daily deaths avg. 7 days",label_es:"Media muertes 7 d.",desc:"Average daily deaths in the last 7 days.",desc_es:"Media de muertes diarias en los \xfaltimos 7 d\xedas.",max:500},{value:"deaths_last_week",label:"Deaths last week",label_es:"Muertes \xfaltima semana",desc:"Deaths in the last 7 d.",desc_es:"Muertes en la \xfaltima semana.",max:2500},{value:"PCR",label:"PCR. New cases",label_es:"PCR. Nuevos casos",desc:"New cases detected with PCR.",desc_es:"Nuevos casos detectados por PCR.",max:2e3},{value:"cases_accumulated_PCR",label:"PCR. Cumulative",label_es:"PCR. Acumulado",desc:"Cases detected with PCR (cumulative).",desc_es:"Casos detectados por PCR (acumulado).",max:2e5},{value:"daily_cases_PCR_avg7",label:"PCR avg. 7 days",label_es:"PCR. media 7 d.",desc:"Average daily cases PCR in the last 7 days.",desc_es:"Media de casos detectados por PCR (7 d\xedas).",max:4e3},{value:"TestAc",label:"AC. New cases",label_es:"AC. Nuevos casos",desc:"New cases detected with Ac.",desc_es:"Nuevos casos detectados por test de anticuerpos.",max:7e4}],g=t(169),p=t(105),_=t(102),y=t(19),C=t(13),x=t(106),E=t(332),w=t(168),A=t(352),O=t(345),L=t(218),j=t(126),k=t(357),S=t(361),M=t(363),N=t(359),D=t(373),R=t(378),z=t(353),P=t(354),T=t(360),B=t(389),G=t(362),V=t(358),I=t(20),U=(t(239),t(240),t(245),t(246),t(247),t(251),t(252),a.default=function(){var e=Object(p.a)(),a=Object(d.useMemo)((function(){return function(e){for(var a=e/10,t=-1,c=[],n=0;n<10;n++)for(var i=0;i<10;i++){var l={x:i*a,y:n*a},s=n,o=i,d={x:i*a+a/2,y:n*a+a/2};t++,b["c".concat(t)]&&c.push(Object(r.a)({id:t,position:l,center:d,row:s+1,column:o+1,cellSize:a},b["c".concat(t)]))}return c}(e)}),[e]),t=Object(m.a)({polyfill:v.a}),c=Object(o.a)(t,2),n=c[0],h=c[1],j=(h.width,h.height,Object(d.useState)(null)),k=Object(o.a)(j,2),S=k[0],M=k[1],N=Object(d.useState)(null),D=Object(o.a)(N,2),R=D[0],z=D[1],P=Object(d.useState)(!1),T=Object(o.a)(P,2),B=T[0],G=T[1],V=Object(d.useState)("cases_accumulated"),I=Object(o.a)(V,2),H=I[0],J=I[1],K=Object(d.useState)(!0),X=Object(o.a)(K,2),q=X[0],Q=X[1],Y=Object(d.useState)(null),$=Object(o.a)(Y,2),ee=$[0],ae=$[1],te=Object(d.useState)(!1),ce=Object(o.a)(te,2),ne=ce[0],ie=ce[1],le=Object(d.useState)(new Date("2020-02-20")),se=Object(o.a)(le,2),oe=se[0],re=(se[1],Object(d.useContext)(y.b).dark),de=Object(d.useContext)(C.c).language,ue=de.isEnglish,me=Object(_.b)(),ve=function(){Q(!q)},be=Intl.PluralRules&&new Intl.RelativeTimeFormat(de.id,{numeric:"auto"}),he=function(e){ie(!0),ae(e)},fe=e/10;Object(d.useEffect)((function(){fetch("https://raw.githubusercontent.com/montera34/escovid19data/master/data/output/covid19-provincias-spain_consolidated.csv").then((function(e){return e.ok?e.text():Promise.reject(e.status)})).then((function(e){return Object(g.a)(e)})).then((function(e){var a=e.reduce((function(e,a,t,c){var n,i=a.ine_code;return a.date,e["c".concat(i)]?e["c".concat(i)].data=[].concat(Object(s.a)(e["c".concat(i)].data),[a]):(Object.keys(b).forEach((function(e){b[e].ine===i&&(n=Object(r.a)({},b[e]))})),e["c".concat(i)]={data:[a],meta:n,firstDate:a.date}),e}),{});M(a),G(!0)})).catch((function(e){console.log(e)})),fetch("https://api.github.com/repos/montera34/escovid19data/branches/master").then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){z({author:e.commit.author.login,date:e.commit.commit.author.date})})).catch((function(e){console.log(e)}))}),[]);var ge=Object(E.a)().domain([oe,new Date]).range([0,fe]),pe=function(){return f.find((function(e){return e.value===H})).max},_e=Object(w.a)().domain([0,pe()]).range([fe,0]),ye=Object(A.a)().domain([.1,pe()]).range([fe,0]),Ce={bg:re?"RGBA(228, 230, 234, 0.20)":"RGBA(228, 230, 234, 1.00)",main:re?"RGBA(238, 174, 146, 1.00)":"RGBA(226, 80, 59, 1.00)",lightColor:re?"RGBA(75, 76, 78, 1.00)":"RGBA(214, 214, 214, 1.00)"},xe=function(){function e(a){var t=a.x;Object(i.a)(this,e),this.id=t.id,this.position=t.position,this.center=t.center,this.row=t.row,this.column=t.column,this.cellSize=t.cellSize,this.cell=t.cell,this.name=t.name,this.ine=t.ine,this.data=S&&S[t.id]}return Object(l.a)(e,[{key:"draw",value:function(e){var a,t=this;e.fillStyle=Ce.bg,e.fillRect(ge(new Date)+this.position.x,this.position.y,fe-ge(new Date),fe);var c=Object(O.a)().y0(this.position.y+fe).curve(L.a).context(e),n=null===(a=this.data)||void 0===a?void 0:a.data.filter((function(e){return"0"!==e[H]&&!isNaN(parseFloat(e[H]))&&isFinite(e[H])}));e.fillStyle=Ce.lightColor,e.font="".concat(fe/5,"px Inter"),e.beginPath(),e.textAlign="center",e.textBaseline="middle",n.length>2?c(n.map((function(e,a){return 1,[ge(new Date(e.date))+t.position.x,q?ye(e[H])+t.position.y:_e(e[H])+t.position.y]}))):e.fillText("".concat(ue?"N/A":"N/D"),this.center.x,this.center.y+10),e.closePath(),e.fill()}},{key:"update",value:function(e){this.draw(e)}},{key:"animate",value:function(e){this.draw(e)}}]),e}(),Ee=[],we=function(t,c){B&&a.forEach((function(e,a){Ee.push(new xe({x:e}))})),c.clearRect(0,0,e,e),Ee.forEach((function(e){return e.update(c)}))};return u.a.createElement("div",{style:{position:"relative",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},u.a.createElement("div",{ref:n,style:{position:"relative",margin:"0 auto",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},u.a.createElement(U,{changeVisible:function(e){J(e)},commit:R,isEnglish:ue,language:de,rtf:be,changeLog:ve,isLog:q,cellSize:fe}),ee&&u.a.createElement(Z,{commit:R,rtf:be,visible:H,size:e,selected:ee,colors:Ce,isOpen:ne,setIsOpen:ie,dark:re,data:S,isLog:q,changeLog:ve,startDate:oe}),u.a.createElement("svg",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",overflow:"visible",zIndex:1},width:"".concat(e,"px"),height:"".concat(e,"px"),viewBox:"0 0 ".concat(e," ").concat(e)},a.map((function(e){return u.a.createElement(W,{colors:Ce,isTouch:me,key:"cartoSvg".concat(e.id),carto:e,select:he,data:S,isLoaded:B,visible:H})})),u.a.createElement(F,{marginLeft:10,colors:Ce,changeLog:ve,isLog:q,cellSize:fe,visible:H,isEnglish:ue,startDate:oe})),u.a.createElement(x.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",overflow:"visible"},draw:function(e,a){we(0,a)},width:e,height:e})))},function(e){var a=e.changeVisible,t=e.isEnglish;return u.a.createElement("div",{className:"menuPanel"},u.a.createElement(H,{options:f,changeVisible:a,isEnglish:t}))}),F=function(e){var a=e.isLog,t=e.cellSize,c=e.row,i=void 0===c?0:c,l=e.column,s=void 0===l?5:l,o=e.visible,r=e.isEnglish,d=e.colors,m=e.changeLog,v=e.marginLeft,b=e.startDate,h={x:t*i,y:t*s},g=f.find((function(e){return e.value===o})).max,p=Object(z.a)({range:[t,0],domain:[0,g],nice:!0}),_=Object(P.a)({range:[t,0],domain:[.1,g],nice:!0}),y=Object(z.a)({domain:[new Date(b),new Date],range:[0,t]});return u.a.createElement("g",null,u.a.createElement("rect",{stroke:"var(--foreground-color)",fill:"var(--foreground-color)",opacity:"0.2",x:h.x+v,y:h.y,width:t,height:t}),u.a.createElement(R.a,{top:h.y,left:h.x+v,xScale:y,yScale:a?_:p,stroke:"var(--background-color)",width:t,height:t,numTicksRows:4,numTicksColumns:0}),u.a.createElement(k.a,{top:h.y,left:h.x+t+v,scale:a?_:p,numTicks:2,stroke:"var(--foreground-color)",tickStroke:"var(--foreground-color)",tickLabelProps:function(e,a){return{fill:"var(--foreground-color)",textAnchor:"start",dx:"1em",dy:"0.25em"}},tickFormat:function(e){return e},tickComponent:function(e){var a=e.formattedValue,t=Object(n.a)(e,["formattedValue"]);return u.a.createElement("text",Object.assign({style:{fontSize:"0.7em"}},t),a)}}),u.a.createElement("circle",{cx:h.x+12+v,cy:h.y+t+25,r:10,stroke:"var(--foreground-color)",fill:"none",strokeWidth:"1px"}),a&&u.a.createElement("circle",{cx:h.x+12+v,cy:h.y+t+25,r:4,fill:d.main}),u.a.createElement("text",{style:{pointerEvents:"none",fill:"var(--foreground-color)",dominantBaseline:"hanging",fontSize:"0.8em"},x:h.x+32+v,y:h.y+t+20,fontSize:"22"},r&&"Use log",!r&&"Escala"),u.a.createElement("text",{style:{pointerEvents:"none",fill:"var(--foreground-color)",dominantBaseline:"hanging",fontSize:"0.8em"},x:h.x+32+v,y:h.y+t+38,fontSize:"22"},r&&"scale",!r&&"log."),u.a.createElement("rect",{style:{cursor:"pointer"},onClick:function(){return m()},className:"hitRect",fill:"transparent",x:h.x,y:h.y,width:t+50,height:t+50}))},H=function(e){var a=e.options,t=e.changeVisible,c=e.isEnglish,n=a;return u.a.createElement("div",null,u.a.createElement("select",{className:"select-css",onChange:function(e){e.preventDefault(),t(e.currentTarget.value)}},n.map((function(e){return u.a.createElement("option",{key:e.value,value:e.value},c?e.label:e.label_es)}))))},W=function(e){var a=e.carto,t=e.select,c=e.isLoaded,n=e.colors,i=a.id,l=a.center,s=a.position,o=a.cellSize,r=a.abv,d=a.name_s;return u.a.createElement("g",{key:"cartoSvg".concat(i)},u.a.createElement("rect",{onClick:function(){return t(a)},style:{cursor:"pointer"},id:"cartoSvg".concat(i),x:s.x,y:s.y,width:o,height:o,fill:"transparent",stroke:"gray"}),!c&&u.a.createElement("circle",{style:{transformOrigin:"".concat(l.x,"px ").concat(l.y,"px")},className:"loadingCircle",cx:l.x,cy:l.y,r:o/7,fill:n.lightColor}),u.a.createElement("text",{style:{pointerEvents:"none",fill:"var(--foreground-color)",dominantBaseline:"hanging",fontSize:"0.8em"},x:s.x+6,y:s.y+6,fontSize:"55"},o<80?r:d))},Z=function(e){var a=e.commit,t=e.rtf,c=e.visible,n=e.selected,i=e.isOpen,l=e.setIsOpen,b=e.size,h=e.colors,g=(e.dark,e.data),p=e.isLog,_=e.changeLog,y=e.startDate,x=n.ccaa_es,E=n.name_s,w=Object(m.a)({polyfill:v.a}),A=Object(o.a)(w,2),O=A[0],L=A[1],j=Object(d.useContext)(C.c).language,k=j.isEnglish,S=Object(I.b)({opacity:i?1:0,pointerEvents:i?"auto":"none"}),M=f.find((function(e){return e.value===c})),N=Object(d.useMemo)((function(){return g[n.id].data.filter((function(e){return!isNaN(parseFloat(e[c]))&&isFinite(e[c])}),[c,g])})),D=Object(d.useMemo)((function(){return Math.max.apply(Math,Object(s.a)(N.map((function(e){return+e[c]}))))}),[N]),R=Object(d.useMemo)((function(){return N.find((function(e){return+e[c]===D}))}),[N]);return u.a.createElement(I.a.div,{className:"tooltip",style:Object(r.a)(Object(r.a)({},S),{},{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2,background:"var(--background-color)",border:"1px solid var(--foreground-color)",width:"calc(100% - 40px)",height:"400px",overflow:"hidden"}),width:"".concat(b,"px"),height:"".concat(b,"px")},u.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50px",borderBottom:"1px solid var(--foreground-color)"}},u.a.createElement("p",{style:{margin:0,padding:"1em"},className:"h4"},E,u.a.createElement("span",{style:{fontWeight:400,fontSize:"85%",letterSpacing:"0.1em"}}," ","| ",x)),u.a.createElement("div",{className:"covid_close",onClick:function(){return l(!i)},style:{cursor:"pointer",marginLeft:"auto",width:"50px",height:"50px",background:"var(--foreground-color)",display:"flex",justifyContent:"center",alignItems:"center"}},u.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,"aria-hidden":"true"},u.a.createElement("path",{fill:"var(--background-color)",strokeWidth:"1",stroke:"var(--background-color)",d:"M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4l6.6 6.6L8 22.6 9.4 24l6.6-6.6 6.6 6.6 1.4-1.4-6.6-6.6L24 9.4z"})))),u.a.createElement("div",{ref:O,className:"tooltip",style:{margin:"1em",height:"250px"}},u.a.createElement("div",{className:"keyCanvas",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},u.a.createElement("p",{style:{margin:0,padding:0,flexBasis:"80%"}},k?null===M||void 0===M?void 0:M.desc:null===M||void 0===M?void 0:M.desc_es),u.a.createElement("p",{style:{textAlign:"right"}},u.a.createElement("span",null,!isNaN(parseFloat(D))&&isFinite(D)?new Date(R.date).toLocaleDateString(k?"en-GB":"es-ES",{month:"short",day:"numeric"}):""),u.a.createElement("br",null),u.a.createElement("strong",null,!isNaN(parseFloat(D))&&isFinite(D)?D:""))),u.a.createElement(K,{isLog:p,changeLog:_,width:L.width,height:L.height,selected:n,colors:h,isEnglish:k,data:g,visible:c,startDate:y,filteredData:N,newMax:D,newMaxDate:R})),u.a.createElement("div",{className:"notes",style:{margin:"4em 1em 0 1em",fontSize:"80%"}},(null===a||void 0===a?void 0:a.date)&&(null===a||void 0===a?void 0:a.author)&&u.a.createElement("p",null,u.a.createElement(J,{commit:a,isEnglish:k,language:j,rtf:t,width:L.width}))))},J=function(e){var a=e.commit,t=e.isEnglish,n=e.language,i=e.rtf,l=e.width,s=[["year",31536e6],["month",2628e6],["day",864e5],["hour",36e5],["minute",6e4],["second",1e3]];return u.a.createElement("span",null,u.a.createElement("a",{href:"https://github.com/montera34/escovid19data",title:"Escovid19 data",target:"_blank",rel:"noopener noreferrer"},"Escovid19data"),"."," ",l>400&&u.a.createElement(u.a.Fragment,null,t?"Updated by ":"Actualizado por "," ",null===a||void 0===a?void 0:a.author," ",Intl.PluralRules?function(e){var a,t=Object(c.a)(s);try{for(t.s();!(a=t.n()).done;){var n=Object(o.a)(a.value,2),l=n[0],r=n[1];if(Math.abs(e)>r||"second"===l)return i.format(Math.round(e/r),l)}}catch(d){t.e(d)}finally{t.f()}}(new Date(a.date)-new Date):new Date(a.date).toLocaleString(n.id).split(" ")[0].replace(",",""),"."))},K=function(e){var a=e.width,t=e.height,c=(e.selected,e.colors),n=e.isEnglish,i=(e.data,e.visible),l=e.isLog,s=e.changeLog,o=e.startDate,r=e.filteredData,m=e.newMax,v=e.newMaxDate,b=40,h=50,f=t-b-60,g=a-h-0,p=Object(z.a)({domain:[new Date(o),new Date],range:[0,g]}),_=Object(z.a)({range:[f,0],domain:[0,m],nice:!0}),y=Object(P.a)({range:[f,0],domain:[.1,m],clamp:!0,nice:!0}),C=function(e){return new Date(e.date)},x=function(e){return+e[i]},E=Object(j.a)((function(e){return new Date(e.date)})).left,w=Object(N.a)(),A=w.tooltipData,O=w.tooltipLeft,k=w.tooltipTop,I=(w.tooltipOpen,w.showTooltip),U=w.hideTooltip,F=Object(d.useRef)(),H=function(e){var a,t,c=Object(D.a)(e.target.ownerSVGElement,e);if(c.x){var n=c.x,s=p.invert(n-h),o=E(r,s,1),d=r[o-1],u=r[o],m=d;u&&u.date&&(m=s-C(d.date)>C(u.date)-s?u:d),I({tooltipData:m,tooltipLeft:n,tooltipTop:l?y(null===(a=m)||void 0===a?void 0:a[i]):_(null===(t=m)||void 0===t?void 0:t[i])})}};return u.a.createElement("div",{style:{position:"relative"}},u.a.createElement("svg",{ref:F,style:{overflow:"visible"},viewBox:"0 0 ".concat(a," ").concat(t)},u.a.createElement("defs",null,u.a.createElement("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},u.a.createElement("stop",{className:"stop1",offset:"0%",stopColor:"var(--background-color)",stopOpacity:0}),u.a.createElement("stop",{className:"stop2",offset:"20%",stopColor:"var(--background-color)",stopOpacity:1}),u.a.createElement("stop",{className:"stop2",offset:"80%",stopColor:"var(--background-color)",stopOpacity:1}),u.a.createElement("stop",{className:"stop3",offset:"100%",stopColor:"var(--background-color)",stopOpacity:0}))),!isNaN(parseFloat(m))&&isFinite(m)&&u.a.createElement(T.a,{data:[[a,10],[p(new Date(v.date))+h,10],[p(new Date(v.date))+h,l?y(m)+b:_(m)+b]],x:function(e){return e[0]},y:function(e){return e[1]},stroke:"var(--foreground-color)",style:{opacity:.5},strokeWidth:1}),u.a.createElement("g",{style:{transform:"translate(".concat(h,"px, ").concat(b,"px)")}},u.a.createElement(R.a,{xScale:p,yScale:l?y:_,stroke:c.lightColor,width:g,height:f,numTicksRows:4,numTicksColumns:0,columnLineStyle:{pointerEvents:"none"},lineStyle:{pointerEvents:"none"}}),r&&u.a.createElement(B.a,{data:r,x:function(e){return p(C(e))},y:function(e){return l?y(x(e)):_(x(e))},yScale:l?y:_,fill:c.lightColor,curve:L.a}),u.a.createElement(S.a,{scale:l?y:_,hideAxisLine:!0,hideTicks:!0,numTicks:m<20?1:3,tickLabelProps:function(e,a){return{textAnchor:"end",dy:5,fill:"var(--foreground-color)",style:{fontSize:"0.8em"}}},tickFormat:function(e){return e}}),r.length<2&&u.a.createElement("text",{dy:-10,x:g/2,y:f/2,style:{textAnchor:"middle",fontSize:"1.8em"},fill:"var(--foreground-color)"},n?"N/A":"N/D"),u.a.createElement(G.a,{onClick:function(){return s()},style:{cursor:"pointer"},x:-h,y:0,width:h,height:f,fill:"transparent",data:r}),u.a.createElement(M.a,{top:f,tickFormat:function(e){return new Date(e).toLocaleDateString(n?"en-GB":"es-ES",{month:"short",day:"numeric"})},numTicks:a>550?8:3,scale:p,stroke:"var(--foreground-color)",tickStroke:"var(--foreground-color)",hideAxisLine:!1,tickLabelProps:function(e,a){return{dy:12,fill:"var(--foreground-color)",textAnchor:"middle",style:{fontSize:"0.8em"}}}}),u.a.createElement(G.a,{style:{cursor:"crosshair"},onTouchStart:function(e){return H(e)},onTouchMove:function(e){return U(e)},onMouseMove:function(e){return H(e)},onMouseLeave:function(e){return U(e)},x:0,y:0,width:g,height:f,fill:"transparent",data:r})),A&&u.a.createElement("g",null,u.a.createElement(V.a,{from:{x:O,y:b},to:{x:O,y:f+b},stroke:"var(--foreground-color)",strokeWidth:1,style:{pointerEvents:"none"},strokeDasharray:"2,2"}),u.a.createElement("circle",{cx:O,cy:k+b,r:5,fill:c.main,stroke:"var(--background-color)",strokeWidth:3,style:{pointerEvents:"none"}}),u.a.createElement("rect",{x:O-50,y:16,fill:"url(#grad1)",width:"100px",height:"20px"}),u.a.createElement("text",{dy:-10,x:O,y:b,style:{textAnchor:"middle"},fill:"var(--foreground-color)"},A[i]),u.a.createElement("rect",{x:O-50,y:t-45,fill:"url(#grad1)",width:"100px",height:"20px"}),u.a.createElement("text",{x:O,dy:-30,y:t,style:{textAnchor:"middle",fontSize:"0.8em"},fill:"var(--foreground-color)"},new Date(A.date).toLocaleDateString(n?"en-GB":"es-ES",{month:"long",day:"numeric"})))))}}}]);
//# sourceMappingURL=19.df592649.chunk.js.map
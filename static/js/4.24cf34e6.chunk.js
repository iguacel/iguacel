(this["webpackJsonpraster-react-canvas2"]=this["webpackJsonpraster-react-canvas2"]||[]).push([[4],{128:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function(e){var t=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var n=function(e){t.deviceOrientation=e},r=function(){t.screenOrientation=window.orientation||0},a=function(){var e=new o.Vector3(0,0,1),t=new o.Euler,n=new o.Quaternion,r=new o.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(o,a,i,s,c){t.set(i,a,-s,"YXZ"),o.setFromEuler(t),o.multiply(r),o.multiply(n.setFromAxisAngle(e,-c))}}();this.connect=function(){r(),void 0!==window.DeviceOrientationEvent&&"function"===typeof window.DeviceOrientationEvent.requestPermission?window.DeviceOrientationEvent.requestPermission().then((function(e){"granted"==e&&(window.addEventListener("orientationchange",r,!1),window.addEventListener("deviceorientation",n,!1))})).catch((function(e){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",e)})):(window.addEventListener("orientationchange",r,!1),window.addEventListener("deviceorientation",n,!1)),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",r,!1),window.removeEventListener("deviceorientation",n,!1),t.enabled=!1},this.update=function(){if(!1!==t.enabled){var e=t.deviceOrientation;if(e){var n=e.alpha?o.MathUtils.degToRad(e.alpha)+t.alphaOffset:0,r=e.beta?o.MathUtils.degToRad(e.beta):0,i=e.gamma?o.MathUtils.degToRad(e.gamma):0,s=t.screenOrientation?o.MathUtils.degToRad(t.screenOrientation):0;a(t.object.quaternion,n,r,i,s)}}},this.dispose=function(){t.disconnect()},this.connect()}},129:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function(e,t){function n(e,t){return function(){t.apply(e,arguments)}}function r(e){e.preventDefault()}void 0===t&&(console.warn('THREE.FlyControls: The second parameter "domElement" is now mandatory.'),t=document),this.object=e,this.domElement=t,t&&this.domElement.setAttribute("tabindex",-1),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this.tmpQuaternion=new o.Quaternion,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new o.Vector3(0,0,0),this.rotationVector=new o.Vector3(0,0,0),this.keydown=function(e){if(!e.altKey){switch(e.keyCode){case 16:this.movementSpeedMultiplier=.1;break;case 87:this.moveState.forward=1;break;case 83:this.moveState.back=1;break;case 65:this.moveState.left=1;break;case 68:this.moveState.right=1;break;case 82:this.moveState.up=1;break;case 70:this.moveState.down=1;break;case 38:this.moveState.pitchUp=1;break;case 40:this.moveState.pitchDown=1;break;case 37:this.moveState.yawLeft=1;break;case 39:this.moveState.yawRight=1;break;case 81:this.moveState.rollLeft=1;break;case 69:this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(e){switch(e.keyCode){case 16:this.movementSpeedMultiplier=1;break;case 87:this.moveState.forward=0;break;case 83:this.moveState.back=0;break;case 65:this.moveState.left=0;break;case 68:this.moveState.right=0;break;case 82:this.moveState.up=0;break;case 70:this.moveState.down=0;break;case 38:this.moveState.pitchUp=0;break;case 40:this.moveState.pitchDown=0;break;case 37:this.moveState.yawLeft=0;break;case 39:this.moveState.yawRight=0;break;case 81:this.moveState.rollLeft=0;break;case 69:this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(e){if(this.domElement!==document&&this.domElement.focus(),e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus++;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(e){if(!this.dragToLook||this.mouseStatus>0){var t=this.getContainerDimensions(),n=t.size[0]/2,o=t.size[1]/2;this.moveState.yawLeft=-(e.pageX-t.offset[0]-n)/n,this.moveState.pitchDown=(e.pageY-t.offset[1]-o)/o,this.updateRotationVector()}},this.mouseup=function(e){if(e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(e){var t=e*this.movementSpeed,n=e*this.rollSpeed;this.object.translateX(this.moveVector.x*t),this.object.translateY(this.moveVector.y*t),this.object.translateZ(this.moveVector.z*t),this.tmpQuaternion.set(this.rotationVector.x*n,this.rotationVector.y*n,this.rotationVector.z*n,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),this.object.rotation.setFromQuaternion(this.object.quaternion,this.object.rotation.order)},this.updateMovementVector=function(){var e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-e+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",r,!1),this.domElement.removeEventListener("mousedown",i,!1),this.domElement.removeEventListener("mousemove",a,!1),this.domElement.removeEventListener("mouseup",s,!1),window.removeEventListener("keydown",c,!1),window.removeEventListener("keyup",l,!1)};var a=n(this,this.mousemove),i=n(this,this.mousedown),s=n(this,this.mouseup),c=n(this,this.keydown),l=n(this,this.keyup);this.domElement.addEventListener("contextmenu",r,!1),this.domElement.addEventListener("mousemove",a,!1),this.domElement.addEventListener("mousedown",i,!1),this.domElement.addEventListener("mouseup",s,!1),window.addEventListener("keydown",c,!1),window.addEventListener("keyup",l,!1),this.updateMovementVector(),this.updateRotationVector()}},130:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function(e,t){void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),o.Object3D.call(this),this.visible=!1,this.domElement=t;var n=new a;this.add(n);var r=new i;this.add(r);var s=this;H("camera",e),H("object",void 0),H("enabled",!0),H("axis",null),H("mode","translate"),H("translationSnap",null),H("rotationSnap",null),H("scaleSnap",null),H("space","world"),H("size",1),H("dragging",!1),H("showX",!0),H("showY",!0),H("showZ",!0);var c={type:"change"},l={type:"mouseDown"},u={type:"mouseUp",mode:s.mode},h={type:"objectChange"},d=new o.Raycaster;function p(e,t,n){for(var o=t.intersectObject(e,!0),r=0;r<o.length;r++)if(o[r].object.visible||n)return o[r];return!1}var f=new o.Vector3,m=new o.Vector3,v=new o.Quaternion,g={X:new o.Vector3(1,0,0),Y:new o.Vector3(0,1,0),Z:new o.Vector3(0,0,1)},y=new o.Vector3,b=new o.Vector3,w=new o.Vector3,x=new o.Vector3,E=new o.Vector3,M=new o.Vector3,S=0,T=new o.Vector3,L=new o.Quaternion,A=new o.Vector3,R=new o.Vector3,_=new o.Quaternion,P=new o.Quaternion,O=new o.Vector3,C=new o.Vector3,j=new o.Quaternion,k=new o.Vector3,D=new o.Vector3,I=new o.Quaternion,U=new o.Quaternion,N=new o.Vector3,V=new o.Vector3,F=new o.Vector3,B=new o.Quaternion,G=new o.Vector3;function H(e,t){var o=t;Object.defineProperty(s,e,{get:function(){return void 0!==o?o:t},set:function(t){o!==t&&(o=t,r[e]=t,n[e]=t,s.dispatchEvent({type:e+"-changed",value:t}),s.dispatchEvent(c))}}),s[e]=t,r[e]=t,n[e]=t}function z(e){if(document.pointerLockElement)return{x:0,y:0,button:e.button};var n=e.changedTouches?e.changedTouches[0]:e,o=t.getBoundingClientRect();return{x:(n.clientX-o.left)/o.width*2-1,y:-(n.clientY-o.top)/o.height*2+1,button:e.button}}function X(e){s.enabled&&s.pointerHover(z(e))}function Y(e){s.enabled&&(document.addEventListener("mousemove",Z,!1),s.pointerHover(z(e)),s.pointerDown(z(e)))}function Z(e){s.enabled&&s.pointerMove(z(e))}function q(e){s.enabled&&(document.removeEventListener("mousemove",Z,!1),s.pointerUp(z(e)))}H("worldPosition",D),H("worldPositionStart",C),H("worldQuaternion",I),H("worldQuaternionStart",j),H("cameraPosition",T),H("cameraQuaternion",L),H("pointStart",y),H("pointEnd",b),H("rotationAxis",x),H("rotationAngle",S),H("eye",V),t.addEventListener("mousedown",Y,!1),t.addEventListener("touchstart",Y,!1),t.addEventListener("mousemove",X,!1),t.addEventListener("touchmove",X,!1),t.addEventListener("touchmove",Z,!1),document.addEventListener("mouseup",q,!1),t.addEventListener("touchend",q,!1),t.addEventListener("touchcancel",q,!1),t.addEventListener("touchleave",q,!1),this.dispose=function(){t.removeEventListener("mousedown",Y),t.removeEventListener("touchstart",Y),t.removeEventListener("mousemove",X),document.removeEventListener("mousemove",Z),t.removeEventListener("touchmove",X),t.removeEventListener("touchmove",Z),document.removeEventListener("mouseup",q),t.removeEventListener("touchend",q),t.removeEventListener("touchcancel",q),t.removeEventListener("touchleave",q),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))},this.attach=function(e){return this.object=e,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(R,_,O),this.object.matrixWorld.decompose(D,I,N),P.copy(_).inverse(),U.copy(I).inverse()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(T,L,A),V.copy(T).sub(D).normalize(),o.Object3D.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging&&(void 0===e.button||0===e.button)){d.setFromCamera(e,this.camera);var t=p(n.picker[this.mode],d);this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(void 0!==this.object&&!0!==this.dragging&&(void 0===e.button||0===e.button)&&(0===e.button||void 0===e.button)&&null!==this.axis){d.setFromCamera(e,this.camera);var t=p(r,d,!0);if(t){var n=this.space;if("scale"===this.mode?n="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(n="world"),"local"===n&&"rotate"===this.mode){var o=this.rotationSnap;"X"===this.axis&&o&&(this.object.rotation.x=Math.round(this.object.rotation.x/o)*o),"Y"===this.axis&&o&&(this.object.rotation.y=Math.round(this.object.rotation.y/o)*o),"Z"===this.axis&&o&&(this.object.rotation.z=Math.round(this.object.rotation.z/o)*o)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),F.copy(this.object.position),B.copy(this.object.quaternion),G.copy(this.object.scale),this.object.matrixWorld.decompose(C,j,k),y.copy(t.point).sub(C)}this.dragging=!0,l.mode=this.mode,this.dispatchEvent(l)}},this.pointerMove=function(e){var t=this.axis,n=this.mode,o=this.object,a=this.space;if("scale"===n?a="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(a="world"),void 0!==o&&null!==t&&!1!==this.dragging&&(void 0===e.button||0===e.button)){d.setFromCamera(e,this.camera);var i=p(r,d,!0);if(i){if(b.copy(i.point).sub(C),"translate"===n)w.copy(b).sub(y),"local"===a&&"XYZ"!==t&&w.applyQuaternion(U),-1===t.indexOf("X")&&(w.x=0),-1===t.indexOf("Y")&&(w.y=0),-1===t.indexOf("Z")&&(w.z=0),"local"===a&&"XYZ"!==t?w.applyQuaternion(B).divide(O):w.applyQuaternion(P).divide(O),o.position.copy(w).add(F),this.translationSnap&&("local"===a&&(o.position.applyQuaternion(v.copy(B).inverse()),-1!==t.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.position.applyQuaternion(B)),"world"===a&&(o.parent&&o.position.add(f.setFromMatrixPosition(o.parent.matrixWorld)),-1!==t.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.parent&&o.position.sub(f.setFromMatrixPosition(o.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){var s=b.length()/y.length();b.dot(y)<0&&(s*=-1),m.set(s,s,s)}else f.copy(y),m.copy(b),f.applyQuaternion(U),m.applyQuaternion(U),m.divide(f),-1===t.search("X")&&(m.x=1),-1===t.search("Y")&&(m.y=1),-1===t.search("Z")&&(m.z=1);o.scale.copy(G).multiply(m),this.scaleSnap&&(-1!==t.search("X")&&(o.scale.x=Math.round(o.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(o.scale.y=Math.round(o.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(o.scale.z=Math.round(o.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){w.copy(b).sub(y);var l=20/D.distanceTo(f.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(x.copy(V),S=b.angleTo(y),E.copy(y).normalize(),M.copy(b).normalize(),S*=M.cross(E).dot(V)<0?1:-1):"XYZE"===t?(x.copy(w).cross(V).normalize(),S=w.dot(f.copy(x).cross(this.eye))*l):"X"!==t&&"Y"!==t&&"Z"!==t||(x.copy(g[t]),f.copy(g[t]),"local"===a&&f.applyQuaternion(I),S=w.dot(f.cross(V).normalize())*l),this.rotationSnap&&(S=Math.round(S/this.rotationSnap)*this.rotationSnap),this.rotationAngle=S,"local"===a&&"E"!==t&&"XYZE"!==t?(o.quaternion.copy(B),o.quaternion.multiply(v.setFromAxisAngle(x,S)).normalize()):(x.applyQuaternion(P),o.quaternion.copy(v.setFromAxisAngle(x,S)),o.quaternion.multiply(B).normalize())}this.dispatchEvent(c),this.dispatchEvent(h)}}},this.pointerUp=function(e){void 0!==e.button&&0!==e.button||(this.dragging&&null!==this.axis&&(u.mode=this.mode,this.dispatchEvent(u)),this.dragging=!1,void 0===e.button&&(this.axis=null))},this.getMode=function(){return s.mode},this.setMode=function(e){s.mode=e},this.setTranslationSnap=function(e){s.translationSnap=e},this.setRotationSnap=function(e){s.rotationSnap=e},this.setScaleSnap=function(e){s.scaleSnap=e},this.setSize=function(e){s.size=e},this.setSpace=function(e){s.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}};r.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:r,isTransformControls:!0});var a=function(){o.Object3D.call(this),this.type="TransformControlsGizmo";var e=new o.MeshBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,side:o.DoubleSide,fog:!1}),t=new o.LineBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1}),n=e.clone();n.opacity=.15;var r=e.clone();r.opacity=.33;var a=e.clone();a.color.set(16711680);var i=e.clone();i.color.set(65280);var s=e.clone();s.color.set(255);var c=e.clone();c.opacity=.25;var l=c.clone();l.color.set(16776960);var u=c.clone();u.color.set(65535);var h=c.clone();h.color.set(16711935),e.clone().color.set(16776960);var d=t.clone();d.color.set(16711680);var p=t.clone();p.color.set(65280);var f=t.clone();f.color.set(255);var m=t.clone();m.color.set(65535);var v=t.clone();v.color.set(16711935);var g=t.clone();g.color.set(16776960);var y=t.clone();y.color.set(7895160);var b=g.clone();b.opacity=.25;var w=new o.CylinderBufferGeometry(0,.05,.2,12,1,!1),x=new o.BoxBufferGeometry(.125,.125,.125),E=new o.BufferGeometry;E.setAttribute("position",new o.Float32BufferAttribute([0,0,0,1,0,0],3));var M=function(e,t){for(var n=new o.BufferGeometry,r=[],a=0;a<=64*t;++a)r.push(0,Math.cos(a/32*Math.PI)*e,Math.sin(a/32*Math.PI)*e);return n.setAttribute("position",new o.Float32BufferAttribute(r,3)),n},S={X:[[new o.Mesh(w,a),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new o.Mesh(w,a),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new o.Line(E,d)]],Y:[[new o.Mesh(w,i),[0,1,0],null,null,"fwd"],[new o.Mesh(w,i),[0,1,0],[Math.PI,0,0],null,"bwd"],[new o.Line(E,p),null,[0,0,Math.PI/2]]],Z:[[new o.Mesh(w,s),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new o.Mesh(w,s),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new o.Line(E,f),null,[0,-Math.PI/2,0]]],XYZ:[[new o.Mesh(new o.OctahedronBufferGeometry(.1,0),c.clone()),[0,0,0],[0,0,0]]],XY:[[new o.Mesh(new o.PlaneBufferGeometry(.295,.295),l.clone()),[.15,.15,0]],[new o.Line(E,g),[.18,.3,0],null,[.125,1,1]],[new o.Line(E,g),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new o.Mesh(new o.PlaneBufferGeometry(.295,.295),u.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new o.Line(E,m),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new o.Line(E,m),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new o.Mesh(new o.PlaneBufferGeometry(.295,.295),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new o.Line(E,v),[.18,0,.3],null,[.125,1,1]],[new o.Line(E,v),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},T={X:[[new o.Mesh(new o.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new o.Mesh(new o.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new o.Mesh(new o.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new o.Mesh(new o.OctahedronBufferGeometry(.2,0),n)]],XY:[[new o.Mesh(new o.PlaneBufferGeometry(.4,.4),n),[.2,.2,0]]],YZ:[[new o.Mesh(new o.PlaneBufferGeometry(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new o.Mesh(new o.PlaneBufferGeometry(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},L={START:[[new o.Mesh(new o.OctahedronBufferGeometry(.01,2),r),null,null,null,"helper"]],END:[[new o.Mesh(new o.OctahedronBufferGeometry(.01,2),r),null,null,null,"helper"]],DELTA:[[new o.Line(function(){var e=new o.BufferGeometry;return e.setAttribute("position",new o.Float32BufferAttribute([0,0,0,1,1,1],3)),e}(),r),null,null,null,"helper"]],X:[[new o.Line(E,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new o.Line(E,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new o.Line(E,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},A={X:[[new o.Line(M(1,.5),d)],[new o.Mesh(new o.OctahedronBufferGeometry(.04,0),a),[0,0,.99],null,[1,3,1]]],Y:[[new o.Line(M(1,.5),p),null,[0,0,-Math.PI/2]],[new o.Mesh(new o.OctahedronBufferGeometry(.04,0),i),[0,0,.99],null,[3,1,1]]],Z:[[new o.Line(M(1,.5),f),null,[0,Math.PI/2,0]],[new o.Mesh(new o.OctahedronBufferGeometry(.04,0),s),[.99,0,0],null,[1,3,1]]],E:[[new o.Line(M(1.25,1),b),null,[0,Math.PI/2,0]],[new o.Mesh(new o.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new o.Mesh(new o.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new o.Mesh(new o.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new o.Mesh(new o.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new o.Line(M(1,1),y),null,[0,Math.PI/2,0]]]},R={AXIS:[[new o.Line(E,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},_={X:[[new o.Mesh(new o.TorusBufferGeometry(1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new o.Mesh(new o.TorusBufferGeometry(1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new o.Mesh(new o.TorusBufferGeometry(1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new o.Mesh(new o.TorusBufferGeometry(1.25,.1,2,24),n)]],XYZE:[[new o.Mesh(new o.SphereBufferGeometry(.7,10,8),n)]]},P={X:[[new o.Mesh(x,a),[.8,0,0],[0,0,-Math.PI/2]],[new o.Line(E,d),null,null,[.8,1,1]]],Y:[[new o.Mesh(x,i),[0,.8,0]],[new o.Line(E,p),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new o.Mesh(x,s),[0,0,.8],[Math.PI/2,0,0]],[new o.Line(E,f),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new o.Mesh(x,l),[.85,.85,0],null,[2,2,.2]],[new o.Line(E,g),[.855,.98,0],null,[.125,1,1]],[new o.Line(E,g),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new o.Mesh(x,u),[0,.85,.85],null,[.2,2,2]],[new o.Line(E,m),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new o.Line(E,m),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new o.Mesh(x,h),[.85,0,.85],null,[2,.2,2]],[new o.Line(E,v),[.855,0,.98],null,[.125,1,1]],[new o.Line(E,v),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new o.Mesh(new o.BoxBufferGeometry(.125,.125,.125),c.clone()),[1.1,0,0]]],XYZY:[[new o.Mesh(new o.BoxBufferGeometry(.125,.125,.125),c.clone()),[0,1.1,0]]],XYZZ:[[new o.Mesh(new o.BoxBufferGeometry(.125,.125,.125),c.clone()),[0,0,1.1]]]},O={X:[[new o.Mesh(new o.CylinderBufferGeometry(.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new o.Mesh(new o.CylinderBufferGeometry(.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new o.Mesh(new o.CylinderBufferGeometry(.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new o.Mesh(x,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new o.Mesh(x,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new o.Mesh(x,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new o.Mesh(new o.BoxBufferGeometry(.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new o.Mesh(new o.BoxBufferGeometry(.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new o.Mesh(new o.BoxBufferGeometry(.2,.2,.2),n),[0,0,1.1]]]},C={X:[[new o.Line(E,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new o.Line(E,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new o.Line(E,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},j=function(e){var t=new o.Object3D;for(var n in e)for(var r=e[n].length;r--;){var a=e[n][r][0].clone(),i=e[n][r][1],s=e[n][r][2],c=e[n][r][3],l=e[n][r][4];a.name=n,a.tag=l,i&&a.position.set(i[0],i[1],i[2]),s&&a.rotation.set(s[0],s[1],s[2]),c&&a.scale.set(c[0],c[1],c[2]),a.updateMatrix();var u=a.geometry.clone();u.applyMatrix4(a.matrix),a.geometry=u,a.renderOrder=1/0,a.position.set(0,0,0),a.rotation.set(0,0,0),a.scale.set(1,1,1),t.add(a)}return t},k=new o.Vector3(0,0,0),D=new o.Euler,I=new o.Vector3(0,1,0),U=new o.Vector3(0,0,0),N=new o.Matrix4,V=new o.Quaternion,F=new o.Quaternion,B=new o.Quaternion,G=new o.Vector3(1,0,0),H=new o.Vector3(0,1,0),z=new o.Vector3(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=j(S)),this.add(this.gizmo.rotate=j(A)),this.add(this.gizmo.scale=j(P)),this.add(this.picker.translate=j(T)),this.add(this.picker.rotate=j(_)),this.add(this.picker.scale=j(O)),this.add(this.helper.translate=j(L)),this.add(this.helper.rotate=j(R)),this.add(this.helper.scale=j(C)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:B;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var n=[];n=(n=(n=n.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var r=0;r<n.length;r++){var a,i=n[r];if(i.visible=!0,i.rotation.set(0,0,0),i.position.copy(this.worldPosition),a=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),i.scale.set(1,1,1).multiplyScalar(a*this.size/7),"helper"!==i.tag){if(i.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){"X"!==i.name&&"XYZX"!==i.name||Math.abs(I.copy(G).applyQuaternion(t).dot(this.eye))>.99&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Y"!==i.name&&"XYZY"!==i.name||Math.abs(I.copy(H).applyQuaternion(t).dot(this.eye))>.99&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Z"!==i.name&&"XYZZ"!==i.name||Math.abs(I.copy(z).applyQuaternion(t).dot(this.eye))>.99&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XY"===i.name&&Math.abs(I.copy(z).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"YZ"===i.name&&Math.abs(I.copy(G).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XZ"===i.name&&Math.abs(I.copy(H).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),-1!==i.name.search("X")&&(I.copy(G).applyQuaternion(t).dot(this.eye)<0?"fwd"===i.tag?i.visible=!1:i.scale.x*=-1:"bwd"===i.tag&&(i.visible=!1)),-1!==i.name.search("Y")&&(I.copy(H).applyQuaternion(t).dot(this.eye)<0?"fwd"===i.tag?i.visible=!1:i.scale.y*=-1:"bwd"===i.tag&&(i.visible=!1)),-1!==i.name.search("Z")&&(I.copy(z).applyQuaternion(t).dot(this.eye)<0?"fwd"===i.tag?i.visible=!1:i.scale.z*=-1:"bwd"===i.tag&&(i.visible=!1))}else"rotate"===this.mode&&(F.copy(t),I.copy(this.eye).applyQuaternion(V.copy(t).inverse()),-1!==i.name.search("E")&&i.quaternion.setFromRotationMatrix(N.lookAt(this.eye,U,H)),"X"===i.name&&(V.setFromAxisAngle(G,Math.atan2(-I.y,I.z)),V.multiplyQuaternions(F,V),i.quaternion.copy(V)),"Y"===i.name&&(V.setFromAxisAngle(H,Math.atan2(I.x,I.z)),V.multiplyQuaternions(F,V),i.quaternion.copy(V)),"Z"===i.name&&(V.setFromAxisAngle(z,Math.atan2(I.y,I.x)),V.multiplyQuaternions(F,V),i.quaternion.copy(V)));i.visible=i.visible&&(-1===i.name.indexOf("X")||this.showX),i.visible=i.visible&&(-1===i.name.indexOf("Y")||this.showY),i.visible=i.visible&&(-1===i.name.indexOf("Z")||this.showZ),i.visible=i.visible&&(-1===i.name.indexOf("E")||this.showX&&this.showY&&this.showZ),i.material._opacity=i.material._opacity||i.material.opacity,i.material._color=i.material._color||i.material.color.clone(),i.material.color.copy(i.material._color),i.material.opacity=i.material._opacity,this.enabled?this.axis&&(i.name===this.axis||this.axis.split("").some((function(e){return i.name===e}))?(i.material.opacity=1,i.material.color.lerp(new o.Color(1,1,1),.5)):(i.material.opacity*=.25,i.material.color.lerp(new o.Color(1,1,1),.5))):(i.material.opacity*=.5,i.material.color.lerp(new o.Color(1,1,1),.5))}else i.visible=!1,"AXIS"===i.name?(i.position.copy(this.worldPositionStart),i.visible=!!this.axis,"X"===this.axis&&(V.setFromEuler(D.set(0,0,0)),i.quaternion.copy(t).multiply(V),Math.abs(I.copy(G).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"Y"===this.axis&&(V.setFromEuler(D.set(0,0,Math.PI/2)),i.quaternion.copy(t).multiply(V),Math.abs(I.copy(H).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"Z"===this.axis&&(V.setFromEuler(D.set(0,Math.PI/2,0)),i.quaternion.copy(t).multiply(V),Math.abs(I.copy(z).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"XYZE"===this.axis&&(V.setFromEuler(D.set(0,Math.PI/2,0)),I.copy(this.rotationAxis),i.quaternion.setFromRotationMatrix(N.lookAt(U,I,H)),i.quaternion.multiply(V),i.visible=this.dragging),"E"===this.axis&&(i.visible=!1)):"START"===i.name?(i.position.copy(this.worldPositionStart),i.visible=this.dragging):"END"===i.name?(i.position.copy(this.worldPosition),i.visible=this.dragging):"DELTA"===i.name?(i.position.copy(this.worldPositionStart),i.quaternion.copy(this.worldQuaternionStart),k.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),k.applyQuaternion(this.worldQuaternionStart.clone().inverse()),i.scale.copy(k),i.visible=this.dragging):(i.quaternion.copy(t),this.dragging?i.position.copy(this.worldPositionStart):i.position.copy(this.worldPosition),this.axis&&(i.visible=-1!==this.axis.search(i.name)))}o.Object3D.prototype.updateMatrixWorld.call(this)}};a.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:a,isTransformControlsGizmo:!0});var i=function(){o.Mesh.call(this,new o.PlaneBufferGeometry(1e5,1e5,2,2),new o.MeshBasicMaterial({visible:!1,wireframe:!0,side:o.DoubleSide,transparent:!0,opacity:.1})),this.type="TransformControlsPlane";var e=new o.Vector3(1,0,0),t=new o.Vector3(0,1,0),n=new o.Vector3(0,0,1),r=new o.Vector3,a=new o.Vector3,i=new o.Vector3,s=new o.Matrix4,c=new o.Quaternion;this.updateMatrixWorld=function(){var l=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(l="local"),e.set(1,0,0).applyQuaternion("local"===l?this.worldQuaternion:c),t.set(0,1,0).applyQuaternion("local"===l?this.worldQuaternion:c),n.set(0,0,1).applyQuaternion("local"===l?this.worldQuaternion:c),i.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":i.copy(this.eye).cross(e),a.copy(e).cross(i);break;case"Y":i.copy(this.eye).cross(t),a.copy(t).cross(i);break;case"Z":i.copy(this.eye).cross(n),a.copy(n).cross(i);break;case"XY":a.copy(n);break;case"YZ":a.copy(e);break;case"XZ":i.copy(n),a.copy(t);break;case"XYZ":case"E":a.set(0,0,0)}break;case"rotate":default:a.set(0,0,0)}0===a.length()?this.quaternion.copy(this.cameraQuaternion):(s.lookAt(r.set(0,0,0),a,i),this.quaternion.setFromRotationMatrix(s)),o.Object3D.prototype.updateMatrixWorld.call(this)}};i.prototype=Object.assign(Object.create(o.Mesh.prototype),{constructor:i,isTransformControlsPlane:!0})},131:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t,o="object"==typeof self&&self&&self.Object===Object&&self,r=n||o||Function("return this")();function a(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function i(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}var s=Object.prototype,c=s.hasOwnProperty,l=s.toString,u=r.Symbol,h=s.propertyIsEnumerable,d=u?u.isConcatSpreadable:void 0,p=Math.max;function f(e){return v(e)||function(e){return function(e){return g(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?l.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}(e)}(e)&&c.call(e,"callee")&&(!h.call(e,"callee")||"[object Arguments]"==l.call(e))}(e)||!!(d&&e&&e[d])}function m(e){if("string"==typeof e||function(e){return"symbol"==typeof e||g(e)&&"[object Symbol]"==l.call(e)}(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var v=Array.isArray;function g(e){return!!e&&"object"==typeof e}var y,b,w=(y=function(e,t){return null==e?{}:function(e,t){return function(e,t,n){for(var o=-1,r=t.length,a={};++o<r;){var i=t[o],s=e[i];n(s,i)&&(a[i]=s)}return a}(e=Object(e),t,(function(t,n){return n in e}))}(e,function(e,t){for(var n=-1,o=e?e.length:0,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}(function e(t,n,o,r,a){var s=-1,c=t.length;for(o||(o=f),a||(a=[]);++s<c;){var l=t[s];n>0&&o(l)?n>1?e(l,n-1,o,r,a):i(a,l):r||(a[a.length]=l)}return a}(t,1),m))},b=p(void 0===b?y.length-1:b,0),function(){for(var e=arguments,t=-1,n=p(e.length-b,0),o=Array(n);++t<n;)o[t]=e[b+t];t=-1;for(var r=Array(b+1);++t<b;)r[t]=e[t];return r[b]=o,a(y,this,r)});e.exports=w}).call(this,n(41))},132:function(e,t,n){(function(t){var n=/^\[object .+?Constructor\]$/,o=/^(?:0|[1-9]\d*)$/,r="object"==typeof t&&t&&t.Object===Object&&t,a="object"==typeof self&&self&&self.Object===Object&&self,i=r||a||Function("return this")();function s(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function c(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!==t)return function(e,t,n,o){var r=e.length,a=n+(o?1:-1);for(;o?a--:++a<r;)if(t(e[a],a,e))return a;return-1}(e,d,n);var o=n-1,r=e.length;for(;++o<r;)if(e[o]===t)return o;return-1}(e,t,0)>-1}function l(e,t,n){for(var o=-1,r=e?e.length:0;++o<r;)if(n(t,e[o]))return!0;return!1}function u(e,t){for(var n=-1,o=e?e.length:0,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}function h(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}function d(e){return e!==e}function p(e,t){return e.has(t)}function f(e,t){return function(n){return e(t(n))}}var m=Array.prototype,v=Function.prototype,g=Object.prototype,y=i["__core-js_shared__"],b=function(){var e=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),w=v.toString,x=g.hasOwnProperty,E=g.toString,M=RegExp("^"+w.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=i.Symbol,T=f(Object.getPrototypeOf,Object),L=g.propertyIsEnumerable,A=m.splice,R=S?S.isConcatSpreadable:void 0,_=Object.getOwnPropertySymbols,P=Math.max,O=H(i,"Map"),C=H(Object,"create");function j(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function D(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function I(e){var t=-1,n=e?e.length:0;for(this.__data__=new D;++t<n;)this.add(e[t])}function U(e,t){var n=Q(e)||W(e)?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],o=n.length,r=!!o;for(var a in e)!t&&!x.call(e,a)||r&&("length"==a||Z(a,o))||n.push(a);return n}function N(e,t){for(var n,o,r=e.length;r--;)if((n=e[r][0])===(o=t)||n!==n&&o!==o)return r;return-1}function V(e){return!(!J(e)||(t=e,b&&b in t))&&($(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?M:n).test(function(e){if(null!=e){try{return w.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e));var t}function F(e){if(!J(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||g;return e===n}(e),n=[];for(var o in e)("constructor"!=o||!t&&x.call(e,o))&&n.push(o);return n}function B(e){return function(e,t,n){var o=t(e);return Q(e)?o:h(o,n(e))}(e,te,X)}function G(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function H(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return V(n)?n:void 0}j.prototype.clear=function(){this.__data__=C?C(null):{}},j.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},j.prototype.get=function(e){var t=this.__data__;if(C){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return x.call(t,e)?t[e]:void 0},j.prototype.has=function(e){var t=this.__data__;return C?void 0!==t[e]:x.call(t,e)},j.prototype.set=function(e,t){return this.__data__[e]=C&&void 0===t?"__lodash_hash_undefined__":t,this},k.prototype.clear=function(){this.__data__=[]},k.prototype.delete=function(e){var t=this.__data__,n=N(t,e);return!(n<0)&&(n==t.length-1?t.pop():A.call(t,n,1),!0)},k.prototype.get=function(e){var t=this.__data__,n=N(t,e);return n<0?void 0:t[n][1]},k.prototype.has=function(e){return N(this.__data__,e)>-1},k.prototype.set=function(e,t){var n=this.__data__,o=N(n,e);return o<0?n.push([e,t]):n[o][1]=t,this},D.prototype.clear=function(){this.__data__={hash:new j,map:new(O||k),string:new j}},D.prototype.delete=function(e){return G(this,e).delete(e)},D.prototype.get=function(e){return G(this,e).get(e)},D.prototype.has=function(e){return G(this,e).has(e)},D.prototype.set=function(e,t){return G(this,e).set(e,t),this},I.prototype.add=I.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},I.prototype.has=function(e){return this.__data__.has(e)};var z=_?f(_,Object):ae,X=_?function(e){for(var t=[];e;)h(t,z(e)),e=T(e);return t}:ae;function Y(e){return Q(e)||W(e)||!!(R&&e&&e[R])}function Z(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}function q(e){if("string"==typeof e||function(e){return"symbol"==typeof e||ee(e)&&"[object Symbol]"==E.call(e)}(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function W(e){return function(e){return ee(e)&&K(e)}(e)&&x.call(e,"callee")&&(!L.call(e,"callee")||"[object Arguments]"==E.call(e))}var Q=Array.isArray;function K(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!$(e)}function $(e){var t=J(e)?E.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function J(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ee(e){return!!e&&"object"==typeof e}function te(e){return K(e)?U(e,!0):F(e)}var ne,oe,re=(ne=function(e,t){return null==e?{}:(t=u(function e(t,n,o,r,a){var i=-1,s=t.length;for(o||(o=Y),a||(a=[]);++i<s;){var c=t[i];n>0&&o(c)?n>1?e(c,n-1,o,r,a):h(a,c):r||(a[a.length]=c)}return a}(t,1),q),function(e,t){return function(e,t,n){for(var o=-1,r=t.length,a={};++o<r;){var i=t[o],s=e[i];n(s,i)&&(a[i]=s)}return a}(e=Object(e),t,(function(t,n){return n in e}))}(e,function(e,t,n,o){var r,a=-1,i=c,s=!0,h=e.length,d=[],f=t.length;if(!h)return d;n&&(t=u(t,(r=n,function(e){return r(e)}))),o?(i=l,s=!1):t.length>=200&&(i=p,s=!1,t=new I(t));e:for(;++a<h;){var m=e[a],v=n?n(m):m;if(m=o||0!==m?m:0,s&&v===v){for(var g=f;g--;)if(t[g]===v)continue e;d.push(m)}else i(t,v,o)||d.push(m)}return d}(B(e),t)))},oe=P(void 0===oe?ne.length-1:oe,0),function(){for(var e=arguments,t=-1,n=P(e.length-oe,0),o=Array(n);++t<n;)o[t]=e[oe+t];t=-1;for(var r=Array(oe+1);++t<oe;)r[t]=e[t];return r[oe]=o,s(ne,this,r)});function ae(){return[]}e.exports=re}).call(this,n(41))},133:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function(e,t){void 0===t&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),t=document.body),this.domElement=t,this.isLocked=!1;var n=this,r={type:"change"},a={type:"lock"},i={type:"unlock"},s=new o.Euler(0,0,0,"YXZ"),c=Math.PI/2,l=new o.Vector3;function u(t){if(!1!==n.isLocked){var o=t.movementX||t.mozMovementX||t.webkitMovementX||0,a=t.movementY||t.mozMovementY||t.webkitMovementY||0;s.setFromQuaternion(e.quaternion),s.y-=.002*o,s.x-=.002*a,s.x=Math.max(-c,Math.min(c,s.x)),e.quaternion.setFromEuler(s),n.dispatchEvent(r)}}function h(){document.pointerLockElement===n.domElement?(n.dispatchEvent(a),n.isLocked=!0):(n.dispatchEvent(i),n.isLocked=!1)}function d(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}this.connect=function(){document.addEventListener("mousemove",u,!1),document.addEventListener("pointerlockchange",h,!1),document.addEventListener("pointerlockerror",d,!1)},this.disconnect=function(){document.removeEventListener("mousemove",u,!1),document.removeEventListener("pointerlockchange",h,!1),document.removeEventListener("pointerlockerror",d,!1)},this.dispose=function(){this.disconnect()},this.getObject=function(){return e},this.getDirection=function(){var t=new o.Vector3(0,0,-1);return function(n){return n.copy(t).applyQuaternion(e.quaternion)}}(),this.moveForward=function(t){l.setFromMatrixColumn(e.matrix,0),l.crossVectors(e.up,l),e.position.addScaledVector(l,t)},this.moveRight=function(t){l.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(l,t)},this.lock=function(){this.domElement.requestPointerLock()},this.unlock=function(){document.exitPointerLock()},this.connect()};r.prototype=Object.create(o.EventDispatcher.prototype),r.prototype.constructor=r},134:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function(e){o.Loader.call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};r.prototype=Object.assign(Object.create(o.Loader.prototype),{constructor:r,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,t,n,r){var a=this,i=new o.FileLoader(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),"use-credentials"===this.crossOrigin&&i.setWithCredentials(!0),i.load(e,(function(e){var n={attributeIDs:a.defaultAttributeIDs,attributeTypes:a.defaultAttributeTypes,useUniqueIDs:!1};a.decodeGeometry(e,n).then(t).catch(r)}),n,r)},decodeDracoFile:function(e,t,n,o){var r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)},decodeGeometry:function(e,t){var n=this;for(var o in t.attributeTypes){var a=t.attributeTypes[o];void 0!==a.BYTES_PER_ELEMENT&&(t.attributeTypes[o]=a.name)}var i,s=JSON.stringify(t);if(r.taskCache.has(e)){var c=r.taskCache.get(e);if(c.key===s)return c.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var l=this.workerNextTaskID++,u=e.byteLength,h=this._getWorker(l,u).then((function(n){return i=n,new Promise((function(n,o){i._callbacks[l]={resolve:n,reject:o},i.postMessage({type:"decode",id:l,taskConfig:t,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return h.catch((function(){return!0})).then((function(){i&&l&&n._releaseTask(i,l)})),r.taskCache.set(e,{key:s,promise:h}),h},_createGeometry:function(e){var t=new o.BufferGeometry;e.index&&t.setIndex(new o.BufferAttribute(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],a=r.name,i=r.array,s=r.itemSize;t.setAttribute(a,new o.BufferAttribute(i,s))}return t},_loadLibrary:function(e,t){var n=new o.FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),new Promise((function(t,o){n.load(e,t,void 0,o)}))},preload:function(){return this._initDecoder(),this},_initDecoder:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var o=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var a=r.DRACOWorker.toString(),i=["/* draco decoder */",o,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending},_getWorker:function(e,t){var n=this;return this._initDecoder().then((function(){var o;n.workerPool.length<n.workerLimit?((o=new Worker(n.workerSourceURL))._callbacks={},o._taskCosts={},o._taskLoad=0,o.postMessage({type:"init",decoderConfig:n.decoderConfig}),o.onmessage=function(e){var t=e.data;switch(t.type){case"decode":o._callbacks[t.id].resolve(t);break;case"error":o._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(o)):n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));return(o=n.workerPool[n.workerPool.length-1])._taskCosts[e]=t,o._taskLoad+=t,o}))},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),r.DRACOWorker=function(){var e,t;function n(e,t,n,o,r,a){var i,s,c=a.num_components(),l=n.num_points()*c;switch(r){case Float32Array:i=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,a,i),s=new Float32Array(l);break;case Int8Array:i=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,a,i),s=new Int8Array(l);break;case Int16Array:i=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,a,i),s=new Int16Array(l);break;case Int32Array:i=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,a,i),s=new Int32Array(l);break;case Uint8Array:i=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,a,i),s=new Uint8Array(l);break;case Uint16Array:i=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,a,i),s=new Uint16Array(l);break;case Uint32Array:i=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,a,i),s=new Uint32Array(l);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var u=0;u<l;u++)s[u]=i.GetValue(u);return e.destroy(i),{name:o,array:s,itemSize:c}}onmessage=function(o){var r=o.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var a=r.buffer,i=r.taskConfig;t.then((function(e){var t=e.draco,o=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(a),a.byteLength);try{var c=function(e,t,o,r){var a,i,s=r.attributeIDs,c=r.attributeTypes,l=t.GetEncodedGeometryType(o);if(l===e.TRIANGULAR_MESH)a=new e.Mesh,i=t.DecodeBufferToMesh(o,a);else{if(l!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,i=t.DecodeBufferToPointCloud(o,a)}if(!i.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+i.error_msg());var u={index:null,attributes:[]};for(var h in s){var d,p,f=self[c[h]];if(r.useUniqueIDs)p=s[h],d=t.GetAttributeByUniqueId(a,p);else{if(-1===(p=t.GetAttributeId(a,e[s[h]])))continue;d=t.GetAttribute(a,p)}u.attributes.push(n(e,t,a,h,f,d))}if(l===e.TRIANGULAR_MESH){for(var m=a.num_faces(),v=new Uint32Array(3*m),g=new e.DracoInt32Array,y=0;y<m;++y){t.GetFaceFromMesh(a,y,g);for(var b=0;b<3;++b)v[3*y+b]=g.GetValue(b)}u.index={array:v,itemSize:1},e.destroy(g)}return e.destroy(a),u}(t,o,s,i),l=c.attributes.map((function(e){return e.array.buffer}));c.index&&l.push(c.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:c},l)}catch(u){console.error(u),self.postMessage({type:"error",id:r.id,error:u.message})}finally{t.destroy(s),t.destroy(o)}}))}}},r.taskCache=new WeakMap,r.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},r.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},r.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},r.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")}},135:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function(){function e(e){o.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(o.Loader.prototype),{constructor:e,load:function(e,t,n,r){var a,i=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:o.LoaderUtils.extractUrlBase(e),i.manager.itemStart(e);var s=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},c=new o.FileLoader(i.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),"use-credentials"===i.crossOrigin&&c.setWithCredentials(!0),c.load(e,(function(n){try{i.parse(n,a,(function(n){t(n),i.manager.itemEnd(e)}),s)}catch(o){s(o)}}),n,s)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(e,t,l,u){var f,g={};if("string"===typeof e)f=e;else if(o.LoaderUtils.decodeText(new Uint8Array(e,0,4))===c){try{g[n.KHR_BINARY_GLTF]=new h(e)}catch(M){return void(u&&u(M))}f=g[n.KHR_BINARY_GLTF].content}else f=o.LoaderUtils.decodeText(new Uint8Array(e));var y=JSON.parse(f);if(void 0===y.asset||y.asset.version[0]<2)u&&u(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(y.extensionsUsed)for(var b=0;b<y.extensionsUsed.length;++b){var w=y.extensionsUsed[b],x=y.extensionsRequired||[];switch(w){case n.KHR_LIGHTS_PUNCTUAL:g[w]=new a(y);break;case n.KHR_MATERIALS_CLEARCOAT:g[w]=new s;break;case n.KHR_MATERIALS_UNLIT:g[w]=new i;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:g[w]=new m;break;case n.KHR_DRACO_MESH_COMPRESSION:g[w]=new d(y,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:g[w]=new r(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:g[w]=new p;break;case n.KHR_MESH_QUANTIZATION:g[w]=new v;break;default:x.indexOf(w)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+w+'".')}}var E=new G(y,g,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});E.fileLoader.setRequestHeader(this.requestHeader),E.parse(l,u)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=e}function a(e){this.name=n.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[n.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function i(){this.name=n.KHR_MATERIALS_UNLIT}function s(){this.name=n.KHR_MATERIALS_CLEARCOAT}a.prototype.loadLight=function(e){var t,n=this.lightDefs[e],r=new o.Color(16777215);void 0!==n.color&&r.fromArray(n.color);var a=void 0!==n.range?n.range:0;switch(n.type){case"directional":(t=new o.DirectionalLight(r)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new o.PointLight(r)).distance=a;break;case"spot":(t=new o.SpotLight(r)).distance=a,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,t.angle=n.spot.outerConeAngle,t.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==n.intensity&&(t.intensity=n.intensity),t.name=n.name||"light_"+e,Promise.resolve(t)},i.prototype.getMaterialType=function(){return o.MeshBasicMaterial},i.prototype.extendParams=function(e,t,n){var r=[];e.color=new o.Color(1,1,1),e.opacity=1;var a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var i=a.baseColorFactor;e.color.fromArray(i),e.opacity=i[3]}void 0!==a.baseColorTexture&&r.push(n.assignTexture(e,"map",a.baseColorTexture))}return Promise.all(r)},s.prototype.getMaterialType=function(){return o.MeshPhysicalMaterial},s.prototype.extendParams=function(e,t,n){var r=[],a=t.extensions[this.name];if(void 0!==a.clearcoatFactor&&(e.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&r.push(n.assignTexture(e,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(e.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(r.push(n.assignTexture(e,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var i=a.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new o.Vector2(i,i)}return Promise.all(r)};var c="glTF",l=1313821514,u=5130562;function h(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:o.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==c)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=new DataView(e,12),a=0;a<r.byteLength;){var i=r.getUint32(a,!0);a+=4;var s=r.getUint32(a,!0);if(a+=4,s===l){var h=new Uint8Array(e,12+a,i);this.content=o.LoaderUtils.decodeText(h)}else if(s===u){var d=12+a;this.body=e.slice(d,d+i)}a+=i}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function d(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function p(){this.name=n.KHR_TEXTURE_TRANSFORM}function f(e){o.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),a=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),i=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),s={specular:{value:(new o.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(var o in s)e.uniforms[o]=s[o];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),e.fragmentShader=e.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_pars_fragment>",t),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_pars_fragment>",n),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_fragment>",r),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_fragment>",a),e.fragmentShader=e.fragmentShader.replace("#include <lights_physical_fragment>",i)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function m(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return f},extendParams:function(e,t,n){var r=t.extensions[this.name];e.color=new o.Color(1,1,1),e.opacity=1;var a=[];if(Array.isArray(r.diffuseFactor)){var i=r.diffuseFactor;e.color.fromArray(i),e.opacity=i[3]}if(void 0!==r.diffuseTexture&&a.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new o.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new o.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var s=r.specularGlossinessTexture;a.push(n.assignTexture(e,"glossinessMap",s)),a.push(n.assignTexture(e,"specularMap",s))}return Promise.all(a)},createMaterial:function(e){var t=new f(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=o.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function v(){this.name=n.KHR_MESH_QUANTIZATION}function g(e,t,n,r){o.Interpolant.call(this,e,t,n,r)}d.prototype.decodePrimitive=function(e,t){var n=this.json,o=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,i={},s={},c={};for(var l in a){var u=_[l]||l.toLowerCase();i[u]=a[l]}for(l in e.attributes){u=_[l]||l.toLowerCase();if(void 0!==a[l]){var h=n.accessors[e.attributes[l]],d=T[h.componentType];c[u]=d,s[u]=!0===h.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){o.decodeDracoFile(e,(function(e){for(var n in e.attributes){var o=e.attributes[n],r=s[n];void 0!==r&&(o.normalized=r)}t(e)}),i,c)}))}))},p.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},f.prototype=Object.create(o.MeshStandardMaterial.prototype),f.prototype.constructor=f,f.prototype.copy=function(e){return o.MeshStandardMaterial.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},g.prototype=Object.create(o.Interpolant.prototype),g.prototype.constructor=g,g.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,o=this.valueSize,r=e*o*3+o,a=0;a!==o;a++)t[a]=n[r+a];return t},g.prototype.beforeStart_=g.prototype.copySampleValue_,g.prototype.afterEnd_=g.prototype.copySampleValue_,g.prototype.interpolate_=function(e,t,n,o){for(var r=this.resultBuffer,a=this.sampleValues,i=this.valueSize,s=2*i,c=3*i,l=o-t,u=(n-t)/l,h=u*u,d=h*u,p=e*c,f=p-c,m=-2*d+3*h,v=d-h,g=1-m,y=v-h+u,b=0;b!==i;b++){var w=a[f+b+i],x=a[f+b+s]*l,E=a[p+b+i],M=a[p+b]*l;r[b]=g*w+y*x+m*E+v*M}return r};var y=0,b=1,w=2,x=3,E=4,M=5,S=6,T={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},L={9728:o.NearestFilter,9729:o.LinearFilter,9984:o.NearestMipmapNearestFilter,9985:o.LinearMipmapNearestFilter,9986:o.NearestMipmapLinearFilter,9987:o.LinearMipmapLinearFilter},A={33071:o.ClampToEdgeWrapping,33648:o.MirroredRepeatWrapping,10497:o.RepeatWrapping},R={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},P={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},O={CUBICSPLINE:void 0,LINEAR:o.InterpolateLinear,STEP:o.InterpolateDiscrete},C="OPAQUE",j="MASK",k="BLEND",D={"image/png":o.RGBAFormat,"image/jpeg":o.RGBFormat};function I(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function U(e,t,n){for(var o in n.extensions)void 0===e[o]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[o]=n.extensions[o])}function N(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function V(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,o=t.weights.length;n<o;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(n=0,o=r.length;n<o;n++)e.morphTargetDictionary[r[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function F(e){var t=e.extensions&&e.extensions[n.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+B(t.attributes):e.indices+":"+B(e.attributes)+":"+e.mode}function B(e){for(var t="",n=Object.keys(e).sort(),o=0,r=n.length;o<r;o++)t+=n[o]+":"+e[n[o]]+";";return t}function G(e,n,r){this.json=e||{},this.extensions=n||{},this.options=r||{},this.cache=new t,this.associations=new Map,this.primitiveCache={},this.textureLoader=new o.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new o.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function H(e,t,n){var r=t.attributes,a=[];function i(t,o){return n.getDependency("accessor",t).then((function(t){e.setAttribute(o,t)}))}for(var s in r){var c=_[s]||s.toLowerCase();c in e.attributes||a.push(i(r[s],c))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(l)}return N(e,t),function(e,t,n){var r=t.attributes,a=new o.Box3;if(void 0!==r.POSITION){var i=(f=n.json.accessors[r.POSITION]).min,s=f.max;if(void 0!==i&&void 0!==s){a.set(new o.Vector3(i[0],i[1],i[2]),new o.Vector3(s[0],s[1],s[2]));var c=t.targets;if(void 0!==c){for(var l=new o.Vector3,u=new o.Vector3,h=0,d=c.length;h<d;h++){var p=c[h];if(void 0!==p.POSITION){var f;i=(f=n.json.accessors[p.POSITION]).min,s=f.max;void 0!==i&&void 0!==s?(u.setX(Math.max(Math.abs(i[0]),Math.abs(s[0]))),u.setY(Math.max(Math.abs(i[1]),Math.abs(s[1]))),u.setZ(Math.max(Math.abs(i[2]),Math.abs(s[2]))),l.max(u)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(l)}e.boundingBox=a;var m=new o.Sphere;a.getCenter(m.center),m.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(a).then((function(){return void 0!==t.targets?function(e,t,n){for(var o=!1,r=!1,a=0,i=t.length;a<i;a++){if(void 0!==(l=t[a]).POSITION&&(o=!0),void 0!==l.NORMAL&&(r=!0),o&&r)break}if(!o&&!r)return Promise.resolve(e);var s=[],c=[];for(a=0,i=t.length;a<i;a++){var l=t[a];if(o){var u=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):e.attributes.position;s.push(u)}if(r){u=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):e.attributes.normal;c.push(u)}}return Promise.all([Promise.all(s),Promise.all(c)]).then((function(t){var n=t[0],a=t[1];return o&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function z(e,t){var n=e.getIndex();if(null===n){var r=[],a=e.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var i=0;i<a.count;i++)r.push(i);e.setIndex(r),n=e.getIndex()}var s=n.count-2,c=[];if(t===o.TriangleFanDrawMode)for(i=1;i<=s;i++)c.push(n.getX(0)),c.push(n.getX(i)),c.push(n.getX(i+1));else for(i=0;i<s;i++)i%2===0?(c.push(n.getX(i)),c.push(n.getX(i+1)),c.push(n.getX(i+2))):(c.push(n.getX(i+2)),c.push(n.getX(i+1)),c.push(n.getX(i)));c.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var l=e.clone();return l.setIndex(c),l}return G.prototype.parse=function(e,t){var n=this,o=this.json,r=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var a={scene:t[0][o.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:o.asset,parser:n,userData:{}};U(r,a,o),N(a,o),e(a)})).catch(t)},G.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],o={},r={},a=0,i=t.length;a<i;a++)for(var s=t[a].joints,c=0,l=s.length;c<l;c++)e[s[c]].isBone=!0;for(var u=0,h=e.length;u<h;u++){var d=e[u];void 0!==d.mesh&&(void 0===o[d.mesh]&&(o[d.mesh]=r[d.mesh]=0),o[d.mesh]++,void 0!==d.skin&&(n[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=o,this.json.meshUses=r},G.prototype.getDependency=function(e,t){var o=e+":"+t,r=this.cache.get(o);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this.loadMesh(t);break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this.loadBufferView(t);break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this.loadMaterial(t);break;case"texture":r=this.loadTexture(t);break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;case"light":r=this.extensions[n.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(o,r)}return r},G.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,o=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(o.map((function(t,o){return n.getDependency(e,o)}))),this.cache.add(e,t)}return t},G.prototype.loadBuffer=function(e){var t=this.json.buffers[e],o=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,n){o.load(I(t.uri,r.path),e,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},G.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,o=t.byteOffset||0;return e.slice(o,o+n)}))},G.prototype.loadAccessor=function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var a=[];return void 0!==r.bufferView?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then((function(e){var a,i,s=e[0],c=R[r.type],l=T[r.componentType],u=l.BYTES_PER_ELEMENT,h=u*c,d=r.byteOffset||0,p=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(p&&p!==h){var m=Math.floor(d/p),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+m+":"+r.count,g=t.cache.get(v);g||(a=new l(s,m*p,r.count*p/u),g=new o.InterleavedBuffer(a,p/u),t.cache.add(v,g)),i=new o.InterleavedBufferAttribute(g,c,d%p/u,f)}else a=null===s?new l(r.count*c):new l(s,d,r.count*c),i=new o.BufferAttribute(a,c,f);if(void 0!==r.sparse){var y=R.SCALAR,b=T[r.sparse.indices.componentType],w=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,E=new b(e[1],w,r.sparse.count*y),M=new l(e[2],x,r.sparse.count*c);null!==s&&(i=new o.BufferAttribute(i.array.slice(),i.itemSize,i.normalized));for(var S=0,L=E.length;S<L;S++){var A=E[S];if(i.setX(A,M[S*c]),c>=2&&i.setY(A,M[S*c+1]),c>=3&&i.setZ(A,M[S*c+2]),c>=4&&i.setW(A,M[S*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i}))},G.prototype.loadTexture=function(e){var t,r=this,a=this.json,i=this.options,s=this.textureLoader,c=self.URL||self.webkitURL,l=a.textures[e],u=l.extensions||{},h=(t=u[n.MSFT_TEXTURE_DDS]?a.images[u[n.MSFT_TEXTURE_DDS].source]:a.images[l.source]).uri,d=!1;return void 0!==t.bufferView&&(h=r.getDependency("bufferView",t.bufferView).then((function(e){d=!0;var n=new Blob([e],{type:t.mimeType});return h=c.createObjectURL(n)}))),Promise.resolve(h).then((function(e){var t=i.manager.getHandler(e);return t||(t=u[n.MSFT_TEXTURE_DDS]?r.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise((function(n,o){t.load(I(e,i.path),n,void 0,o)}))})).then((function(n){!0===d&&c.revokeObjectURL(h),n.flipY=!1,l.name&&(n.name=l.name),t.mimeType in D&&(n.format=D[t.mimeType]);var i=(a.samplers||{})[l.sampler]||{};return n.magFilter=L[i.magFilter]||o.LinearFilter,n.minFilter=L[i.minFilter]||o.LinearMipmapLinearFilter,n.wrapS=A[i.wrapS]||o.RepeatWrapping,n.wrapT=A[i.wrapT]||o.RepeatWrapping,r.associations.set(n,{type:"textures",index:e}),n}))},G.prototype.assignTexture=function(e,t,r){var a=this;return this.getDependency("texture",r.index).then((function(i){if(!i.isCompressedTexture)switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":i.format=o.RGBFormat}if(void 0===r.texCoord||0==r.texCoord||"aoMap"===t&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),a.extensions[n.KHR_TEXTURE_TRANSFORM]){var s=void 0!==r.extensions?r.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;if(s){var c=a.associations.get(i);i=a.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(i,s),a.associations.set(i,c)}}e[t]=i}))},G.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,r=void 0!==t.attributes.tangent,a=void 0!==t.attributes.color,i=void 0===t.attributes.normal,s=!0===e.isSkinnedMesh,c=Object.keys(t.morphAttributes).length>0,l=c&&void 0!==t.morphAttributes.normal;if(e.isPoints){var u="PointsMaterial:"+n.uuid,h=this.cache.get(u);h||(h=new o.PointsMaterial,o.Material.prototype.copy.call(h,n),h.color.copy(n.color),h.map=n.map,h.sizeAttenuation=!1,this.cache.add(u,h)),n=h}else if(e.isLine){u="LineBasicMaterial:"+n.uuid;var d=this.cache.get(u);d||(d=new o.LineBasicMaterial,o.Material.prototype.copy.call(d,n),d.color.copy(n.color),this.cache.add(u,d)),n=d}if(r||a||i||s||c){u="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),s&&(u+="skinning:"),r&&(u+="vertex-tangents:"),a&&(u+="vertex-colors:"),i&&(u+="flat-shading:"),c&&(u+="morph-targets:"),l&&(u+="morph-normals:");var p=this.cache.get(u);p||(p=n.clone(),s&&(p.skinning=!0),r&&(p.vertexTangents=!0),a&&(p.vertexColors=!0),i&&(p.flatShading=!0),c&&(p.morphTargets=!0),l&&(p.morphNormals=!0),this.cache.add(u,p),this.associations.set(p,this.associations.get(n))),n=p}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),n.normalScale&&!r&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!r&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),e.material=n},G.prototype.loadMaterial=function(e){var t,r=this,a=this.json,i=this.extensions,s=a.materials[e],c={},l=s.extensions||{},u=[];if(l[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var h=i[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=h.getMaterialType(),u.push(h.extendParams(c,s,r))}else if(l[n.KHR_MATERIALS_UNLIT]){var d=i[n.KHR_MATERIALS_UNLIT];t=d.getMaterialType(),u.push(d.extendParams(c,s,r))}else{t=o.MeshStandardMaterial;var p=s.pbrMetallicRoughness||{};if(c.color=new o.Color(1,1,1),c.opacity=1,Array.isArray(p.baseColorFactor)){var m=p.baseColorFactor;c.color.fromArray(m),c.opacity=m[3]}void 0!==p.baseColorTexture&&u.push(r.assignTexture(c,"map",p.baseColorTexture)),c.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,c.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(u.push(r.assignTexture(c,"metalnessMap",p.metallicRoughnessTexture)),u.push(r.assignTexture(c,"roughnessMap",p.metallicRoughnessTexture)))}!0===s.doubleSided&&(c.side=o.DoubleSide);var v=s.alphaMode||C;if(v===k?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,v===j&&(c.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&t!==o.MeshBasicMaterial&&(u.push(r.assignTexture(c,"normalMap",s.normalTexture)),c.normalScale=new o.Vector2(1,1),void 0!==s.normalTexture.scale&&c.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&t!==o.MeshBasicMaterial&&(u.push(r.assignTexture(c,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(c.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&t!==o.MeshBasicMaterial&&(c.emissive=(new o.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&t!==o.MeshBasicMaterial&&u.push(r.assignTexture(c,"emissiveMap",s.emissiveTexture)),l[n.KHR_MATERIALS_CLEARCOAT]){var g=i[n.KHR_MATERIALS_CLEARCOAT];t=g.getMaterialType(),u.push(g.extendParams(c,{extensions:l},r))}return Promise.all(u).then((function(){var a;return a=t===f?i[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(c):new t(c),s.name&&(a.name=s.name),a.map&&(a.map.encoding=o.sRGBEncoding),a.emissiveMap&&(a.emissiveMap.encoding=o.sRGBEncoding),N(a,s),r.associations.set(a,{type:"materials",index:e}),s.extensions&&U(i,a,s),a}))},G.prototype.loadGeometries=function(e){var t=this,r=this.extensions,a=this.primitiveCache;function i(e){return r[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return H(n,e,t)}))}for(var s=[],c=0,l=e.length;c<l;c++){var u,h=e[c],d=F(h),p=a[d];if(p)s.push(p.promise);else u=h.extensions&&h.extensions[n.KHR_DRACO_MESH_COMPRESSION]?i(h):H(new o.BufferGeometry,h,t),a[d]={primitive:h,promise:u},s.push(u)}return Promise.all(s)},G.prototype.loadMesh=function(e){for(var t,n=this,r=this.json.meshes[e],a=r.primitives,i=[],s=0,c=a.length;s<c;s++){var l=void 0===a[s].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new o.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:o.FrontSide})),t.DefaultMaterial):this.getDependency("material",a[s].material);i.push(l)}return i.push(n.loadGeometries(a)),Promise.all(i).then((function(t){for(var i=t.slice(0,t.length-1),s=t[t.length-1],c=[],l=0,u=s.length;l<u;l++){var h,d=s[l],p=a[l],f=i[l];if(p.mode===E||p.mode===M||p.mode===S||void 0===p.mode)!0!==(h=!0===r.isSkinnedMesh?new o.SkinnedMesh(d,f):new o.Mesh(d,f)).isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),p.mode===M?h.geometry=z(h.geometry,o.TriangleStripDrawMode):p.mode===S&&(h.geometry=z(h.geometry,o.TriangleFanDrawMode));else if(p.mode===b)h=new o.LineSegments(d,f);else if(p.mode===x)h=new o.Line(d,f);else if(p.mode===w)h=new o.LineLoop(d,f);else{if(p.mode!==y)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);h=new o.Points(d,f)}Object.keys(h.geometry.morphAttributes).length>0&&V(h,r),h.name=r.name||"mesh_"+e,s.length>1&&(h.name+="_"+l),N(h,r),n.assignFinalMaterial(h),c.push(h)}if(1===c.length)return c[0];var m=new o.Group;for(l=0,u=c.length;l<u;l++)m.add(c[l]);return m}))},G.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new o.PerspectiveCamera(o.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new o.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=n.name),N(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},G.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},G.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],n=[],r=[],a=[],i=[],s=[],c=0,l=t.channels.length;c<l;c++){var u=t.channels[c],h=t.samplers[u.sampler],d=u.target,p=void 0!==d.node?d.node:d.id,f=void 0!==t.parameters?t.parameters[h.input]:h.input,m=void 0!==t.parameters?t.parameters[h.output]:h.output;n.push(this.getDependency("node",p)),r.push(this.getDependency("accessor",f)),a.push(this.getDependency("accessor",m)),i.push(h),s.push(d)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(a),Promise.all(i),Promise.all(s)]).then((function(n){for(var r=n[0],a=n[1],i=n[2],s=n[3],c=n[4],l=[],u=0,h=r.length;u<h;u++){var d=r[u],p=a[u],f=i[u],m=s[u],v=c[u];if(void 0!==d){var y;switch(d.updateMatrix(),d.matrixAutoUpdate=!0,P[v.path]){case P.weights:y=o.NumberKeyframeTrack;break;case P.rotation:y=o.QuaternionKeyframeTrack;break;case P.position:case P.scale:default:y=o.VectorKeyframeTrack}var b=d.name?d.name:d.uuid,w=void 0!==m.interpolation?O[m.interpolation]:o.InterpolateLinear,x=[];P[v.path]===P.weights?d.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&x.push(e.name?e.name:e.uuid)})):x.push(b);var E=f.array;if(f.normalized){var M;if(E.constructor===Int8Array)M=1/127;else if(E.constructor===Uint8Array)M=1/255;else if(E.constructor==Int16Array)M=1/32767;else{if(E.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");M=1/65535}for(var S=new Float32Array(E.length),T=0,L=E.length;T<L;T++)S[T]=E[T]*M;E=S}for(T=0,L=x.length;T<L;T++){var A=new y(x[T]+"."+P[v.path],p.array,E,w);"CUBICSPLINE"===m.interpolation&&(A.createInterpolant=function(e){return new g(this.times,this.values,this.getValueSize()/3,e)},A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(A)}}}var R=t.name?t.name:"animation_"+e;return new o.AnimationClip(R,void 0,l)}))},G.prototype.loadNode=function(e){var t=this.json,r=this.extensions,a=this,i=t.meshReferences,s=t.meshUses,c=t.nodes[e];return function(){var e=[];return void 0!==c.mesh&&e.push(a.getDependency("mesh",c.mesh).then((function(e){var t;if(i[c.mesh]>1){var n=s[c.mesh]++;(t=e.clone()).name+="_instance_"+n}else t=e;return void 0!==c.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=c.weights.length;t<n;t++)e.morphTargetInfluences[t]=c.weights[t]})),t}))),void 0!==c.camera&&e.push(a.getDependency("camera",c.camera)),c.extensions&&c.extensions[n.KHR_LIGHTS_PUNCTUAL]&&void 0!==c.extensions[n.KHR_LIGHTS_PUNCTUAL].light&&e.push(a.getDependency("light",c.extensions[n.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(e)}().then((function(t){var n;if((n=!0===c.isBone?new o.Bone:t.length>1?new o.Group:1===t.length?t[0]:new o.Object3D)!==t[0])for(var i=0,s=t.length;i<s;i++)n.add(t[i]);if(c.name&&(n.userData.name=c.name,n.name=o.PropertyBinding.sanitizeNodeName(c.name)),N(n,c),c.extensions&&U(r,n,c),void 0!==c.matrix){var l=new o.Matrix4;l.fromArray(c.matrix),n.applyMatrix4(l)}else void 0!==c.translation&&n.position.fromArray(c.translation),void 0!==c.rotation&&n.quaternion.fromArray(c.rotation),void 0!==c.scale&&n.scale.fromArray(c.scale);return a.associations.set(n,{type:"nodes",index:e}),n}))},G.prototype.loadScene=function(){function e(t,n,r,a){var i=r.nodes[t];return a.getDependency("node",t).then((function(e){return void 0===i.skin?e:a.getDependency("skin",i.skin).then((function(e){for(var n=[],o=0,r=(t=e).joints.length;o<r;o++)n.push(a.getDependency("node",t.joints[o]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],a=[],i=0,s=n.length;i<s;i++){var c=n[i];if(c){r.push(c);var l=new o.Matrix4;void 0!==t.inverseBindMatrices&&l.fromArray(t.inverseBindMatrices.array,16*i),a.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[i])}e.bind(new o.Skeleton(r,a),e.matrixWorld)}})),e}));var t})).then((function(t){n.add(t);var o=[];if(i.children)for(var s=i.children,c=0,l=s.length;c<l;c++){var u=s[c];o.push(e(u,t,r,a))}return Promise.all(o)}))}return function(t){var n=this.json,r=this.extensions,a=this.json.scenes[t],i=new o.Group;a.name&&(i.name=a.name),N(i,a),a.extensions&&U(r,i,a);for(var s=a.nodes||[],c=[],l=0,u=s.length;l<u;l++)c.push(e(s[l],i,n,this));return Promise.all(c).then((function(){return i}))}}(),e}()},136:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function e(t,n){o.Mesh.call(this,t),this.type="Reflector";var r=this,a=void 0!==(n=n||{}).color?new o.Color(n.color):new o.Color(8355711),i=n.textureWidth||512,s=n.textureHeight||512,c=n.clipBias||0,l=n.shader||e.ReflectorShader,u=void 0!==n.encoding?n.encoding:o.LinearEncoding,h=new o.Plane,d=new o.Vector3,p=new o.Vector3,f=new o.Vector3,m=new o.Matrix4,v=new o.Vector3(0,0,-1),g=new o.Vector4,y=new o.Vector3,b=new o.Vector3,w=new o.Vector4,x=new o.Matrix4,E=new o.PerspectiveCamera,M={minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBFormat,stencilBuffer:!1,encoding:u},S=new o.WebGLRenderTarget(i,s,M);o.MathUtils.isPowerOfTwo(i)&&o.MathUtils.isPowerOfTwo(s)||(S.texture.generateMipmaps=!1);var T=new o.ShaderMaterial({uniforms:o.UniformsUtils.clone(l.uniforms),fragmentShader:l.fragmentShader,vertexShader:l.vertexShader});T.uniforms.tDiffuse.value=S.texture,T.uniforms.color.value=a,T.uniforms.textureMatrix.value=x,this.material=T,this.onBeforeRender=function(e,t,n){if(p.setFromMatrixPosition(r.matrixWorld),f.setFromMatrixPosition(n.matrixWorld),m.extractRotation(r.matrixWorld),d.set(0,0,1),d.applyMatrix4(m),y.subVectors(p,f),!(y.dot(d)>0)){y.reflect(d).negate(),y.add(p),m.extractRotation(n.matrixWorld),v.set(0,0,-1),v.applyMatrix4(m),v.add(f),b.subVectors(p,v),b.reflect(d).negate(),b.add(p),E.position.copy(y),E.up.set(0,1,0),E.up.applyMatrix4(m),E.up.reflect(d),E.lookAt(b),E.far=n.far,E.updateMatrixWorld(),E.projectionMatrix.copy(n.projectionMatrix),x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(E.projectionMatrix),x.multiply(E.matrixWorldInverse),x.multiply(r.matrixWorld),h.setFromNormalAndCoplanarPoint(d,p),h.applyMatrix4(E.matrixWorldInverse),g.set(h.normal.x,h.normal.y,h.normal.z,h.constant);var o=E.projectionMatrix;w.x=(Math.sign(g.x)+o.elements[8])/o.elements[0],w.y=(Math.sign(g.y)+o.elements[9])/o.elements[5],w.z=-1,w.w=(1+o.elements[10])/o.elements[14],g.multiplyScalar(2/g.dot(w)),o.elements[2]=g.x,o.elements[6]=g.y,o.elements[10]=g.z+1-c,o.elements[14]=g.w,r.visible=!1;var a=e.getRenderTarget(),i=e.xr.enabled,s=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(S),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,E),e.xr.enabled=i,e.shadowMap.autoUpdate=s,e.setRenderTarget(a);var l=n.viewport;void 0!==l&&e.state.viewport(l),r.visible=!0}},this.getRenderTarget=function(){return S}};r.prototype=Object.create(o.Mesh.prototype),r.prototype.constructor=r,r.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")}},137:function(e,t,n){var o=function e(){function t(e){return r.appendChild(e.dom),e}function n(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";o=e}var o=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(e){e.preventDefault(),n(++o%r.children.length)}),!1);var a=(performance||Date).now(),i=a,s=0,c=t(new e.Panel("FPS","#0ff","#002")),l=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:r,addPanel:t,showPanel:n,begin:function(){a=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(l.update(e-a,200),e>i+1e3&&(c.update(1e3*s/(e-i),100),i=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:r,setMode:n}};o.Panel=function(e,t,n){var o=1/0,r=0,a=Math.round,i=a(window.devicePixelRatio||1),s=80*i,c=48*i,l=3*i,u=2*i,h=3*i,d=15*i,p=74*i,f=30*i,m=document.createElement("canvas");m.width=s,m.height=c,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*i+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,s,c),v.fillStyle=t,v.fillText(e,l,u),v.fillRect(h,d,p,f),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h,d,p,f),{dom:m,update:function(c,g){o=Math.min(o,c),r=Math.max(r,c),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,s,d),v.fillStyle=t,v.fillText(a(c)+" "+e+" ("+a(o)+"-"+a(r)+")",l,u),v.drawImage(m,h+i,d,p-i,f,h,d,p-i,f),v.fillRect(h+p-i,d,i,f),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h+p-i,d,i,a((1-c/g)*f))}}},e.exports=o},138:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function(){};!function(){var e=new o.Vector3,t=new o.Vector3;function n(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function a(e,t){var n,o,r,a=t.position.distanceTo(e.position),i=0,s=[],c=e.faces.length;for(n=0;n<c;n++)(o=e.faces[n]).hasVertex(t)&&s.push(o);for(n=0;n<c;n++){var l=1;o=e.faces[n];for(var u=0;u<s.length;u++){r=s[u];var h=o.normal.dot(r.normal);l=Math.min(l,(1.001-h)/2)}i=Math.max(i,l)}return s.length<2&&(i=1),a*i+0}function i(e){if(0===e.neighbors.length)return e.collapseNeighbor=null,void(e.collapseCost=-.01);e.collapseCost=1e5,e.collapseNeighbor=null;for(var t=0;t<e.neighbors.length;t++){var n=a(e,e.neighbors[t]);e.collapseNeighbor||(e.collapseNeighbor=e.neighbors[t],e.collapseCost=n,e.minCost=n,e.totalCost=0,e.costCount=0),e.costCount++,e.totalCost+=n,n<e.minCost&&(e.collapseNeighbor=e.neighbors[t],e.minCost=n)}e.collapseCost=e.totalCost/e.costCount}function s(e,t){for(console.assert(0===e.faces.length);e.neighbors.length;){n(e.neighbors.pop().neighbors,e)}n(t,e)}function c(e,t){n(t,e),e.v1&&n(e.v1.faces,e),e.v2&&n(e.v2.faces,e),e.v3&&n(e.v3.faces,e);for(var o,r,a=[e.v1,e.v2,e.v3],i=0;i<3;i++)r=a[(i+1)%3],(o=a[i])&&r&&(o.removeIfNonNeighbor(r),r.removeIfNonNeighbor(o))}function l(e,t,n,o){if(o){var r,a=[];for(r=0;r<n.neighbors.length;r++)a.push(n.neighbors[r]);for(r=n.faces.length-1;r>=0;r--)n.faces[r].hasVertex(o)&&c(n.faces[r],t);for(r=n.faces.length-1;r>=0;r--)n.faces[r].replaceVertex(n,o);for(s(n,e),r=0;r<a.length;r++)i(a[r])}else s(n,e)}function u(e){for(var t=e[0],n=0;n<e.length;n++)e[n].collapseCost<t.collapseCost&&(t=e[n]);return t}function h(e,t,n,r,a,i){this.a=r,this.b=a,this.c=i,this.v1=e,this.v2=t,this.v3=n,this.normal=new o.Vector3,this.computeNormal(),e.faces.push(this),e.addUniqueNeighbor(t),e.addUniqueNeighbor(n),t.faces.push(this),t.addUniqueNeighbor(e),t.addUniqueNeighbor(n),n.faces.push(this),n.addUniqueNeighbor(e),n.addUniqueNeighbor(t)}function d(e,t){this.position=e,this.id=t,this.faces=[],this.neighbors=[],this.collapseCost=0,this.collapseNeighbor=null}h.prototype.computeNormal=function(){var n=this.v1.position,o=this.v2.position,r=this.v3.position;e.subVectors(r,o),t.subVectors(n,o),e.cross(t).normalize(),this.normal.copy(e)},h.prototype.hasVertex=function(e){return e===this.v1||e===this.v2||e===this.v3},h.prototype.replaceVertex=function(e,t){e===this.v1?this.v1=t:e===this.v2?this.v2=t:e===this.v3&&(this.v3=t),n(e.faces,this),t.faces.push(this),e.removeIfNonNeighbor(this.v1),this.v1.removeIfNonNeighbor(e),e.removeIfNonNeighbor(this.v2),this.v2.removeIfNonNeighbor(e),e.removeIfNonNeighbor(this.v3),this.v3.removeIfNonNeighbor(e),this.v1.addUniqueNeighbor(this.v2),this.v1.addUniqueNeighbor(this.v3),this.v2.addUniqueNeighbor(this.v1),this.v2.addUniqueNeighbor(this.v3),this.v3.addUniqueNeighbor(this.v1),this.v3.addUniqueNeighbor(this.v2),this.computeNormal()},d.prototype.addUniqueNeighbor=function(e){var t,n;t=this.neighbors,n=e,-1===t.indexOf(n)&&t.push(n)},d.prototype.removeIfNonNeighbor=function(e){var t=this.neighbors,n=this.faces,o=t.indexOf(e);if(-1!==o){for(var r=0;r<n.length;r++)if(n[r].hasVertex(e))return;t.splice(o,1)}},r.prototype.modify=function(e,t){e.isBufferGeometry&&(e=(new o.Geometry).fromBufferGeometry(e)),e.mergeVertices();var n,r,a,s=e.vertices,c=e.faces,p=[],f=[];for(n=0,r=s.length;n<r;n++){var m=new d(s[n],n);p.push(m)}for(n=0,r=c.length;n<r;n++){var v=(S=c[n]).a,g=S.b,y=S.c,b=new h(p[v],p[g],p[y],v,g,y);f.push(b)}for(n=0,r=p.length;n<r;n++)i(p[n]);for(var w=t;w--;){if(!(a=u(p))){console.log("THREE.SimplifyModifier: No next vertex");break}l(p,f,a,a.collapseNeighbor)}var x=new o.BufferGeometry,E=[],M=[];for(n=0;n<p.length;n++){m=p[n].position;E.push(m.x,m.y,m.z)}for(n=0;n<f.length;n++){var S=f[n];v=p.indexOf(S.v1),g=p.indexOf(S.v2),y=p.indexOf(S.v3);M.push(v,g,y)}return x.setAttribute("position",new o.Float32BufferAttribute(E,3)),x.setIndex(M),x}}()},139:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function(e){this.subdivisions=void 0===e?1:e};r.prototype.modify=function(e){(e=e.isBufferGeometry?(new o.Geometry).fromBufferGeometry(e):e.clone()).mergeVertices();for(var t=this.subdivisions;t-- >0;)this.smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e},function(){var e=["a","b","c"];function t(e,t,n){return n[Math.min(e,t)+"_"+Math.max(e,t)]}function n(e,t,n,o,r,a){var i,s=Math.min(e,t),c=Math.max(e,t),l=s+"_"+c;l in o?i=o[l]:(i={a:n[s],b:n[c],newEdge:null,faces:[]},o[l]=i);i.faces.push(r),a[e].edges.push(i),a[t].edges.push(i)}function a(e,t,n,r,a){e.push(new o.Face3(t,n,r,void 0,void 0,a))}function i(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function s(e,t,n,o){e.push([t.clone(),n.clone(),o.clone()])}r.prototype.smooth=function(r){var c,l,u,h,d,p,f,m,v,g,y,b,w,x=new o.Vector3,E=[];c=r.vertices,l=r.faces;var M,S,T,L,A,R,_,P,O,C,j,k,D,I,U=void 0!==(u=r.faceVertexUvs)[0]&&u[0].length>0;if(U)for(var N=0;N<u.length;N++)E.push([]);for(f in function(e,t,o,r){var a,i,s;for(a=0,i=e.length;a<i;a++)o[a]={edges:[]};for(a=0,i=t.length;a<i;a++)n((s=t[a]).a,s.b,e,r,s,o),n(s.b,s.c,e,r,s,o),n(s.c,s.a,e,r,s,o)}(c,l,g=new Array(c.length),y={}),b=[],y){for(S=y[f],T=new o.Vector3,A=3/8,R=1/8,2!=(_=S.faces.length)&&(A=.5,R=0),T.addVectors(S.a,S.b).multiplyScalar(A),x.set(0,0,0),N=0;N<_;N++){for(L=S.faces[N],v=0;v<3&&((M=c[L[e[v]]])===S.a||M===S.b);v++);x.add(M)}x.multiplyScalar(R),T.add(x),S.newEdge=b.length,b.push(T)}for(w=[],f=0,m=c.length;f<m;f++){for(D=c[f],3==(p=(k=g[f].edges).length)?P=3/16:p>3&&(P=3/(8*p)),O=1-p*P,C=P,p<=2&&2==p&&(O=3/4,C=1/8),I=D.clone().multiplyScalar(O),x.set(0,0,0),N=0;N<p;N++)M=(j=k[N]).a!==D?j.a:j.b,x.add(M);x.multiplyScalar(C),I.add(x),w.push(I)}h=w.concat(b);var V,F,B,G,H,z,X,Y=w.length;d=[];var Z=new o.Vector2,q=new o.Vector2,W=new o.Vector2;for(f=0,m=l.length;f<m;f++)if(a(d,V=t((L=l[f]).a,L.b,y).newEdge+Y,F=t(L.b,L.c,y).newEdge+Y,B=t(L.c,L.a,y).newEdge+Y,L.materialIndex),a(d,L.a,V,B,L.materialIndex),a(d,L.b,F,V,L.materialIndex),a(d,L.c,B,F,L.materialIndex),U)for(N=0;N<u.length;N++)H=(G=u[N][f])[0],z=G[1],X=G[2],Z.set(i(H.x,z.x),i(H.y,z.y)),q.set(i(z.x,X.x),i(z.y,X.y)),W.set(i(H.x,X.x),i(H.y,X.y)),s(E[N],Z,q,W),s(E[N],H,Z,W),s(E[N],z,q,Z),s(E[N],X,W,q);r.vertices=h,r.faces=d,U&&(r.faceVertexUvs=E)}}()},140:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function(e){this.maxEdgeLength=e};r.prototype.modify=function(e){for(var t,n=[],r=[],a=this.maxEdgeLength*this.maxEdgeLength,i=0,s=e.faceVertexUvs.length;i<s;i++)r[i]=[];for(i=0,s=e.faces.length;i<s;i++){var c=e.faces[i];if(c instanceof o.Face3){var l=c.a,u=c.b,h=c.c,d=e.vertices[l],p=e.vertices[u],f=e.vertices[h],m=d.distanceToSquared(p),v=p.distanceToSquared(f),g=d.distanceToSquared(f);if(m>a||v>a||g>a){var y=e.vertices.length,b=c.clone(),w=c.clone();if(m>=v&&m>=g){if((x=d.clone()).lerp(p,.5),b.a=l,b.b=y,b.c=h,w.a=y,w.b=u,w.c=h,3===c.vertexNormals.length)(E=c.vertexNormals[0].clone()).lerp(c.vertexNormals[1],.5),b.vertexNormals[1].copy(E),w.vertexNormals[0].copy(E);if(3===c.vertexColors.length)(M=c.vertexColors[0].clone()).lerp(c.vertexColors[1],.5),b.vertexColors[1].copy(M),w.vertexColors[0].copy(M);t=0}else if(v>=m&&v>=g){if((x=p.clone()).lerp(f,.5),b.a=l,b.b=u,b.c=y,w.a=y,w.b=h,w.c=l,3===c.vertexNormals.length)(E=c.vertexNormals[1].clone()).lerp(c.vertexNormals[2],.5),b.vertexNormals[2].copy(E),w.vertexNormals[0].copy(E),w.vertexNormals[1].copy(c.vertexNormals[2]),w.vertexNormals[2].copy(c.vertexNormals[0]);if(3===c.vertexColors.length)(M=c.vertexColors[1].clone()).lerp(c.vertexColors[2],.5),b.vertexColors[2].copy(M),w.vertexColors[0].copy(M),w.vertexColors[1].copy(c.vertexColors[2]),w.vertexColors[2].copy(c.vertexColors[0]);t=1}else{var x,E,M;if((x=d.clone()).lerp(f,.5),b.a=l,b.b=u,b.c=y,w.a=y,w.b=u,w.c=h,3===c.vertexNormals.length)(E=c.vertexNormals[0].clone()).lerp(c.vertexNormals[2],.5),b.vertexNormals[2].copy(E),w.vertexNormals[0].copy(E);if(3===c.vertexColors.length)(M=c.vertexColors[0].clone()).lerp(c.vertexColors[2],.5),b.vertexColors[2].copy(M),w.vertexColors[0].copy(M);t=2}n.push(b,w),e.vertices.push(x);for(var S=0,T=e.faceVertexUvs.length;S<T;S++)if(e.faceVertexUvs[S].length){var L=e.faceVertexUvs[S][i],A=L[0],R=L[1],_=L[2];if(0===t){(C=A.clone()).lerp(R,.5);var P=[A.clone(),C.clone(),_.clone()],O=[C.clone(),R.clone(),_.clone()]}else if(1===t){(C=R.clone()).lerp(_,.5);P=[A.clone(),R.clone(),C.clone()],O=[C.clone(),_.clone(),A.clone()]}else{var C;(C=A.clone()).lerp(_,.5);P=[A.clone(),R.clone(),C.clone()],O=[C.clone(),R.clone(),_.clone()]}r[S].push(P,O)}}else{n.push(c);for(S=0,T=e.faceVertexUvs.length;S<T;S++)r[S].push(e.faceVertexUvs[S][i])}}}e.faces=n,e.faceVertexUvs=r}},141:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function e(){var t=e.SkyShader,n=new o.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:o.UniformsUtils.clone(t.uniforms),side:o.BackSide,depthWrite:!1});o.Mesh.call(this,new o.BoxBufferGeometry(1,1,1),n)};r.prototype=Object.create(o.Mesh.prototype),r.SkyShader={uniforms:{luminance:{value:1},turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new o.Vector3},up:{value:new o.Vector3(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float luminance;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","const float A = 0.15;","const float B = 0.50;","const float C = 0.10;","const float D = 0.20;","const float E = 0.02;","const float F = 0.30;","const float whiteScale = 1.0748724675633854;","vec3 Uncharted2Tonemap( vec3 x ) {","\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;","}","void main() {","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( direction, vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );","\tvec3 color = curr * whiteScale;","\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","}"].join("\n")}},142:function(e,t,n){"use strict";var o=n(34),r=n.n(o),a=n(3),i=n(0);function s(e){var t,n=new Set,o=function(e,o){var r="function"===typeof e?e(t):e;r!==t&&(t=o?r:Object.assign({},t,r),n.forEach((function(e){return e(t)})))},r=function(){return t},a={setState:o,getState:r,subscribe:function(e,o,a){return o||a?function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is,i=o(t);function s(){try{var n=o(t);a(i,n)||e(i=n)}catch(r){e(null,r)}}return n.add(s),function(){return n.delete(s)}}(e,o,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(o,r,a),a}var c="undefined"===typeof window?i.useEffect:i.useLayoutEffect;t.a=function(e){var t="function"===typeof e?s(e):e,n=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,r=Object(i.useReducer)((function(e){return e+1}),0),s=Object(a.a)(r,2),l=s[1],u=t.getState(),h=Object(i.useRef)(u),d=Object(i.useRef)(n),p=Object(i.useRef)(o),f=Object(i.useRef)(!1),m=Object(i.useRef)();void 0===m.current&&(m.current=n(u));var v=!1;(h.current!==u||d.current!==n||p.current!==o||f.current)&&(e=n(u),v=!o(m.current,e)),c((function(){v&&(m.current=e),h.current=u,d.current=n,p.current=o,f.current=!1}));var g=Object(i.useRef)(u);return Object(i.useEffect)((function(){var e=function(){try{var e=t.getState(),n=d.current(e);p.current(m.current,n)||(h.current=e,m.current=n,l())}catch(o){f.current=!0,l()}},n=t.subscribe(e);return t.getState()!==g.current&&e(),n}),[]),v?e:m.current};return Object.assign(n,t),n[Symbol.iterator]=r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("[useStore, api] = create() is deprecated and will be removed in v4"),e.next=3,n;case 3:return e.next=5,t;case 5:case"end":return e.stop()}}),e)})),n}},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72);o.UniformsLib.line={linewidth:{value:1},resolution:{value:new o.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}},o.ShaderLib.line={uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.fog,o.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\tvarying vec2 vUv;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t}\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};var r=function(e){o.ShaderMaterial.call(this,{type:"LineMaterial",uniforms:o.UniformsUtils.clone(o.ShaderLib.line.uniforms),vertexShader:o.ShaderLib.line.vertexShader,fragmentShader:o.ShaderLib.line.fragmentShader,clipping:!0}),this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}}}),this.setValues(e)};r.prototype=Object.create(o.ShaderMaterial.prototype),r.prototype.constructor=r,r.prototype.isLineMaterial=!0},83:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(97),r=function(){o.a.call(this),this.type="LineGeometry"};r.prototype=Object.assign(Object.create(o.a.prototype),{constructor:r,isLineGeometry:!0,setPositions:function(e){for(var t=e.length-3,n=new Float32Array(2*t),r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return o.a.prototype.setPositions.call(this,n),this},setColors:function(e){for(var t=e.length-3,n=new Float32Array(2*t),r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return o.a.prototype.setColors.call(this,n),this},fromLine:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.attributes.position.array),this},copy:function(){return this}})},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(72),r=n(97),a=n(79),i=function(e,t){o.Mesh.call(this),this.type="LineSegments2",this.geometry=void 0!==e?e:new r.a,this.material=void 0!==t?t:new a.a({color:16777215*Math.random()})};i.prototype=Object.assign(Object.create(o.Mesh.prototype),{constructor:i,isLineSegments2:!0,computeLineDistances:function(){var e=new o.Vector3,t=new o.Vector3;return function(){for(var n=this.geometry,r=n.attributes.instanceStart,a=n.attributes.instanceEnd,i=new Float32Array(2*r.data.count),s=0,c=0,l=r.data.count;s<l;s++,c+=2)e.fromBufferAttribute(r,s),t.fromBufferAttribute(a,s),i[c]=0===c?0:i[c-1],i[c+1]=i[c]+e.distanceTo(t);var u=new o.InstancedInterleavedBuffer(i,2,1);return n.setAttribute("instanceDistanceStart",new o.InterleavedBufferAttribute(u,1,0)),n.setAttribute("instanceDistanceEnd",new o.InterleavedBufferAttribute(u,1,1)),this}}(),raycast:function(){var e=new o.Vector4,t=new o.Vector4,n=new o.Vector4,r=new o.Vector3,a=new o.Matrix4,i=new o.Line3,s=new o.Vector3;return function(c,l){null===c.camera&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var u=c.ray,h=c.camera,d=h.projectionMatrix,p=this.geometry,f=this.material,m=f.resolution,v=f.linewidth,g=p.attributes.instanceStart,y=p.attributes.instanceEnd;u.at(1,n),n.w=1,n.applyMatrix4(h.matrixWorldInverse),n.applyMatrix4(d),n.multiplyScalar(1/n.w),n.x*=m.x/2,n.y*=m.y/2,n.z=0,r.copy(n);var b=this.matrixWorld;a.multiplyMatrices(h.matrixWorldInverse,b);for(var w=0,x=g.count;w<x;w++){e.fromBufferAttribute(g,w),t.fromBufferAttribute(y,w),e.w=1,t.w=1,e.applyMatrix4(a),t.applyMatrix4(a),e.applyMatrix4(d),t.applyMatrix4(d),e.multiplyScalar(1/e.w),t.multiplyScalar(1/t.w);var E=e.z<-1&&t.z<-1,M=e.z>1&&t.z>1;if(!E&&!M){e.x*=m.x/2,e.y*=m.y/2,t.x*=m.x/2,t.y*=m.y/2,i.start.copy(e),i.start.z=0,i.end.copy(t),i.end.z=0;var S=i.closestPointToPointParameter(r,!0);i.at(S,s);var T=o.MathUtils.lerp(e.z,t.z,S),L=T>=-1&&T<=1,A=r.distanceTo(s)<.5*v;if(L&&A){i.start.fromBufferAttribute(g,w),i.end.fromBufferAttribute(y,w),i.start.applyMatrix4(b),i.end.applyMatrix4(b);var R=new o.Vector3,_=new o.Vector3;u.distanceSqToSegment(i.start,i.end,_,R),l.push({point:_,pointOnLine:R,distance:u.origin.distanceTo(_),object:this,face:null,faceIndex:w,uv:null,uv2:null})}}}}}()});var s=n(83),c=function(e,t){i.call(this),this.type="Line2",this.geometry=void 0!==e?e:new s.a,this.material=void 0!==t?t:new a.a({color:16777215*Math.random()})};c.prototype=Object.assign(Object.create(i.prototype),{constructor:c,isLine2:!0})},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function(e,t){void 0===t&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var n=this,r=-1,a=0,i=1,s=2,c=3,l=4;this.object=e,this.domElement=t,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:o.MOUSE.ROTATE,MIDDLE:o.MOUSE.ZOOM,RIGHT:o.MOUSE.PAN},this.target=new o.Vector3;var u=new o.Vector3,h=1,d=r,p=r,f=new o.Vector3,m=new o.Vector2,v=new o.Vector2,g=new o.Vector3,y=0,b=new o.Vector2,w=new o.Vector2,x=0,E=0,M=new o.Vector2,S=new o.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var T={type:"change"},L={type:"start"},A={type:"end"};this.handleResize=function(){var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height};var R=function(){var e=new o.Vector2;return function(t,o){return e.set((t-n.screen.left)/n.screen.width,(o-n.screen.top)/n.screen.height),e}}(),_=function(){var e=new o.Vector2;return function(t,o){return e.set((t-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-o))/n.screen.width),e}}();function P(e){!1!==n.enabled&&(window.removeEventListener("keydown",P),p===r&&(e.keyCode!==n.keys[a]||n.noRotate?e.keyCode!==n.keys[i]||n.noZoom?e.keyCode!==n.keys[s]||n.noPan||(p=s):p=i:p=a))}function O(){!1!==n.enabled&&(p=r,window.addEventListener("keydown",P,!1))}function C(e){if(!1!==n.enabled){if(e.preventDefault(),e.stopPropagation(),d===r)switch(e.button){case n.mouseButtons.LEFT:d=a;break;case n.mouseButtons.MIDDLE:d=i;break;case n.mouseButtons.RIGHT:d=s;break;default:d=r}var t=p!==r?p:d;t!==a||n.noRotate?t!==i||n.noZoom?t!==s||n.noPan||(M.copy(R(e.pageX,e.pageY)),S.copy(M)):(b.copy(R(e.pageX,e.pageY)),w.copy(b)):(v.copy(_(e.pageX,e.pageY)),m.copy(v)),document.addEventListener("mousemove",j,!1),document.addEventListener("mouseup",k,!1),n.dispatchEvent(L)}}function j(e){if(!1!==n.enabled){e.preventDefault(),e.stopPropagation();var t=p!==r?p:d;t!==a||n.noRotate?t!==i||n.noZoom?t!==s||n.noPan||S.copy(R(e.pageX,e.pageY)):w.copy(R(e.pageX,e.pageY)):(m.copy(v),v.copy(_(e.pageX,e.pageY)))}}function k(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),d=r,document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",k),n.dispatchEvent(A))}function D(e){if(!1!==n.enabled&&!0!==n.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:b.y-=.025*e.deltaY;break;case 1:b.y-=.01*e.deltaY;break;default:b.y-=25e-5*e.deltaY}n.dispatchEvent(L),n.dispatchEvent(A)}}function I(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:d=c,v.copy(_(e.touches[0].pageX,e.touches[0].pageY)),m.copy(v);break;default:d=l;var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;E=x=Math.sqrt(t*t+o*o);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,a=(e.touches[0].pageY+e.touches[1].pageY)/2;M.copy(R(r,a)),S.copy(M)}n.dispatchEvent(L)}}function U(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:m.copy(v),v.copy(_(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;E=Math.sqrt(t*t+o*o);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,a=(e.touches[0].pageY+e.touches[1].pageY)/2;S.copy(R(r,a))}}function N(e){if(!1!==n.enabled){switch(e.touches.length){case 0:d=r;break;case 1:d=c,v.copy(_(e.touches[0].pageX,e.touches[0].pageY)),m.copy(v)}n.dispatchEvent(A)}}function V(e){!1!==n.enabled&&e.preventDefault()}this.rotateCamera=function(){var e,t=new o.Vector3,r=new o.Quaternion,a=new o.Vector3,i=new o.Vector3,s=new o.Vector3,c=new o.Vector3;return function(){c.set(v.x-m.x,v.y-m.y,0),(e=c.length())?(f.copy(n.object.position).sub(n.target),a.copy(f).normalize(),i.copy(n.object.up).normalize(),s.crossVectors(i,a).normalize(),i.setLength(v.y-m.y),s.setLength(v.x-m.x),c.copy(i.add(s)),t.crossVectors(c,f).normalize(),e*=n.rotateSpeed,r.setFromAxisAngle(t,e),f.applyQuaternion(r),n.object.up.applyQuaternion(r),g.copy(t),y=e):!n.staticMoving&&y&&(y*=Math.sqrt(1-n.dynamicDampingFactor),f.copy(n.object.position).sub(n.target),r.setFromAxisAngle(g,y),f.applyQuaternion(r),n.object.up.applyQuaternion(r)),m.copy(v)}}(),this.zoomCamera=function(){var e;d===l?(e=x/E,x=E,n.object.isPerspectiveCamera?f.multiplyScalar(e):n.object.isOrthographicCamera?(n.object.zoom*=e,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!==(e=1+(w.y-b.y)*n.zoomSpeed)&&e>0&&(n.object.isPerspectiveCamera?f.multiplyScalar(e):n.object.isOrthographicCamera?(n.object.zoom/=e,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?b.copy(w):b.y+=(w.y-b.y)*this.dynamicDampingFactor)},this.panCamera=function(){var e=new o.Vector2,t=new o.Vector3,r=new o.Vector3;return function(){if(e.copy(S).sub(M),e.lengthSq()){if(n.object.isOrthographicCamera){var o=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,a=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;e.x*=o,e.y*=a}e.multiplyScalar(f.length()*n.panSpeed),r.copy(f).cross(n.object.up).setLength(e.x),r.add(t.copy(n.object.up).setLength(e.y)),n.object.position.add(r),n.target.add(r),n.staticMoving?M.copy(S):M.add(e.subVectors(S,M).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(f.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,f.setLength(n.maxDistance)),b.copy(w)),f.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,f.setLength(n.minDistance)),b.copy(w)))},this.update=function(){f.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,f),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),u.distanceToSquared(n.object.position)>1e-6&&(n.dispatchEvent(T),u.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(u.distanceToSquared(n.object.position)>1e-6||h!==n.object.zoom)&&(n.dispatchEvent(T),u.copy(n.object.position),h=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){d=r,p=r,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),f.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(T),u.copy(n.object.position),h=n.object.zoom},this.dispose=function(){this.domElement.removeEventListener("contextmenu",V,!1),this.domElement.removeEventListener("mousedown",C,!1),this.domElement.removeEventListener("wheel",D,!1),this.domElement.removeEventListener("touchstart",I,!1),this.domElement.removeEventListener("touchend",N,!1),this.domElement.removeEventListener("touchmove",U,!1),document.removeEventListener("mousemove",j,!1),document.removeEventListener("mouseup",k,!1),window.removeEventListener("keydown",P,!1),window.removeEventListener("keyup",O,!1)},this.domElement.addEventListener("contextmenu",V,!1),this.domElement.addEventListener("mousedown",C,!1),this.domElement.addEventListener("wheel",D,!1),this.domElement.addEventListener("touchstart",I,!1),this.domElement.addEventListener("touchend",N,!1),this.domElement.addEventListener("touchmove",U,!1),window.addEventListener("keydown",P,!1),window.addEventListener("keyup",O,!1),this.handleResize(),this.update()};r.prototype=Object.create(o.EventDispatcher.prototype),r.prototype.constructor=r},97:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(72),r=function(){o.InstancedBufferGeometry.call(this),this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new o.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new o.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))};r.prototype=Object.assign(Object.create(o.InstancedBufferGeometry.prototype),{constructor:r,isLineSegmentsGeometry:!0,applyMatrix4:function(e){var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.data.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},setPositions:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var n=new o.InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceStart",new o.InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceEnd",new o.InterleavedBufferAttribute(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},setColors:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var n=new o.InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceColorStart",new o.InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceColorEnd",new o.InterleavedBufferAttribute(n,3,3)),this},fromWireframeGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromEdgesGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromMesh:function(e){return this.fromWireframeGeometry(new o.WireframeGeometry(e.geometry)),this},fromLineSegments:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.attributes.position.array),this},computeBoundingBox:function(){var e=new o.Box3;return function(){null===this.boundingBox&&(this.boundingBox=new o.Box3);var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;void 0!==t&&void 0!==n&&(this.boundingBox.setFromBufferAttribute(t),e.setFromBufferAttribute(n),this.boundingBox.union(e))}}(),computeBoundingSphere:function(){var e=new o.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere),null===this.boundingBox&&this.computeBoundingBox();var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(void 0!==t&&void 0!==n){var r=this.boundingSphere.center;this.boundingBox.getCenter(r);for(var a=0,i=0,s=t.count;i<s;i++)e.fromBufferAttribute(t,i),a=Math.max(a,r.distanceToSquared(e)),e.fromBufferAttribute(n,i),a=Math.max(a,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}}(),toJSON:function(){},applyMatrix:function(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}})},99:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var o=n(72),r=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new o.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:o.MOUSE.ROTATE,MIDDLE:o.MOUSE.DOLLY,RIGHT:o.MOUSE.PAN},this.touches={ONE:o.TOUCH.ROTATE,TWO:o.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),c=s.NONE},this.update=function(){var t=new o.Vector3,a=(new o.Quaternion).setFromUnitVectors(e.up,new o.Vector3(0,1,0)),i=a.clone().inverse(),m=new o.Vector3,v=new o.Quaternion;return function(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(a),u.setFromVector3(t),n.autoRotate&&c===s.NONE&&T(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(u.theta+=h.theta*n.dampingFactor,u.phi+=h.phi*n.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi),u.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=d,u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),!0===n.enableDamping?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),t.setFromSpherical(u),t.applyQuaternion(i),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),p.set(0,0,0)),d=1,!!(f||m.distanceToSquared(n.object.position)>l||8*(1-v.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),m.copy(n.object.position),v.copy(n.object.quaternion),f=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",q,!1),n.domElement.removeEventListener("mousedown",F,!1),n.domElement.removeEventListener("wheel",H,!1),n.domElement.removeEventListener("touchstart",X,!1),n.domElement.removeEventListener("touchend",Z,!1),n.domElement.removeEventListener("touchmove",Y,!1),document.removeEventListener("mousemove",B,!1),document.removeEventListener("mouseup",G,!1),n.domElement.removeEventListener("keydown",z,!1)};var n=this,r={type:"change"},a={type:"start"},i={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},c=s.NONE,l=1e-6,u=new o.Spherical,h=new o.Spherical,d=1,p=new o.Vector3,f=!1,m=new o.Vector2,v=new o.Vector2,g=new o.Vector2,y=new o.Vector2,b=new o.Vector2,w=new o.Vector2,x=new o.Vector2,E=new o.Vector2,M=new o.Vector2;function S(){return Math.pow(.95,n.zoomSpeed)}function T(e){h.theta-=e}function L(e){h.phi-=e}var A=function(){var e=new o.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),p.add(e)}}(),R=function(){var e=new o.Vector3;return function(t,o){!0===n.screenSpacePanning?e.setFromMatrixColumn(o,1):(e.setFromMatrixColumn(o,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),p.add(e)}}(),_=function(){var e=new o.Vector3;return function(t,o){var r=n.domElement;if(n.object.isPerspectiveCamera){var a=n.object.position;e.copy(a).sub(n.target);var i=e.length();i*=Math.tan(n.object.fov/2*Math.PI/180),A(2*t*i/r.clientHeight,n.object.matrix),R(2*o*i/r.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(A(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),R(o*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function P(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function C(e){m.set(e.clientX,e.clientY)}function j(e){y.set(e.clientX,e.clientY)}function k(e){if(1==e.touches.length)m.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);m.set(t,n)}}function D(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,n)}}function I(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);x.set(0,o)}function U(e){if(1==e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,o)}g.subVectors(v,m).multiplyScalar(n.rotateSpeed);var r=n.domElement;T(2*Math.PI*g.x/r.clientHeight),L(2*Math.PI*g.y/r.clientHeight),m.copy(v)}function N(e){if(1==e.touches.length)b.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(t,o)}w.subVectors(b,y).multiplyScalar(n.panSpeed),_(w.x,w.y),y.copy(b)}function V(e){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+o*o);E.set(0,r),M.set(0,Math.pow(E.y/x.y,n.zoomSpeed)),P(M.y),x.copy(E)}function F(e){if(!1!==n.enabled){var t;switch(e.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case o.MOUSE.DOLLY:if(!1===n.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),c=s.DOLLY;break;case o.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;j(e),c=s.PAN}else{if(!1===n.enableRotate)return;C(e),c=s.ROTATE}break;case o.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;C(e),c=s.ROTATE}else{if(!1===n.enablePan)return;j(e),c=s.PAN}break;default:c=s.NONE}c!==s.NONE&&(document.addEventListener("mousemove",B,!1),document.addEventListener("mouseup",G,!1),n.dispatchEvent(a))}}function B(e){if(!1!==n.enabled)switch(e.preventDefault(),c){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),g.subVectors(v,m).multiplyScalar(n.rotateSpeed);var t=n.domElement;T(2*Math.PI*g.x/t.clientHeight),L(2*Math.PI*g.y/t.clientHeight),m.copy(v),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){E.set(e.clientX,e.clientY),M.subVectors(E,x),M.y>0?P(S()):M.y<0&&O(S()),x.copy(E),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){b.set(e.clientX,e.clientY),w.subVectors(b,y).multiplyScalar(n.panSpeed),_(w.x,w.y),y.copy(b),n.update()}(e)}}function G(e){!1!==n.enabled&&(document.removeEventListener("mousemove",B,!1),document.removeEventListener("mouseup",G,!1),n.dispatchEvent(i),c=s.NONE)}function H(e){!1===n.enabled||!1===n.enableZoom||c!==s.NONE&&c!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(a),function(e){e.deltaY<0?O(S()):e.deltaY>0&&P(S()),n.update()}(e),n.dispatchEvent(i))}function z(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){var t=!1;switch(e.keyCode){case n.keys.UP:_(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:_(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:_(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:_(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function X(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case o.TOUCH.ROTATE:if(!1===n.enableRotate)return;k(e),c=s.TOUCH_ROTATE;break;case o.TOUCH.PAN:if(!1===n.enablePan)return;D(e),c=s.TOUCH_PAN;break;default:c=s.NONE}break;case 2:switch(n.touches.TWO){case o.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&I(e),n.enablePan&&D(e)}(e),c=s.TOUCH_DOLLY_PAN;break;case o.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&I(e),n.enableRotate&&k(e)}(e),c=s.TOUCH_DOLLY_ROTATE;break;default:c=s.NONE}break;default:c=s.NONE}c!==s.NONE&&n.dispatchEvent(a)}}function Y(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),c){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;U(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;N(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&V(e),n.enablePan&&N(e)}(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&V(e),n.enableRotate&&U(e)}(e),n.update();break;default:c=s.NONE}}function Z(e){!1!==n.enabled&&(n.dispatchEvent(i),c=s.NONE)}function q(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",q,!1),n.domElement.addEventListener("mousedown",F,!1),n.domElement.addEventListener("wheel",H,!1),n.domElement.addEventListener("touchstart",X,!1),n.domElement.addEventListener("touchend",Z,!1),n.domElement.addEventListener("touchmove",Y,!1),n.domElement.addEventListener("keydown",z,!1),-1===n.domElement.tabIndex&&(n.domElement.tabIndex=0),this.update()};r.prototype=Object.create(o.EventDispatcher.prototype),r.prototype.constructor=r;var a=function(e,t){r.call(this,e,t),this.mouseButtons.LEFT=o.MOUSE.PAN,this.mouseButtons.RIGHT=o.MOUSE.ROTATE,this.touches.ONE=o.TOUCH.PAN,this.touches.TWO=o.TOUCH.DOLLY_ROTATE};a.prototype=Object.create(o.EventDispatcher.prototype),a.prototype.constructor=a}}]);
//# sourceMappingURL=4.24cf34e6.chunk.js.map
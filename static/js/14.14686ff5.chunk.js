(this["webpackJsonpraster-react-canvas2"]=this["webpackJsonpraster-react-canvas2"]||[]).push([[14,24],{102:function(e,a,r){"use strict";function n(e,a){return a||(a=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(a)}}))}r.d(a,"a",(function(){return n}))},125:function(e,a,r){!function(e,a,r,n){"use strict";var t,o=r.defineWorkerModule({name:"Typr Font Parser",dependencies:[function(){var e=self,a={parse:function(e){var r=a._bin,n=new Uint8Array(e);if("ttcf"==r.readASCII(n,0,4)){var t=4;r.readUshort(n,t),t+=2,r.readUshort(n,t),t+=2;var o=r.readUint(n,t);t+=4;for(var i=[],c=0;c<o;c++){var l=r.readUint(n,t);t+=4,i.push(a._readFont(n,l))}return i}return[a._readFont(n,0)]},_readFont:function(e,r){var n=a._bin,t=r;n.readFixed(e,r),r+=4;var o=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2;for(var i=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],c={_data:e,_offset:t},l={},s=0;s<o;s++){var u=n.readASCII(e,r,4);r+=4,n.readUint(e,r),r+=4;var h=n.readUint(e,r);r+=4;var p=n.readUint(e,r);r+=4,l[u]={offset:h,length:p}}for(s=0;s<i.length;s++){var d=i[s];l[d]&&(c[d.trim()]=a[d.trim()].parse(e,l[d].offset,l[d].length,c))}return c},_tabOffset:function(e,r,n){for(var t=a._bin,o=t.readUshort(e,n+4),i=n+12,c=0;c<o;c++){var l=t.readASCII(e,i,4);i+=4,t.readUint(e,i),i+=4;var s=t.readUint(e,i);if(i+=4,t.readUint(e,i),i+=4,l==r)return s}return 0}};return a._bin={readFixed:function(e,a){return(e[a]<<8|e[a+1])+(e[a+2]<<8|e[a+3])/65540},readF2dot14:function(e,r){return a._bin.readShort(e,r)/16384},readInt:function(e,r){var n=a._bin.t.uint8;return n[0]=e[r+3],n[1]=e[r+2],n[2]=e[r+1],n[3]=e[r],a._bin.t.int32[0]},readInt8:function(e,r){return a._bin.t.uint8[0]=e[r],a._bin.t.int8[0]},readShort:function(e,r){var n=a._bin.t.uint8;return n[1]=e[r],n[0]=e[r+1],a._bin.t.int16[0]},readUshort:function(e,a){return e[a]<<8|e[a+1]},readUshorts:function(e,r,n){for(var t=[],o=0;o<n;o++)t.push(a._bin.readUshort(e,r+2*o));return t},readUint:function(e,r){var n=a._bin.t.uint8;return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],a._bin.t.uint32[0]},readUint64:function(e,r){return 4294967296*a._bin.readUint(e,r)+a._bin.readUint(e,r+4)},readASCII:function(e,a,r){for(var n="",t=0;t<r;t++)n+=String.fromCharCode(e[a+t]);return n},readUnicode:function(e,a,r){for(var n="",t=0;t<r;t++){var o=e[a++]<<8|e[a++];n+=String.fromCharCode(o)}return n},_tdec:e.TextDecoder?new e.TextDecoder:null,readUTF8:function(e,r,n){var t=a._bin._tdec;return t&&0==r&&n==e.length?t.decode(e):a._bin.readASCII(e,r,n)},readBytes:function(e,a,r){for(var n=[],t=0;t<r;t++)n.push(e[a+t]);return n},readASCIIArray:function(e,a,r){for(var n=[],t=0;t<r;t++)n.push(String.fromCharCode(e[a+t]));return n}},a._bin.t={buff:new ArrayBuffer(8)},a._bin.t.int8=new Int8Array(a._bin.t.buff),a._bin.t.uint8=new Uint8Array(a._bin.t.buff),a._bin.t.int16=new Int16Array(a._bin.t.buff),a._bin.t.uint16=new Uint16Array(a._bin.t.buff),a._bin.t.int32=new Int32Array(a._bin.t.buff),a._bin.t.uint32=new Uint32Array(a._bin.t.buff),a._lctf={},a._lctf.parse=function(e,r,n,t,o){var i=a._bin,c={},l=r;i.readFixed(e,r),r+=4;var s=i.readUshort(e,r);r+=2;var u=i.readUshort(e,r);r+=2;var h=i.readUshort(e,r);return r+=2,c.scriptList=a._lctf.readScriptList(e,l+s),c.featureList=a._lctf.readFeatureList(e,l+u),c.lookupList=a._lctf.readLookupList(e,l+h,o),c},a._lctf.readLookupList=function(e,r,n){var t=a._bin,o=r,i=[],c=t.readUshort(e,r);r+=2;for(var l=0;l<c;l++){var s=t.readUshort(e,r);r+=2;var u=a._lctf.readLookupTable(e,o+s,n);i.push(u)}return i},a._lctf.readLookupTable=function(e,r,n){var t=a._bin,o=r,i={tabs:[]};i.ltype=t.readUshort(e,r),r+=2,i.flag=t.readUshort(e,r),r+=2;var c=t.readUshort(e,r);r+=2;for(var l=0;l<c;l++){var s=t.readUshort(e,r);r+=2;var u=n(e,i.ltype,o+s);i.tabs.push(u)}return i},a._lctf.numOfOnes=function(e){for(var a=0,r=0;r<32;r++)0!=(e>>>r&1)&&a++;return a},a._lctf.readClassDef=function(e,r){var n=a._bin,t=[],o=n.readUshort(e,r);if(r+=2,1==o){var i=n.readUshort(e,r);r+=2;var c=n.readUshort(e,r);r+=2;for(var l=0;l<c;l++)t.push(i+l),t.push(i+l),t.push(n.readUshort(e,r)),r+=2}if(2==o){var s=n.readUshort(e,r);for(r+=2,l=0;l<s;l++)t.push(n.readUshort(e,r)),r+=2,t.push(n.readUshort(e,r)),r+=2,t.push(n.readUshort(e,r)),r+=2}return t},a._lctf.getInterval=function(e,a){for(var r=0;r<e.length;r+=3){var n=e[r],t=e[r+1];if(e[r+2],n<=a&&a<=t)return r}return-1},a._lctf.readCoverage=function(e,r){var n=a._bin,t={};t.fmt=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);return r+=2,1==t.fmt&&(t.tab=n.readUshorts(e,r,o)),2==t.fmt&&(t.tab=n.readUshorts(e,r,3*o)),t},a._lctf.coverageIndex=function(e,r){var n=e.tab;if(1==e.fmt)return n.indexOf(r);if(2==e.fmt){var t=a._lctf.getInterval(n,r);if(-1!=t)return n[t+2]+(r-n[t])}return-1},a._lctf.readFeatureList=function(e,r){var n=a._bin,t=r,o=[],i=n.readUshort(e,r);r+=2;for(var c=0;c<i;c++){var l=n.readASCII(e,r,4);r+=4;var s=n.readUshort(e,r);r+=2,o.push({tag:l.trim(),tab:a._lctf.readFeatureTable(e,t+s)})}return o},a._lctf.readFeatureTable=function(e,r){var n=a._bin;n.readUshort(e,r),r+=2;var t=n.readUshort(e,r);r+=2;for(var o=[],i=0;i<t;i++)o.push(n.readUshort(e,r+2*i));return o},a._lctf.readScriptList=function(e,r){var n=a._bin,t=r,o={},i=n.readUshort(e,r);r+=2;for(var c=0;c<i;c++){var l=n.readASCII(e,r,4);r+=4;var s=n.readUshort(e,r);r+=2,o[l.trim()]=a._lctf.readScriptTable(e,t+s)}return o},a._lctf.readScriptTable=function(e,r){var n=a._bin,t=r,o={},i=n.readUshort(e,r);r+=2,o.default=a._lctf.readLangSysTable(e,t+i);var c=n.readUshort(e,r);r+=2;for(var l=0;l<c;l++){var s=n.readASCII(e,r,4);r+=4;var u=n.readUshort(e,r);r+=2,o[s.trim()]=a._lctf.readLangSysTable(e,t+u)}return o},a._lctf.readLangSysTable=function(e,r){var n=a._bin,t={};n.readUshort(e,r),r+=2,t.reqFeature=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);return r+=2,t.features=n.readUshorts(e,r,o),t},a.CFF={},a.CFF.parse=function(e,r,n){var t=a._bin;(e=new Uint8Array(e.buffer,r,n))[r=0],e[++r],e[++r],e[++r],r++;var o=[];r=a.CFF.readIndex(e,r,o);for(var i=[],c=0;c<o.length-1;c++)i.push(t.readASCII(e,r+o[c],o[c+1]-o[c]));r+=o[o.length-1];var l=[];r=a.CFF.readIndex(e,r,l);var s=[];for(c=0;c<l.length-1;c++)s.push(a.CFF.readDict(e,r+l[c],r+l[c+1]));r+=l[l.length-1];var u=s[0],h=[];r=a.CFF.readIndex(e,r,h);var p=[];for(c=0;c<h.length-1;c++)p.push(t.readASCII(e,r+h[c],h[c+1]-h[c]));if(r+=h[h.length-1],a.CFF.readSubrs(e,r,u),u.CharStrings){r=u.CharStrings,h=[],r=a.CFF.readIndex(e,r,h);var d=[];for(c=0;c<h.length-1;c++)d.push(t.readBytes(e,r+h[c],h[c+1]-h[c]));u.CharStrings=d}if(u.ROS){r=u.FDArray;var f=[];for(r=a.CFF.readIndex(e,r,f),u.FDArray=[],c=0;c<f.length-1;c++){var m=a.CFF.readDict(e,r+f[c],r+f[c+1]);a.CFF._readFDict(e,m,p),u.FDArray.push(m)}r+=f[f.length-1],r=u.FDSelect,u.FDSelect=[];var v=e[r];if(r++,3!=v)throw v;var g=t.readUshort(e,r);for(r+=2,c=0;c<g+1;c++)u.FDSelect.push(t.readUshort(e,r),e[r+2]),r+=3}return u.Encoding&&(u.Encoding=a.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=a.CFF.readCharset(e,u.charset,u.CharStrings.length)),a.CFF._readFDict(e,u,p),u},a.CFF._readFDict=function(e,r,n){var t;for(var o in r.Private&&(t=r.Private[1],r.Private=a.CFF.readDict(e,t,t+r.Private[0]),r.Private.Subrs&&a.CFF.readSubrs(e,t+r.Private.Subrs,r.Private)),r)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(r[o]=n[r[o]-426+35])},a.CFF.readSubrs=function(e,r,n){var t=a._bin,o=[];r=a.CFF.readIndex(e,r,o);var i,c=o.length;i=c<1240?107:c<33900?1131:32768,n.Bias=i,n.Subrs=[];for(var l=0;l<o.length-1;l++)n.Subrs.push(t.readBytes(e,r+o[l],o[l+1]-o[l]))},a.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],a.CFF.glyphByUnicode=function(e,a){for(var r=0;r<e.charset.length;r++)if(e.charset[r]==a)return r;return-1},a.CFF.glyphBySE=function(e,r){return r<0||r>255?-1:a.CFF.glyphByUnicode(e,a.CFF.tableSE[r])},a.CFF.readEncoding=function(e,r,n){a._bin;var t=[".notdef"],o=e[r];if(r++,0!=o)throw"error: unknown encoding format: "+o;var i=e[r];r++;for(var c=0;c<i;c++)t.push(e[r+c]);return t},a.CFF.readCharset=function(e,r,n){var t=a._bin,o=[".notdef"],i=e[r];if(r++,0==i)for(var c=0;c<n;c++){var l=t.readUshort(e,r);r+=2,o.push(l)}else{if(1!=i&&2!=i)throw"error: format: "+i;for(;o.length<n;){l=t.readUshort(e,r),r+=2;var s=0;for(1==i?(s=e[r],r++):(s=t.readUshort(e,r),r+=2),c=0;c<=s;c++)o.push(l),l++}}return o},a.CFF.readIndex=function(e,r,n){var t=a._bin,o=t.readUshort(e,r)+1,i=e[r+=2];if(r++,1==i)for(var c=0;c<o;c++)n.push(e[r+c]);else if(2==i)for(c=0;c<o;c++)n.push(t.readUshort(e,r+2*c));else if(3==i)for(c=0;c<o;c++)n.push(16777215&t.readUint(e,r+3*c-1));else if(1!=o)throw"unsupported offset size: "+i+", count: "+o;return(r+=o*i)-1},a.CFF.getCharString=function(e,r,n){var t=a._bin,o=e[r],i=e[r+1],c=(e[r+2],e[r+3],e[r+4],1),l=null,s=null;o<=20&&(l=o,c=1),12==o&&(l=100*o+i,c=2),21<=o&&o<=27&&(l=o,c=1),28==o&&(s=t.readShort(e,r+1),c=3),29<=o&&o<=31&&(l=o,c=1),32<=o&&o<=246&&(s=o-139,c=1),247<=o&&o<=250&&(s=256*(o-247)+i+108,c=2),251<=o&&o<=254&&(s=256*-(o-251)-i-108,c=2),255==o&&(s=t.readInt(e,r+1)/65535,c=5),n.val=null!=s?s:"o"+l,n.size=c},a.CFF.readCharString=function(e,r,n){for(var t=r+n,o=a._bin,i=[];r<t;){var c=e[r],l=e[r+1],s=(e[r+2],e[r+3],e[r+4],1),u=null,h=null;c<=20&&(u=c,s=1),12==c&&(u=100*c+l,s=2),19!=c&&20!=c||(u=c,s=2),21<=c&&c<=27&&(u=c,s=1),28==c&&(h=o.readShort(e,r+1),s=3),29<=c&&c<=31&&(u=c,s=1),32<=c&&c<=246&&(h=c-139,s=1),247<=c&&c<=250&&(h=256*(c-247)+l+108,s=2),251<=c&&c<=254&&(h=256*-(c-251)-l-108,s=2),255==c&&(h=o.readInt(e,r+1)/65535,s=5),i.push(null!=h?h:"o"+u),r+=s}return i},a.CFF.readDict=function(e,r,n){for(var t=a._bin,o={},i=[];r<n;){var c=e[r],l=e[r+1],s=(e[r+2],e[r+3],e[r+4],1),u=null,h=null;if(28==c&&(h=t.readShort(e,r+1),s=3),29==c&&(h=t.readInt(e,r+1),s=5),32<=c&&c<=246&&(h=c-139,s=1),247<=c&&c<=250&&(h=256*(c-247)+l+108,s=2),251<=c&&c<=254&&(h=256*-(c-251)-l-108,s=2),255==c)throw h=t.readInt(e,r+1)/65535,s=5,"unknown number";if(30==c){var p=[];for(s=1;;){var d=e[r+s];s++;var f=d>>4,m=15&d;if(15!=f&&p.push(f),15!=m&&p.push(m),15==m)break}for(var v="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],b=0;b<p.length;b++)v+=g[p[b]];h=parseFloat(v)}c<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][c],s=1,12==c&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],s=2)),null!=u?(o[u]=1==i.length?i[0]:i,i=[]):i.push(h),r+=s}return o},a.cmap={},a.cmap.parse=function(e,r,n){e=new Uint8Array(e.buffer,r,n),r=0;var t=a._bin,o={};t.readUshort(e,r),r+=2;var i=t.readUshort(e,r);r+=2;var c=[];o.tables=[];for(var l=0;l<i;l++){var s=t.readUshort(e,r);r+=2;var u=t.readUshort(e,r);r+=2;var h=t.readUint(e,r);r+=4;var p="p"+s+"e"+u,d=c.indexOf(h);if(-1==d){var f;d=o.tables.length,c.push(h);var m=t.readUshort(e,h);0==m?f=a.cmap.parse0(e,h):4==m?f=a.cmap.parse4(e,h):6==m?f=a.cmap.parse6(e,h):12==m?f=a.cmap.parse12(e,h):console.log("unknown format: "+m,s,u,h),o.tables.push(f)}if(null!=o[p])throw"multiple tables for one platform+encoding";o[p]=d}return o},a.cmap.parse0=function(e,r){var n=a._bin,t={};t.format=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2,t.map=[];for(var i=0;i<o-6;i++)t.map.push(e[r+i]);return t},a.cmap.parse4=function(e,r){var n=a._bin,t=r,o={};o.format=n.readUshort(e,r),r+=2;var i=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2;var c=n.readUshort(e,r);r+=2;var l=c/2;o.searchRange=n.readUshort(e,r),r+=2,o.entrySelector=n.readUshort(e,r),r+=2,o.rangeShift=n.readUshort(e,r),r+=2,o.endCount=n.readUshorts(e,r,l),r+=2*l,r+=2,o.startCount=n.readUshorts(e,r,l),r+=2*l,o.idDelta=[];for(var s=0;s<l;s++)o.idDelta.push(n.readShort(e,r)),r+=2;for(o.idRangeOffset=n.readUshorts(e,r,l),r+=2*l,o.glyphIdArray=[];r<t+i;)o.glyphIdArray.push(n.readUshort(e,r)),r+=2;return o},a.cmap.parse6=function(e,r){var n=a._bin,t={};t.format=n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,t.firstCode=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);r+=2,t.glyphIdArray=[];for(var i=0;i<o;i++)t.glyphIdArray.push(n.readUshort(e,r)),r+=2;return t},a.cmap.parse12=function(e,r){var n=a._bin,t={};t.format=n.readUshort(e,r),r+=2,r+=2,n.readUint(e,r),r+=4,n.readUint(e,r),r+=4;var o=n.readUint(e,r);r+=4,t.groups=[];for(var i=0;i<o;i++){var c=r+12*i,l=n.readUint(e,c+0),s=n.readUint(e,c+4),u=n.readUint(e,c+8);t.groups.push([l,s,u])}return t},a.glyf={},a.glyf.parse=function(e,a,r,n){for(var t=[],o=0;o<n.maxp.numGlyphs;o++)t.push(null);return t},a.glyf._parseGlyf=function(e,r){var n=a._bin,t=e._data,o=a._tabOffset(t,"glyf",e._offset)+e.loca[r];if(e.loca[r]==e.loca[r+1])return null;var i={};if(i.noc=n.readShort(t,o),o+=2,i.xMin=n.readShort(t,o),o+=2,i.yMin=n.readShort(t,o),o+=2,i.xMax=n.readShort(t,o),o+=2,i.yMax=n.readShort(t,o),o+=2,i.xMin>=i.xMax||i.yMin>=i.yMax)return null;if(i.noc>0){i.endPts=[];for(var c=0;c<i.noc;c++)i.endPts.push(n.readUshort(t,o)),o+=2;var l=n.readUshort(t,o);if(o+=2,t.length-o<l)return null;i.instructions=n.readBytes(t,o,l),o+=l;var s=i.endPts[i.noc-1]+1;for(i.flags=[],c=0;c<s;c++){var u=t[o];if(o++,i.flags.push(u),0!=(8&u)){var h=t[o];o++;for(var p=0;p<h;p++)i.flags.push(u),c++}}for(i.xs=[],c=0;c<s;c++){var d=0!=(2&i.flags[c]),f=0!=(16&i.flags[c]);d?(i.xs.push(f?t[o]:-t[o]),o++):f?i.xs.push(0):(i.xs.push(n.readShort(t,o)),o+=2)}for(i.ys=[],c=0;c<s;c++)d=0!=(4&i.flags[c]),f=0!=(32&i.flags[c]),d?(i.ys.push(f?t[o]:-t[o]),o++):f?i.ys.push(0):(i.ys.push(n.readShort(t,o)),o+=2);var m=0,v=0;for(c=0;c<s;c++)m+=i.xs[c],v+=i.ys[c],i.xs[c]=m,i.ys[c]=v}else{var g;i.parts=[];do{g=n.readUshort(t,o),o+=2;var b={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(i.parts.push(b),b.glyphIndex=n.readUshort(t,o),o+=2,1&g){var y=n.readShort(t,o);o+=2;var S=n.readShort(t,o);o+=2}else y=n.readInt8(t,o),o++,S=n.readInt8(t,o),o++;2&g?(b.m.tx=y,b.m.ty=S):(b.p1=y,b.p2=S),8&g?(b.m.a=b.m.d=n.readF2dot14(t,o),o+=2):64&g?(b.m.a=n.readF2dot14(t,o),o+=2,b.m.d=n.readF2dot14(t,o),o+=2):128&g&&(b.m.a=n.readF2dot14(t,o),o+=2,b.m.b=n.readF2dot14(t,o),o+=2,b.m.c=n.readF2dot14(t,o),o+=2,b.m.d=n.readF2dot14(t,o),o+=2)}while(32&g);if(256&g){var U=n.readUshort(t,o);for(o+=2,i.instr=[],c=0;c<U;c++)i.instr.push(t[o]),o++}}return i},a.GPOS={},a.GPOS.parse=function(e,r,n,t){return a._lctf.parse(e,r,n,t,a.GPOS.subt)},a.GPOS.subt=function(e,r,n){var t=a._bin,o=n,i={};if(i.fmt=t.readUshort(e,n),n+=2,1==r||2==r||3==r||7==r||8==r&&i.fmt<=2){var c=t.readUshort(e,n);n+=2,i.coverage=a._lctf.readCoverage(e,c+o)}if(1==r&&1==i.fmt){var l=t.readUshort(e,n);n+=2;var s=a._lctf.numOfOnes(l);0!=l&&(i.pos=a.GPOS.readValueRecord(e,n,l))}else if(2==r){l=t.readUshort(e,n),n+=2;var u=t.readUshort(e,n);n+=2,s=a._lctf.numOfOnes(l);var h=a._lctf.numOfOnes(u);if(1==i.fmt){i.pairsets=[];var p=t.readUshort(e,n);n+=2;for(var d=0;d<p;d++){var f=o+t.readUshort(e,n);n+=2;var m=t.readUshort(e,f);f+=2;for(var v=[],g=0;g<m;g++){var b=t.readUshort(e,f);f+=2,0!=l&&(C=a.GPOS.readValueRecord(e,f,l),f+=2*s),0!=u&&(w=a.GPOS.readValueRecord(e,f,u),f+=2*h),v.push({gid2:b,val1:C,val2:w})}i.pairsets.push(v)}}if(2==i.fmt){var y=t.readUshort(e,n);n+=2;var S=t.readUshort(e,n);n+=2;var U=t.readUshort(e,n);n+=2;var x=t.readUshort(e,n);for(n+=2,i.classDef1=a._lctf.readClassDef(e,o+y),i.classDef2=a._lctf.readClassDef(e,o+S),i.matrix=[],d=0;d<U;d++){var M=[];for(g=0;g<x;g++){var C=null,w=null;0!=i.valFmt1&&(C=a.GPOS.readValueRecord(e,n,i.valFmt1),n+=2*s),0!=i.valFmt2&&(w=a.GPOS.readValueRecord(e,n,i.valFmt2),n+=2*h),M.push({val1:C,val2:w})}i.matrix.push(M)}}}return i},a.GPOS.readValueRecord=function(e,r,n){var t=a._bin,o=[];return o.push(1&n?t.readShort(e,r):0),r+=1&n?2:0,o.push(2&n?t.readShort(e,r):0),r+=2&n?2:0,o.push(4&n?t.readShort(e,r):0),r+=4&n?2:0,o.push(8&n?t.readShort(e,r):0),r+=8&n?2:0,o},a.GSUB={},a.GSUB.parse=function(e,r,n,t){return a._lctf.parse(e,r,n,t,a.GSUB.subt)},a.GSUB.subt=function(e,r,n){var t=a._bin,o=n,i={};if(i.fmt=t.readUshort(e,n),n+=2,1!=r&&4!=r&&5!=r&&6!=r)return null;if(1==r||4==r||5==r&&i.fmt<=2||6==r&&i.fmt<=2){var c=t.readUshort(e,n);n+=2,i.coverage=a._lctf.readCoverage(e,o+c)}if(1==r){if(1==i.fmt)i.delta=t.readShort(e,n),n+=2;else if(2==i.fmt){var l=t.readUshort(e,n);n+=2,i.newg=t.readUshorts(e,n,l),n+=2*i.newg.length}}else if(4==r){i.vals=[],l=t.readUshort(e,n),n+=2;for(var s=0;s<l;s++){var u=t.readUshort(e,n);n+=2,i.vals.push(a.GSUB.readLigatureSet(e,o+u))}}else if(5==r){if(2==i.fmt){var h=t.readUshort(e,n);n+=2,i.cDef=a._lctf.readClassDef(e,o+h),i.scset=[];var p=t.readUshort(e,n);for(n+=2,s=0;s<p;s++){var d=t.readUshort(e,n);n+=2,i.scset.push(0==d?null:a.GSUB.readSubClassSet(e,o+d))}}}else if(6==r&&3==i.fmt){for(s=0;s<3;s++){l=t.readUshort(e,n),n+=2;for(var f=[],m=0;m<l;m++)f.push(a._lctf.readCoverage(e,o+t.readUshort(e,n+2*m)));n+=2*l,0==s&&(i.backCvg=f),1==s&&(i.inptCvg=f),2==s&&(i.ahedCvg=f)}l=t.readUshort(e,n),n+=2,i.lookupRec=a.GSUB.readSubstLookupRecords(e,n,l)}return i},a.GSUB.readSubClassSet=function(e,r){var n=a._bin.readUshort,t=r,o=[],i=n(e,r);r+=2;for(var c=0;c<i;c++){var l=n(e,r);r+=2,o.push(a.GSUB.readSubClassRule(e,t+l))}return o},a.GSUB.readSubClassRule=function(e,r){var n=a._bin.readUshort,t={},o=n(e,r),i=n(e,r+=2);r+=2,t.input=[];for(var c=0;c<o-1;c++)t.input.push(n(e,r)),r+=2;return t.substLookupRecords=a.GSUB.readSubstLookupRecords(e,r,i),t},a.GSUB.readSubstLookupRecords=function(e,r,n){for(var t=a._bin.readUshort,o=[],i=0;i<n;i++)o.push(t(e,r),t(e,r+2)),r+=4;return o},a.GSUB.readChainSubClassSet=function(e,r){var n=a._bin,t=r,o=[],i=n.readUshort(e,r);r+=2;for(var c=0;c<i;c++){var l=n.readUshort(e,r);r+=2,o.push(a.GSUB.readChainSubClassRule(e,t+l))}return o},a.GSUB.readChainSubClassRule=function(e,r){for(var n=a._bin,t={},o=["backtrack","input","lookahead"],i=0;i<o.length;i++){var c=n.readUshort(e,r);r+=2,1==i&&c--,t[o[i]]=n.readUshorts(e,r,c),r+=2*t[o[i]].length}return c=n.readUshort(e,r),r+=2,t.subst=n.readUshorts(e,r,2*c),r+=2*t.subst.length,t},a.GSUB.readLigatureSet=function(e,r){var n=a._bin,t=r,o=[],i=n.readUshort(e,r);r+=2;for(var c=0;c<i;c++){var l=n.readUshort(e,r);r+=2,o.push(a.GSUB.readLigature(e,t+l))}return o},a.GSUB.readLigature=function(e,r){var n=a._bin,t={chain:[]};t.nglyph=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);r+=2;for(var i=0;i<o-1;i++)t.chain.push(n.readUshort(e,r)),r+=2;return t},a.head={},a.head.parse=function(e,r,n){var t=a._bin,o={};return t.readFixed(e,r),r+=4,o.fontRevision=t.readFixed(e,r),r+=4,t.readUint(e,r),r+=4,t.readUint(e,r),r+=4,o.flags=t.readUshort(e,r),r+=2,o.unitsPerEm=t.readUshort(e,r),r+=2,o.created=t.readUint64(e,r),r+=8,o.modified=t.readUint64(e,r),r+=8,o.xMin=t.readShort(e,r),r+=2,o.yMin=t.readShort(e,r),r+=2,o.xMax=t.readShort(e,r),r+=2,o.yMax=t.readShort(e,r),r+=2,o.macStyle=t.readUshort(e,r),r+=2,o.lowestRecPPEM=t.readUshort(e,r),r+=2,o.fontDirectionHint=t.readShort(e,r),r+=2,o.indexToLocFormat=t.readShort(e,r),r+=2,o.glyphDataFormat=t.readShort(e,r),r+=2,o},a.hhea={},a.hhea.parse=function(e,r,n){var t=a._bin,o={};return t.readFixed(e,r),r+=4,o.ascender=t.readShort(e,r),r+=2,o.descender=t.readShort(e,r),r+=2,o.lineGap=t.readShort(e,r),r+=2,o.advanceWidthMax=t.readUshort(e,r),r+=2,o.minLeftSideBearing=t.readShort(e,r),r+=2,o.minRightSideBearing=t.readShort(e,r),r+=2,o.xMaxExtent=t.readShort(e,r),r+=2,o.caretSlopeRise=t.readShort(e,r),r+=2,o.caretSlopeRun=t.readShort(e,r),r+=2,o.caretOffset=t.readShort(e,r),r+=2,r+=8,o.metricDataFormat=t.readShort(e,r),r+=2,o.numberOfHMetrics=t.readUshort(e,r),r+=2,o},a.hmtx={},a.hmtx.parse=function(e,r,n,t){for(var o=a._bin,i={aWidth:[],lsBearing:[]},c=0,l=0,s=0;s<t.maxp.numGlyphs;s++)s<t.hhea.numberOfHMetrics&&(c=o.readUshort(e,r),r+=2,l=o.readShort(e,r),r+=2),i.aWidth.push(c),i.lsBearing.push(l);return i},a.kern={},a.kern.parse=function(e,r,n,t){var o=a._bin,i=o.readUshort(e,r);if(r+=2,1==i)return a.kern.parseV1(e,r-2,n,t);var c=o.readUshort(e,r);r+=2;for(var l={glyph1:[],rval:[]},s=0;s<c;s++){r+=2,n=o.readUshort(e,r),r+=2;var u=o.readUshort(e,r);r+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;r=a.kern.readFormat0(e,r,l)}return l},a.kern.parseV1=function(e,r,n,t){var o=a._bin;o.readFixed(e,r),r+=4;var i=o.readUint(e,r);r+=4;for(var c={glyph1:[],rval:[]},l=0;l<i;l++){o.readUint(e,r),r+=4;var s=o.readUshort(e,r);r+=2,o.readUshort(e,r),r+=2;var u=s>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;r=a.kern.readFormat0(e,r,c)}return c},a.kern.readFormat0=function(e,r,n){var t=a._bin,o=-1,i=t.readUshort(e,r);r+=2,t.readUshort(e,r),r+=2,t.readUshort(e,r),r+=2,t.readUshort(e,r),r+=2;for(var c=0;c<i;c++){var l=t.readUshort(e,r);r+=2;var s=t.readUshort(e,r);r+=2;var u=t.readShort(e,r);r+=2,l!=o&&(n.glyph1.push(l),n.rval.push({glyph2:[],vals:[]}));var h=n.rval[n.rval.length-1];h.glyph2.push(s),h.vals.push(u),o=l}return r},a.loca={},a.loca.parse=function(e,r,n,t){var o=a._bin,i=[],c=t.head.indexToLocFormat,l=t.maxp.numGlyphs+1;if(0==c)for(var s=0;s<l;s++)i.push(o.readUshort(e,r+(s<<1))<<1);if(1==c)for(s=0;s<l;s++)i.push(o.readUint(e,r+(s<<2)));return i},a.maxp={},a.maxp.parse=function(e,r,n){var t=a._bin,o={},i=t.readUint(e,r);return r+=4,o.numGlyphs=t.readUshort(e,r),r+=2,65536==i&&(o.maxPoints=t.readUshort(e,r),r+=2,o.maxContours=t.readUshort(e,r),r+=2,o.maxCompositePoints=t.readUshort(e,r),r+=2,o.maxCompositeContours=t.readUshort(e,r),r+=2,o.maxZones=t.readUshort(e,r),r+=2,o.maxTwilightPoints=t.readUshort(e,r),r+=2,o.maxStorage=t.readUshort(e,r),r+=2,o.maxFunctionDefs=t.readUshort(e,r),r+=2,o.maxInstructionDefs=t.readUshort(e,r),r+=2,o.maxStackElements=t.readUshort(e,r),r+=2,o.maxSizeOfInstructions=t.readUshort(e,r),r+=2,o.maxComponentElements=t.readUshort(e,r),r+=2,o.maxComponentDepth=t.readUshort(e,r),r+=2),o},a.name={},a.name.parse=function(e,r,n){var t=a._bin,o={};t.readUshort(e,r),r+=2;var i=t.readUshort(e,r);r+=2,t.readUshort(e,r);for(var c,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],s=r+=2,u=0;u<i;u++){var h=t.readUshort(e,r);r+=2;var p=t.readUshort(e,r);r+=2;var d=t.readUshort(e,r);r+=2;var f=t.readUshort(e,r);r+=2;var m=t.readUshort(e,r);r+=2;var v=t.readUshort(e,r);r+=2;var g,b=l[f],y=s+12*i+v;if(0==h)g=t.readUnicode(e,y,m/2);else if(3==h&&0==p)g=t.readUnicode(e,y,m/2);else if(0==p)g=t.readASCII(e,y,m);else if(1==p)g=t.readUnicode(e,y,m/2);else if(3==p)g=t.readUnicode(e,y,m/2);else{if(1!=h)throw"unknown encoding "+p+", platformID: "+h;g=t.readASCII(e,y,m),console.log("reading unknown MAC encoding "+p+" as ASCII")}var S="p"+h+","+d.toString(16);null==o[S]&&(o[S]={}),o[S][b]=g,o[S]._lang=d}for(var U in o)if(null!=o[U].postScriptName&&1033==o[U]._lang)return o[U];for(var U in o)if(null!=o[U].postScriptName&&0==o[U]._lang)return o[U];for(var U in o)if(null!=o[U].postScriptName&&3084==o[U]._lang)return o[U];for(var U in o)if(null!=o[U].postScriptName)return o[U];for(var U in o){c=U;break}return console.log("returning name table with languageID "+o[c]._lang),o[c]},a["OS/2"]={},a["OS/2"].parse=function(e,r,n){var t=a._bin.readUshort(e,r);r+=2;var o={};if(0==t)a["OS/2"].version0(e,r,o);else if(1==t)a["OS/2"].version1(e,r,o);else if(2==t||3==t||4==t)a["OS/2"].version2(e,r,o);else{if(5!=t)throw"unknown OS/2 table version: "+t;a["OS/2"].version5(e,r,o)}return o},a["OS/2"].version0=function(e,r,n){var t=a._bin;return n.xAvgCharWidth=t.readShort(e,r),r+=2,n.usWeightClass=t.readUshort(e,r),r+=2,n.usWidthClass=t.readUshort(e,r),r+=2,n.fsType=t.readUshort(e,r),r+=2,n.ySubscriptXSize=t.readShort(e,r),r+=2,n.ySubscriptYSize=t.readShort(e,r),r+=2,n.ySubscriptXOffset=t.readShort(e,r),r+=2,n.ySubscriptYOffset=t.readShort(e,r),r+=2,n.ySuperscriptXSize=t.readShort(e,r),r+=2,n.ySuperscriptYSize=t.readShort(e,r),r+=2,n.ySuperscriptXOffset=t.readShort(e,r),r+=2,n.ySuperscriptYOffset=t.readShort(e,r),r+=2,n.yStrikeoutSize=t.readShort(e,r),r+=2,n.yStrikeoutPosition=t.readShort(e,r),r+=2,n.sFamilyClass=t.readShort(e,r),r+=2,n.panose=t.readBytes(e,r,10),r+=10,n.ulUnicodeRange1=t.readUint(e,r),r+=4,n.ulUnicodeRange2=t.readUint(e,r),r+=4,n.ulUnicodeRange3=t.readUint(e,r),r+=4,n.ulUnicodeRange4=t.readUint(e,r),r+=4,n.achVendID=[t.readInt8(e,r),t.readInt8(e,r+1),t.readInt8(e,r+2),t.readInt8(e,r+3)],r+=4,n.fsSelection=t.readUshort(e,r),r+=2,n.usFirstCharIndex=t.readUshort(e,r),r+=2,n.usLastCharIndex=t.readUshort(e,r),r+=2,n.sTypoAscender=t.readShort(e,r),r+=2,n.sTypoDescender=t.readShort(e,r),r+=2,n.sTypoLineGap=t.readShort(e,r),r+=2,n.usWinAscent=t.readUshort(e,r),r+=2,n.usWinDescent=t.readUshort(e,r),r+=2},a["OS/2"].version1=function(e,r,n){var t=a._bin;return r=a["OS/2"].version0(e,r,n),n.ulCodePageRange1=t.readUint(e,r),r+=4,n.ulCodePageRange2=t.readUint(e,r),r+=4},a["OS/2"].version2=function(e,r,n){var t=a._bin;return r=a["OS/2"].version1(e,r,n),n.sxHeight=t.readShort(e,r),r+=2,n.sCapHeight=t.readShort(e,r),r+=2,n.usDefault=t.readUshort(e,r),r+=2,n.usBreak=t.readUshort(e,r),r+=2,n.usMaxContext=t.readUshort(e,r),r+=2},a["OS/2"].version5=function(e,r,n){var t=a._bin;return r=a["OS/2"].version2(e,r,n),n.usLowerOpticalPointSize=t.readUshort(e,r),r+=2,n.usUpperOpticalPointSize=t.readUshort(e,r),r+=2},a.post={},a.post.parse=function(e,r,n){var t=a._bin,o={};return o.version=t.readFixed(e,r),r+=4,o.italicAngle=t.readFixed(e,r),r+=4,o.underlinePosition=t.readShort(e,r),r+=2,o.underlineThickness=t.readShort(e,r),r+=2,o},a.SVG={},a.SVG.parse=function(e,r,n){var t=a._bin,o={entries:[]},i=r;t.readUshort(e,r),r+=2;var c=t.readUint(e,r);r+=4,t.readUint(e,r),r+=4,r=c+i;var l=t.readUshort(e,r);r+=2;for(var s=0;s<l;s++){var u=t.readUshort(e,r);r+=2;var h=t.readUshort(e,r);r+=2;var p=t.readUint(e,r);r+=4;var d=t.readUint(e,r);r+=4;for(var f=new Uint8Array(e.buffer,i+p+c,d),m=t.readUTF8(f,0,f.length),v=u;v<=h;v++)o.entries[v]=m}return o},a.SVG.toPath=function(e){var r={cmds:[],crds:[]};if(null==e)return r;for(var n=(new DOMParser).parseFromString(e,"image/svg+xml").firstChild;"svg"!=n.tagName;)n=n.nextSibling;var t=n.getAttribute("viewBox");t=t?t.trim().split(" ").map(parseFloat):[0,0,1e3,1e3],a.SVG._toPath(n.children,r);for(var o=0;o<r.crds.length;o+=2){var i=r.crds[o],c=r.crds[o+1];i-=t[0],c=-(c-=t[1]),r.crds[o]=i,r.crds[o+1]=c}return r},a.SVG._toPath=function(e,r,n){for(var t=0;t<e.length;t++){var o=e[t],i=o.tagName,c=o.getAttribute("fill");if(null==c&&(c=n),"g"==i)a.SVG._toPath(o.children,r,c);else if("path"==i){r.cmds.push(c||"#000000");var l=o.getAttribute("d"),s=a.SVG._tokens(l);a.SVG._toksToPath(s,r),r.cmds.push("X")}else"defs"==i||console.log(i,o)}},a.SVG._tokens=function(e){for(var a=[],r=0,n=!1,t="";r<e.length;){var o=e.charCodeAt(r),i=e.charAt(r);r++;var c=48<=o&&o<=57||"."==i||"-"==i;n?"-"==i?(a.push(parseFloat(t)),t=i):c?t+=i:(a.push(parseFloat(t)),","!=i&&" "!=i&&a.push(i),n=!1):c?(t=i,n=!0):","!=i&&" "!=i&&a.push(i)}return n&&a.push(parseFloat(t)),a},a.SVG._toksToPath=function(e,r){for(var n=0,t=0,o=0,i=0,c=0,l={M:2,L:2,H:1,V:1,S:4,C:6},s=r.cmds,u=r.crds;n<e.length;){var h=e[n];if(n++,"z"==h)s.push("Z"),t=i,o=c;else for(var p=h.toUpperCase(),d=l[p],f=a.SVG._reps(e,n,d),m=0;m<f;m++){var v=0,g=0;if(h!=p&&(v=t,g=o),"M"==p)t=v+e[n++],o=g+e[n++],s.push("M"),u.push(t,o),i=t,c=o;else if("L"==p)t=v+e[n++],o=g+e[n++],s.push("L"),u.push(t,o);else if("H"==p)t=v+e[n++],s.push("L"),u.push(t,o);else if("V"==p)o=g+e[n++],s.push("L"),u.push(t,o);else if("C"==p){var b=v+e[n++],y=g+e[n++],S=v+e[n++],U=g+e[n++],x=v+e[n++],M=g+e[n++];s.push("C"),u.push(b,y,S,U,x,M),t=x,o=M}else if("S"==p){var C=Math.max(u.length-4,0);b=t+t-u[C],y=o+o-u[C+1],S=v+e[n++],U=g+e[n++],x=v+e[n++],M=g+e[n++],s.push("C"),u.push(b,y,S,U,x,M),t=x,o=M}else console.log("Unknown SVG command "+h)}}},a.SVG._reps=function(e,a,r){for(var n=a;n<e.length&&"string"!=typeof e[n];)n+=r;return(n-a)/r},null==a&&(a={}),null==a.U&&(a.U={}),a.U.codeToGlyph=function(e,a){var r=e.cmap,n=-1;if(null!=r.p0e4?n=r.p0e4:null!=r.p3e1?n=r.p3e1:null!=r.p1e0?n=r.p1e0:null!=r.p0e3&&(n=r.p0e3),-1==n)throw"no familiar platform and encoding!";var t=r.tables[n];if(0==t.format)return a>=t.map.length?0:t.map[a];if(4==t.format){for(var o=-1,i=0;i<t.endCount.length;i++)if(a<=t.endCount[i]){o=i;break}return-1==o||t.startCount[o]>a?0:65535&(0!=t.idRangeOffset[o]?t.glyphIdArray[a-t.startCount[o]+(t.idRangeOffset[o]>>1)-(t.idRangeOffset.length-o)]:a+t.idDelta[o])}if(12==t.format){if(a>t.groups[t.groups.length-1][1])return 0;for(i=0;i<t.groups.length;i++){var c=t.groups[i];if(c[0]<=a&&a<=c[1])return c[2]+(a-c[0])}return 0}throw"unknown cmap table format "+t.format},a.U.glyphToPath=function(e,r){var n={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[r]){var t=e.SVG.entries[r];return null==t?n:("string"==typeof t&&(t=a.SVG.toPath(t),e.SVG.entries[r]=t),t)}if(e.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},i=e.CFF,c=e.CFF.Private;if(i.ROS){for(var l=0;i.FDSelect[l+2]<=r;)l+=2;c=i.FDArray[i.FDSelect[l+1]].Private}a.U._drawCFF(e.CFF.CharStrings[r],o,i,c,n)}else e.glyf&&a.U._drawGlyf(r,e,n);return n},a.U._drawGlyf=function(e,r,n){var t=r.glyf[e];null==t&&(t=r.glyf[e]=a.glyf._parseGlyf(r,e)),null!=t&&(t.noc>-1?a.U._simpleGlyph(t,n):a.U._compoGlyph(t,r,n))},a.U._simpleGlyph=function(e,r){for(var n=0;n<e.noc;n++){for(var t=0==n?0:e.endPts[n-1]+1,o=e.endPts[n],i=t;i<=o;i++){var c=i==t?o:i-1,l=i==o?t:i+1,s=1&e.flags[i],u=1&e.flags[c],h=1&e.flags[l],p=e.xs[i],d=e.ys[i];if(i==t)if(s){if(!u){a.U.P.moveTo(r,p,d);continue}a.U.P.moveTo(r,e.xs[c],e.ys[c])}else u?a.U.P.moveTo(r,e.xs[c],e.ys[c]):a.U.P.moveTo(r,(e.xs[c]+p)/2,(e.ys[c]+d)/2);s?u&&a.U.P.lineTo(r,p,d):h?a.U.P.qcurveTo(r,p,d,e.xs[l],e.ys[l]):a.U.P.qcurveTo(r,p,d,(p+e.xs[l])/2,(d+e.ys[l])/2)}a.U.P.closePath(r)}},a.U._compoGlyph=function(e,r,n){for(var t=0;t<e.parts.length;t++){var o={cmds:[],crds:[]},i=e.parts[t];a.U._drawGlyf(i.glyphIndex,r,o);for(var c=i.m,l=0;l<o.crds.length;l+=2){var s=o.crds[l],u=o.crds[l+1];n.crds.push(s*c.a+u*c.b+c.tx),n.crds.push(s*c.c+u*c.d+c.ty)}for(l=0;l<o.cmds.length;l++)n.cmds.push(o.cmds[l])}},a.U._getGlyphClass=function(e,r){var n=a._lctf.getInterval(r,e);return-1==n?0:r[n+2]},a.U.getPairAdjustment=function(e,r,n){if(e.GPOS)for(var t=e.GPOS,o=t.lookupList,i=t.featureList,c=[],l=0;l<i.length;l++){var s=i[l];if("kern"==s.tag)for(var u=0;u<s.tab.length;u++)if(!c[s.tab[u]]){c[s.tab[u]]=!0;for(var h=o[s.tab[u]],p=0;p<h.tabs.length;p++)if(null!=h.tabs[l]){var d,f=h.tabs[p];if(!f.coverage||-1!=(d=a._lctf.coverageIndex(f.coverage,r)))if(1==h.ltype);else if(2==h.ltype){var m;if(1==f.fmt){var v=f.pairsets[d];for(l=0;l<v.length;l++)v[l].gid2==n&&(m=v[l])}else if(2==f.fmt){var g=a.U._getGlyphClass(r,f.classDef1),b=a.U._getGlyphClass(n,f.classDef2);m=f.matrix[g][b]}if(m&&m.val2)return m.val2[2]}}}}if(e.kern){var y=e.kern.glyph1.indexOf(r);if(-1!=y){var S=e.kern.rval[y].glyph2.indexOf(n);if(-1!=S)return e.kern.rval[y].vals[S]}}return 0},a.U.stringToGlyphs=function(e,r){for(var n=[],t=0;t<r.length;t++)(o=r.codePointAt(t))>65535&&t++,n.push(a.U.codeToGlyph(e,o));for(t=0;t<r.length;t++){var o;if(2367==(o=r.codePointAt(t))){var i=n[t-1];n[t-1]=n[t],n[t]=i}o>65535&&t++}var c=e.GSUB;if(null==c)return n;for(var l=c.lookupList,s=c.featureList,u=["rlig","liga","mset","isol","init","fina","medi","half","pres","blws"],h=[],p=0;p<s.length;p++){var d=s[p];if(-1!=u.indexOf(d.tag))for(var f=0;f<d.tab.length;f++)if(!h[d.tab[f]]){h[d.tab[f]]=!0;for(var m=l[d.tab[f]],v=0;v<n.length;v++){var g=a.U._getWPfeature(r,v);-1!="isol,init,fina,medi".indexOf(d.tag)&&d.tag!=g||a.U._applySubs(n,v,m,l)}}}return n},a.U._getWPfeature=function(e,a){var r='\n\t" ,.:;!?()  \u060c',n="\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0671\u0672\u0673\u0675\u0676\u0677\u0688\u0689\u068a\u068b\u068c\u068d\u068e\u068f\u0690\u0691\u0692\u0693\u0694\u0695\u0696\u0697\u0698\u0699\u06c0\u06c3\u06c4\u06c5\u06c6\u06c7\u06c8\u06c9\u06ca\u06cb\u06cd\u06cf\u06d2\u06d3\u06d5\u06ee\u06ef\u0710\u0715\u0716\u0717\u0718\u0719\u071e\u0728\u072a\u072c\u072f\u074d\u0759\u075a\u075b\u076b\u076c\u0771\u0773\u0774\u0778\u0779\u0840\u0846\u0847\u0849\u0854\u0867\u0869\u086a\u08aa\u08ab\u08ac\u08ae\u08b1\u08b2\u08b9\u0ac5\u0ac7\u0ac9\u0aca\u0ace\u0acf\u0ad0\u0ad1\u0ad2\u0add\u0ae1\u0ae4\u0aef\u0b81\u0b83\u0b84\u0b85\u0b89\u0b8c\u0b8e\u0b8f\u0b91\u0ba9\u0baa\u0bab\u0bac",t=0==a||-1!=r.indexOf(e[a-1]),o=a==e.length-1||-1!=r.indexOf(e[a+1]);return t||-1==n.indexOf(e[a-1])||(t=!0),o||-1==n.indexOf(e[a])||(o=!0),o||-1=="\ua872\u0acd\u0ad7".indexOf(e[a+1])||(o=!0),t||-1=="\ua872\u0acd\u0ad7".indexOf(e[a])||(t=!0),t?o?"isol":"init":o?"fina":"medi"},a.U._applySubs=function(e,r,n,t){for(var o=e.length-r-1,i=0;i<n.tabs.length;i++)if(null!=n.tabs[i]){var c,l=n.tabs[i];if(!l.coverage||-1!=(c=a._lctf.coverageIndex(l.coverage,e[r])))if(1==n.ltype)e[r],1==l.fmt?e[r]=e[r]+l.delta:e[r]=l.newg[c];else if(4==n.ltype)for(var s=l.vals[c],u=0;u<s.length;u++){var h=s[u],p=h.chain.length;if(!(p>o)){for(var d=!0,f=0,m=0;m<p;m++){for(;-1==e[r+f+(1+m)];)f++;h.chain[m]!=e[r+f+(1+m)]&&(d=!1)}if(d){for(e[r]=h.nglyph,m=0;m<p+f;m++)e[r+m+1]=-1;break}}}else if(5==n.ltype&&2==l.fmt)for(var v=a._lctf.getInterval(l.cDef,e[r]),g=l.cDef[v+2],b=l.scset[g],y=0;y<b.length;y++){var S=b[y],U=S.input;if(!(U.length>o)){for(d=!0,m=0;m<U.length;m++){var x=a._lctf.getInterval(l.cDef,e[r+1+m]);if(-1==v&&l.cDef[x+2]!=U[m]){d=!1;break}}if(d){var M=S.substLookupRecords;for(u=0;u<M.length;u+=2)M[u],M[u+1]}}}else if(6==n.ltype&&3==l.fmt){if(!a.U._glsCovered(e,l.backCvg,r-l.backCvg.length))continue;if(!a.U._glsCovered(e,l.inptCvg,r))continue;if(!a.U._glsCovered(e,l.ahedCvg,r+l.inptCvg.length))continue;var C=l.lookupRec;for(y=0;y<C.length;y+=2){v=C[y];var w=t[C[y+1]];a.U._applySubs(e,r+v,w,t)}}}},a.U._glsCovered=function(e,r,n){for(var t=0;t<r.length;t++)if(-1==a._lctf.coverageIndex(r[t],e[n+t]))return!1;return!0},a.U.glyphsToPath=function(e,r,n){for(var t={cmds:[],crds:[]},o=0,i=0;i<r.length;i++){var c=r[i];if(-1!=c){for(var l=i<r.length-1&&-1!=r[i+1]?r[i+1]:0,s=a.U.glyphToPath(e,c),u=0;u<s.crds.length;u+=2)t.crds.push(s.crds[u]+o),t.crds.push(s.crds[u+1]);for(n&&t.cmds.push(n),u=0;u<s.cmds.length;u++)t.cmds.push(s.cmds[u]);n&&t.cmds.push("X"),o+=e.hmtx.aWidth[c],i<r.length-1&&(o+=a.U.getPairAdjustment(e,c,l))}}return t},a.U.pathToSVG=function(e,a){null==a&&(a=5);for(var r=[],n=0,t={M:2,L:2,Q:4,C:6},o=0;o<e.cmds.length;o++){var i=e.cmds[o],c=n+(t[i]?t[i]:0);for(r.push(i);n<c;){var l=e.crds[n++];r.push(parseFloat(l.toFixed(a))+(n==c?"":" "))}}return r.join("")},a.U.pathToContext=function(e,a){for(var r=0,n=e.crds,t=0;t<e.cmds.length;t++){var o=e.cmds[t];"M"==o?(a.moveTo(n[r],n[r+1]),r+=2):"L"==o?(a.lineTo(n[r],n[r+1]),r+=2):"C"==o?(a.bezierCurveTo(n[r],n[r+1],n[r+2],n[r+3],n[r+4],n[r+5]),r+=6):"Q"==o?(a.quadraticCurveTo(n[r],n[r+1],n[r+2],n[r+3]),r+=4):"#"==o.charAt(0)?(a.beginPath(),a.fillStyle=o):"Z"==o?a.closePath():"X"==o&&a.fill()}},a.U.P={},a.U.P.moveTo=function(e,a,r){e.cmds.push("M"),e.crds.push(a,r)},a.U.P.lineTo=function(e,a,r){e.cmds.push("L"),e.crds.push(a,r)},a.U.P.curveTo=function(e,a,r,n,t,o,i){e.cmds.push("C"),e.crds.push(a,r,n,t,o,i)},a.U.P.qcurveTo=function(e,a,r,n,t){e.cmds.push("Q"),e.crds.push(a,r,n,t)},a.U.P.closePath=function(e){e.cmds.push("Z")},a.U._drawCFF=function(e,r,n,t,o){for(var i=r.stack,c=r.nStems,l=r.haveWidth,s=r.width,u=r.open,h=0,p=r.x,d=r.y,f=0,m=0,v=0,g=0,b=0,y=0,S=0,U=0,x=0,M=0,C={val:0,size:0};h<e.length;){a.CFF.getCharString(e,h,C);var w=C.val;if(h+=C.size,"o1"==w||"o18"==w)i.length%2!==0&&!l&&(s=i.shift()+t.nominalWidthX),c+=i.length>>1,i.length=0,l=!0;else if("o3"==w||"o23"==w)i.length%2!==0&&!l&&(s=i.shift()+t.nominalWidthX),c+=i.length>>1,i.length=0,l=!0;else if("o4"==w)i.length>1&&!l&&(s=i.shift()+t.nominalWidthX,l=!0),u&&a.U.P.closePath(o),d+=i.pop(),a.U.P.moveTo(o,p,d),u=!0;else if("o5"==w)for(;i.length>0;)p+=i.shift(),d+=i.shift(),a.U.P.lineTo(o,p,d);else if("o6"==w||"o7"==w)for(var T=i.length,_="o6"==w,F=0;F<T;F++){var A=i.shift();_?p+=A:d+=A,_=!_,a.U.P.lineTo(o,p,d)}else if("o8"==w||"o24"==w){T=i.length;for(var k=0;k+6<=T;)f=p+i.shift(),m=d+i.shift(),v=f+i.shift(),g=m+i.shift(),p=v+i.shift(),d=g+i.shift(),a.U.P.curveTo(o,f,m,v,g,p,d),k+=6;"o24"==w&&(p+=i.shift(),d+=i.shift(),a.U.P.lineTo(o,p,d))}else{if("o11"==w)break;if("o1234"==w||"o1235"==w||"o1236"==w||"o1237"==w)"o1234"==w&&(m=d,v=(f=p+i.shift())+i.shift(),M=g=m+i.shift(),y=g,U=d,p=(S=(b=(x=v+i.shift())+i.shift())+i.shift())+i.shift(),a.U.P.curveTo(o,f,m,v,g,x,M),a.U.P.curveTo(o,b,y,S,U,p,d)),"o1235"==w&&(f=p+i.shift(),m=d+i.shift(),v=f+i.shift(),g=m+i.shift(),x=v+i.shift(),M=g+i.shift(),b=x+i.shift(),y=M+i.shift(),S=b+i.shift(),U=y+i.shift(),p=S+i.shift(),d=U+i.shift(),i.shift(),a.U.P.curveTo(o,f,m,v,g,x,M),a.U.P.curveTo(o,b,y,S,U,p,d)),"o1236"==w&&(f=p+i.shift(),m=d+i.shift(),v=f+i.shift(),M=g=m+i.shift(),y=g,S=(b=(x=v+i.shift())+i.shift())+i.shift(),U=y+i.shift(),p=S+i.shift(),a.U.P.curveTo(o,f,m,v,g,x,M),a.U.P.curveTo(o,b,y,S,U,p,d)),"o1237"==w&&(f=p+i.shift(),m=d+i.shift(),v=f+i.shift(),g=m+i.shift(),x=v+i.shift(),M=g+i.shift(),b=x+i.shift(),y=M+i.shift(),S=b+i.shift(),U=y+i.shift(),Math.abs(S-p)>Math.abs(U-d)?p=S+i.shift():d=U+i.shift(),a.U.P.curveTo(o,f,m,v,g,x,M),a.U.P.curveTo(o,b,y,S,U,p,d));else if("o14"==w){if(i.length>0&&!l&&(s=i.shift()+n.nominalWidthX,l=!0),4==i.length){var D=i.shift(),P=i.shift(),B=i.shift(),O=i.shift(),I=a.CFF.glyphBySE(n,B),G=a.CFF.glyphBySE(n,O);a.U._drawCFF(n.CharStrings[I],r,n,t,o),r.x=D,r.y=P,a.U._drawCFF(n.CharStrings[G],r,n,t,o)}u&&(a.U.P.closePath(o),u=!1)}else if("o19"==w||"o20"==w)i.length%2!==0&&!l&&(s=i.shift()+t.nominalWidthX),c+=i.length>>1,i.length=0,l=!0,h+=c+7>>3;else if("o21"==w)i.length>2&&!l&&(s=i.shift()+t.nominalWidthX,l=!0),d+=i.pop(),p+=i.pop(),u&&a.U.P.closePath(o),a.U.P.moveTo(o,p,d),u=!0;else if("o22"==w)i.length>1&&!l&&(s=i.shift()+t.nominalWidthX,l=!0),p+=i.pop(),u&&a.U.P.closePath(o),a.U.P.moveTo(o,p,d),u=!0;else if("o25"==w){for(;i.length>6;)p+=i.shift(),d+=i.shift(),a.U.P.lineTo(o,p,d);f=p+i.shift(),m=d+i.shift(),v=f+i.shift(),g=m+i.shift(),p=v+i.shift(),d=g+i.shift(),a.U.P.curveTo(o,f,m,v,g,p,d)}else if("o26"==w)for(i.length%2&&(p+=i.shift());i.length>0;)f=p,m=d+i.shift(),p=v=f+i.shift(),d=(g=m+i.shift())+i.shift(),a.U.P.curveTo(o,f,m,v,g,p,d);else if("o27"==w)for(i.length%2&&(d+=i.shift());i.length>0;)m=d,v=(f=p+i.shift())+i.shift(),g=m+i.shift(),p=v+i.shift(),d=g,a.U.P.curveTo(o,f,m,v,g,p,d);else if("o10"==w||"o29"==w){var E="o10"==w?t:n;if(0==i.length)console.log("error: empty stack");else{var R=i.pop(),L=E.Subrs[R+E.Bias];r.x=p,r.y=d,r.nStems=c,r.haveWidth=l,r.width=s,r.open=u,a.U._drawCFF(L,r,n,t,o),p=r.x,d=r.y,c=r.nStems,l=r.haveWidth,s=r.width,u=r.open}}else if("o30"==w||"o31"==w){var j=i.length,N=(k=0,"o31"==w);for(k+=j-(T=-3&j);k<T;)N?(m=d,v=(f=p+i.shift())+i.shift(),d=(g=m+i.shift())+i.shift(),T-k==5?(p=v+i.shift(),k++):p=v,N=!1):(f=p,m=d+i.shift(),v=f+i.shift(),g=m+i.shift(),p=v+i.shift(),T-k==5?(d=g+i.shift(),k++):d=g,N=!0),a.U.P.curveTo(o,f,m,v,g,p,d),k+=4}else{if("o"==(w+"").charAt(0))throw console.log("Unknown operation: "+w,e),w;i.push(w)}}}r.x=p,r.y=d,r.nStems=c,r.haveWidth=l,r.width=s,r.open=u},a},function(){var e=function(){var e={};function a(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function r(e,r){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=r,this.destLen=0,this.ltree=new a,this.dtree=new a}var n=new a,t=new a,o=new Uint8Array(30),i=new Uint16Array(30),c=new Uint8Array(30),l=new Uint16Array(30),s=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=new a,h=new Uint8Array(320);function p(e,a,r,n){var t,o;for(t=0;t<r;++t)e[t]=0;for(t=0;t<30-r;++t)e[t+r]=t/r|0;for(o=n,t=0;t<30;++t)a[t]=o,o+=1<<e[t]}var d=new Uint16Array(16);function f(e,a,r,n){var t,o;for(t=0;t<16;++t)e.table[t]=0;for(t=0;t<n;++t)e.table[a[r+t]]++;for(e.table[0]=0,o=0,t=0;t<16;++t)d[t]=o,o+=e.table[t];for(t=0;t<n;++t)a[r+t]&&(e.trans[d[a[r+t]]++]=t)}function m(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var a=1&e.tag;return e.tag>>>=1,a}function v(e,a,r){if(!a)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-a;return e.tag>>>=a,e.bitcount-=a,n+r}function g(e,a){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,n=0,t=0,o=e.tag;do{n=2*n+(1&o),o>>>=1,++t,r+=a.table[t],n-=a.table[t]}while(n>=0);return e.tag=o,e.bitcount-=t,a.trans[r+n]}function b(e,a,r){var n,t,o,i,c,l;for(n=v(e,5,257),t=v(e,5,1),o=v(e,4,4),i=0;i<19;++i)h[i]=0;for(i=0;i<o;++i){var p=v(e,3,0);h[s[i]]=p}for(f(u,h,0,19),c=0;c<n+t;){var d=g(e,u);switch(d){case 16:var m=h[c-1];for(l=v(e,2,3);l;--l)h[c++]=m;break;case 17:for(l=v(e,3,3);l;--l)h[c++]=0;break;case 18:for(l=v(e,7,11);l;--l)h[c++]=0;break;default:h[c++]=d}}f(a,h,0,n),f(r,h,n,t)}function y(e,a,r){for(;;){var n,t,s,u,h=g(e,a);if(256===h)return 0;if(h<256)e.dest[e.destLen++]=h;else for(n=v(e,o[h-=257],i[h]),t=g(e,r),u=s=e.destLen-v(e,c[t],l[t]);u<s+n;++u)e.dest[e.destLen++]=e.dest[u]}}function S(e){for(var a,r;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((a=256*(a=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,r=a;r;--r)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}return function(e,a){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)a.table[r]=0;for(a.table[5]=32,r=0;r<32;++r)a.trans[r]=r}(n,t),p(o,i,4,3),p(c,l,2,1),o[28]=0,i[28]=258,e.exports=function(e,a){var o,i,c=new r(e,a);do{switch(o=m(c),v(c,2,0)){case 0:i=S(c);break;case 1:i=y(c,n,t);break;case 2:b(c,c.ltree,c.dtree),i=y(c,c.ltree,c.dtree);break;default:i=-3}if(0!==i)throw new Error("Data error")}while(!o);return c.destLen<c.dest.length?"function"===typeof c.dest.slice?c.dest.slice(0,c.destLen):c.dest.subarray(0,c.destLen):c.dest},e.exports}();return function(a){return function(e,a){var r=new DataView(e),n=0;function t(){var e=r.getUint16(n);return n+=2,e}function o(){var e=r.getUint32(n);return n+=4,e}function i(e){b.setUint16(y,e),y+=2}function c(e){b.setUint32(y,e),y+=4}for(var l={signature:o(),flavor:o(),length:o(),numTables:t(),reserved:t(),totalSfntSize:o(),majorVersion:t(),minorVersion:t(),metaOffset:o(),metaLength:o(),metaOrigLength:o(),privOffset:o(),privLength:o()},s=0;Math.pow(2,s)<=l.numTables;)s++;s--;for(var u=16*Math.pow(2,s),h=16*l.numTables-u,p=12,d=[],f=0;f<l.numTables;f++)d.push({tag:o(),offset:o(),compLength:o(),origLength:o(),origChecksum:o()}),p+=16;var m,v=new Uint8Array(12+16*d.length+d.reduce((function(e,a){return e+a.origLength+4}),0)),g=v.buffer,b=new DataView(g),y=0;return c(l.flavor),i(l.numTables),i(u),i(s),i(h),d.forEach((function(e){c(e.tag),c(e.origChecksum),c(p),c(e.origLength),e.outOffset=p,(p+=e.origLength)%4!=0&&(p+=4-p%4)})),d.forEach((function(r){var n=e.slice(r.offset,r.offset+r.compLength);if(r.compLength!=r.origLength){var t=new Uint8Array(r.origLength);a(new Uint8Array(n,2),t)}else t=new Uint8Array(n);v.set(t,r.outOffset);var o=0;(p=r.outOffset+r.origLength)%4!=0&&(o=4-p%4),v.set(new Uint8Array(o).buffer,r.outOffset+r.origLength),m=p+o})),g.slice(0,m)}(a,e)}},function(e,a){var r={M:2,L:2,Q:4,C:6,Z:0};return function(n){var t=new Uint8Array(n,0,4),o=e._bin.readASCII(t,0,4);if("wOFF"===o)n=a(n);else if("wOF2"===o)throw new Error("woff2 fonts not supported");return function(a){var n=Object.create(null),t={unitsPerEm:a.head.unitsPerEm,ascender:a.hhea.ascender,descender:a.hhea.descender,forEachGlyph:function(o,i,c,l){var s=0,u=1/t.unitsPerEm*i,h=e.U.stringToGlyphs(a,o),p=0;return h.forEach((function(t){if(-1!==t){var h=n[t];if(!h){var d,f,m,v,g=e.U.glyphToPath(a,t),b=g.cmds,y=g.crds;if(y.length){d=f=1/0,m=v=-1/0;for(var S=0,U=y.length;S<U;S+=2){var x=y[S],M=y[S+1];x<d&&(d=x),M<f&&(f=M),x>m&&(m=x),M>v&&(v=M)}}else d=m=f=v=0;h=n[t]={index:t,advanceWidth:a.hmtx.aWidth[t],xMin:d,yMin:f,xMax:m,yMax:v,pathCommandCount:b.length,forEachPathCommand:function(e){for(var a=0,n=[],t=0,o=b.length;t<o;t++){var i=r[b[t]];n.length=1+i,n[0]=b[t];for(var c=1;c<=i;c++)n[c]=y[a++];e.apply(null,n)}}}}l.call(null,h,s,p),h.advanceWidth&&(s+=h.advanceWidth*u),c&&(s+=c*i)}p+=o.codePointAt(p)>65535?2:1})),s}};return t}(e.parse(n)[0])}}],init:function(e,a,r){return r(e(),a())}}),i={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,textureWidth:2048},c=new a.Color,l=Object.create(null);function s(e,r){if((e=u({},e)).font=(h=e.font||i.defaultFontURL,t||(t="undefined"===typeof document?{}:document.createElement("a")),t.href=h,t.href),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||i.sdfGlyphSize,null!=e.colorRanges){var n={};for(var o in e.colorRanges)if(e.colorRanges.hasOwnProperty(o)){var s=e.colorRanges[o];"number"!==typeof s&&(s=c.set(s).getHex()),n[o]=s}e.colorRanges=n}var h;Object.freeze(e);var d=i.textureWidth,f=e.sdfGlyphSize,m=e.font+"@"+f,v=l[m];v||((v=l[m]={sdfTexture:new a.DataTexture(new Uint8Array(f*d),d,f,a.LuminanceFormat,void 0,void 0,void 0,void 0,a.LinearFilter,a.LinearFilter)}).sdfTexture.font=e.font),p(e).then((function(a){a.newGlyphSDFs&&(a.newGlyphSDFs.forEach((function(e){for(var a=e.textureData,r=e.atlasIndex,n=v.sdfTexture.image;n.data.length<(r+1)*f*f;){var t=new Uint8Array(2*n.data.length);t.set(n.data),n.data=t,n.height*=2}for(var o=n.width/f,i=0;i<f;i++)for(var c=i*f,l=n.width*f*Math.floor(r/o)+r%o*f+i*n.width,s=0;s<f;s++)n.data[l+s]=a[c+s]})),v.sdfTexture.needsUpdate=!0),r(Object.freeze({parameters:e,sdfTexture:v.sdfTexture,sdfGlyphSize:f,sdfMinDistancePercent:1/8,glyphBounds:a.glyphBounds,glyphAtlasIndices:a.glyphAtlasIndices,glyphColors:a.glyphColors,caretPositions:a.caretPositions,caretHeight:a.caretHeight,chunkedBounds:a.chunkedBounds,ascender:a.ascender,descender:a.descender,lineHeight:a.lineHeight,topBaseline:a.topBaseline,totalBounds:a.totalBounds,totalBlockSize:a.totalBlockSize,timings:a.timings}))}))}function u(e,a){for(var r in a)a.hasOwnProperty(r)&&(e[r]=a[r]);return e}var h=r.defineWorkerModule({name:"FontProcessor",dependencies:[i,1/8,o,function(e){var a=e.xMin,r=e.yMin,n=e.xMax-a,t=e.yMax-r,o={0:null,1:null,2:null,3:null,data:null,cx:Math.round(a+n/2),cy:Math.round(r+t/2),r:Math.pow(2,Math.floor(Math.log(Math.max(n,t))*Math.LOG2E)),minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};function i(e){!function e(a,r){if(!1!==r(a)&&!a.data)for(var n=0;n<4;n++)null!==a[n]&&e(a[n],r)}(o,e)}function c(e,a,r,n,t,o){var i=t-r,c=o-n,l=i*i+c*c,s=l?Math.max(0,Math.min(1,((e-r)*i+(a-n)*c)/l)):0,u=e-(r+s*i),h=a-(n+s*c);return u*u+h*h}return{addLineSegment:function(e,a,r,n){!function e(a,r){var n=a.minX,t=a.minY,o=a.maxX,i=a.maxY,c=a.cx,l=a.cy;n<r.minX&&(r.minX=n),t<r.minY&&(r.minY=t),o>r.maxX&&(r.maxX=o),i>r.maxY&&(r.maxY=i);var s=r.data;if(s)if(s.cx===c&&s.cy===l){for(;s.next;)s=s.next;s.next=a}else r.data=null,e(s,r),e(a,r);else{var u=(l<r.cy?0:2)+(c<r.cx?0:1);r[u]?e(a,r[u]):r[u]={0:null,1:null,2:null,3:null,data:a,cx:r.cx+r.r/2*(u%2?1:-1),cy:r.cy+r.r/2*(u<2?-1:1),r:r.r/2,minX:n,minY:t,maxX:o,maxY:i}}}({x0:e,y0:a,x1:r,y1:n,cx:(e+r)/2,cy:(a+n)/2,minX:Math.min(e,r),minY:Math.min(a,n),maxX:Math.max(e,r),maxY:Math.max(a,n),next:null},o)},findNearestSignedDistance:function(e,a,r){var n=r,t=n*n;return i((function(r){if(e-n>r.maxX||e+n<r.minX||a-n>r.maxY||a+n<r.minY)return!1;for(var o=r.data;o;o=o.next){var i=c(e,a,o.x0,o.y0,o.x1,o.y1);i<t&&(t=i,n=Math.sqrt(i))}})),function(e,a){var r=!1;return i((function(n){if(n.maxX<e||n.minY>a||n.maxY<a)return!1;for(var t=n.data;t;t=t.next){var o=t.x0,i=t.y0,c=t.x1,l=t.y1;i>a!==l>a&&e<(c-o)*(a-i)/(l-i)+o&&(r=!r)}})),r}(e,a)||(n=-n),n}}},function(e,a){var r=a.sdfDistancePercent;function n(e,a,r,n,t,o,i){var c=1-i;return{x:c*c*e+2*c*i*r+i*i*t,y:c*c*a+2*c*i*n+i*i*o}}function t(e,a,r,n,t,o,i,c,l){var s=1-l;return{x:s*s*s*e+3*s*s*l*r+3*s*l*l*t+l*l*l*i,y:s*s*s*a+3*s*s*l*n+3*s*l*l*o+l*l*l*c}}return function(a,o){var i=new Uint8Array(o*o),c=a.xMax-a.xMin,l=a.yMax-a.yMin,s=Math.max(c,l)*r,u=(c+2*s)/o,h=(l+2*s)/o,p=a.xMin-s-u,d=a.yMin-s-h,f=a.xMax+s+u,m=a.yMax+s+h;if(a.pathCommandCount){var v,g,b,y,S=e(a);a.forEachPathCommand((function(e,a,r,o,i,c,l){switch(e){case"M":b=v=a,y=g=r;break;case"L":a===b&&r===y||S.addLineSegment(b,y,b=a,y=r);break;case"Q":for(var s={x:b,y:y},u=1;u<16;u++){var h=n(b,y,a,r,o,i,u/15);S.addLineSegment(s.x,s.y,h.x,h.y),s=h}b=o,y=i;break;case"C":for(var p={x:b,y:y},d=1;d<16;d++){var f=t(b,y,a,r,o,i,c,l,d/15);S.addLineSegment(p.x,p.y,f.x,f.y),p=f}b=c,y=l;break;case"Z":b===v&&y===g||S.addLineSegment(b,y,v,g)}}));for(var U=0;U<o;U++)for(var x=0;x<o;x++){var M=S.findNearestSignedDistance(p+(f-p)*(U+.5)/o,d+(m-d)*(x+.5)/o,s),C=isFinite(M)?Math.round(255*(1+M/s)*.5):M;C=Math.max(0,Math.min(255,C)),i[x*o+U]=C}}return{textureData:i,renderingBounds:[p,d,f,m]}}},function(e,a,r){var n=r.defaultFontUrl,t=Object.create(null),o=Object.create(null);function i(a,r){a||(a=n);var t=o[a];t?t.pending?t.pending.push(r):r(t):(o[a]={pending:[r]},function(a,r){!function t(){var o=function(e){console.error("Failure loading font "+a+(a===n?"":"; trying fallback"),e),a!==n&&(a=n,t())};try{var i=new XMLHttpRequest;i.open("get",a,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status>=400)o(new Error(i.statusText));else if(i.status>0)try{var a=e(i.response);r(a)}catch(n){o(n)}},i.onerror=o,i.send()}catch(c){o(c)}}()}(a,(function(e){var r=o[a].pending;o[a]=e,r.forEach((function(a){return a(e)}))})))}function c(e,r,o){var c=e.text;void 0===c&&(c="");var h=e.font;void 0===h&&(h=n);var p=e.sdfGlyphSize;void 0===p&&(p=64);var d=e.fontSize;void 0===d&&(d=1);var f=e.letterSpacing;void 0===f&&(f=0);var m=e.lineHeight;void 0===m&&(m="normal");var v=e.maxWidth;void 0===v&&(v=1/0);var g=e.textAlign;void 0===g&&(g="left");var b=e.textIndent;void 0===b&&(b=0);var y=e.whiteSpace;void 0===y&&(y="normal");var S=e.overflowWrap;void 0===S&&(S="normal");var U=e.anchorX;void 0===U&&(U=0);var x=e.anchorY;void 0===x&&(x=0);var M=e.includeCaretPositions;void 0===M&&(M=!1);var C=e.chunkedBoundsSize;void 0===C&&(C=8192);var w=e.colorRanges;void 0===w&&(w=null),void 0===o&&(o=!1);var T=s(),_={total:0,fontLoad:0,layout:0,sdf:{},sdfTotal:0};c.indexOf("\r")>-1&&(console.warn("FontProcessor.process: got text with \\r chars; normalizing to \\n"),c=c.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),d=+d,f=+f,v=+v,m=m||"normal",b=+b,function(e,a,r){e||(e=n);var o=e+"@"+a,c=t[o];c?r(c):i(e,(function(e){c=t[o]||(t[o]={fontObj:e,glyphs:{},glyphCount:0}),r(c)}))}(h,p,(function(e){var n=e.fontObj,t=isFinite(v),i=null,h=null,F=null,A=null,k=null,D=null,P=null,B=0,O=0,I="nowrap"!==y,G=n.ascender,E=n.descender,R=n.unitsPerEm;_.fontLoad=s()-T;var L=s(),j=d/R;"normal"===m&&(m=(G-E)/R);var N=((m*=d)-(G-E)*j)/2,z=-(d+N),V=Math.min(m,(G-E)*j),W=(G+E)/2*j-V/2,H=b,Y=new u,K=[Y];if(n.forEachGlyph(c,d,f,(function(e,a,r){var n,o=c.charAt(r),i=e.advanceWidth*j,l=Y.count;if("isEmpty"in e||(e.isWhitespace=!!o&&/\s/.test(o),e.isEmpty=e.xMin===e.xMax||e.yMin===e.yMax),e.isWhitespace||e.isEmpty||O++,I&&t&&!e.isWhitespace&&a+i+H>v&&l){if(Y.glyphAt(l-1).glyphObj.isWhitespace)n=new u,H=-a;else for(var s=l;s--;){if(0===s&&"break-word"===S){n=new u,H=-a;break}if(Y.glyphAt(s).glyphObj.isWhitespace){var h=(n=Y.splitAt(s+1)).glyphAt(0).x;H-=h;for(var p=n.count;p--;)n.glyphAt(p).x-=h;break}}n&&(Y.isSoftWrapped=!0,Y=n,K.push(Y),B=v)}var m=Y.glyphAt(Y.count);m.glyphObj=e,m.x=a+H,m.width=i,m.charIndex=r,"\n"===o&&(Y=new u,K.push(Y),H=-(a+i+f*d)+b)})),K.forEach((function(e){for(var a=e.count;a--;){var r=e.glyphAt(a),n=r.glyphObj,t=r.x,o=r.width;if(!n.isWhitespace)return e.width=t+o,void(e.width>B&&(B=e.width))}})),!o){var X=0,Z=0;if(U&&("number"===typeof U?X=-U:"string"===typeof U&&(X=-B*("left"===U?0:"center"===U?.5:"right"===U?1:l(U)))),x)if("number"===typeof x)Z=-x;else if("string"===typeof x){var q=K.length*m;Z="top"===x?0:"top-baseline"===x?-z:"middle"===x?q/2:"bottom"===x?q:"bottom-baseline"===x?q-N+E*j:l(x)*q}h=new Float32Array(4*O),F=new Float32Array(O),D=[1/0,1/0,-1/0,-1/0],P=[];var J=z;M&&(k=new Float32Array(3*c.length)),w&&(A=new Uint8Array(3*O));var Q,$,ee=0,ae=-1,re=-1;K.forEach((function(r){var n=r.count,t=r.width;if(n>0){var o=0,l=0;if("center"===g)o=(B-t)/2;else if("right"===g)o=B-t;else if("justify"===g&&r.isSoftWrapped){for(var u=0,d=n;d--;)if(!r.glyphAt(d).glyphObj.isWhitespace){for(;d--;)r.glyphAt(d).glyphObj,r.glyphAt(d).glyphObj.isWhitespace&&u++;break}l=(B-t)/u}for(var f=0;f<n;f++){var v=r.glyphAt(f),b=v.glyphObj;if(o&&(v.x+=o),0!==l&&b.isWhitespace&&(o+=l,v.width+=l),M){var y=v.charIndex;for(k[3*y]=v.x+X,k[3*y+1]=v.x+v.width+X,k[3*y+2]=J+W+Z;y-ae>1;)k[3*(ae+1)]=k[3*ae+1],k[3*(ae+1)+1]=k[3*ae+1],k[3*(ae+1)+2]=k[3*ae+2],ae++;ae=y}if(w)for(var S=v.charIndex;S>re;)re++,w.hasOwnProperty(re)&&($=w[re]);if(!b.isWhitespace&&!b.isEmpty){var U=ee++,x=e.glyphs[b.index];if(!x){var T=s(),O=a(b,p);_.sdf[c.charAt(v.charIndex)]=s()-T,O.atlasIndex=e.glyphCount++,i||(i=[]),i.push(O),x=e.glyphs[b.index]={atlasIndex:O.atlasIndex,glyphObj:b,renderingBounds:O.renderingBounds}}var I=x.renderingBounds,G=4*U,E=h[G]=v.x+I[0]*j+X,R=h[G+1]=J+I[1]*j+Z,L=h[G+2]=v.x+I[2]*j+X,N=h[G+3]=J+I[3]*j+Z;if(E<D[0]&&(D[0]=E),R<D[1]&&(D[1]=R),L>D[2]&&(D[2]=L),N>D[3]&&(D[3]=N),U%C===0&&(Q={start:U,end:U,rect:[1/0,1/0,-1/0,-1/0]},P.push(Q)),Q.end++,E<Q.rect[0]&&(Q.rect[0]=E),R<Q.rect[1]&&(Q.rect[1]=R),L>Q.rect[2]&&(Q.rect[2]=L),N>Q.rect[3]&&(Q.rect[3]=N),F[U]=x.atlasIndex,w){var z=3*U;A[z]=$>>16&255,A[z+1]=$>>8&255,A[z+2]=255&$}}}}J-=m}))}for(var ne in _.sdf)_.sdfTotal+=_.sdf[ne];_.layout=s()-L-_.sdfTotal,_.total=s()-T,r({glyphBounds:h,glyphAtlasIndices:F,caretPositions:k,caretHeight:V,glyphColors:A,chunkedBounds:P,ascender:G*j,descender:E*j,lineHeight:m,topBaseline:z,totalBounds:D,totalBlockSize:[B,K.length*m],newGlyphSDFs:i,timings:_})}))}function l(e){var a=e.match(/^([\d.]+)%$/),r=a?parseFloat(a[1]):NaN;return isNaN(r)?0:r/100}function s(){return(self.performance||Date).now()}function u(){this.data=[]}return u.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/4)},glyphAt:function(e){var a=u.flyweight;return a.data=this.data,a.index=e,a},splitAt:function(e){var a=new u;return a.data=this.data.splice(4*e),a}},u.flyweight=["glyphObj","x","width","charIndex"].reduce((function(e,a,r,n){return Object.defineProperty(e,a,{get:function(){return this.data[4*this.index+r]},set:function(e){this.data[4*this.index+r]=e}}),e}),{data:null,index:0}),{process:c,measure:function(e,a){c(e,(function(e){a({width:e.totalBlockSize[0],height:e.totalBlockSize[1]})}),{metricsOnly:!0})},loadFont:i}}],init:function(e,a,r,n,t,o){return o(r,t(n,{sdfDistancePercent:a}),{defaultFontUrl:e.defaultFontURL})}}),p=r.defineWorkerModule({name:"TextBuilder",dependencies:[h,r.ThenableWorkerModule],init:function(e,a){return function(r){var n=new a;return e.process(r,n.resolve),n}},getTransferables:function(e){var a=[e.glyphBounds.buffer,e.glyphAtlasIndices.buffer];return e.caretPositions&&a.push(e.caretPositions.buffer),e.newGlyphSDFs&&e.newGlyphSDFs.forEach((function(e){a.push(e.textureData.buffer)})),a}}),d={},f=new a.Vector3,m=function(e){function r(){e.call(this),this.detail=1,this.boundingSphere=new a.Sphere,this.boundingBox=new a.Box3}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={detail:{configurable:!0}};return r.prototype.computeBoundingSphere=function(){},r.prototype.computeBoundingBox=function(){},n.detail.set=function(e){var r=this;if(e!==this._detail){this._detail=e,("number"!==typeof e||e<1)&&(e=1);var n=function(e){var r=d[e];return r||(r=d[e]=new a.PlaneBufferGeometry(1,1,e,e).translate(.5,.5,0)),r}(e);["position","normal","uv"].forEach((function(e){r.attributes[e]=n.attributes[e].clone()})),this.setIndex(n.getIndex().clone())}},n.detail.get=function(){return this._detail},r.prototype.updateGlyphs=function(e,a,r,n,t){v(this,"aTroikaGlyphBounds",e,4),v(this,"aTroikaGlyphIndex",a,1),v(this,"aTroikaGlyphColor",t,3),this._chunkedBounds=n,g(this,a.length);var o=this.boundingSphere;o.center.set((r[0]+r[2])/2,(r[1]+r[3])/2,0),o.radius=o.center.distanceTo(f.set(r[0],r[1],0));var i=this.boundingBox;i.min.set(r[0],r[1],0),i.max.set(r[2],r[3],0)},r.prototype.applyClipRect=function(e){var a=this.getAttribute("aTroikaGlyphIndex").count,r=this._chunkedBounds;if(r)for(var n=r.length;n--;){a=r[n].end;var t=r[n].rect;if(t[1]<e.w&&t[3]>e.y&&t[0]<e.z&&t[2]>e.x)break}g(this,a)},Object.defineProperties(r.prototype,n),r}(a.InstancedBufferGeometry);function v(e,r,n,t){var o=e.getAttribute(r);n?o&&o.array.length===n.length?(o.array.set(n),o.needsUpdate=!0):(e.setAttribute(r,new a.InstancedBufferAttribute(n,t)),delete e._maxInstanceCount,e.dispose()):o&&e.deleteAttribute(r)}function g(e,a){e[e.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=a}function b(e){var r=n.createDerivedMaterial(e,{extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new a.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFMinDistancePct:{value:0},uTroikaTotalBounds:{value:new a.Vector4(0,0,0,0)},uTroikaClipRect:{value:new a.Vector4(0,0,0,0)},uTroikaOrient:{value:new a.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaSDFTextureUV;\nvarying vec2 vTroikaGlyphUV;\nvarying vec3 vTroikaGlyphColor;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nvec4 clippedBounds = vec4(\n  clamp(bounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(bounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\nvTroikaGlyphUV = clippedXY.xy;\n\nfloat cols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvTroikaSDFTextureUV = vec2(\n  mod(aTroikaGlyphIndex, cols) + clippedXY.x,\n  floor(aTroikaGlyphIndex / cols) + clippedXY.y\n) * uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = vec2(\n  (position.x - uTroikaTotalBounds.x) / (uTroikaTotalBounds.z - uTroikaTotalBounds.x),\n  (position.y - uTroikaTotalBounds.y) / (uTroikaTotalBounds.w - uTroikaTotalBounds.y)\n);\n\nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform float uTroikaSDFMinDistancePct;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaSDFTextureUV;\nvarying vec2 vTroikaGlyphUV;\n\nfloat troikaGetTextAlpha() {\n  float troikaSDFValue = texture2D(uTroikaSDFTexture, vTroikaSDFTextureUV).r;\n  \n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(0.5, troikaSDFValue);\n  #else\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  float aaDist = min(\n    0.5,\n    0.5 * min(\n      fwidth(vTroikaGlyphUV.x),\n      fwidth(vTroikaGlyphUV.y)\n    )\n  ) / uTroikaSDFMinDistancePct;\n  #else\n  float aaDist = 0.01;\n  #endif\n  \n  float alpha = uTroikaSDFDebug ? troikaSDFValue : smoothstep(\n    0.5 - aaDist,\n    0.5 + aaDist,\n    troikaSDFValue\n  );\n  #endif\n  \n  return alpha;\n}\n",fragmentColorTransform:"\nfloat troikaAlphaMult = troikaGetTextAlpha();\nif (troikaAlphaMult == 0.0) {\n  discard;\n} else {\n  gl_FragColor.a *= troikaAlphaMult;\n}\n",customRewriter:function(e){var a=e.vertexShader,r=e.fragmentShader,t=/\buniform\s+vec3\s+diffuse\b/;return t.test(r)&&(r=r.replace(t,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),t.test(a)||(a=a.replace(n.voidMainRegExp,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:a,fragmentShader:r}}});return r.transparent=!0,Object.defineProperties(r,{isTroikaTextMaterial:{value:!0},shadowSide:{get:function(){return this.side},set:function(){}}}),r}m.prototype.setAttribute||(m.prototype.setAttribute=function(e,a){return this.attributes[e]=a,this});var y=new a.MeshBasicMaterial({color:16777215,side:a.DoubleSide,transparent:!0}),S=new a.Matrix4,U=new a.Vector3,x=new a.Vector3,M=[],C=new a.Vector3,w=new a.Mesh(new a.PlaneBufferGeometry(1,1).translate(.5,.5,0),y),T={type:"syncstart"},_={type:"synccomplete"},F=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],A=F.concat("material","color","depthOffset","clipRect","orientation","glyphGeometryDetail"),k=function(e){function a(){var a=new m;e.call(this,a,null),this.text="",this.anchorX=0,this.anchorY=0,this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.depthOffset=0,this.clipRect=null,this.orientation="+x+y",this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.debugSDF=!1}e&&(a.__proto__=e),a.prototype=Object.create(e&&e.prototype),a.prototype.constructor=a;var r={textRenderInfo:{configurable:!0},material:{configurable:!0},glyphGeometryDetail:{configurable:!0},customDepthMaterial:{configurable:!0},customDistanceMaterial:{configurable:!0}};return a.prototype.sync=function(e){var a=this;this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(T),s({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize},(function(r){a._isSyncing=!1,a._textRenderInfo=r,a.geometry.updateGlyphs(r.glyphBounds,r.glyphAtlasIndices,r.totalBounds,r.chunkedBounds,r.glyphColors);var n=a._queuedSyncs;n&&(a._queuedSyncs=null,a._needsSync=!0,a.sync((function(){n.forEach((function(e){return e&&e()}))}))),a.dispatchEvent(_),e&&e()}))))},a.prototype.onBeforeRender=function(){this.sync(),this._prepareForRender()},a.prototype.dispose=function(){this.geometry.dispose()},r.textRenderInfo.get=function(){return this._textRenderInfo||null},r.material.get=function(){var e=this._derivedMaterial,a=this._baseMaterial||y;return e&&e.baseMaterial===a||(e=this._derivedMaterial=b(a),a.addEventListener("dispose",(function r(){a.removeEventListener("dispose",r),e.dispose()}))),e},r.material.set=function(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e},r.glyphGeometryDetail.get=function(){return this.geometry.detail},r.glyphGeometryDetail.set=function(e){this.geometry.detail=e},r.customDepthMaterial.get=function(){return this.material.getDepthMaterial()},r.customDistanceMaterial.get=function(){return this.material.getDistanceMaterial()},a.prototype._prepareForRender=function(){var e=this._derivedMaterial,a=e.uniforms,r=this.textRenderInfo;if(r){var n=r.sdfTexture,t=r.totalBounds;a.uTroikaSDFTexture.value=n,a.uTroikaSDFTextureSize.value.set(n.image.width,n.image.height),a.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,a.uTroikaSDFMinDistancePct.value=r.sdfMinDistancePercent,a.uTroikaTotalBounds.value.fromArray(t),a.uTroikaUseGlyphColors.value=!!r.glyphColors;var o=this.clipRect;o&&Array.isArray(o)&&4===o.length?a.uTroikaClipRect.value.set(Math.max(t[0],o[0]),Math.max(t[1],o[1]),Math.min(t[2],o[2]),Math.min(t[3],o[3])):a.uTroikaClipRect.value.fromArray(t),this.geometry.applyClipRect(a.uTroikaClipRect.value)}a.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;var i=this.color;null!=i&&e.color&&e.color.isColor&&i!==e._troikaColor&&e.color.set(e._troikaColor=i);var c=this.orientation||"+x+y";if(c!==e._orientation){var l=a.uTroikaOrient.value,s="+x+y"!==(c=c.replace(/[^-+xyz]/g,""))&&c.match(/^([-+])([xyz])([-+])([xyz])$/);if(s){var u=s[1],h=s[2],p=s[3],d=s[4];U.set(0,0,0)[h]="-"===u?1:-1,x.set(0,0,0)[d]="-"===p?-1:1,S.lookAt(C,U.cross(x),x),l.setFromMatrix4(S)}else l.identity();e._orientation=c}},a.prototype.raycast=function(e,a){var r=this.textRenderInfo;if(r){var n=r.totalBounds;w.matrixWorld.multiplyMatrices(this.matrixWorld,S.set(n[2]-n[0],0,0,n[0],0,n[3]-n[1],0,n[1],0,0,1,0,0,0,0,1)),M.length=0,w.raycast(e,M);for(var t=0;t<M.length;t++)M[t].object=this,a.push(M[t])}},a.prototype.copy=function(a){var r=this;return e.prototype.copy.call(this,a),A.forEach((function(e){r[e]=a[e]})),this},a.prototype.clone=function(){return(new this.constructor).copy(this)},Object.defineProperties(a.prototype,r),a}(a.Mesh);F.forEach((function(e){var a="_private_"+e;Object.defineProperty(k.prototype,e,{get:function(){return this[a]},set:function(e){e!==this[a]&&(this[a]=e,this._needsSync=!0)}})}));var D=!1;Object.defineProperty(k.prototype,"anchor",{get:function(){return this._deprecated_anchor},set:function(e){this._deprecated_anchor=e,D||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),D=!0),Array.isArray(e)?(this.anchorX=100*(+e[0]||0)+"%",this.anchorY=100*(+e[1]||0)+"%"):this.anchorX=this.anchorY=0}});var P=new WeakMap,B=new WeakMap;e.GlyphsGeometry=m,e.Text=k,e.configureTextBuilder=function(e){u(i,e)},e.createTextDerivedMaterial=b,e.fontProcessorWorkerModule=h,e.getCaretAtPoint=function(e,a,r){var n=null,t=e.caretHeight,o=function(e){var a=B.get(e);if(!a){var r=e.caretPositions,n=e.caretHeight;a=new Map;for(var t=0;t<r.length;t+=3){var o=r[t+2],i=a.get(o);i||a.set(o,i=[]),i.push({x:r[t],y:o,height:n,charIndex:t/3}),t+3>=r.length&&i.push({x:r[t+1],y:o,height:n,charIndex:t/3+1})}}return B.set(e,a),a}(e),i=1/0;return o.forEach((function(e,a){Math.abs(r-(a+t/2))<Math.abs(r-(i+t/2))&&(i=a)})),o.get(i).forEach((function(e){(!n||Math.abs(a-e.x)<Math.abs(a-n.x))&&(n=e)})),n},e.getSelectionRects=function(e,a,r){var n;if(e){var t=P.get(e);if(t&&t.start===a&&t.end===r)return t.rects;var o=e.caretPositions,i=e.caretHeight,c=e.totalBounds;if(r<a){var l=a;a=r,r=l}a=Math.max(a,0),r=Math.min(r,o.length+1);for(var s=new Map,u=a;u<r;u++){var h=o[3*u],p=o[3*u+1],d=o[3*u+2],f=s.get(d);f?(f.left=Math.max(Math.min(f.left,h),c[0]),f.right=Math.min(Math.max(f.right,p),c[2])):(f={left:h,right:p,bottom:d,top:d+i},s.set(d,f))}n=[],s.forEach((function(e){n.push(e)})),P.set(e,{start:a,end:r,rects:n})}return n},e.preloadFont=function(e,a){var r=e.font,n=e.characters;s({font:r,sdfGlyphSize:e.sdfGlyphSize,text:Array.isArray(n)?n.join("\n"):""+n},a)},Object.defineProperty(e,"__esModule",{value:!0})}(a,r(72),r(126),r(127))},126:function(e,a,r){!function(e){"use strict";function a(){var e,r=0,n=[],t=0,o=0,i=d((function(e){o||l(1,e)})),c=d((function(e){o||l(-1,e)}));function l(a,n){o++;var t=0;try{n===v&&f();var i=a>0&&p(n);i?i.call(n,d((function(e){t++,l(1,e)})),d((function(e){t++,l(-1,e)}))):(r=a,e=n,s())}catch(c){r||t||l(-1,c)}}function s(){t||(setTimeout(u,0),t=1)}function u(){var e=n;t=0,n=[],e.forEach(h)}function h(e){e()}function p(e){var a=e&&(m(e)||"object"===typeof e)&&e.then;return m(a)&&a}function d(e){var a=0;return function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];a++||e.apply(this,r)}}function f(){throw new TypeError("Chaining cycle detected")}var m=function(e){return"function"===typeof e},v={then:function(t,o){var i=a();return n.push((function(){var a=r>0?t:o;if(m(a))try{var n=a(e);n===i&&f();var c=p(n);c?c.call(n,i.resolve,i.reject):i.resolve(n)}catch(l){i.reject(l)}else i[r>0?"resolve":"reject"](e)})),r&&s(),i},resolve:i,reject:c};return v}function r(){var e,a,r=new Promise((function(r,n){e=r,a=n}));return{then:r.then.bind(r),resolve:e,reject:a}}a.all=r.all=function(e){var a=0,r=[],t=n();return 0===e.length?t.resolve([]):e.forEach((function(o,i){var c=n();c.resolve(o),c.then((function(n){a++,r[i]=n,a===e.length&&t.resolve(r)}),t.reject)})),t};var n="function"===typeof Promise?r:a;function t(){var e=Object.create(null);function a(e,a){var r=void 0;self.troikaDefine=function(e){return r=e};var n=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+a+"\n)"],{type:"application/javascript"}));try{importScripts(n)}catch(t){console.error(t)}return URL.revokeObjectURL(n),delete self.troikaDefine,r}self.addEventListener("message",(function(r){var n=r.data,t=n.messageId,o=n.action,i=n.data;try{"registerModule"===o&&function r(n,t){var o=n.id,i=n.name,c=n.dependencies;void 0===c&&(c=[]);var l=n.init;void 0===l&&(l=function(){});var s=n.getTransferables;if(void 0===s&&(s=null),!e[o])try{c=c.map((function(a){return a&&a.isWorkerModule&&(r(a,(function(e){if(e instanceof Error)throw e})),a=e[a.id].value),a})),l=a("<"+i+">.init",l),s&&(s=a("<"+i+">.getTransferables",s));var u=null;"function"===typeof l?u=l.apply(void 0,c):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:u,getTransferables:s},t(u)}catch(h){h&&h.noLog||console.error(h),t(h)}}(i,(function(e){e instanceof Error?postMessage({messageId:t,success:!1,error:e.message}):postMessage({messageId:t,success:!0,result:{isCallable:"function"===typeof e}})})),"callModule"===o&&function(a,r){var n,t=a.id,o=a.args;e[t]&&"function"===typeof e[t].value||r(new Error("Worker module "+t+": not found or its 'init' did not return a function"));try{var i=(n=e[t]).value.apply(n,o);i&&"function"===typeof i.then?i.then(c,(function(e){return r(e instanceof Error?e:new Error(""+e))})):c(i)}catch(l){r(l)}function c(a){try{var n=e[t].getTransferables&&e[t].getTransferables(a);n&&Array.isArray(n)&&n.length||(n=void 0),r(a,n)}catch(l){console.error(l),r(l)}}}(i,(function(e,a){e instanceof Error?postMessage({messageId:t,success:!1,error:e.message}):postMessage({messageId:t,success:!0,result:e},a||void 0)}))}catch(c){postMessage({messageId:t,success:!1,error:c.stack})}}))}var o=function(){var e=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(a){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+a.message+"]")}return o=function(){return e},e},i=0,c=0,l=!1,s=Object.create(null),u=Object.create(null);function h(e){if((!e||"function"!==typeof e.init)&&!l)throw new Error("requires `options.init` function");var a=e.dependencies,r=e.init,t=e.getTransferables,c=e.workerId;if(!o())return function(e){var a=function e(){for(var a=[],r=arguments.length;r--;)a[r]=arguments[r];return e._getInitResult().then((function(e){if("function"===typeof e)return e.apply(void 0,a);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return a._getInitResult=function(){var r=e.dependencies,t=e.init;r=Array.isArray(r)?r.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var o=n.all(r).then((function(e){return t.apply(null,e)}));return a._getInitResult=function(){return o},o},a}(e);null==c&&(c="#default");var s="workerModule"+ ++i,u=e.name||s,f=null;function m(){for(var e=[],a=arguments.length;a--;)e[a]=arguments[a];return f||(f=d(c,"registerModule",m.workerModuleData)),f.then((function(a){if(a.isCallable)return d(c,"callModule",{id:s,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return a=a&&a.map((function(e){return"function"!==typeof e||e.workerModuleData||(l=!0,e=h({workerId:c,name:"<"+u+"> function dependency: "+e.name,init:"function(){return (\n"+p(e)+"\n)}"}),l=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),m.workerModuleData={isWorkerModule:!0,id:s,name:u,dependencies:a,init:p(r),getTransferables:t&&p(t)},m}function p(e){var a=e.toString();return!/^function/.test(a)&&/^\w+\s*\(/.test(a)&&(a="function "+a),a}function d(e,a,r){var o=n(),i=++c;return u[i]=function(e){e.success?o.resolve(e.result):o.reject(new Error("Error in worker "+a+" call: "+e.error))},u._count++,u.count>1e3&&console.warn("Large number of open WorkerModule requests, some may not be returning"),function(e){var a=s[e];if(!a){var r=p(t);(a=s[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+r+")()"],{type:"application/javascript"})))).onmessage=function(e){var a=e.data,r=a.messageId,n=u[r];if(!n)throw new Error("WorkerModule response with empty or unknown messageId");delete u[r],u.count--,n(a)}}return a}(e).postMessage({messageId:i,action:a,data:r}),o}u._count=0;var f=h({name:"Thenable",dependencies:[n],init:function(e){return e}});e.Thenable=n,e.ThenableWorkerModule=f,e.defineWorkerModule=h,e.stringifyFunction=p,Object.defineProperty(e,"__esModule",{value:!0})}(a)},127:function(e,a,r){!function(e,a){"use strict";var r=/\bvoid\s+main\s*\(\s*\)\s*{/g;function n(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,r){var t=a.ShaderChunk[r];return t?n(t):e}))}var t=Object.assign||function(){for(var e=arguments,a=arguments[0],r=1,n=arguments.length;r<n;r++){var t=e[r];if(t)for(var o in t)t.hasOwnProperty(o)&&(a[o]=t[o])}return a},o=Date.now(),i=new WeakMap;function c(e,r){var p=function(e){return JSON.stringify(e,s)}(r),d=i.get(e);if(d||(d=Object.create(null),i.set(e,d)),d[p])return d[p].clone();var f,m,v=function(e){var a=h.get(e);return null==a&&h.set(e,a=++u),a}(p),g="_derivedShaders"+v,b="_onBeforeCompile"+v;function y(a){e.onBeforeCompile.call(this,a);var i=this[g]||(this[g]={vertex:{},fragment:{}}),c=i.vertex,s=i.fragment;if(c.source!==a.vertexShader||s.source!==a.fragmentShader){var u=function(e,a,r){var t=e.vertexShader,o=e.fragmentShader,i=a.vertexDefs,c=a.vertexMainIntro,s=a.vertexMainOutro,u=a.vertexTransform,h=a.fragmentDefs,p=a.fragmentMainIntro,d=a.fragmentMainOutro,f=a.fragmentColorTransform,m=a.customRewriter,v=a.timeUniform;if(i=i||"",c=c||"",s=s||"",h=h||"",p=p||"",d=d||"",(u||m)&&(t=n(t)),(f||m)&&(o=n(o=o.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),m){var g=m({vertexShader:t,fragmentShader:o});t=g.vertexShader,o=g.fragmentShader}if(f){var b=[];o=o.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(function(e){return b.push(e),""})),d=f+"\n"+b.join("\n")+"\n"+d}if(v){var y="\nuniform float "+v+";\n";i=y+i,h=y+h}return u&&(i=i+"\nvec3 troika_position_"+r+";\nvec3 troika_normal_"+r+";\nvec2 troika_uv_"+r+";\nvoid troikaVertexTransform"+r+"(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  "+u+"\n}\n",c="\ntroika_position_"+r+" = vec3(position);\ntroika_normal_"+r+" = vec3(normal);\ntroika_uv_"+r+" = vec2(uv);\ntroikaVertexTransform"+r+"(troika_position_"+r+", troika_normal_"+r+", troika_uv_"+r+");\n"+c+"\n",t=t.replace(/\b(position|normal|uv)\b/g,(function(e,a,n,t){return/\battribute\s+vec[23]\s+$/.test(t.substr(0,n))?a:"troika_"+a+"_"+r}))),t=l(t,r,i,c,s),o=l(o,r,h,p,d),{vertexShader:t,fragmentShader:o}}(a,r,v);c.source=a.vertexShader,c.result=u.vertexShader,s.source=a.fragmentShader,s.result=u.fragmentShader}a.vertexShader=c.result,a.fragmentShader=s.result,t(a.uniforms,this.uniforms),r.timeUniform&&(a.uniforms[r.timeUniform]={get value(){return Date.now()-o}}),this[b]&&this[b](a)}function S(){e.constructor.apply(this,arguments),this._listeners=void 0}S.prototype=Object.create(e,{constructor:{value:S},isDerivedMaterial:{value:!0},baseMaterial:{value:e},onBeforeCompile:{get:function(){return y},set:function(e){this[b]=e}},copy:{value:function(r){return e.copy.call(this,r),e.isShaderMaterial||e.isDerivedMaterial||(this.extensions=t({},r.extensions),this.defines=t({},r.defines),this.uniforms=a.UniformsUtils.clone(r.uniforms)),this}},getDepthMaterial:{value:function(){var n=this._depthMaterial;return n||(m||((m=c(e.isDerivedMaterial?e.getDepthMaterial():new a.MeshDepthMaterial({depthPacking:a.RGBADepthPacking}),r)).defines.IS_DEPTH_MATERIAL=""),(n=this._depthMaterial=m.clone()).uniforms=this.uniforms),n}},getDistanceMaterial:{value:function(){var n=this._distanceMaterial;return n||(f||((f=c(e.isDerivedMaterial?e.getDistanceMaterial():new a.MeshDistanceMaterial,r)).defines.IS_DISTANCE_MATERIAL=""),(n=this._distanceMaterial=f.clone()).uniforms=this.uniforms),n}},dispose:{value:function(){var a=this._depthMaterial,r=this._distanceMaterial;a&&a.dispose(),r&&r.dispose(),e.dispose.call(this)}}});var U=new S;return U.copy(e),U.uniforms=t(a.UniformsUtils.clone(e.uniforms||{}),r.uniforms),U.defines=t({},e.defines,r.defines),U.defines["TROIKA_DERIVED_MATERIAL_"+v]="",U.extensions=t({},e.extensions,r.extensions),d[p]=U,U.clone()}function l(e,a,n,t,o){return(t||o||n)&&(e=e.replace(r,"\n"+n+"\nvoid troikaOrigMain"+a+"() {"),e+="\nvoid main() {\n  "+t+"\n  troikaOrigMain"+a+"();\n  "+o+"\n}"),e}function s(e,a){return"uniforms"===e?void 0:"function"===typeof a?a.toString():a}var u=0,h=new Map,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},d=function(e){this.name=e,this.textureUniform="dataTex_"+e,this.textureSizeUniform="dataTexSize_"+e,this.multiplierUniform="dataMultiplier_"+e,this.dataSizeUniform="dataSize_"+e,this.readFunction="readData_"+e,this._raw=new Float32Array(0),this._texture=new a.DataTexture(new Uint8Array(0),0,1),this._length=0,this._multiplier=1},f={length:{configurable:!0}};function m(e,a,r){var n=255*e,t=n%1*255,o=t%1*255,i=o%1*255;return n&=255,t&=255,o&=255,i=255&Math.round(i),a[r]=n,a[r+1]=t,a[r+2]=o,a[r+3]=i,a}f.length.set=function(e){if(e!==this._length){var a=Math.pow(2,Math.ceil(Math.log2(e))),r=this._raw;a<r.length?this._raw=r.subarray(0,a):a>r.length&&(this._raw=new Float32Array(a),this._raw.set(r)),this._length=e}},f.length.get=function(){return this._length},d.prototype.push=function(e){return this.set(this.length++,e)},d.prototype.setArray=function(e){this.length=e.length,this._raw.set(e),this._needsRepack=!0},d.prototype.get=function(e){return this._raw[e]},d.prototype.set=function(e,a){e+1>this._length&&(this.length=e+1),a!==this._raw[e]&&(this._raw[e]=a,m(a/this._multiplier,this._texture.image.data,4*e),this._needsMultCheck=!0)},d.prototype.clone=function(){var e=new d(this.name);return e.setArray(this._raw),e},d.prototype.getShaderUniforms=function(){var e,a=this;return(e={})[this.textureUniform]={get value(){return a._sync(),a._texture}},e[this.textureSizeUniform]={get value(){return a._sync(),a._texture.image.width}},e[this.dataSizeUniform]={get value(){return a._sync(),a.length}},e[this.multiplierUniform]={get value(){return a._sync(),a._multiplier}},e},d.prototype.getShaderHeaderCode=function(){var e=this.textureUniform,a=this.textureSizeUniform,r=this.dataSizeUniform,n=this.multiplierUniform;return"\nuniform sampler2D "+e+";\nuniform float "+a+";\nuniform float "+r+";\nuniform float "+n+";\n\nfloat "+this.readFunction+"(float index) {\n  vec2 texUV = vec2((index + 0.5) / "+a+", 0.5);\n  vec4 pixel = texture2D("+e+", texUV);\n  return dot(pixel, 1.0 / vec4(1.0, 255.0, 65025.0, 16581375.0)) * "+n+";\n}\n"},d.prototype._sync=function(){var e=this._texture,a=this._raw,r=this._needsRepack;if(a.length!==e.image.width&&(e.image={data:new Uint8Array(4*a.length),width:a.length,height:1},r=!0),r||this._needsMultCheck){var n=this._raw.reduce((function(e,a){return Math.max(e,a)}),0),t=Math.pow(2,Math.ceil(Math.log2(n)));t!==this._multiplier&&(this._multiplier=t,r=!0),e.needsUpdate=!0,this._needsMultCheck=!1}if(r){for(var o=0,i=a.length,c=this._multiplier;o<i;o++)m(a[o]/c,e.image.data,4*o);this._needsRepack=!1}},Object.defineProperties(d.prototype,f);var v=null,g=new a.MeshStandardMaterial({color:16777215,side:a.DoubleSide}),b=function(e){function r(){e.call(this,r.getGeometry(),g),this.pointA=new a.Vector3,this.controlA=new a.Vector3,this.controlB=new a.Vector3,this.pointB=new a.Vector3,this.radius=.01,this.dashArray=new a.Vector2,this.dashOffset=0,this.frustumCulled=!1}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={material:{configurable:!0},customDepthMaterial:{configurable:!0},customDistanceMaterial:{configurable:!0}};return r.getGeometry=function(){return v||(v=new a.CylinderBufferGeometry(1,1,1,6,64).translate(0,.5,0))},n.material.get=function(){var e=this._derivedMaterial,r=this._baseMaterial||g;return e&&e.baseMaterial===r||(e=this._derivedMaterial=function(e){return c(e,{uniforms:{pointA:{value:new a.Vector3},controlA:{value:new a.Vector3},controlB:{value:new a.Vector3},pointB:{value:new a.Vector3},radius:{value:.01},dashing:{value:new a.Vector3}},vertexDefs:"\nuniform vec3 pointA;\nuniform vec3 controlA;\nuniform vec3 controlB;\nuniform vec3 pointB;\nuniform float radius;\nvarying float bezierT;\n\nvec3 cubicBezier(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {\n  float t2 = 1.0 - t;\n  float b0 = t2 * t2 * t2;\n  float b1 = 3.0 * t * t2 * t2;\n  float b2 = 3.0 * t * t * t2;\n  float b3 = t * t * t;\n  return b0 * p1 + b1 * c1 + b2 * c2 + b3 * p2;\n}\n\nvec3 cubicBezierDerivative(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {\n  float t2 = 1.0 - t;\n  return -3.0 * p1 * t2 * t2 +\n    c1 * (3.0 * t2 * t2 - 6.0 * t2 * t) +\n    c2 * (6.0 * t2 * t - 3.0 * t * t) +\n    3.0 * p2 * t * t;\n}\n",vertexTransform:'\nfloat t = position.y;\nbezierT = t;\nvec3 bezierCenterPos = cubicBezier(pointA, controlA, controlB, pointB, t);\nvec3 bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t));\n\n// Make "sideways" always perpendicular to the camera ray; this ensures that any twists\n// in the cylinder occur where you won\'t see them: \nvec3 viewDirection = normalMatrix * vec3(0.0, 0.0, 1.0);\nif (bezierDir == viewDirection) {\n  bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t == 1.0 ? t - 0.0001 : t + 0.0001));\n}\nvec3 sideways = normalize(cross(bezierDir, viewDirection));\nvec3 upish = normalize(cross(sideways, bezierDir));\n\n// Build a matrix for transforming this disc in the cylinder:\nmat4 discTx;\ndiscTx[0].xyz = sideways * radius;\ndiscTx[1].xyz = bezierDir * radius;\ndiscTx[2].xyz = upish * radius;\ndiscTx[3].xyz = bezierCenterPos;\ndiscTx[3][3] = 1.0;\n\n// Apply transform, ignoring original y\nposition = (discTx * vec4(position.x, 0.0, position.z, 1.0)).xyz;\nnormal = normalize(mat3(discTx) * normal);\n',fragmentDefs:"\nuniform vec3 dashing;\nvarying float bezierT;\n",fragmentMainIntro:"\nif (dashing.x + dashing.y > 0.0) {\n  float dashFrac = mod(bezierT - dashing.z, dashing.x + dashing.y);\n  if (dashFrac > dashing.x) {\n    discard;\n  }\n}\n"})}(r),r.addEventListener("dispose",(function a(){r.removeEventListener("dispose",a),e.dispose()}))),e},n.material.set=function(e){this._baseMaterial=e},n.customDepthMaterial.get=function(){return this.material.getDepthMaterial()},n.customDistanceMaterial.get=function(){return this.material.getDistanceMaterial()},r.prototype.onBeforeRender=function(e){var a=this.material.uniforms,r=this.pointA,n=this.controlA,t=this.controlB,o=this.pointB,i=this.radius,c=this.dashArray,l=this.dashOffset;a.pointA.value.copy(r),a.controlA.value.copy(n),a.controlB.value.copy(t),a.pointB.value.copy(o),a.radius.value=i,a.dashing.value.set(c.x,c.y,l||0)},r.prototype.raycast=function(e,a){},Object.defineProperties(r.prototype,n),r}(a.Mesh);e.BezierMesh=b,e.ShaderFloatArray=d,e.createDerivedMaterial=c,e.expandShaderIncludes=n,e.getShaderUniformTypes=function(e){for(var a,r=/\buniform\s+(int|float|vec[234])\s+([A-Za-z_][\w]*)/g,n=Object.create(null);null!==(a=r.exec(e));)n[a[2]]=a[1];return n},e.getShadersForMaterial=function(e){var r=p[e.type];return r?a.ShaderLib[r]:e},e.voidMainRegExp=r,Object.defineProperty(e,"__esModule",{value:!0})}(a,r(72))},145:function(e,a,r){"use strict";a.a=[[-91,90,.1,-91,-90,.1],[-180,-19,.1,-129,-19,.1,-121,-10.5,.1,-91,-10.5,.1],[147,-90,.1,147,-34,.1,190,-34,.1],[-11,90,.1,-11,30.5,.1,-13,28.5,.1,-20,28.5,.1,-27,20.5,.1,-27,14,.1,-4,-13,.1,-4,-90,.1],[-27,14,.1,-91,14,.1]]},146:function(e,a,r){"use strict";r.d(a,"a",(function(){return i}));var n=r(86),t=r.n(n),o=[t()("#90103F").brighten(2).hex(),t()("#511849").brighten(2).hex(),t()("#3D3D6B").brighten(1).hex(),"#427B9B","#5FBAAD","#61C785","#ADD45B","#EDDD53","#EFC309","#E88C20","#E45536","#C71138"],i={bg:{dark:"#1A1B1E",light:"#FFFFFF"},highlight:{dark:"white",light:"#2C2E35"},lines:{dark:"#544E4B",light:"#B0A595"},r:"#E2170D",g:"#50A18A",b:"#65BCD6",y:"#ECAC05",na:"#E2170D",sa:"#29574F",eu:"blue",af:"#780235",as:"#E2170D",oc:"green",intensity:{r:.2,g:.4,b:.6,y:.8}};o.map((function(e){return t()(e).darken(.5).hex()})),o.map((function(e){return t()(e).brighten(2).hex()})),o.map((function(e){return t()(e).darken(.4).hex()}))},147:function(e,a,r){"use strict";a.a={c4:{code:4,nombre:"Afganist\xe1n",name:"Afghanistan",pop:36373,color:"y",alpha2:"AF",alpha3:"AFG",count:73,mean:[192.7,87.6]},c8:{code:8,nombre:"Albania",name:"Albania",pop:2934,color:"g",alpha2:"AL",alpha3:"ALB",count:6,mean:[145,93.5]},c12:{code:12,nombre:"Argelia",name:"Algeria",pop:42008,color:"g",alpha2:"DZ",alpha3:"DZA",count:84,mean:[127.2,74.9]},c20:{code:20,nombre:"Andorra",name:"Andorra",pop:77,color:"r",alpha2:"AD",alpha3:"AND",count:1,mean:[116,96]},c24:{code:24,nombre:"Angola",name:"Angola",pop:30774,color:"g",alpha2:"AO",alpha3:"AGO",count:62,mean:[134.6,25.3]},c28:{code:28,nombre:"Antigua y Barbuda",name:"Antigua and Barbuda",pop:103,color:"b",alpha2:"AG",alpha3:"ATG",count:1,mean:[69,72]},c32:{code:32,nombre:"Argentina",name:"Argentina",pop:44689,color:"y",alpha2:"AR",alpha3:"ARG",count:89,mean:[62.9,18.9]},c51:{code:51,nombre:"Armenia",name:"Armenia",pop:2934,color:"y",alpha2:"AM",alpha3:"ARM",count:6,mean:[166.5,93]},c533:{code:533,nombre:"Aruba",name:"Aruba",pop:106,color:"y",alpha2:"AW",alpha3:"ABW",count:1,mean:[57,58]},c36:{code:36,nombre:"Australia",name:"Australia",pop:24772,color:"b",alpha2:"AU",alpha3:"AUS",count:50,mean:[331.9,3.9]},c40:{code:40,nombre:"Austria",name:"Austria",pop:8752,color:"r",alpha2:"AT",alpha3:"AUT",count:17,mean:[137.6,102.9]},c31:{code:31,nombre:"Azerbaiy\xe1n",name:"Azerbaijan",pop:9924,color:"g",alpha2:"AZ",alpha3:"AZE",count:20,mean:[169.6,92.7]},c44:{code:44,nombre:"Bahamas (las)",name:"Bahamas",pop:399,color:"y",alpha2:"BS",alpha3:"BHS",count:1,mean:[40,78]},c48:{code:48,nombre:"Bahrein",name:"Bahrain",pop:1567,color:"r",alpha2:"BH",alpha3:"BHR",count:3,mean:[178.3,76.3]},c50:{code:50,nombre:"Bangladesh",name:"Bangladesh",pop:166368,color:"g",alpha2:"BD",alpha3:"BGD",count:333,mean:[251.1,61.8]},c52:{code:52,nombre:"Barbados",name:"Barbados",pop:286,color:"b",alpha2:"BB",alpha3:"BRB",count:1,mean:[71,62]},c112:{code:112,nombre:"Belar\xfas",name:"Belarus",pop:9452,color:"b",alpha2:"BY",alpha3:"BLR",count:19,mean:[149.4,111.6]},c56:{code:56,nombre:"B\xe9lgica",name:"Belgium",pop:11499,color:"r",alpha2:"BE",alpha3:"BEL",count:23,mean:[125.9,109.3]},c84:{code:84,nombre:"Belice",name:"Belize",pop:382,color:"g",alpha2:"BZ",alpha3:"BLZ",count:1,mean:[36,64]},c204:{code:204,nombre:"Ben\xedn",name:"Benin",pop:11486,color:"g",alpha2:"BJ",alpha3:"BEN",count:23,mean:[117,54.8]},c64:{code:64,nombre:"Bhut\xe1n",name:"Bhutan",pop:817,color:"g",alpha2:"BT",alpha3:"BTN",count:2,mean:[245.5,78]},c68:{code:68,nombre:"Bolivia (Estado Plurinacional de)",name:"Bolivia (Plurinational State of)",pop:11216,color:"r",alpha2:"BO",alpha3:"BOL",count:22,mean:[62.9,29.7]},c70:{code:70,nombre:"Bosnia y Herzegovina",name:"Bosnia and Herzegovina",pop:3504,color:"b",alpha2:"BA",alpha3:"BIH",count:7,mean:[143,96]},c72:{code:72,nombre:"Botsuana",name:"Botswana",pop:2333,color:"r",alpha2:"BW",alpha3:"BWA",count:5,mean:[133.8,18.4]},c76:{code:76,nombre:"Brasil",name:"Brazil",pop:210868,color:"g",alpha2:"BR",alpha3:"BRA",count:422,mean:[71.2,38.6]},c96:{code:96,nombre:"Brun\xe9i Darussalam",name:"Brunei Darussalam",pop:434,color:"b",alpha2:"BN",alpha3:"BRN",count:1,mean:[298,31]},c100:{code:100,nombre:"Bulgaria",name:"Bulgaria",pop:7037,color:"b",alpha2:"BG",alpha3:"BGR",count:14,mean:[149.3,95.1]},c854:{code:854,nombre:"Burkina Faso",name:"Burkina Faso",pop:19752,color:"g",alpha2:"BF",alpha3:"BFA",count:40,mean:[115.8,66.1]},c108:{code:108,nombre:"Burundi",name:"Burundi",pop:11216,color:"y",alpha2:"BI",alpha3:"BDI",count:22,mean:[144.6,44]},c132:{code:132,nombre:"Cabo Verde",name:"Cabo Verde",pop:553,color:"g",alpha2:"CV",alpha3:"CPV",count:1,mean:[97,53]},c116:{code:116,nombre:"Camboya",name:"Cambodia",pop:16246,color:"y",alpha2:"KH",alpha3:"KHM",count:32,mean:[279.4,41]},c120:{code:120,nombre:"Camer\xfan",name:"Cameroon",pop:24678,color:"b",alpha2:"CM",alpha3:"CMR",count:49,mean:[132.8,45.9]},c124:{code:124,nombre:"Canad\xe1",name:"Canada",pop:36954,color:"y",alpha2:"CA",alpha3:"CAN",count:75,mean:[18.4,97.1]},c140:{code:140,nombre:"Rep\xfablica Centroafricana",name:"Central African Republic",pop:4737,color:"y",alpha2:"CF",alpha3:"CAF",count:9,mean:[137.8,47.4]},c148:{code:148,nombre:"Chad",name:"Chad",pop:15353,color:"g",alpha2:"TD",alpha3:"TCD",count:31,mean:[135.5,53.7]},c152:{code:152,nombre:"Chile",name:"Chile",pop:18197,color:"g",alpha2:"CL",alpha3:"CHL",count:36,mean:[60,17.1]},c156:{code:156,nombre:"China",name:"China",pop:1415046,color:"r",alpha2:"CN",alpha3:"CHN",count:2830,mean:[273.7,92.9]},c170:{code:170,nombre:"Colombia",name:"Colombia",pop:49465,color:"b",alpha2:"CO",alpha3:"COL",count:99,mean:[57,47.7]},c174:{code:174,nombre:"Comoras (las)",name:"Comoros",pop:832,color:"y",alpha2:"KM",alpha3:"COM",count:2,mean:[154,31.5]},c178:{code:178,nombre:"Congo (el)",name:"Congo",pop:5400,color:"g",alpha2:"CG",alpha3:"COG",count:11,mean:[132.5,38.5]},c180:{code:180,nombre:"Congo (la Rep\xfablica Democr\xe1tica del)",name:"Congo, Democratic Republic of the",pop:84005,color:"r",alpha2:"CD",alpha3:"COD",count:162,mean:[138.2,36.2]},c184:{code:184,nombre:"Cook, (las) Islas",name:"Cook Islands",pop:17,color:"y",alpha2:"CK",alpha3:"COK",count:1,mean:[354,4]},c188:{code:188,nombre:"Costa Rica",name:"Costa Rica",pop:4953,color:"y",alpha2:"CR",alpha3:"CRI",count:10,mean:[45.5,56]},c191:{code:191,nombre:"Croacia",name:"Croatia",pop:4165,color:"g",alpha2:"HR",alpha3:"HRV",count:8,mean:[141.3,97]},c192:{code:192,nombre:"Cuba",name:"Cuba",pop:11489,color:"r",alpha2:"CU",alpha3:"CUB",count:23,mean:[41.5,74.3]},c531:{code:531,nombre:"Cura\xe7ao",name:"Cura\xe7ao",pop:162,color:"r",alpha2:"CW",alpha3:"CUW",count:1,mean:[59,58]},c196:{code:196,nombre:"Chipre",name:"Cyprus",pop:1189,color:"b",alpha2:"CY",alpha3:"CYP",count:2,mean:[156.5,82]},c203:{code:203,nombre:"Chequia",name:"Czechia",pop:10625,color:"b",alpha2:"CZ",alpha3:"CZE",count:21,mean:[140.9,106.5]},c384:{code:384,nombre:"C\xf4te d'Ivoire",name:"C\xf4te d'Ivoire",pop:24906,color:"b",alpha2:"CI",alpha3:"CIV",count:50,mean:[107.7,54.7]},c208:{code:208,nombre:"Dinamarca",name:"Denmark",pop:5754,color:"r",alpha2:"DK",alpha3:"DNK",count:12,mean:[134.3,122.6]},c262:{code:262,nombre:"Yibuti",name:"Djibouti",pop:971,color:"r",alpha2:"DJ",alpha3:"DJI",count:2,mean:[163,62.5]},c212:{code:212,nombre:"Dominica",name:"Dominica",pop:74,color:"y",alpha2:"DM",alpha3:"DMA",count:1,mean:[70,68]},c214:{code:214,nombre:"Dominicana, (la) Rep\xfablica",name:"Dominican Republic",pop:10883,color:"g",alpha2:"DO",alpha3:"DOM",count:22,mean:[57,75.1]},c218:{code:218,nombre:"Ecuador",name:"Ecuador",pop:16863,color:"r",alpha2:"EC",alpha3:"ECU",count:34,mean:[53.6,41.1]},c818:{code:818,nombre:"Egipto",name:"Egypt",pop:99376,color:"g",alpha2:"EG",alpha3:"EGY",count:202,mean:[146.9,72.8]},c222:{code:222,nombre:"El Salvador",name:"El Salvador",pop:6412,color:"g",alpha2:"SV",alpha3:"SLV",count:13,mean:[36.5,57.6]},c226:{code:226,nombre:"Guinea Ecuatorial",name:"Equatorial Guinea",pop:1314,color:"r",alpha2:"GQ",alpha3:"GNQ",count:3,mean:[132,41]},c232:{code:232,nombre:"Eritrea",name:"Eritrea",pop:5188,color:"b",alpha2:"ER",alpha3:"ERI",count:10,mean:[159.5,65]},c233:{code:233,nombre:"Estonia",name:"Estonia",pop:1307,color:"b",alpha2:"EE",alpha3:"EST",count:3,mean:[148.7,118.3]},c748:{code:748,nombre:"Suazilandia",name:"Eswatini",pop:1391,color:"y",alpha2:"SZ",alpha3:"SWZ",count:3,mean:[144.3,15.3]},c231:{code:231,nombre:"Etiop\xeda",name:"Ethiopia",pop:107535,color:"y",alpha2:"ET",alpha3:"ETH",count:215,mean:[153.9,59.8]},c234:{code:234,nombre:"Feroe, (las) Islas",name:"Faroe Islands",pop:49,color:"y",alpha2:"FO",alpha3:"FRO",count:1,mean:[109,132]},c242:{code:242,nombre:"Fiji",name:"Fiji",pop:912,color:"y",alpha2:"FJ",alpha3:"FJI",count:2,mean:[340,8.5]},c246:{code:246,nombre:"Finlandia",name:"Finland",pop:5543,color:"y",alpha2:"FI",alpha3:"FIN",count:11,mean:[144.6,124.5]},c250:{code:250,nombre:"Francia",name:"France",pop:65233,color:"b",alpha2:"FR",alpha3:"FRA",count:130,mean:[121.7,102.3]},c254:{code:254,nombre:"Guayana Francesa",name:"French Guiana",pop:290,color:"b",alpha2:"GF",alpha3:"GUF",count:1,mean:[72,51]},c258:{code:258,nombre:"Polinesia Francesa",name:"French Polynesia",pop:286,color:"r",alpha2:"PF",alpha3:"PYF",count:1,mean:[349,9]},c266:{code:266,nombre:"Gab\xf3n",name:"Gabon",pop:2068,color:"b",alpha2:"GA",alpha3:"GAB",count:4,mean:[131.5,39.5]},c270:{code:270,nombre:"Gambia (la)",name:"Gambia",pop:2164,color:"b",alpha2:"GM",alpha3:"GMB",count:4,mean:[105.5,62]},c268:{code:268,nombre:"Georgia",name:"Georgia",pop:3907,color:"b",alpha2:"GE",alpha3:"GEO",count:8,mean:[165,94.3]},c276:{code:276,nombre:"Alemania",name:"Germany",pop:82293,color:"y",alpha2:"DE",alpha3:"DEU",count:165,mean:[133.7,111.5]},c288:{code:288,nombre:"Ghana",name:"Ghana",pop:29464,color:"g",alpha2:"GH",alpha3:"GHA",count:59,mean:[111.9,53.8]},c300:{code:300,nombre:"Grecia",name:"Greece",pop:11142,color:"y",alpha2:"GR",alpha3:"GRC",count:22,mean:[147.1,89.7]},c304:{code:304,nombre:"Groenlandia",name:"Greenland",pop:57,color:"g",alpha2:"GL",alpha3:"GRL",count:1,mean:[97,133]},c308:{code:308,nombre:"Granada",name:"Grenada",pop:108,color:"y",alpha2:"GD",alpha3:"GRD",count:1,mean:[70,60]},c312:{code:312,nombre:"Guadeloupe",name:"Guadeloupe",pop:449,color:"g",alpha2:"GP",alpha3:"GLP",count:1,mean:[70,70]},c316:{code:316,nombre:"Guam",name:"Guam",pop:166,color:"b",alpha2:"GU",alpha3:"GUM",count:1,mean:[328,29]},c320:{code:320,nombre:"Guatemala",name:"Guatemala",pop:17245,color:"y",alpha2:"GT",alpha3:"GTM",count:34,mean:[33.4,59.4]},c324:{code:324,nombre:"Guinea",name:"Guinea",pop:13053,color:"g",alpha2:"GN",alpha3:"GIN",count:26,mean:[104,55.4]},c624:{code:624,nombre:"Guinea Bissau",name:"Guinea-Bissau",pop:1907,color:"r",alpha2:"GW",alpha3:"GNB",count:4,mean:[104.5,59.5]},c328:{code:328,nombre:"Guyana",name:"Guyana",pop:782,color:"r",alpha2:"GY",alpha3:"GUY",count:2,mean:[69,52.5]},c332:{code:332,nombre:"Hait\xed",name:"Haiti",pop:11113,color:"b",alpha2:"HT",alpha3:"HTI",count:22,mean:[52,72.5]},c336:{code:336,nombre:"Ciudad del Vaticano",name:"Holy See",pop:1,color:"r",alpha2:"VA",alpha3:"VAT",count:1,mean:[136,90]},c340:{code:340,nombre:"Honduras",name:"Honduras",pop:9417,color:"b",alpha2:"HN",alpha3:"HND",count:19,mean:[40,60.7]},c344:{code:344,nombre:"Hong Kong",name:"Hong Kong",pop:7429,color:"y",alpha2:"HK",alpha3:"HKG",count:15,mean:[296.1,70.7]},c348:{code:348,nombre:"Hungr\xeda",name:"Hungary",pop:9689,color:"b",alpha2:"HU",alpha3:"HUN",count:20,mean:[143.9,101.7]},c352:{code:352,nombre:"Islandia",name:"Iceland",pop:338,color:"b",alpha2:"IS",alpha3:"ISL",count:1,mean:[100,130]},c356:{code:356,nombre:"India",name:"India",pop:1354052,color:"b",alpha2:"IN",alpha3:"IND",count:2708,mean:[223.5,57.3]},c360:{code:360,nombre:"Indonesia",name:"Indonesia",pop:266795,color:"g",alpha2:"ID",alpha3:"IDN",count:534,mean:[296.7,16.8]},c364:{code:364,nombre:"Ir\xe1n (Rep\xfablica Isl\xe1mica de)",name:"Iran (Islamic Republic of)",pop:82012,color:"b",alpha2:"IR",alpha3:"IRN",count:164,mean:[180.7,85.4]},c368:{code:368,nombre:"Iraq",name:"Iraq",pop:39340,color:"y",alpha2:"IQ",alpha3:"IRQ",count:80,mean:[170.9,77.8]},c372:{code:372,nombre:"Irlanda",name:"Ireland",pop:4804,color:"g",alpha2:"IE",alpha3:"IRL",count:9,mean:[105.4,118.2]},c376:{code:376,nombre:"Israel",name:"Israel",pop:8453,color:"y",alpha2:"IL",alpha3:"ISR",count:17,mean:[160.4,73.9]},c380:{code:380,nombre:"Italia",name:"Italy",pop:59291,color:"g",alpha2:"IT",alpha3:"ITA",count:120,mean:[134.5,94]},c388:{code:388,nombre:"Jamaica",name:"Jamaica",pop:2899,color:"y",alpha2:"JM",alpha3:"JAM",count:6,mean:[40.5,67.5]},c392:{code:392,nombre:"Jap\xf3n",name:"Japan",pop:127185,color:"r",alpha2:"JP",alpha3:"JPN",count:254,mean:[331.9,90.6]},c400:{code:400,nombre:"Jordania",name:"Jordan",pop:9904,color:"b",alpha2:"JO",alpha3:"JOR",count:20,mean:[164.4,76]},c398:{code:398,nombre:"Kazajist\xe1n",name:"Kazakhstan",pop:18404,color:"y",alpha2:"KZ",alpha3:"KAZ",count:37,mean:[189.6,99.7]},c404:{code:404,nombre:"Kenia",name:"Kenya",pop:50951,color:"b",alpha2:"KE",alpha3:"KEN",count:102,mean:[152.6,48.2]},c296:{code:296,nombre:"Kiribati",name:"Kiribati",pop:118,color:"y",alpha2:"KI",alpha3:"KIR",count:1,mean:[346,17]},c408:{code:408,nombre:"Corea (la Rep\xfablica Popular Democr\xe1tica de)",name:"Korea (Democratic People's Republic of)",pop:25611,color:"y",alpha2:"KP",alpha3:"PRK",count:51,mean:[313.7,105.7]},c410:{code:410,nombre:"Corea (la Rep\xfablica de)",name:"Korea, Republic of",pop:51164,color:"b",alpha2:"KR",alpha3:"KOR",count:102,mean:[318.1,97.1]},c414:{code:414,nombre:"Kuwait",name:"Kuwait",pop:4197,color:"g",alpha2:"KW",alpha3:"KWT",count:8,mean:[175.3,73]},c417:{code:417,nombre:"Kirguist\xe1n",name:"Kyrgyzstan",pop:6133,color:"b",alpha2:"KG",alpha3:"KGZ",count:12,mean:[192.5,96.7]},c418:{code:418,nombre:"Lao, (la) Rep\xfablica Democr\xe1tica Popular",name:"Lao People's Democratic Republic",pop:6961,color:"g",alpha2:"LA",alpha3:"LAO",count:14,mean:[277.9,50.4]},c428:{code:428,nombre:"Letonia",name:"Latvia",pop:1930,color:"y",alpha2:"LV",alpha3:"LVA",count:4,mean:[148.5,116.5]},c422:{code:422,nombre:"L\xedbano",name:"Lebanon",pop:6094,color:"r",alpha2:"LB",alpha3:"LBN",count:12,mean:[159.8,78.7]},c426:{code:426,nombre:"Lesotho",name:"Lesotho",pop:2263,color:"r",alpha2:"LS",alpha3:"LSO",count:5,mean:[141.2,11.4]},c430:{code:430,nombre:"Liberia",name:"Liberia",pop:4854,color:"r",alpha2:"LR",alpha3:"LBR",count:10,mean:[103.2,49.9]},c434:{code:434,nombre:"Libia",name:"Libya",pop:6471,color:"y",alpha2:"LY",alpha3:"LBY",count:13,mean:[136.6,76.8]},c438:{code:438,nombre:"Liechtenstein",name:"Liechtenstein",pop:38,color:"y",alpha2:"LI",alpha3:"LIE",count:1,mean:[133,102]},c440:{code:440,nombre:"Lituania",name:"Lithuania",pop:2876,color:"g",alpha2:"LT",alpha3:"LTU",count:6,mean:[148,114.5]},c442:{code:442,nombre:"Luxemburgo",name:"Luxembourg",pop:590,color:"g",alpha2:"LU",alpha3:"LUX",count:1,mean:[128,107]},c446:{code:446,nombre:"Macao",name:"Macao",pop:632,color:"b",alpha2:"MO",alpha3:"MAC",count:1,mean:[291,69]},c450:{code:450,nombre:"Madagascar",name:"Madagascar",pop:26263,color:"b",alpha2:"MG",alpha3:"MDG",count:53,mean:[155.4,22.2]},c454:{code:454,nombre:"Malawi",name:"Malawi",pop:19165,color:"y",alpha2:"MW",alpha3:"MWI",count:38,mean:[145.6,27.9]},c458:{code:458,nombre:"Malasia",name:"Malaysia",pop:32042,color:"y",alpha2:"MY",alpha3:"MYS",count:64,mean:[292.3,27.4]},c462:{code:462,nombre:"Maldivas",name:"Maldives",pop:444,color:"r",alpha2:"MV",alpha3:"MDV",count:1,mean:[199,10]},c466:{code:466,nombre:"Mal\xed",name:"Mali",pop:19108,color:"b",alpha2:"ML",alpha3:"MLI",count:45,mean:[121,69.8]},c470:{code:470,nombre:"Malta",name:"Malta",pop:432,color:"b",alpha2:"MT",alpha3:"MLT",count:1,mean:[146,83]},c584:{code:584,nombre:"Marshall, (las) Islas",name:"Marshall Islands",pop:53,color:"b",alpha2:"MH",alpha3:"MHL",count:1,mean:[335,23]},c474:{code:474,nombre:"Martinique",name:"Martinique",pop:385,color:"r",alpha2:"MQ",alpha3:"MTQ",count:1,mean:[70,66]},c478:{code:478,nombre:"Mauritania",name:"Mauritania",pop:4540,color:"b",alpha2:"MR",alpha3:"MRT",count:9,mean:[107.2,65.9]},c480:{code:480,nombre:"Mauricio",name:"Mauritius",pop:1268,color:"y",alpha2:"MU",alpha3:"MUS",count:3,mean:[165.3,24.7]},c175:{code:175,nombre:"Mayotte",name:"Mayotte",pop:260,color:"g",alpha2:"YT",alpha3:"FRA",count:1,mean:[156,31]},c484:{code:484,nombre:"M\xe9xico",name:"Mexico",pop:130759,color:"r",alpha2:"MX",alpha3:"MEX",count:262,mean:[19.1,66.7]},c583:{code:583,nombre:"Micronesia (Estados Federados de)",name:"Micronesia (Federated States of)",pop:106,color:"y",alpha2:"FM",alpha3:"FSM",count:1,mean:[333,23]},c498:{code:498,nombre:"Moldova (la Rep\xfablica de)",name:"Moldova, Republic of",pop:4041,color:"g",alpha2:"MD",alpha3:"MDA",count:8,mean:[152.6,103]},c492:{code:492,nombre:"M\xf3naco",name:"Monaco",pop:39,color:"r",alpha2:"MC",alpha3:"MCO",count:1,mean:[126,96]},c496:{code:496,nombre:"Mongolia",name:"Mongolia",pop:3122,color:"b",alpha2:"MN",alpha3:"MNG",count:6,mean:[268,103.5]},c499:{code:499,nombre:"Montenegro",name:"Montenegro",pop:629,color:"r",alpha2:"ME",alpha3:"MNE",count:1,mean:[143,94]},c504:{code:504,nombre:"Marruecos",name:"Morocco",pop:36192,color:"r",alpha2:"MA",alpha3:"MAR",count:72,mean:[116.8,73.5]},c508:{code:508,nombre:"Mozambique",name:"Mozambique",pop:30529,color:"r",alpha2:"MZ",alpha3:"MOZ",count:61,mean:[147.6,23.5]},c104:{code:104,nombre:"Myanmar",name:"Myanmar",pop:53856,color:"y",alpha2:"MM",alpha3:"MMR",count:108,mean:[265.5,52.5]},c516:{code:516,nombre:"Namibia",name:"Namibia",pop:2588,color:"b",alpha2:"NA",alpha3:"NAM",count:5,mean:[131.8,18.8]},c524:{code:524,nombre:"Nepal",name:"Nepal",pop:29624,color:"y",alpha2:"NP",alpha3:"NPL",count:59,mean:[233.7,83.5]},c528:{code:528,nombre:"Pa\xedses Bajos (los)",name:"Netherlands",pop:17084,color:"b",alpha2:"NL",alpha3:"NLD",count:34,mean:[126.4,114.7]},c540:{code:540,nombre:"Nueva Caledonia",name:"New Caledonia",pop:280,color:"g",alpha2:"NC",alpha3:"NCL",count:1,mean:[335,8]},c554:{code:554,nombre:"Nueva Zelandia",name:"New Zealand",pop:4750,color:"r",alpha2:"NZ",alpha3:"NZL",count:9,mean:[339.1,2.2]},c558:{code:558,nombre:"Nicaragua",name:"Nicaragua",pop:6285,color:"r",alpha2:"NI",alpha3:"NIC",count:13,mean:[42.9,58.6]},c562:{code:562,nombre:"N\xedger (el)",name:"Niger",pop:22311,color:"b",alpha2:"NE",alpha3:"NER",count:45,mean:[133.4,70.6]},c566:{code:566,nombre:"Nigeria",name:"Nigeria",pop:195875,color:"y",alpha2:"NG",alpha3:"NGA",count:391,mean:[125.2,56.2]},c570:{code:570,nombre:"Niue",name:"Niue",pop:2,color:"g",alpha2:"NU",alpha3:"NIU",count:1,mean:[348,6]},c807:{code:807,nombre:"Macedonia del Norte",name:"North Macedonia",pop:2085,color:"r",alpha2:"MK",alpha3:"MKD",count:4,mean:[147.5,93.5]},c578:{code:578,nombre:"Noruega",name:"Norway",pop:5353,color:"b",alpha2:"NO",alpha3:"NOR",count:11,mean:[141,127.2]},c512:{code:512,nombre:"Om\xe1n",name:"Oman",pop:4830,color:"g",alpha2:"OM",alpha3:"OMN",count:10,mean:[181.5,67.2]},c586:{code:586,nombre:"Pakist\xe1n",name:"Pakistan",pop:200814,color:"g",alpha2:"PK",alpha3:"PAK",count:398,mean:[199.5,80.6]},c585:{code:585,nombre:"Palau",name:"Palau",pop:22,color:"y",alpha2:"PW",alpha3:"PLW",count:1,mean:[326,27]},c275:{code:275,nombre:"Palestina, Estado de",name:"Palestine, State of",pop:5053,color:"r",alpha2:"PS",alpha3:"PSE",count:10,mean:[161.4,73.8]},c591:{code:591,nombre:"Panam\xe1",name:"Panama",pop:4163,color:"g",alpha2:"PA",alpha3:"PAN",count:8,mean:[49.6,53.6]},c598:{code:598,nombre:"Papua Nueva Guinea",name:"Papua New Guinea",pop:8418,color:"r",alpha2:"PG",alpha3:"PNG",count:17,mean:[326.2,20.1]},c600:{code:600,nombre:"Paraguay",name:"Paraguay",pop:6897,color:"b",alpha2:"PY",alpha3:"PRY",count:14,mean:[66.1,26.2]},c604:{code:604,nombre:"Per\xfa",name:"Peru",pop:32552,color:"y",alpha2:"PE",alpha3:"PER",count:65,mean:[56.6,34.1]},c608:{code:608,nombre:"Filipinas (las)",name:"Philippines",pop:106512,color:"y",alpha2:"PH",alpha3:"PHL",count:210,mean:[311.8,46]},c616:{code:616,nombre:"Polonia",name:"Poland",pop:38105,color:"r",alpha2:"PL",alpha3:"POL",count:78,mean:[143.1,113.6]},c620:{code:620,nombre:"Portugal",name:"Portugal",pop:10291,color:"g",alpha2:"PT",alpha3:"PRT",count:21,mean:[108.9,89.1]},c630:{code:630,nombre:"Puerto Rico",name:"Puerto Rico",pop:3659,color:"r",alpha2:"PR",alpha3:"PRI",count:7,mean:[63.3,72.6]},c634:{code:634,nombre:"Qatar",name:"Qatar",pop:2695,color:"b",alpha2:"QA",alpha3:"QAT",count:5,mean:[178.4,72.2]},c642:{code:642,nombre:"Rumania",name:"Romania",pop:19581,color:"r",alpha2:"RO",alpha3:"ROU",count:39,mean:[149.7,99.8]},c643:{code:643,nombre:"Rusia, (la) Federaci\xf3n de",name:"Russian Federation",pop:143965,color:"r",alpha2:"RU",alpha3:"RUS",count:294,mean:[159,112.3]},c646:{code:646,nombre:"Ruanda",name:"Rwanda",pop:12501,color:"g",alpha2:"RW",alpha3:"RWA",count:23,mean:[143.1,47.6]},c638:{code:638,nombre:"Reuni\xf3n",name:"R\xe9union",pop:883,color:"r",alpha2:"RE",alpha3:"REU",count:2,mean:[160.5,22]},c659:{code:659,nombre:"San Crist\xf3bal y Nieves",name:"Saint Kitts and Nevis",pop:56,color:"y",alpha2:"KN",alpha3:"KNA",count:1,mean:[67,73]},c662:{code:662,nombre:"Santa Luc\xeda",name:"Saint Lucia",pop:180,color:"g",alpha2:"LC",alpha3:"LCA",count:1,mean:[70,64]},c670:{code:670,nombre:"San Vicente y las Granadinas",name:"Saint Vincent and the Grenadines",pop:110,color:"r",alpha2:"VC",alpha3:"VCT",count:1,mean:[69,62]},c882:{code:882,nombre:"Samoa",name:"Samoa",pop:198,color:"r",alpha2:"WS",alpha3:"WSM",count:1,mean:[341,11]},c674:{code:674,nombre:"San Marino",name:"San Marino",pop:34,color:"y",alpha2:"SM",alpha3:"SMR",count:1,mean:[136,94]},c678:{code:678,nombre:"Santo Tom\xe9 y Pr\xedncipe",name:"Sao Tome and Principe",pop:209,color:"y",alpha2:"ST",alpha3:"STP",count:1,mean:[127,36]},c682:{code:682,nombre:"Arabia Saudita",name:"Saudi Arabia",pop:33554,color:"r",alpha2:"SA",alpha3:"SAU",count:67,mean:[171.7,69.7]},c686:{code:686,nombre:"Senegal",name:"Senegal",pop:16294,color:"r",alpha2:"SN",alpha3:"SEN",count:33,mean:[107.8,62.9]},c688:{code:688,nombre:"Serbia",name:"Serbia",pop:8762,color:"y",alpha2:"RS",alpha3:"SRB",count:18,mean:[144.9,97.7]},c690:{code:690,nombre:"Seychelles",name:"Seychelles",pop:95,color:"r",alpha2:"SC",alpha3:"SYC",count:1,mean:[160,37]},c694:{code:694,nombre:"Sierra leona",name:"Sierra Leone",pop:7720,color:"y",alpha2:"SL",alpha3:"SLE",count:15,mean:[102.4,53.4]},c702:{code:702,nombre:"Singapur",name:"Singapore",pop:5792,color:"b",alpha2:"SG",alpha3:"SGP",count:12,mean:[281.2,22.9]},c703:{code:703,nombre:"Eslovaquia",name:"Slovakia",pop:5450,color:"g",alpha2:"SK",alpha3:"SVK",count:11,mean:[142.5,104.2]},c705:{code:705,nombre:"Eslovenia",name:"Slovenia",pop:2081,color:"r",alpha2:"SI",alpha3:"SVN",count:4,mean:[140.5,99.5]},c90:{code:90,nombre:"Salom\xf3n, Islas",name:"Solomon Islands",pop:623,color:"g",alpha2:"SB",alpha3:"SLB",count:1,mean:[334,15]},c706:{code:706,nombre:"Somalia",name:"Somalia",pop:15182,color:"g",alpha2:"SO",alpha3:"SOM",count:30,mean:[164.8,57.9]},c710:{code:710,nombre:"Sud\xe1frica",name:"South Africa",pop:57398,color:"g",alpha2:"ZA",alpha3:"ZAF",count:115,mean:[138.5,13.3]},c728:{code:728,nombre:"Sud\xe1n del Sur",name:"South Sudan",pop:12919,color:"b",alpha2:"SS",alpha3:"SSD",count:26,mean:[140.9,58.7]},c724:{code:724,nombre:"Espa\xf1a",name:"Spain",pop:46397,color:"y",alpha2:"ES",alpha3:"ESP",count:93,mean:[114.3,90.3]},c144:{code:144,nombre:"Sri Lanka",name:"Sri Lanka",pop:20950,color:"y",alpha2:"LK",alpha3:"LKA",count:42,mean:[222.8,4.4]},c729:{code:729,nombre:"Sud\xe1n (el)",name:"Sudan",pop:41512,color:"r",alpha2:"SD",alpha3:"SDN",count:83,mean:[139.8,64.4]},c740:{code:740,nombre:"Suriname",name:"Suriname",pop:568,color:"y",alpha2:"SR",alpha3:"SUR",count:1,mean:[70,52]},c752:{code:752,nombre:"Suecia",name:"Sweden",pop:9983,color:"g",alpha2:"SE",alpha3:"SWE",count:20,mean:[142.1,125.2]},c756:{code:756,nombre:"Suiza",name:"Switzerland",pop:8544,color:"r",alpha2:"CH",alpha3:"CHE",count:17,mean:[129.4,101.7]},c760:{code:760,nombre:"Rep\xfablica \xc1rabe Siria",name:"Syrian Arab Republic",pop:18284,color:"g",alpha2:"SY",alpha3:"SYR",count:38,mean:[164.1,81.4]},c158:{code:158,nombre:"Taiw\xe1n (Provincia de China)",name:"Taiwan, Province of China",pop:23694,color:"g",alpha2:"TW",alpha3:"TWN",count:47,mean:[305,67.8]},c762:{code:762,nombre:"Tayikist\xe1n",name:"Tajikistan",pop:9107,color:"r",alpha2:"TJ",alpha3:"TJK",count:18,mean:[189.8,93.1]},c834:{code:834,nombre:"Tanzania, Rep\xfablica Unida de",name:"Tanzania, United Republic of",pop:59091,color:"g",alpha2:"TZ",alpha3:"TZA",count:118,mean:[148.4,37.6]},c764:{code:764,nombre:"Tailandia",name:"Thailand",pop:69183,color:"r",alpha2:"TH",alpha3:"THA",count:138,mean:[273.3,44.3]},c626:{code:626,nombre:"Timor-Leste",name:"Timor-Leste",pop:1324,color:"y",alpha2:"TL",alpha3:"TLS",count:3,mean:[322,11]},c768:{code:768,nombre:"Togo",name:"Togo",pop:7991,color:"r",alpha2:"TG",alpha3:"TGO",count:16,mean:[115.3,53.5]},c776:{code:776,nombre:"Tonga",name:"Tonga",pop:109,color:"b",alpha2:"TO",alpha3:"TON",count:1,mean:[346,4]},c780:{code:780,nombre:"Trinidad y Tobago",name:"Trinidad and Tobago",pop:1373,color:"g",alpha2:"TT",alpha3:"TTO",count:3,mean:[67.3,59]},c788:{code:788,nombre:"T\xfanez",name:"Tunisia",pop:11659,color:"r",alpha2:"TN",alpha3:"TUN",count:23,mean:[132.4,76.8]},c792:{code:792,nombre:"Turqu\xeda",name:"Turkey",pop:81917,color:"r",alpha2:"TR",alpha3:"TUR",count:164,mean:[160.3,88.7]},c795:{code:795,nombre:"Turkmenist\xe1n",name:"Turkmenistan",pop:5851,color:"y",alpha2:"TM",alpha3:"TKM",count:12,mean:[180.5,90.5]},c798:{code:798,nombre:"Tuvalu",name:"Tuvalu",pop:11,color:"b",alpha2:"TV",alpha3:"TUV",count:1,mean:[340,13]},c800:{code:800,nombre:"Uganda",name:"Uganda",pop:44271,color:"r",alpha2:"UG",alpha3:"UGA",count:89,mean:[142.3,53.7]},c804:{code:804,nombre:"Ucrania",name:"Ukraine",pop:44009,color:"y",alpha2:"UA",alpha3:"UKR",count:88,mean:[152,106.9]},c784:{code:784,nombre:"Emiratos \xc1rabes Unidos (los)",name:"United Arab Emirates",pop:9542,color:"y",alpha2:"AE",alpha3:"ARE",count:19,mean:[180.2,70.2]},c826:{code:826,nombre:"Reino Unido de Gran Breta\xf1a e Irlanda del Norte (el)",name:"United Kingdom of Great Britain and Northern Ireland",pop:66574,color:"r",alpha2:"GB",alpha3:"GBR",count:125,mean:[111.8,117.4]},c840:{code:840,nombre:"Estados Unidos de Am\xe9rica (los)",name:"United States of America",pop:326767,color:"b",alpha2:"US",alpha3:"USA",count:653,mean:[19.3,84.8]},c858:{code:858,nombre:"Uruguay",name:"Uruguay",pop:3470,color:"r",alpha2:"UY",alpha3:"URY",count:7,mean:[67.9,21.7]},c860:{code:860,nombre:"Uzbekist\xe1n",name:"Uzbekistan",pop:32365,color:"g",alpha2:"UZ",alpha3:"UZB",count:65,mean:[183.9,95.3]},c548:{code:548,nombre:"Vanuatu",name:"Vanuatu",pop:282,color:"y",alpha2:"VU",alpha3:"VUT",count:1,mean:[335,13]},c862:{code:862,nombre:"Venezuela (Rep\xfablica Bolivariana de)",name:"Venezuela (Bolivarian Republic of)",pop:32381,color:"y",alpha2:"VE",alpha3:"VEN",count:66,mean:[63.6,50.9]},c704:{code:704,nombre:"Viet Nam",name:"Viet Nam",pop:96491,color:"b",alpha2:"VN",alpha3:"VNM",count:182,mean:[280,50.8]},c732:{code:732,nombre:"Sahara Occidental",name:"Western Sahara",pop:567,color:"y",alpha2:"EH",alpha3:"ESH",count:1,mean:[108,68]},c887:{code:887,nombre:"Yemen",name:"Yemen",pop:28915,color:"y",alpha2:"YE",alpha3:"YEM",count:58,mean:[176.4,63.4]},c894:{code:894,nombre:"Zambia",name:"Zambia",pop:17609,color:"b",alpha2:"ZM",alpha3:"ZMB",count:35,mean:[141.8,24.3]},c716:{code:716,nombre:"Zimbabue",name:"Zimbabwe",pop:16913,color:"y",alpha2:"ZW",alpha3:"ZWE",count:34,mean:[138.1,19.2]}}},149:function(e,a,r){"use strict";r.d(a,"a",(function(){return A})),r.d(a,"b",(function(){return M})),r.d(a,"c",(function(){return C}));r(17);var n=r(5),t=r(16),o=r(14),i=r(8),c=r(9),l=(r(42),r(12)),s=r(3);function u(){return(u=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,a){if(null==e)return{};var r,n,t={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],a.indexOf(r)>=0||(t[r]=e[r]);return t}var p=r(0),d=r.n(p),f=r(74),m=(r(106),r(72)),v=(r(83),r(79),r(88),r(125),r(128),r(129),r(99)),g=r(90),b=(r(130),r(131),r(132),r(133),r(134),r(135),r(142)),y=r(39),S=r.n(y);r(136),r(137),r(138),r(139),r(140);function U(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}r(141),r(100);function x(e){var a=e+"BufferGeometry";return Object(p.forwardRef)((function(e,r){var n=e.args,t=e.children,o=h(e,["args","children"]);return d.a.createElement("mesh",u({ref:r},o),d.a.createElement(a,{attach:"geometry",args:n}),t)}))}x("box"),x("circle"),x("cone"),x("cylinder"),x("sphere"),x("plane"),x("tube"),x("torus"),x("torusKnot"),x("tetrahedron"),x("ring"),x("polyhedron"),x("icosahedron"),x("octahedron"),x("dodecahedron"),x("extrude"),x("lathe"),x("parametric");var M=Object(p.forwardRef)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enableDamping:!0},a=arguments.length>1?arguments[1]:void 0,r=Object(f.i)(),n=r.camera,t=r.gl,o=r.invalidate,i=Object(p.useMemo)((function(){return new v.a(n,t.domElement)}),[n,t]);return Object(f.g)((function(){return i.update()})),Object(p.useEffect)((function(){return null==i||null==i.addEventListener||i.addEventListener("change",o),function(){return null==i||null==i.removeEventListener?void 0:i.removeEventListener("change",o)}}),[i,o]),d.a.createElement("primitive",u({dispose:null,object:i,ref:a,enableDamping:!0},e))})),C=Object(p.forwardRef)((function(e,a){var r=Object(f.i)(),n=r.camera,t=r.gl,o=r.invalidate,i=Object(p.useMemo)((function(){return new g.a(n,t.domElement)}),[n,t]);return Object(f.g)((function(){return i.update()})),Object(p.useEffect)((function(){return null==i||null==i.addEventListener||i.addEventListener("change",o),function(){return null==i||null==i.removeEventListener?void 0:i.removeEventListener("change",o)}}),[i,o]),d.a.createElement("primitive",u({dispose:null,object:i,ref:a},e))}));Object(b.a)((function(e){return m.DefaultLoadingManager.onStart=function(a,r,n){return e({active:!0,item:a,loaded:r,total:n,progress:r/n*100})},m.DefaultLoadingManager.onLoad=function(){return e({active:!1})},m.DefaultLoadingManager.onError=function(a){return e((function(e){return{errors:[].concat(Object(l.a)(e.errors),[a])}}))},m.DefaultLoadingManager.onProgress=function(a,r,n){return e({item:a,loaded:r,total:n,progress:r/n*100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}}));var w=new m.Vector3,T=new m.Vector3,_=new m.Vector3;function F(e,a,r){var n=w.setFromMatrixPosition(e.matrixWorld);n.project(a);var t=r.width/2,o=r.height/2;return[n.x*t+t,-n.y*o+o]}var A=d.a.forwardRef((function(e,a){var r,n=e.children,t=e.eps,o=void 0===t?.001:t,i=e.style,c=e.className,l=e.prepend,v=e.center,g=e.fullscreen,b=e.portal,y=e.scaleFactor,U=e.zIndexRange,x=void 0===U?[16777271,0]:U,M=h(e,["children","eps","style","className","prepend","center","fullscreen","portal","scaleFactor","zIndexRange"]),C=Object(f.i)(),A=C.gl,k=C.scene,D=C.camera,P=C.size,B=Object(p.useState)((function(){return document.createElement("div")})),O=Object(s.a)(B,1)[0],I=Object(p.useRef)(null),G=Object(p.useRef)([0,0]),E=null!=(r=null==b?void 0:b.current)?r:A.domElement.parentNode;Object(p.useEffect)((function(){if(I.current){k.updateMatrixWorld();var e=F(I.current,D,P);return O.style.cssText="position:absolute;top:0;left:0;transform:translate3d("+e[0]+"px,"+e[1]+"px,0);transform-origin:0 0;",E&&(l?E.prepend(O):E.appendChild(O)),function(){E&&E.removeChild(O),S.a.unmountComponentAtNode(O)}}}),[E]);var R=Object(p.useMemo)((function(){return u({position:"absolute",transform:v?"translate3d(-50%,-50%,0)":"none"},g&&{top:-P.height/2,left:-P.width/2,width:P.width,height:P.height},i)}),[i,v,g,P]);return Object(p.useEffect)((function(){S.a.render(d.a.createElement("div",{ref:a,style:R,className:c,children:n}),O)})),Object(f.g)((function(){if(I.current){var e=F(I.current,D,P);if(Math.abs(G.current[0]-e[0])>o||Math.abs(G.current[1]-e[1])>o){O.style.display=function(e,a){var r=w.setFromMatrixPosition(e.matrixWorld),n=T.setFromMatrixPosition(a.matrixWorld),t=r.sub(n),o=a.getWorldDirection(_);return t.angleTo(o)>Math.PI/2}(I.current,D)?"none":"block";var a=void 0===y?1:function(e,a){if(a instanceof m.PerspectiveCamera){var r=w.setFromMatrixPosition(e.matrixWorld),n=T.setFromMatrixPosition(a.matrixWorld),t=a.fov*Math.PI/180,o=r.distanceTo(n);return 1/(2*Math.tan(t/2)*o)}return a instanceof m.OrthographicCamera?a.zoom:1}(I.current,D)*y;O.style.transform="translate3d("+e[0]+"px,"+e[1]+"px,0) scale("+a+")",O.style.zIndex=""+function(e,a,r){if(a instanceof m.PerspectiveCamera||a instanceof m.OrthographicCamera){var n=w.setFromMatrixPosition(e.matrixWorld),t=T.setFromMatrixPosition(a.matrixWorld),o=n.distanceTo(t),i=(r[1]-r[0])/(a.far-a.near),c=r[1]-i*a.far;return Math.round(i*o+c)}}(I.current,D,x)}G.current=e}})),d.a.createElement("group",u({},M,{ref:I}))}));new m.Matrix4,new m.Ray,new m.Sphere,new m.Vector3;m.MeshPhysicalMaterial,m.MeshStandardMaterial;m.ShaderMaterial},150:function(e,a,r){"use strict";r.d(a,"a",(function(){return u}));var n={},t={};function o(e){return new Function("d","return {"+e.map((function(e,a){return JSON.stringify(e)+": d["+a+'] || ""'})).join(",")+"}")}function i(e){var a=Object.create(null),r=[];return e.forEach((function(e){for(var n in e)n in a||r.push(a[n]=n)})),r}function c(e,a){var r=e+"",n=r.length;return n<a?new Array(a-n+1).join(0)+r:r}function l(e){var a,r=e.getUTCHours(),n=e.getUTCMinutes(),t=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((a=e.getUTCFullYear())<0?"-"+c(-a,6):a>9999?"+"+c(a,6):c(a,4))+"-"+c(e.getUTCMonth()+1,2)+"-"+c(e.getUTCDate(),2)+(o?"T"+c(r,2)+":"+c(n,2)+":"+c(t,2)+"."+c(o,3)+"Z":t?"T"+c(r,2)+":"+c(n,2)+":"+c(t,2)+"Z":n||r?"T"+c(r,2)+":"+c(n,2)+"Z":"")}var s=function(e){var a=new RegExp('["'+e+"\n\r]"),r=e.charCodeAt(0);function c(e,a){var o,i=[],c=e.length,l=0,s=0,u=c<=0,h=!1;function p(){if(u)return t;if(h)return h=!1,n;var a,o,i=l;if(34===e.charCodeAt(i)){for(;l++<c&&34!==e.charCodeAt(l)||34===e.charCodeAt(++l););return(a=l)>=c?u=!0:10===(o=e.charCodeAt(l++))?h=!0:13===o&&(h=!0,10===e.charCodeAt(l)&&++l),e.slice(i+1,a-1).replace(/""/g,'"')}for(;l<c;){if(10===(o=e.charCodeAt(a=l++)))h=!0;else if(13===o)h=!0,10===e.charCodeAt(l)&&++l;else if(o!==r)continue;return e.slice(i,a)}return u=!0,e.slice(i,c)}for(10===e.charCodeAt(c-1)&&--c,13===e.charCodeAt(c-1)&&--c;(o=p())!==t;){for(var d=[];o!==n&&o!==t;)d.push(o),o=p();a&&null==(d=a(d,s++))||i.push(d)}return i}function s(a,r){return a.map((function(a){return r.map((function(e){return h(a[e])})).join(e)}))}function u(a){return a.map(h).join(e)}function h(e){return null==e?"":e instanceof Date?l(e):a.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,a){var r,n,t=c(e,(function(e,t){if(r)return r(e,t-1);n=e,r=a?function(e,a){var r=o(e);return function(n,t){return a(r(n),t,e)}}(e,a):o(e)}));return t.columns=n||[],t},parseRows:c,format:function(a,r){return null==r&&(r=i(a)),[r.map(h).join(e)].concat(s(a,r)).join("\n")},formatBody:function(e,a){return null==a&&(a=i(e)),s(e,a).join("\n")},formatRows:function(e){return e.map(u).join("\n")},formatRow:u,formatValue:h}}(","),u=s.parse;s.parseRows,s.format,s.formatBody,s.formatRows,s.formatRow,s.formatValue},344:function(e,a,r){"use strict";r.r(a);var n=r(3),t=r(102),o=r(0),i=r.n(o),c=r(150),l=r(72),s=r(74),u=r(149),h=r(79),p=r(83),d=r(88),f=r(145),m=r(19),v=r(13),g=r(146),b=r(147);function y(){var e=Object(t.a)(["\n\nuniform float time;\nuniform float progress;\nuniform bool dark;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform vec4 resolution;\nvarying vec2 vUv;\nvarying vec4 vPosition;\nvarying vec3 c;\n\nvoid main() {\n  float width = 0.01;\n  float prec = 0.3;\n\n  // Border = step(vUv.x, width);\n\n  float borderX = max(\n  smoothstep(width + prec, width - prec, vUv.x),\n  smoothstep(width + prec, width - prec, 1. - vUv.x)\n  );\n\n  float borderY = max(\n  smoothstep(width + prec, width - prec, vUv.y),\n  smoothstep(width + prec, width - prec, 1. - vUv.y)\n  );\n\n  // 1 on the border, 0 else\n  float border = max(borderX, borderY);\n\n  vec3 borderColor = vec3(0.,0.,0.);\n  vec3 fillColor = c;\n\n  vec3 finalColor = mix(fillColor, borderColor, border / 4.);\n\n\tgl_FragColor = vec4(finalColor,1.);\n}\n"]);return y=function(){return e},e}function S(){var e=Object(t.a)(["\nuniform float time;\n\nvarying vec2 vUv;\nvarying vec4 vPosition;\nuniform vec2 pixels;\n\nattribute vec3 color;\nvarying vec3 c;\n\nvoid main() {\n  vUv = uv;\n  c = color;\n\n  vec4 mvPosition = vec4( position, 1.0 );\n  #ifdef USE_INSTANCING\n\n  mvPosition = instanceMatrix * mvPosition;\n  #endif\n\n  gl_Position = projectionMatrix * modelViewMatrix * mvPosition;\n}\n"]);return S=function(){return e},e}Object(s.e)({LineMaterial:h.a,LineGeometry:p.a,Line2:d.a});var U=new l.Object3D,x=new l.Color,M=function(e){var a=b.a["c".concat(e)].color;return g.a[a]},C=function(e){for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return e.map((function(e,a){return[e,r[a]]})).flat().join("")},w=C(S()),T=C(y()),_=function(e){var a,r,t,c,h,p,d=e.dark,f=e.count,m=e.data,v=(e.selected,e.changeSelected),g=e.isEnglish,y=Object(o.useState)(),S=Object(n.a)(y,2),C=S[0],_=S[1],F=Object(o.useRef)(),A=Object(o.useRef)(),k=new l.Vector3,D=Object(o.useRef)();Object(o.useEffect)((function(){A.current=C}),[C]);var P=Object(o.useMemo)((function(){return{time:{type:"float",value:0},dark:{type:"boolean",value:!0},resolution:{type:"v4",value:new l.Vector4}}}),[]),B=Object(o.useMemo)((function(){return Float32Array.from(m.flatMap((function(e,a){return x.set(M(e.CountryCode)).toArray()})))}),[m]);return Object(s.g)((function(e){var a=l.MathUtils.clamp(e.mouse.x,-.75,.75),r=l.MathUtils.clamp(e.mouse.y,-.55,.55),n=k.set(a,r,.5);n.unproject(e.camera);var t=n.sub(e.camera.position).normalize(),o=(0-e.camera.position.z)/t.z,i=e.camera.position.clone().add(t.multiplyScalar(o));D.current.position.copy(i);var c=e.clock.getElapsedTime();F.current.material.uniforms.time.value=c,F.current.material.uniforms.dark.value=d,m.forEach((function(e,a){U.position.set(+e.X-177.5,+e.Y-67,0),C!==A.current&&(x.set(e.CountryCode===C?d?"white":"silver":M(e.CountryCode)).toArray(B,3*a),F.current.geometry.attributes.color.needsUpdate=!0);U.scale.set(1,1,1),U.updateMatrix(),F.current.setMatrixAt(a,U.matrix)})),F.current.instanceMatrix.needsUpdate=!0})),i.a.createElement(i.a.Fragment,null,i.a.createElement("instancedMesh",{ref:F,args:[null,null,f],onPointerMove:function(e){var a;return _(null===(a=m[e.instanceId])||void 0===a?void 0:a.CountryCode)},onPointerOut:function(e){return _(null)},onClick:function(e){return v(e)}},i.a.createElement("planeBufferGeometry",{attach:"geometry",args:[1,1,1]},i.a.createElement("instancedBufferAttribute",{attachObject:["attributes","color"],args:[B,3]})),i.a.createElement("shaderMaterial",{attach:"material",args:[{uniforms:P,vertexShader:w,fragmentShader:T,side:l.DoubleSide}]})),i.a.createElement("mesh",{ref:D,style:{pointerEvents:"none"}},i.a.createElement(u.a,{style:{pointerEvents:"none"}},i.a.createElement("div",{style:{transform:"translate3d(-100px,40px,0)",opacity:C?1:0,width:"200px",height:"auto",pointerEvents:"none",background:"var(--background-color)",border:"1px solid var(--foreground-color)",color:"var(--foreground-color)",transition:"all 200ms",position:"absolute",top:0,left:0,padding:"0.5em 1em"}},i.a.createElement("h4",{style:{color:C?M(C):"",transition:"color 60ms"}},g?null===(a=b.a["c".concat(C)])||void 0===a?void 0:a.name:null===(r=b.a["c".concat(C)])||void 0===r?void 0:r.nombre),i.a.createElement("p",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"}},g?"Pop:":"Pob:",i.a.createElement("strong",{style:{marginLeft:"auto"}},((null===(t=b.a["c".concat(C)])||void 0===t?void 0:t.pop)?1e3*(null===(c=b.a["c".concat(C)])||void 0===c?void 0:c.pop):"0").toLocaleString())),i.a.createElement("p",null,i.a.createElement("span",{style:{color:C?M(C):"",transition:"color 60ms"}},"\u25a0"),i.a.createElement("strong",null," ",null===(h=b.a["c".concat(C)])||void 0===h?void 0:h.count)," ",g?"square":"cuadrado",(null===(p=b.a["c".concat(C)])||void 0===p?void 0:p.count)>1?"s":"")))))},F=function(e){var a=e.dark;return i.a.createElement(i.a.Fragment,null,f.a.map((function(e,r){return i.a.createElement(A,{key:"line".concat(r),line:e,color:a?g.a.lines.dark:g.a.lines.light})})))};a.default=function(){var e=Object(o.useState)(null),a=Object(n.a)(e,2),r=a[0],t=a[1],l=Object(o.useState)(!1),h=Object(n.a)(l,2),p=h[0],d=h[1],f=Object(o.useState)(),g=Object(n.a)(f,2),b=g[0],y=g[1],S=Object(o.useContext)(m.b).dark,U=Object(o.useContext)(v.c).language.isEnglish;return Object(o.useEffect)((function(){fetch("https://raw.githubusercontent.com/mattdzugan/World-Population-Cartogram/master/data/year_2018__cell_500k/squares/cells.csv").then((function(e){return e.ok?e.text():Promise.reject(e.status)})).then((function(e){t(Object(c.a)(e)),d(!0)}))}),[]),i.a.createElement("div",{style:{width:"100%",height:"100vh",cursor:"pointer"}},i.a.createElement(s.a,{pixelRatio:window.devicePixeRatio,camera:{position:[0,0,100]}},i.a.createElement(F,{dark:S}),p&&i.a.createElement(_,{data:r,count:null===r||void 0===r?void 0:r.length,dark:S,selected:b,changeSelected:function(e){y(r[e.instanceId].CountryCode)},isEnglish:U}),i.a.createElement(u.b,null)))};var A=function(e){var a=e.line,r=e.width,n=void 0===r?1:r,t=e.color,c=void 0===t?"#544E4B":t,l=Object(s.i)().size,u=Object(o.useRef)(),h=Object(o.useRef)(),p=Object(s.j)((function(e){e.setPositions(a),u.current.defines.USE_DASH="",h.current.computeLineDistances()}),[]);return i.a.createElement("line2",{ref:h},i.a.createElement("lineGeometry",{attach:"geometry",ref:p}),i.a.createElement("lineMaterial",{ref:u,attach:"material",color:c,linewidth:n,resolution:[l.width,l.height],dashed:!0,dashSize:.5,gapSize:.5,dashScale:1}))}}}]);
//# sourceMappingURL=14.14686ff5.chunk.js.map
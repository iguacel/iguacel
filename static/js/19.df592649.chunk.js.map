{"version":3,"sources":["utils/browsers.js","hooks/useSmallSize.js","exp/comp/Canvas.js","data/cartoSpain.js","data/covidSpainOptions.js","exp/Exp20.js"],"names":["isSafari","undefined","window","safari","isTouchDevice","DocumentTouch","document","navigator","maxTouchPoints","msMaxTouchPoints","useSmallSize","isClient","getSize","innerWidth","innerHeight","useState","windowSize","setWindowSize","useEffect","handleResize","addEventListener","removeEventListener","width","height","draw","border","canvasRef","useRef","canvas","current","ctx","getContext","ratio","devicePixelRatio","style","scale","ref","c56","ine","id","name_s","name","ccaa","ccaa_es","abv","abv2","cell","c57","c76","c15","c2","c44","c53","c49","c29","c4","c14","c43","c73","c3","c37","c54","c65","c0","c46","c5","c19","c75","c35","c63","c17","c66","c12","c18","c1","c45","c74","c67","c16","c11","c13","c91","c10","c26","c33","c90","c34","c64","c25","c28","c36","c55","c47","c24","c23","c27","c83","c84","value","label","label_es","desc","desc_es","max","href","title","target","rel","Menu","size","cartogram","useMemo","cellSize","grid","i","j","position","x","y","row","column","center","carto","push","drawCartogram","useMeasure","polyfill","ResizeObserver","refDiv","data","setData","commit","setCommit","isLoaded","setIsLoaded","visible","setVisible","isLog","setIsLog","selected","setSelected","isOpen","setIsOpen","Date","startDate","dark","useContext","ThemeContext","language","LanguageContext","isEnglish","isTouch","changeLog","rtf","Intl","PluralRules","RelativeTimeFormat","numeric","select","fetch","then","res","ok","text","Promise","reject","status","csvParse","out","reduce","acc","arr","meta","ine_code","date","Object","keys","forEach","c","firstDate","catch","error","console","log","json","author","login","xScale","scaleTime","domain","range","getMax","options","find","yScale","scaleLinear","yScaleLog","scaleLog","colors","bg","main","lightColor","BgCanvasCell","this","fillStyle","fillRect","areaGen","area","y0","curve","curveStep","context","filteredData","filter","isNaN","parseFloat","isFinite","font","beginPath","textAlign","textBaseline","length","map","point","fillText","closePath","fill","objects","clearRect","update","display","justifyContent","alignItems","margin","flexDirection","changeVisible","top","left","transform","overflow","zIndex","viewBox","key","marginLeft","Canvas","className","Key","vxScaleLinear","nice","vxScaleLog","stroke","opacity","Grid","numTicksRows","numTicksColumns","AxisRight","numTicks","tickStroke","tickLabelProps","index","textAnchor","dx","dy","tickFormat","tickComponent","formattedValue","tickProps","fontSize","cx","cy","r","strokeWidth","pointerEvents","dominantBaseline","cursor","onClick","Select","items","onChange","e","preventDefault","currentTarget","item","SvgCell","transformOrigin","Tooltip","bounds","tipAnimation","useSpring","metaOptions","newMax","Math","newMaxDate","div","background","borderBottom","padding","fontWeight","letterSpacing","xmlns","aria-hidden","d","flexBasis","toLocaleDateString","month","day","LastCommit","units","elapsed","unit","amount","abs","format","round","relatime","toLocaleString","split","replace","Graph","gHeight","gWidth","clamp","xAcc","yAcc","bisectDate","bisector","useTooltip","tooltipData","tooltipLeft","tooltipTop","showTooltip","tooltipOpen","hideTooltip","svgRef","handleTooltip","event","coords","localPoint","ownerSVGElement","x0","invert","d0","d1","x1","y1","x2","y2","offset","stopColor","stopOpacity","LinePath","columnLineStyle","lineStyle","AreaClosed","AxisLeft","hideAxisLine","hideTicks","Bar","AxisBottom","onTouchStart","onTouchMove","onMouseMove","onMouseLeave","Line","from","to","strokeDasharray"],"mappings":"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","file":"static/js/19.df592649.chunk.js","sourcesContent":["export const isSafari = window.safari !== undefined;\n\nexport const isTouchDevice = () => {\n  return (\n    !!(\n      typeof window !== \"undefined\" &&\n      (\"ontouchstart\" in window ||\n        (window.DocumentTouch &&\n          typeof document !== \"undefined\" &&\n          document instanceof window.DocumentTouch))\n    ) ||\n    !!(\n      typeof navigator !== \"undefined\" &&\n      (navigator.maxTouchPoints || navigator.msMaxTouchPoints)\n    )\n  );\n}\n","import { useState, useEffect } from 'react';\n\nfunction useSmallSize() {\n  const isClient = typeof window === 'object';\n\n  function getSize() {\n    return isClient ? window.innerWidth > window.innerHeight ? window.innerHeight : window.innerWidth : undefined;\n  }\n\n  const [windowSize, setWindowSize] = useState(getSize);\n\n  useEffect(() => {\n    if (!isClient) {\n      return false;\n    }\n\n    function handleResize() {\n      setWindowSize(getSize());\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []); // Empty array ensures that effect is only run on mount and unmount\n\n  return windowSize;\n}\n\nexport default useSmallSize;","import React, { useRef, useEffect } from \"react\";\n\nexport default ({ width, height, draw, border }) => {\n  let canvasRef = useRef();\n\n  const scale = (canvas, ctx) => {\n    const ratio = window.devicePixelRatio || 1;\n\n    canvas.width = width * ratio;\n    canvas.height = height * ratio;\n\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n\n    ctx.scale(ratio, ratio);\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    scale(canvas, ctx);\n    draw(canvas, ctx);\n  });\n\n  return (\n    <canvas\n      style={{ border: border ? \"1px solid white\" : \"\" }}\n      ref={canvasRef}\n      width={width}\n      height={height}\n    />\n  );\n};\n","export default {\n  c56: {\n    ine: \"2\",\n    id: \"c2\",\n    name_s: \"Albacete\",\n    name: \"Albacete\",\n    ccaa: \"Castilla - La Mancha\",\n    ccaa_es: \"CM\",\n    abv: \"AB\",\n    abv2: \"AB\",\n    cell: 56\n  },\n  c57: {\n    ine: \"3\",\n    id: \"c3\",\n    name_s: \"Alicante\",\n    name: \"Alicante/Alacant\",\n    ccaa: \"Comunitat Valenciana\",\n    ccaa_es: \"VC\",\n    abv: \"A\",\n    abv2: \"A\",\n    cell: 57,\n  },\n  c76: {\n    ine: \"4\",\n    id: \"c4\",\n    name_s: \"Almería\",\n    name: \"Almería\",\n    ccaa: \"Andalucía\",\n    ccaa_es: \"AN\",\n    abv: \"AL\",\n    abv2: \"AL\",\n    cell: 76\n  },\n  c15: {\n    ine: \"1\",\n    id: \"c1\",\n    name_s: \"Araba\",\n    name: \"Araba/Álava\",\n    ccaa: \"País Vasco\",\n    ccaa_es: \"PV\",\n    abv: \"VI\",\n    abv2: \"AR\",\n    cell: 15\n  },\n  c2: {\n    ine: \"33\",\n    id: \"c33\",\n    name_s: \"Asturias\",\n    name: \"Asturias\",\n    ccaa: \"Asturias\",\n    ccaa_es: \"AS\",\n    abv: \"O\",\n    abv2: \"AS\",\n    cell: 2\n  },\n  c44: {\n    ine: \"5\",\n    id: \"c5\",\n    name_s: \"Ávila\",\n    name: \"Ávila\",\n    ccaa: \"Castilla y León\",\n    ccaa_es: \"CL\",\n    abv: \"AV\",\n    abv2: \"AV\",\n    cell: 44\n  },\n  c53: {\n    ine: \"6\",\n    id: \"c6\",\n    name_s: \"Badajoz\",\n    name: \"Badajoz\",\n    ccaa: \"Extremadura\",\n    ccaa_es: \"EX\",\n    abv: \"BA\",\n    abv2: \"BA\",\n    cell: 53\n  },\n  c49: {\n    ine: \"7\",\n    id: \"c7\",\n    name_s: \"Balears\",\n    name: \"Balears, Illes\",\n    ccaa: \"Illes Balears\",\n    ccaa_es: \"IB\",\n    abv: \"IB\",\n    abv2: \"IB\",\n    cell: 49,\n  },\n  c29: {\n    ine: \"8\",\n    id: \"c8\",\n    name_s: \"Barcelona\",\n    name: \"Barcelona\",\n    ccaa: \"Cataluña\",\n    ccaa_es: \"CT\",\n    abv: \"B\",\n    abv2: \"B\",\n    cell: 29\n  },\n  c4: {\n    ine: \"48\",\n    id: \"c48\",\n    name_s: \"Bizkaia\",\n    name: \"Bizkaia\",\n    ccaa: \"País Vasco\",\n    ccaa_es: \"PV\",\n    abv: \"BI\",\n    abv2: \"BI\",\n    cell: 4\n  },\n  c14: {\n    ine: \"9\",\n    id: \"c9\",\n    name_s: \"Burgos\",\n    name: \"Burgos\",\n    ccaa: \"Castilla y León\",\n    ccaa_es: \"CL\",\n    abv: \"BU\",\n    abv2: \"BU\",\n    cell: 14\n  },\n  c43: {\n    ine: \"10\",\n    id: \"c10\",\n    name_s: \"Cáceres\",\n    name: \"Cáceres\",\n    ccaa: \"Extremadura\",\n    ccaa_es: \"EX\",\n    abv: \"CC\",\n    abv2: \"CC\",\n    cell: 43\n  },\n  c73: {\n    ine: \"11\",\n    id: \"c11\",\n    name_s: \"Cádiz\",\n    name: \"Cádiz\",\n    ccaa: \"Andalucía\",\n    ccaa_es: \"AN\",\n    abv: \"CA\",\n    abv2: \"CA\",\n    cell: 73\n  },\n  c3: {\n    ine: \"39\",\n    id: \"c39\",\n    name_s: \"Cantabria\",\n    name: \"Cantabria\",\n    ccaa: \"Cantabria\",\n    ccaa_es: \"CB\",\n    abv: \"S\",\n    abv2: \"CN\",\n    cell: 3\n  },\n  c37: {\n    ine: \"12\",\n    id: \"c12\",\n    name_s: \"Castellón\",\n    name: \"Castellón/Castelló\",\n    ccaa: \"Comunitat Valenciana\",\n    ccaa_es: \"VC\",\n    abv: \"CS\",\n    abv2: \"CS\",\n    cell: 37,\n  },\n  c54: {\n    ine: \"13\",\n    id: \"c13\",\n    name_s: \"Ciudad Real\",\n    name: \"Ciudad Real\",\n    ccaa: \"Castilla - La Mancha\",\n    ccaa_es: \"CM\",\n    abv: \"CR\",\n    abv2: \"CR\",\n    cell: 54,\n  },\n  c65: {\n    ine: \"14\",\n    id: \"c14\",\n    name_s: \"Córdoba\",\n    name: \"Córdoba\",\n    ccaa: \"Andalucía\",\n    ccaa_es: \"AN\",\n    abv: \"CO\",\n    abv2: \"CO\",\n    cell: 65\n  },\n  c0: {\n    ine: \"15\",\n    id: \"c15\",\n    name_s: \"A Coruña\",\n    name: \"Coruña, A\",\n    ccaa: \"Galicia\",\n    ccaa_es: \"GA\",\n    abv: \"C\",\n    abv2: \"C\",\n    cell: 0\n  },\n  c46: {\n    ine: \"16\",\n    id: \"c16\",\n    name_s: \"Cuenca\",\n    name: \"Cuenca\",\n    ccaa: \"Castilla - La Mancha\",\n    ccaa_es: \"CM\",\n    abv: \"CU\",\n    abv2: \"CU\",\n    cell: 46\n  },\n  c5: {\n    ine: \"20\",\n    id: \"c20\",\n    name_s: \"Gipuzkoa\",\n    name: \"Gipuzkoa\",\n    ccaa: \"País Vasco\",\n    ccaa_es: \"PV\",\n    abv: \"SS\",\n    abv2: \"G\",\n    cell: 5\n  },\n  c19: {\n    ine: \"17\",\n    id: \"c17\",\n    name_s: \"Girona\",\n    name: \"Girona\",\n    ccaa: \"Cataluña\",\n    ccaa_es: \"CT\",\n    abv: \"GI\",\n    abv2: \"GI\",\n    cell: 19\n  },\n  c75: {\n    ine: \"18\",\n    id: \"c18\",\n    name_s: \"Granada\",\n    name: \"Granada\",\n    ccaa: \"Andalucía\",\n    ccaa_es: \"AN\",\n    abv: \"GR\",\n    abv2: \"GR\",\n    cell: 75\n  },\n  c35: {\n    ine: \"19\",\n    id: \"c19\",\n    name_s: \"Guadalajara\",\n    name: \"Guadalajara\",\n    ccaa: \"Castilla - La Mancha\",\n    ccaa_es: \"CM\",\n    abv: \"GU\",\n    abv2: \"GU\",\n    cell: 35,\n  },\n  c63: {\n    ine: \"21\",\n    id: \"c21\",\n    name_s: \"Huelva\",\n    name: \"Huelva\",\n    ccaa: \"Andalucía\",\n    ccaa_es: \"AN\",\n    abv: \"H\",\n    abv2: \"H\",\n    cell: 63\n  },\n  c17: {\n    ine: \"22\",\n    id: \"c22\",\n    name_s: \"Huesca\",\n    name: \"Huesca\",\n    ccaa: \"Aragón\",\n    ccaa_es: \"AR\",\n    abv: \"HU\",\n    abv2: \"HU\",\n    cell: 17\n  },\n  c66: {\n    ine: \"23\",\n    id: \"c23\",\n    name_s: \"Jaén\",\n    name: \"Jaén\",\n    ccaa: \"Andalucía\",\n    ccaa_es: \"AN\",\n    abv: \"J\",\n    abv2: \"J\",\n    cell: 66\n  },\n  c12: {\n    ine: \"24\",\n    id: \"c24\",\n    name_s: \"León\",\n    name: \"León\",\n    ccaa: \"Castilla y León\",\n    ccaa_es: \"CL\",\n    abv: \"LE\",\n    abv2: \"LE\",\n    cell: 12\n  },\n  c18: {\n    ine: \"25\",\n    id: \"c25\",\n    name_s: \"Lleida\",\n    name: \"Lleida\",\n    ccaa: \"Cataluña\",\n    ccaa_es: \"CT\",\n    abv: \"L\",\n    abv2: \"L\",\n    cell: 18\n  },\n  c1: {\n    ine: \"27\",\n    id: \"c27\",\n    name_s: \"Lugo\",\n    name: \"Lugo\",\n    ccaa: \"Galicia\",\n    ccaa_es: \"GA\",\n    abv: \"LU\",\n    abv2: \"LU\",\n    cell: 1\n  },\n  c45: {\n    ine: \"28\",\n    id: \"c28\",\n    name_s: \"Madrid\",\n    name: \"Madrid\",\n    ccaa: \"Comunidad de Madrid\",\n    ccaa_es: \"MD\",\n    abv: \"M\",\n    abv2: \"M\",\n    cell: 45\n  },\n  c74: {\n    ine: \"29\",\n    id: \"c29\",\n    name_s: \"Málaga\",\n    name: \"Málaga\",\n    ccaa: \"Andalucía\",\n    ccaa_es: \"AN\",\n    abv: \"MA\",\n    abv2: \"MA\",\n    cell: 74\n  },\n  c67: {\n    ine: \"30\",\n    id: \"c30\",\n    name_s: \"Murcia\",\n    name: \"Murcia\",\n    ccaa: \"Región de Murcia\",\n    ccaa_es: \"MC\",\n    abv: \"MU\",\n    abv2: \"MU\",\n    cell: 67\n  },\n  c16: {\n    ine: \"31\",\n    id: \"c31\",\n    name_s: \"Navarra\",\n    name: \"Navarra\",\n    ccaa: \"Comunidad Foral de Navarra\",\n    ccaa_es: \"NC\",\n    abv: \"NA\",\n    abv2: \"NA\",\n    cell: 16\n  },\n  c11: {\n    ine: \"32\",\n    id: \"c32\",\n    name_s: \"Ourense\",\n    name: \"Ourense\",\n    ccaa: \"Galicia\",\n    ccaa_es: \"GA\",\n    abv: \"OU\",\n    abv2: \"OU\",\n    cell: 11\n  },\n  c13: {\n    ine: \"34\",\n    id: \"c34\",\n    name_s: \"Palencia\",\n    name: \"Palencia\",\n    ccaa: \"Castilla y León\",\n    ccaa_es: \"CL\",\n    abv: \"P\",\n    abv2: \"P\",\n    cell: 13\n  },\n  c91: {\n    ine: \"35\",\n    id: \"c35\",\n    name_s: \"Las Palmas\",\n    name: \"Palmas, Las\",\n    ccaa: \"Canarias\",\n    ccaa_es: \"CN\",\n    abv: \"GC\",\n    abv2: \"GC\",\n    cell: 91,\n  },\n  c10: {\n    ine: \"36\",\n    id: \"c36\",\n    name_s: \"Pontevedra\",\n    name: \"Pontevedra\",\n    ccaa: \"Galicia\",\n    ccaa_es: \"GA\",\n    abv: \"PO\",\n    abv2: \"PO\",\n    cell: 10,\n  },\n  c26: {\n    ine: \"26\",\n    id: \"c26\",\n    name_s: \"La Rioja\",\n    name: \"Rioja, La\",\n    ccaa: \"La Rioja\",\n    ccaa_es: \"LR\",\n    abv: \"LO\",\n    abv2: \"LR\",\n    cell: 26\n  },\n  c33: {\n    ine: \"37\",\n    id: \"c37\",\n    name_s: \"Salamanca\",\n    name: \"Salamanca\",\n    ccaa: \"Castilla y León\",\n    ccaa_es: \"CL\",\n    abv: \"SA\",\n    abv2: \"SA\",\n    cell: 33,\n  },\n  c90: {\n    ine: \"38\",\n    id: \"c38\",\n    name_s: \"Tenerife\",\n    name: \"Santa Cruz de Tenerife\",\n    ccaa: \"Canarias\",\n    ccaa_es: \"CN\",\n    abv: \"TF\",\n    abv2: \"TF\",\n    cell: 90,\n  },\n  c34: {\n    ine: \"40\",\n    id: \"c40\",\n    name_s: \"Segovia\",\n    name: \"Segovia\",\n    ccaa: \"Castilla y León\",\n    ccaa_es: \"CL\",\n    abv: \"SG\",\n    abv2: \"SG\",\n    cell: 34\n  },\n  c64: {\n    ine: \"41\",\n    id: \"c41\",\n    name_s: \"Sevilla\",\n    name: \"Sevilla\",\n    ccaa: \"Andalucía\",\n    ccaa_es: \"AN\",\n    abv: \"SE\",\n    abv2: \"SE\",\n    cell: 64\n  },\n  c25: {\n    ine: \"42\",\n    id: \"c42\",\n    name_s: \"Soria\",\n    name: \"Soria\",\n    ccaa: \"Castilla y León\",\n    ccaa_es: \"CL\",\n    abv: \"SO\",\n    abv2: \"SO\",\n    cell: 25\n  },\n  c28: {\n    ine: \"43\",\n    id: \"c43\",\n    name_s: \"Tarragona\",\n    name: \"Tarragona\",\n    ccaa: \"Cataluña\",\n    ccaa_es: \"CT\",\n    abv: \"T\",\n    abv2: \"T\",\n    cell: 28\n  },\n  c36: {\n    ine: \"44\",\n    id: \"c44\",\n    name_s: \"Teruel\",\n    name: \"Teruel\",\n    ccaa: \"Aragón\",\n    ccaa_es: \"AR\",\n    abv: \"TE\",\n    abv2: \"TE\",\n    cell: 36\n  },\n  c55: {\n    ine: \"45\",\n    id: \"c45\",\n    name_s: \"Toledo\",\n    name: \"Toledo\",\n    ccaa: \"Castilla - La Mancha\",\n    ccaa_es: \"CM\",\n    abv: \"TO\",\n    abv2: \"TO\",\n    cell: 55\n  },\n  c47: {\n    ine: \"46\",\n    id: \"c46\",\n    name_s: \"Valencia\",\n    name: \"Valencia/València\",\n    ccaa: \"Comunitat Valenciana\",\n    ccaa_es: \"VC\",\n    abv: \"V\",\n    abv2: \"V\",\n    cell: 47,\n  },\n  c24: {\n    ine: \"47\",\n    id: \"c47\",\n    name_s: \"Valladolid\",\n    name: \"Valladolid\",\n    ccaa: \"Castilla y León\",\n    ccaa_es: \"CL\",\n    abv: \"VA\",\n    abv2: \"VA\",\n    cell: 24,\n  },\n  c23: {\n    ine: \"49\",\n    id: \"c49\",\n    name_s: \"Zamora\",\n    name: \"Zamora\",\n    ccaa: \"Castilla y León\",\n    ccaa_es: \"CL\",\n    abv: \"ZA\",\n    abv2: \"ZA\",\n    cell: 23\n  },\n  c27: {\n    ine: \"50\",\n    id: \"c50\",\n    name_s: \"Zaragoza\",\n    name: \"Zaragoza\",\n    ccaa: \"Aragón\",\n    ccaa_es: \"AR\",\n    abv: \"Z\",\n    abv2: \"Z\",\n    cell: 27\n  },\n  c83: {\n    ine: \"51\",\n    id: \"c51\",\n    name_s: \"Ceuta\",\n    name: \"Ceuta\",\n    ccaa: \"Ceuta\",\n    ccaa_es: \"CE\",\n    abv: \"CE\",\n    abv2: \"CE\",\n    cell: 83\n  },\n  c84: {\n    ine: \"52\",\n    id: \"c52\",\n    name_s: \"Melilla\",\n    name: \"Melilla\",\n    ccaa: \"Melilla\",\n    ccaa_es: \"ME\",\n    abv: \"ML\",\n    abv2: \"ML\",\n    cell: 84\n  },\n};","import React from \"react\";\n\nexport default [\n  {\n    value: \"cases_accumulated\",\n    label: \"Cases\",\n    label_es: \"Casos\",\n    desc: \"Cases (cumulative).\",\n    desc_es: \"Casos (acumulado).\",\n    max: 120000,\n  },\n  {\n    value: \"new_cases\",\n    label: \"New cases reported\",\n    label_es: \"Nuevos casos\",\n    desc: \"New cases.\",\n    desc_es: \"Nuevos casos.\",\n    max: 2000,\n  },\n  {\n    value: \"deceased\",\n    label: \"Deaths\",\n    label_es: \"Muertos\",\n    desc: \"Deaths (cumulative).\",\n    desc_es: \"Muertes (acumulado).\",\n    max: 15000,\n  },\n  {\n    value: \"activos\",\n    label: \"Active cases\",\n    label_es: \"Casos activos\",\n    desc: \"Active cases.\",\n    desc_es: \"Casos activos.\",\n    max: 12000,\n  },\n  {\n    value: \"recovered\",\n    label: \"Recovered\",\n    label_es: \"Recuperados\",\n    desc: \"Recovered (cumulative).\",\n    desc_es: \"Recuperados (acumulado).\",\n    max: 25000,\n  },\n  {\n    value: \"hospitalized\",\n    label: \"Hospitalized\",\n    label_es: \"Hospitalizados\",\n    max: 1000,\n    desc: (\n      <p>\n        Hospitalized.{\" \"}\n        <a\n          href=\"https://github.com/montera34/escovid19data/wiki#hospitalizados\"\n          title=\"Wiki\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Mix of cumulative and daily.\n        </a>\n      </p>\n    ),\n    desc_es: (\n      <p>\n        Hospitalizados.\n        <a\n          href=\"https://github.com/montera34/escovid19data/wiki#hospitalizados\"\n          title=\"Wiki\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Mezcla acumulados y diarios.\n        </a>\n      </p>\n    ),\n    max: 80000,\n  },\n  {\n    value: \"intensive_care\",\n    label: \"Intensive care\",\n    label_es: \"Cuidados intensivos\",\n    desc: \"Intensive care patients. Cumulative.\",\n    desc_es: \"Pacientes UCI. Acumulado.\",\n    max: 6000,\n  },\n  {\n    value: \"daily_cases\",\n    label: \"Daily cases\",\n    label_es: \"Casos diarios\",\n    desc: \"Daily cases. Calculated.\",\n    desc_es: \"Casos diarios. Calculado.\",\n    max: 4000,\n  },\n  {\n    value: \"daily_cases_avg7\",\n    label: \"Daily cases avg 7 days\",\n    label_es: \"Casos diarios media 7 d.\",\n    desc: \"Average daily cases in the last 7 days.\",\n    desc_es: \"Media de casos diarios en la última semana.\",\n    max: 5000,\n  },\n  {\n    value: \"cases_per_cienmil\",\n    label: \"Cases per 100K\",\n    label_es: \"Casos por 100k hab.\",\n    desc: \"Cumulative cases per 100,000 inhabitants.\",\n    desc_es: \"Casos por cada 100.000 habitantes (acumulado).\",\n    max: 3000,\n  },\n  {\n    value: \"intensive_care_per_1000000\",\n    label: \"Intensive care per 1M\",\n    label_es: \"UCI por 1m hab.\",\n    desc: \"Cumulative cases per 1,000,000 inhabitants.\",\n    desc_es: \"Pacientes UCI. Casos por cada 1.000.000 habitantes (acumulado).\",\n    max: 60,\n  },\n  {\n    value: \"deceassed_per_100000\",\n    label: \"Deaths per 100K\",\n    label_es: \"Muertos por 100k hab.\",\n    desc: \"Cumulative deaths per 100,000 inhabitants.\",\n    desc_es: \"Muertes por cada 100.000 habitantes (acumulado).\",\n    max: 250,\n  },\n  {\n    value: \"daily_deaths\",\n    label: \"Daily deaths\",\n    label_es: \"Muertes diarias\",\n    desc: \"Reported daily deaths.\",\n    desc_es: \"Muertes diarias reportadas (calculado).\",\n    max: 500,\n  },\n  {\n    value: \"daily_deaths_inc\",\n    label: \"Daily deaths inc.\",\n    label_es: \"Muertes diarias inc.\",\n    desc:\n      \"Daily deaths. Calculated as the percentage from last day (cumulative).\",\n    desc_es: \"Incremento porcentual de muertes sobre el día anterior.\",\n    max: 1000,\n  },\n  {\n    value: \"daily_deaths_avg3\",\n    label: \"Daily deaths avg. 3 days\",\n    label_es: \"Media muertes 3 d.\",\n    desc: \"Average daily deaths in the last 3 days.\",\n    desc_es: \"Media de muertes diarias en los últimos 3 días.\",\n    max: 500,\n  },\n  {\n    value: \"daily_deaths_avg7\",\n    label: \"Daily deaths avg. 7 days\",\n    label_es: \"Media muertes 7 d.\",\n    desc: \"Average daily deaths in the last 7 days.\",\n    desc_es: \"Media de muertes diarias en los últimos 7 días.\",\n    max: 500,\n  },\n  {\n    value: \"deaths_last_week\",\n    label: \"Deaths last week\",\n    label_es: \"Muertes última semana\",\n    desc: \"Deaths in the last 7 d.\",\n    desc_es: \"Muertes en la última semana.\",\n    max: 2500,\n  },\n  {\n    value: \"PCR\",\n    label: \"PCR. New cases\",\n    label_es: \"PCR. Nuevos casos\",\n    desc: \"New cases detected with PCR.\",\n    desc_es: \"Nuevos casos detectados por PCR.\",\n    max: 2000,\n  },\n  {\n    value: \"cases_accumulated_PCR\",\n    label: \"PCR. Cumulative\",\n    label_es: \"PCR. Acumulado\",\n    desc: \"Cases detected with PCR (cumulative).\",\n    desc_es: \"Casos detectados por PCR (acumulado).\",\n    max: 200000,\n  },\n  {\n    value: \"daily_cases_PCR_avg7\",\n    label: \"PCR avg. 7 days\",\n    label_es: \"PCR. media 7 d.\",\n    desc: \"Average daily cases PCR in the last 7 days.\",\n    desc_es: \"Media de casos detectados por PCR (7 días).\",\n    max: 4000,\n  },\n  {\n    value: \"TestAc\",\n    label: \"AC. New cases\",\n    label_es: \"AC. Nuevos casos\",\n    desc: \"New cases detected with Ac.\",\n    desc_es: \"Nuevos casos detectados por test de anticuerpos.\",\n    max: 70000,\n  },\n];\n","import React, { useState, useMemo, useEffect, useRef, useContext } from \"react\";\nimport useMeasure from \"react-use-measure\";\nimport { ResizeObserver } from \"@juggle/resize-observer\";\n// Data\nimport carto from \"../data/cartoSpain\";\nimport options from \"../data/covidSpainOptions\";\nimport { csvParse } from \"d3-dsv\";\n// Hooks\nimport useSmallSize from \"../hooks/useSmallSize\";\nimport { isTouchDevice } from \"../utils/browsers\";\n// Context\nimport ThemeContext from \"../context/ThemeContext\";\nimport LanguageContext from \"../context/LanguageContext\";\nimport Canvas from \"./comp/Canvas\";\n// D3 / VX\nimport { scaleTime, scaleLinear, scaleLog } from \"d3-scale\";\nimport { area, curveStep } from \"d3-shape\";\nimport { bisector } from \"d3-array\";\nimport { AxisRight, AxisLeft, AxisBottom } from \"@vx/axis\";\nimport { useTooltip } from \"@vx/tooltip\";\nimport { localPoint } from \"@vx/event\";\nimport { Grid } from \"@vx/grid\";\nimport {\n  scaleLinear as vxScaleLinear,\n  scaleLog as vxScaleLog,\n} from \"@vx/scale\";\nimport { AreaClosed, Line, Bar, LinePath } from \"@vx/shape\";\n// Animation\nimport { useSpring, animated } from \"react-spring\";\n// Select\nimport \"./css/covidSpain.css\";\n\n// Safari sux\nimport \"@formatjs/intl-pluralrules/polyfill\";\nimport \"@formatjs/intl-pluralrules/locale-data/en\";\nimport \"@formatjs/intl-pluralrules/locale-data/es\";\nimport \"@formatjs/intl-relativetimeformat/polyfill\";\nimport \"@formatjs/intl-relativetimeformat/locale-data/en\";\nimport \"@formatjs/intl-relativetimeformat/locale-data/es\";\n\n// const getDateArray = (start, end) => {\n//   let arr = [],\n//     dt = new Date(start);\n\n//   while (dt <= end) {\n//     arr.push(new Date(dt));\n//     dt.setDate(dt.getDate() + 1);\n//   }\n//   return arr;\n// };\n\nconst drawCartogram = (size) => {\n  const cellSize = size / 10;\n  const columns = 10;\n  const rows = 10;\n  let id = -1;\n  let grid = [];\n\n  for (var i = 0; i < columns; i++) {\n    for (var j = 0; j < rows; j++) {\n      const position = { x: j * cellSize, y: i * cellSize };\n      const row = i;\n      const column = j;\n      const center = {\n        x: j * cellSize + cellSize / 2,\n        y: i * cellSize + cellSize / 2,\n      };\n      id++;\n      if (carto[`c${id}`]) {\n        grid.push({\n          id,\n          position,\n          center,\n          row: row + 1,\n          column: column + 1,\n          cellSize,\n          ...carto[`c${id}`],\n        });\n      }\n    }\n  }\n\n  return grid;\n};\n\nexport default () => {\n  const size = useSmallSize();\n  const cartogram = useMemo(() => drawCartogram(size), [size]);\n\n  // State\n  const [refDiv, { width, height }] = useMeasure({ polyfill: ResizeObserver });\n  const [data, setData] = useState(null);\n  const [commit, setCommit] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [visible, setVisible] = useState(\"cases_accumulated\");\n\n  const [isLog, setIsLog] = useState(true);\n  const [selected, setSelected] = useState(null);\n  const [isOpen, setIsOpen] = useState(false);\n  const [startDate, setStartDate] = useState(new Date(\"2020-02-20\"));\n\n  // Context\n  const { dark } = useContext(ThemeContext);\n  const { language } = useContext(LanguageContext);\n  const isEnglish = language.isEnglish;\n  const isTouch = isTouchDevice();\n\n  // Fun\n  const changeVisible = (selected) => {\n    setVisible(selected);\n  };\n\n  const changeLog = () => {\n    setIsLog(!isLog);\n  };\n\n  // Intl api\n  const rtf =\n    Intl.PluralRules &&\n    new Intl.RelativeTimeFormat(language.id, { numeric: \"auto\" });\n\n  const select = (data) => {\n    setIsOpen(true);\n    setSelected(data);\n  };\n\n  // Globals\n  const cellSize = size / 10;\n\n  useEffect(() => {\n    // Get data\n    const fetchData = () => {\n      const uri =\n        \"https://raw.githubusercontent.com/montera34/escovid19data/master/data/output/covid19-provincias-spain_consolidated.csv\";\n      fetch(uri)\n        .then((res) => (res.ok ? res.text() : Promise.reject(res.status)))\n        .then((text) => csvParse(text))\n        .then((data) => {\n          const out = data.reduce((acc, x, i, arr) => {\n            const { ine_code: ine, date } = x;\n\n            if (!acc[`c${ine}`]) {\n              let meta;\n              Object.keys(carto).forEach((c) => {\n                if (carto[c].ine === ine) {\n                  meta = { ...carto[c] };\n                }\n              });\n\n              acc[`c${ine}`] = {\n                data: [x],\n                meta,\n                firstDate: x.date,\n              };\n            } else {\n              acc[`c${ine}`].data = [...acc[`c${ine}`].data, x];\n            }\n\n            return acc;\n          }, {});\n\n          // save data\n          setData(out);\n          setIsLoaded(true);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    };\n    fetchData();\n\n    // Last commit\n    fetch(\n      \"https://api.github.com/repos/montera34/escovid19data/branches/master\"\n    )\n      .then((res) => (res.ok ? res.json() : Promise.reject(res.status)))\n      .then((json) => {\n        setCommit({\n          author: json.commit.author.login,\n          date: json.commit.commit.author.date,\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n    // End useEffect\n  }, []);\n\n  // d3\n  const xScale = scaleTime()\n    .domain([startDate, new Date()])\n    .range([0, cellSize]);\n\n  const getMax = () => {\n    return options.find((x) => x.value === visible).max;\n  };\n\n  const yScale = scaleLinear().domain([0, getMax()]).range([cellSize, 0]);\n\n  const yScaleLog = scaleLog().domain([0.1, getMax()]).range([cellSize, 0]);\n\n  // Colors\n  const colors = {\n    bg: dark ? \"RGBA(228, 230, 234, 0.20)\" : \"RGBA(228, 230, 234, 1.00)\",\n    main: dark ? \"RGBA(238, 174, 146, 1.00)\" : \"RGBA(226, 80, 59, 1.00)\",\n    lightColor: dark ? \"RGBA(75, 76, 78, 1.00)\" : \"RGBA(214, 214, 214, 1.00)\",\n  };\n\n  // CANVAS\n\n  let nData = 0;\n\n  class BgCanvasCell {\n    constructor({ x }) {\n      this.id = x.id;\n      this.position = x.position;\n      this.center = x.center;\n      this.row = x.row;\n      this.column = x.column;\n      this.cellSize = x.cellSize;\n      this.cell = x.cell;\n      this.name = x.name;\n      this.ine = x.ine;\n      this.data = data && data[x.id];\n    }\n    draw(ctx) {\n      // Rect\n      ctx.fillStyle = colors.bg;\n      ctx.fillRect(\n        xScale(new Date()) + this.position.x,\n        this.position.y,\n        cellSize - xScale(new Date()),\n        cellSize\n      );\n\n      const areaGen = area()\n        .y0(this.position.y + cellSize)\n        .curve(curveStep)\n        .context(ctx);\n\n      const filteredData = this.data?.data.filter(\n        (x) =>\n          x[visible] !== \"0\" &&\n          !isNaN(parseFloat(x[visible])) &&\n          isFinite(x[visible])\n      );\n\n      ctx.fillStyle = colors.lightColor;\n      ctx.font = `${cellSize / 5}px Inter`;\n\n      ctx.beginPath();\n      ctx.textAlign = \"center\";\n      ctx.textBaseline = \"middle\";\n\n      {\n        filteredData.length > 2\n          ? areaGen(\n              filteredData.map((point, i) => {\n                nData = nData + 1;\n                return [\n                  xScale(new Date(point.date)) + this.position.x,\n                  isLog\n                    ? yScaleLog(point[visible]) + this.position.y\n                    : yScale(point[visible]) + this.position.y,\n                ];\n              })\n            )\n          : ctx.fillText(\n              `${isEnglish ? \"N/A\" : \"N/D\"}`,\n              this.center.x,\n              this.center.y + 10\n            );\n      }\n      ctx.closePath();\n      ctx.fill();\n    }\n\n    update(ctx) {\n      this.draw(ctx);\n    }\n    animate(ctx) {\n      // Call draw\n      this.draw(ctx);\n    }\n  }\n\n  // INIT\n  let objects = [];\n\n  const init = (canvas, ctx) => {\n    if (!isLoaded) {\n      return;\n    }\n    // Objects\n    cartogram.forEach((x, i) => {\n      objects.push(\n        new BgCanvasCell({\n          x,\n        })\n      );\n    });\n  };\n\n  // DRAW\n  const draw = (canvas, ctx) => {\n    init(canvas, ctx);\n\n    ctx.clearRect(0, 0, size, size); // clear\n\n    objects.forEach((x) => x.update(ctx));\n  };\n\n  // END CANVAS\n  return (\n    <div\n      style={{\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <div\n        ref={refDiv}\n        style={{\n          position: \"relative\",\n          margin: \"0 auto\",\n          height: \"100vh\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        <Menu\n          changeVisible={changeVisible}\n          commit={commit}\n          isEnglish={isEnglish}\n          language={language}\n          rtf={rtf}\n          changeLog={changeLog}\n          isLog={isLog}\n          cellSize={cellSize}\n        />\n\n        {selected && (\n          <Tooltip\n            commit={commit}\n            rtf={rtf}\n            visible={visible}\n            size={size}\n            selected={selected}\n            colors={colors}\n            isOpen={isOpen}\n            setIsOpen={setIsOpen}\n            dark={dark}\n            data={data}\n            isLog={isLog}\n            changeLog={changeLog}\n            startDate={startDate}\n          />\n        )}\n\n        {/* SVG */}\n        <svg\n          style={{\n            position: \"absolute\",\n            top: \"50%\",\n            left: \"50%\",\n            transform: \"translate(-50%, -50%)\",\n            overflow: \"visible\",\n            zIndex: 1,\n          }}\n          width={`${size}px`}\n          height={`${size}px`}\n          viewBox={`0 0 ${size} ${size}`}\n        >\n          {cartogram.map((carto) => (\n            <SvgCell\n              colors={colors}\n              isTouch={isTouch}\n              key={`cartoSvg${carto.id}`}\n              carto={carto}\n              select={select}\n              data={data}\n              isLoaded={isLoaded}\n              visible={visible}\n            />\n          ))}\n\n          <Key\n            marginLeft={10}\n            colors={colors}\n            changeLog={changeLog}\n            isLog={isLog}\n            cellSize={cellSize}\n            visible={visible}\n            isEnglish={isEnglish}\n            startDate={startDate}\n          />\n        </svg>\n\n        {/* CANVAS */}\n        <Canvas\n          style={{\n            position: \"absolute\",\n            top: \"50%\",\n            left: \"50%\",\n            transform: \"translate(-50%, -50%)\",\n            overflow: \"visible\",\n          }}\n          draw={(canvas, ctx) => {\n            draw(canvas, ctx);\n          }}\n          width={size}\n          height={size}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst Menu = ({\n  changeVisible,\n  isEnglish,\n  // commit,\n  // language,\n  // rtf,\n  // changeLog,\n  // isLog,\n  // cellSize,\n}) => {\n  return (\n    <div className=\"menuPanel\">\n      <Select\n        options={options}\n        changeVisible={changeVisible}\n        isEnglish={isEnglish}\n      />\n    </div>\n  );\n};\n\nconst Key = ({\n  isLog,\n  cellSize,\n  row = 0,\n  column = 5,\n  visible,\n  isEnglish,\n  colors,\n  changeLog,\n  marginLeft,\n  startDate,\n}) => {\n  const position = { x: cellSize * row, y: cellSize * column };\n\n  const max = options.find((x) => x.value === visible).max;\n\n  const yScale = vxScaleLinear({\n    range: [cellSize, 0],\n    domain: [0, max],\n    nice: true,\n  });\n\n  const yScaleLog = vxScaleLog({\n    range: [cellSize, 0],\n    domain: [0.1, max],\n    nice: true,\n  });\n\n  const xScale = vxScaleLinear({\n    domain: [new Date(startDate), new Date()],\n    range: [0, cellSize],\n  });\n\n  return (\n    <g>\n      <rect\n        stroke=\"var(--foreground-color)\"\n        fill=\"var(--foreground-color)\"\n        opacity=\"0.2\"\n        x={position.x + marginLeft}\n        y={position.y}\n        width={cellSize}\n        height={cellSize}\n      />\n\n      <Grid\n        top={position.y}\n        left={position.x + marginLeft}\n        xScale={xScale}\n        yScale={isLog ? yScaleLog : yScale}\n        stroke=\"var(--background-color)\"\n        width={cellSize}\n        height={cellSize}\n        numTicksRows={4}\n        numTicksColumns={0}\n      />\n\n      <AxisRight\n        top={position.y}\n        left={position.x + cellSize + marginLeft}\n        scale={isLog ? yScaleLog : yScale}\n        numTicks={2}\n        stroke=\"var(--foreground-color)\"\n        tickStroke=\"var(--foreground-color)\"\n        tickLabelProps={(value, index) => ({\n          fill: \"var(--foreground-color)\",\n          textAnchor: \"start\",\n          dx: \"1em\",\n          dy: \"0.25em\",\n        })}\n        tickFormat={(value) => {\n          return value;\n        }}\n        tickComponent={({ formattedValue, ...tickProps }) => (\n          <text style={{ fontSize: \"0.7em\" }} {...tickProps}>\n            {formattedValue}\n          </text>\n        )}\n      />\n\n      <circle\n        cx={position.x + 12 + marginLeft}\n        cy={position.y + cellSize + 25}\n        r={10}\n        stroke=\"var(--foreground-color)\"\n        fill=\"none\"\n        strokeWidth=\"1px\"\n      />\n\n      {isLog && (\n        <circle\n          cx={position.x + 12 + marginLeft}\n          cy={position.y + cellSize + 25}\n          r={4}\n          fill={colors.main}\n        />\n      )}\n\n      <text\n        style={{\n          pointerEvents: \"none\",\n          fill: \"var(--foreground-color)\",\n          dominantBaseline: \"hanging\",\n          fontSize: \"0.8em\",\n        }}\n        x={position.x + 32 + marginLeft}\n        y={position.y + cellSize + 20}\n        fontSize=\"22\"\n      >\n        {isEnglish && \"Use log\"}\n        {!isEnglish && \"Escala\"}\n      </text>\n\n      <text\n        style={{\n          pointerEvents: \"none\",\n          fill: \"var(--foreground-color)\",\n          dominantBaseline: \"hanging\",\n          fontSize: \"0.8em\",\n        }}\n        x={position.x + 32 + marginLeft}\n        y={position.y + cellSize + 38}\n        fontSize=\"22\"\n      >\n        {isEnglish && \"scale\"}\n        {!isEnglish && \"log.\"}\n      </text>\n\n      <rect\n        style={{ cursor: \"pointer\" }}\n        onClick={() => changeLog()}\n        className=\"hitRect\"\n        fill=\"transparent\"\n        x={position.x}\n        y={position.y}\n        width={cellSize + 50}\n        height={cellSize + 50}\n      />\n    </g>\n  );\n};\n\nconst Select = ({ options, changeVisible, isEnglish }) => {\n  const items = options;\n\n  return (\n    <div>\n      <select\n        className=\"select-css\"\n        onChange={(e) => {\n          e.preventDefault();\n          changeVisible(e.currentTarget.value);\n        }}\n      >\n        {items.map((item) => (\n          <option key={item.value} value={item.value}>\n            {isEnglish ? item.label : item.label_es}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n};\n\nconst SvgCell = ({\n  carto,\n  select,\n  isLoaded,\n  colors,\n  // data,\n  // visible,\n  // isTouch,\n}) => {\n  const { id, center, position, cellSize, abv, name_s } = carto;\n\n  return (\n    <g key={`cartoSvg${id}`}>\n      <rect\n        onClick={() => select(carto)}\n        style={{ cursor: \"pointer\" }}\n        id={`cartoSvg${id}`}\n        x={position.x}\n        y={position.y}\n        width={cellSize}\n        height={cellSize}\n        fill=\"transparent\"\n        stroke={\"gray\"}\n      />\n      {!isLoaded && (\n        <circle\n          style={{ transformOrigin: `${center.x}px ${center.y}px` }}\n          className=\"loadingCircle\"\n          cx={center.x}\n          cy={center.y}\n          r={cellSize / 7}\n          fill={colors.lightColor}\n        />\n      )}\n\n      <text\n        style={{\n          pointerEvents: \"none\",\n          fill: \"var(--foreground-color)\",\n          dominantBaseline: \"hanging\",\n          fontSize: \"0.8em\",\n        }}\n        x={position.x + 6}\n        y={position.y + 6}\n        fontSize=\"55\"\n      >\n        {cellSize < 80 ? abv : name_s}\n      </text>\n    </g>\n  );\n};\n\n// https://github.com/montera34/escovid19data\n\nconst Tooltip = ({\n  commit,\n  rtf,\n  visible,\n  selected,\n  isOpen,\n  setIsOpen,\n  size,\n  colors,\n  dark,\n  data,\n  isLog,\n  changeLog,\n  startDate,\n}) => {\n  const {\n    ccaa_es,\n    name_s,\n    // abv,\n    // abv2,\n    // ccaa,\n    // cell,\n    // cellSize,\n    // center,\n    // column,\n    // id,\n    // ine,\n    // name,\n    // position,\n    // row,\n  } = selected;\n\n  const [ref, bounds] = useMeasure({ polyfill: ResizeObserver });\n\n  const { language } = useContext(LanguageContext);\n  const isEnglish = language.isEnglish;\n\n  const tipAnimation = useSpring({\n    opacity: isOpen ? 1 : 0,\n    pointerEvents: isOpen ? \"auto\" : \"none\",\n  });\n\n  const metaOptions = options.find((x) => x.value === visible);\n\n  // TODO. Go up and share with svg\n  const filteredData = useMemo(() =>\n    data[selected.id].data.filter(\n      (x) => !isNaN(parseFloat(x[visible])) && isFinite(x[visible]),\n      [visible, data]\n    )\n  );\n\n  const newMax = useMemo(\n    () => Math.max(...filteredData.map((x) => +x[visible])),\n    [filteredData]\n  );\n\n  const newMaxDate = useMemo(() => {\n    return filteredData.find((x) => +x[visible] === newMax);\n  }, [filteredData]);\n\n  return (\n    <animated.div\n      className=\"tooltip\"\n      style={{\n        ...tipAnimation,\n        position: \"absolute\",\n        top: \"50%\",\n        left: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n        zIndex: 2,\n        background: \"var(--background-color)\",\n        border: \"1px solid var(--foreground-color)\",\n        width: \"calc(100% - 40px)\",\n        height: \"400px\",\n        overflow: \"hidden\",\n      }}\n      width={`${size}px`}\n      height={`${size}px`}\n    >\n      {/* Header */}\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"50px\",\n          borderBottom: \"1px solid var(--foreground-color)\",\n        }}\n      >\n        <p style={{ margin: 0, padding: \"1em\" }} className=\"h4\">\n          {name_s}\n\n          <span\n            style={{\n              fontWeight: 400,\n              fontSize: \"85%\",\n              letterSpacing: \"0.1em\",\n            }}\n          >\n            {\" \"}\n            | {ccaa_es}\n          </span>\n        </p>\n        <div\n          className=\"covid_close\"\n          onClick={() => setIsOpen(!isOpen)}\n          style={{\n            cursor: \"pointer\",\n            marginLeft: \"auto\",\n            width: \"50px\",\n            height: \"50px\",\n            background: \"var(--foreground-color)\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n          }}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width={32}\n            height={32}\n            aria-hidden=\"true\"\n          >\n            <path\n              fill=\"var(--background-color)\"\n              strokeWidth=\"1\"\n              stroke=\"var(--background-color)\"\n              d=\"M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4l6.6 6.6L8 22.6 9.4 24l6.6-6.6 6.6 6.6 1.4-1.4-6.6-6.6L24 9.4z\"\n            />\n          </svg>\n        </div>\n      </div>\n      {/* Canvas */}\n      <div\n        ref={ref}\n        className=\"tooltip\"\n        style={{ margin: \"1em\", height: \"250px\" }}\n      >\n        <div\n          className=\"keyCanvas\"\n          style={{\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"flex-start\",\n          }}\n        >\n          <p style={{ margin: 0, padding: 0, flexBasis: \"80%\" }}>\n            {isEnglish ? metaOptions?.desc : metaOptions?.desc_es}\n          </p>\n\n          <p style={{ textAlign: \"right\" }}>\n            <span>\n              {!isNaN(parseFloat(newMax)) && isFinite(newMax)\n                ? new Date(newMaxDate.date).toLocaleDateString(\n                    isEnglish ? \"en-GB\" : \"es-ES\",\n                    {\n                      month: \"short\",\n                      day: \"numeric\",\n                    }\n                  )\n                : \"\"}\n            </span>\n            <br />\n            <strong>\n              {!isNaN(parseFloat(newMax)) && isFinite(newMax) ? newMax : \"\"}\n            </strong>\n          </p>\n        </div>\n\n        <Graph\n          isLog={isLog}\n          changeLog={changeLog}\n          width={bounds.width}\n          height={bounds.height}\n          selected={selected}\n          colors={colors}\n          isEnglish={isEnglish}\n          data={data}\n          visible={visible}\n          startDate={startDate}\n          filteredData={filteredData}\n          newMax={newMax}\n          newMaxDate={newMaxDate}\n        />\n      </div>\n\n      {/* Notes */}\n      <div\n        className=\"notes\"\n        style={{ margin: \"4em 1em 0 1em\", fontSize: \"80%\" }}\n      >\n        {commit?.date && commit?.author && (\n          <p>\n            <LastCommit\n              commit={commit}\n              isEnglish={isEnglish}\n              language={language}\n              rtf={rtf}\n              width={bounds.width}\n            />\n          </p>\n        )}\n      </div>\n    </animated.div>\n  );\n};\n\nconst LastCommit = ({ commit, isEnglish, language, rtf, width }) => {\n  const units = [\n    [\"year\", 31536000000],\n    [\"month\", 2628000000],\n    [\"day\", 86400000],\n    [\"hour\", 3600000],\n    [\"minute\", 60000],\n    [\"second\", 1000],\n  ];\n\n  const relatime = (elapsed) => {\n    for (const [unit, amount] of units) {\n      if (Math.abs(elapsed) > amount || unit === \"second\") {\n        return rtf.format(Math.round(elapsed / amount), unit);\n      }\n    }\n  };\n\n  return (\n    <span>\n      <a\n        href=\"https://github.com/montera34/escovid19data\"\n        title=\"Escovid19 data\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        Escovid19data\n      </a>\n      .{\" \"}\n      {width > 400 && (\n        <>\n          {isEnglish ? \"Updated by \" : \"Actualizado por \"} {commit?.author}{\" \"}\n          {!Intl.PluralRules\n            ? new Date(commit.date)\n                .toLocaleString(language.id)\n                .split(\" \")[0]\n                .replace(\",\", \"\")\n            : relatime(new Date(commit.date) - new Date())}\n          .\n        </>\n      )}\n    </span>\n  );\n};\n\nconst Graph = ({\n  width,\n  height,\n  selected,\n  colors,\n  isEnglish,\n  data,\n  visible,\n  isLog,\n  changeLog,\n  startDate,\n  filteredData,\n  newMax,\n  newMaxDate,\n}) => {\n  const margin = {\n    top: 40,\n    right: 0,\n    left: 50,\n    bottom: 60,\n  };\n  const gHeight = height - margin.top - margin.bottom;\n  const gWidth = width - margin.left - margin.right;\n\n  // Scales\n  // const max = options.find((x) => x.value === visible).max;\n\n  const xScale = vxScaleLinear({\n    domain: [new Date(startDate), new Date()],\n    range: [0, gWidth],\n  });\n\n  const yScale = vxScaleLinear({\n    range: [gHeight, 0],\n    domain: [0, newMax],\n    nice: true,\n  });\n\n  const yScaleLog = vxScaleLog({\n    range: [gHeight, 0],\n    domain: [0.1, newMax],\n    clamp: true,\n    nice: true,\n  });\n\n  const formatDate = (date) =>\n    new Date(date).toLocaleDateString(isEnglish ? \"en-GB\" : \"es-ES\", {\n      month: \"short\",\n      day: \"numeric\",\n    });\n\n  // accessors\n  const xAcc = (d) => new Date(d.date);\n  const yAcc = (d) => +d[visible];\n  const bisectDate = bisector((d) => new Date(d.date)).left;\n\n  const {\n    tooltipData,\n    tooltipLeft,\n    tooltipTop,\n    tooltipOpen,\n    showTooltip,\n    hideTooltip,\n  } = useTooltip();\n\n  const svgRef = useRef();\n\n  const handleTooltip = (event) => {\n    let coords = localPoint(event.target.ownerSVGElement, event);\n\n    if (!coords.x) {\n      return;\n    }\n\n    let { x } = coords;\n\n    const x0 = xScale.invert(x - margin.left);\n    const index = bisectDate(filteredData, x0, 1);\n    let d0 = filteredData[index - 1];\n    let d1 = filteredData[index];\n    let d = d0;\n    if (d1 && d1.date) {\n      d = x0 - xAcc(d0.date) > xAcc(d1.date) - x0 ? d1 : d0;\n    }\n    // Call\n\n    showTooltip({\n      tooltipData: d,\n      tooltipLeft: x,\n      tooltipTop: isLog ? yScaleLog(d?.[visible]) : yScale(d?.[visible]),\n    });\n  };\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <svg\n        ref={svgRef}\n        style={{ overflow: \"visible\" }}\n        viewBox={`0 0 ${width} ${height}`}\n      >\n        <defs>\n          <linearGradient id=\"grad1\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop\n              className=\"stop1\"\n              offset=\"0%\"\n              stopColor=\"var(--background-color)\"\n              stopOpacity={0}\n            />\n            <stop\n              className=\"stop2\"\n              offset=\"20%\"\n              stopColor=\"var(--background-color)\"\n              stopOpacity={1}\n            />\n            <stop\n              className=\"stop2\"\n              offset=\"80%\"\n              stopColor=\"var(--background-color)\"\n              stopOpacity={1}\n            />\n            <stop\n              className=\"stop3\"\n              offset=\"100%\"\n              stopColor=\"var(--background-color)\"\n              stopOpacity={0}\n            />\n          </linearGradient>\n        </defs>\n\n        {/* Max line */}\n        {!isNaN(parseFloat(newMax)) && isFinite(newMax) && (\n          <LinePath\n            data={[\n              [width, 10],\n              [xScale(new Date(newMaxDate.date)) + margin.left, 10],\n              [\n                xScale(new Date(newMaxDate.date)) + margin.left,\n                isLog\n                  ? yScaleLog(newMax) + margin.top\n                  : yScale(newMax) + margin.top,\n              ],\n            ]}\n            x={(d) => d[0]}\n            y={(d) => d[1]}\n            stroke={\"var(--foreground-color)\"}\n            style={{ opacity: 0.5 }}\n            strokeWidth={1}\n          />\n        )}\n\n        <g\n          style={{ transform: `translate(${margin.left}px, ${margin.top}px)` }}\n        >\n          <Grid\n            xScale={xScale}\n            yScale={isLog ? yScaleLog : yScale}\n            stroke={colors.lightColor}\n            width={gWidth}\n            height={gHeight}\n            numTicksRows={4}\n            numTicksColumns={0}\n            columnLineStyle={{\n              pointerEvents: \"none\",\n            }}\n            lineStyle={{\n              pointerEvents: \"none\",\n            }}\n          />\n\n          {filteredData && (\n            <AreaClosed\n              data={filteredData}\n              x={(d) => xScale(xAcc(d))}\n              y={(d) => (isLog ? yScaleLog(yAcc(d)) : yScale(yAcc(d)))}\n              yScale={isLog ? yScaleLog : yScale}\n              fill={colors.lightColor}\n              curve={curveStep}\n            />\n          )}\n\n          <AxisLeft\n            scale={isLog ? yScaleLog : yScale}\n            hideAxisLine\n            hideTicks\n            numTicks={newMax < 20 ? 1 : 3}\n            tickLabelProps={(value, index) => ({\n              textAnchor: \"end\",\n              dy: 5,\n              fill: \"var(--foreground-color)\",\n              style: { fontSize: \"0.8em\" },\n            })}\n            tickFormat={(value) => {\n              return value;\n            }}\n          />\n\n          {filteredData.length < 2 && (\n            <text\n              dy={-10}\n              x={gWidth / 2}\n              y={gHeight / 2}\n              style={{ textAnchor: \"middle\", fontSize: \"1.8em\" }}\n              fill=\"var(--foreground-color)\"\n            >\n              {isEnglish ? \"N/A\" : \"N/D\"}\n            </text>\n          )}\n\n          <Bar\n            onClick={() => changeLog()}\n            style={{ cursor: \"pointer\" }}\n            x={-margin.left}\n            y={0}\n            width={margin.left}\n            height={gHeight}\n            fill=\"transparent\"\n            data={filteredData}\n          />\n\n          <AxisBottom\n            top={gHeight}\n            tickFormat={formatDate}\n            numTicks={width > 550 ? 8 : 3}\n            scale={xScale}\n            stroke=\"var(--foreground-color)\"\n            tickStroke=\"var(--foreground-color)\"\n            hideAxisLine={false}\n            tickLabelProps={(value, index) => ({\n              dy: 12,\n              fill: \"var(--foreground-color)\",\n              textAnchor: \"middle\",\n              style: { fontSize: \"0.8em\" },\n            })}\n          />\n\n          <Bar\n            style={{ cursor: \"crosshair\" }}\n            onTouchStart={(event) => handleTooltip(event)}\n            onTouchMove={(event) => hideTooltip(event)}\n            onMouseMove={(event) => handleTooltip(event)}\n            onMouseLeave={(event) => hideTooltip(event)}\n            x={0}\n            y={0}\n            width={gWidth}\n            height={gHeight}\n            fill=\"transparent\"\n            data={filteredData}\n          />\n        </g>\n\n        {tooltipData && (\n          <g>\n            <Line\n              from={{ x: tooltipLeft, y: margin.top }}\n              to={{ x: tooltipLeft, y: gHeight + margin.top }}\n              stroke=\"var(--foreground-color)\"\n              strokeWidth={1}\n              style={{ pointerEvents: \"none\" }}\n              strokeDasharray=\"2,2\"\n            />\n\n            <circle\n              cx={tooltipLeft}\n              cy={tooltipTop + margin.top}\n              r={5}\n              fill={colors.main}\n              stroke=\"var(--background-color)\"\n              strokeWidth={3}\n              style={{ pointerEvents: \"none\" }}\n            />\n\n            <rect\n              x={tooltipLeft - 50}\n              y={16}\n              fill=\"url(#grad1)\"\n              width=\"100px\"\n              height=\"20px\"\n            />\n\n            <text\n              dy={-10}\n              x={tooltipLeft}\n              y={margin.top}\n              style={{ textAnchor: \"middle\" }}\n              fill=\"var(--foreground-color)\"\n            >\n              {tooltipData[visible]}\n            </text>\n\n            <rect\n              x={tooltipLeft - 50}\n              y={height - 45}\n              fill=\"url(#grad1)\"\n              width=\"100px\"\n              height=\"20px\"\n            />\n\n            <text\n              x={tooltipLeft}\n              dy={-30}\n              y={height}\n              style={{ textAnchor: \"middle\", fontSize: \"0.8em\" }}\n              fill=\"var(--foreground-color)\"\n            >\n              {new Date(tooltipData.date).toLocaleDateString(\n                isEnglish ? \"en-GB\" : \"es-ES\",\n                { month: \"long\", day: \"numeric\" }\n              )}\n            </text>\n          </g>\n        )}\n      </svg>\n    </div>\n  );\n};\n"],"sourceRoot":""}
(this["webpackJsonpraster-react-canvas2"]=this["webpackJsonpraster-react-canvas2"]||[]).push([[41],{333:function(t,e,i){"use strict";i.r(e);var n=i(3),r=i(0),c=i.n(r),s=i(19),a=i(13);function o(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:"x"in e?e.x:e.top,left:"y"in e?e.y:e.left,x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top,right:e.right,bottom:e.bottom}}var h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.liveMeasure,i=void 0===e||e,n=Object(r.useState)({}),c=n[0],s=n[1],a=Object(r.useState)(null),h=a[0],l=a[1],u=Object(r.useCallback)((function(t){l(t)}),[]);return Object(r.useLayoutEffect)((function(){if(h){var t=function(){return window.requestAnimationFrame((function(){return s(o(h))}))};if(t(),i)return window.addEventListener("resize",t),window.addEventListener("scroll",t),function(){window.removeEventListener("resize",t),window.removeEventListener("scroll",t)}}}),[h]),[u,c,h]},l=i(26),u=function(t,e){return{x:t.x*Math.cos(e)-t.y*Math.sin(e),y:t.x*Math.sin(e)+t.y*Math.cos(e)}},y=function(t,e){var i=t.velocity.x-e.velocity.x,n=t.velocity.y-e.velocity.y;if(i*(e.x-t.x)+n*(e.y-t.y)>=0){var r=-Math.atan2(e.y-t.y,e.x-t.x),c=t.mass,s=e.mass,a=u(t.velocity,r),o=u(e.velocity,r),h={x:a.x*(c-s)/(c+s)+2*o.x*s/(c+s),y:a.y},l={x:o.x*(c-s)/(c+s)+2*a.x*s/(c+s),y:o.y},y=u(h,-r),f=u(l,-r);t.velocity.x=y.x,t.velocity.y=y.y,e.velocity.x=f.x,e.velocity.y=f.y}};e.default=function(){var t=h(),e=Object(n.a)(t,2),i=e[0],o=e[1],u=o.width,f=o.height,d=Object(r.useContext)(s.b).dark,x=Object(r.useContext)(a.c).language,v=Object(r.useRef)(null),g=Object(r.useRef)(null),w=Object(r.useRef)(),b=[],m={sick:d?"RGBA(245, 190, 28, 1.00)":"RGBA(226, 80, 59, 1.00)",well:"gray",foreground:d?"RGBA(255, 255, 255, 1.00)":"RGBA(26, 27, 30, 1.00)",background:d?"":"RGBA(228, 230, 234, 0.7)"};function j(t,e,i,n){this.x=t,this.y=e,this.velocity={x:2*(Math.random()-.5),y:2*(Math.random()-.5)},this.radius=i,this.mass=1,this.state=n,this.color="gray",this.draw=function(t){t.beginPath(t),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),t.fillStyle=m[this.state],t.fill(),t.closePath()},this.update=function(t,e){this.draw(t);for(var n=0;n<e.length;n++)this!==e[n]&&Object(l.c)(this.x,this.y,e[n].x,e[n].y)-2*i<0&&(y(this,e[n]),"sick"!==this.state&&"sick"!==e[n].state||(this.state="sick",e[n].state="sick"));(this.x-this.radius<=0||this.x+this.radius>=u)&&(this.velocity.x=-this.velocity.x),(this.y-this.radius<=0||this.y+this.radius>=f)&&(this.velocity.y=-this.velocity.y),this.x+=this.velocity.x,this.y+=this.velocity.y}}Object(r.useEffect)((function(){return w.current=requestAnimationFrame(R),function(){return cancelAnimationFrame(w.current)}}));for(var p=0;p<200;p++){var O=Object(l.h)(6,u-6),k=Object(l.h)(6,f-6);if(b.length>=1)for(var E=0;E<b.length;E++)Object(l.c)(O,k,b[E].x,b[E].y)-12<0&&(O=Object(l.h)(6,u-6),k=Object(l.h)(6,f-6));b.push(new j(0===p?u/2:O,0===p?f/2:k,6,0===p?"sick":"well"))}var R=function t(){var e=v.current.getContext("2d"),i=g.current.getContext("2d"),n=window.devicePixelRatio||1;v.current.width=u*n,v.current.height=f*n,v.current.style.width="".concat(u,"px"),v.current.style.height="".concat(f,"px"),e.scale(n,n),g.current.width=u*n,g.current.height=f*n,g.current.style.width="".concat(u,"px"),g.current.style.height="".concat(f,"px"),i.scale(n,n),e.clearRect(0,0,u,f),i.clearRect(0,0,u,100),b.forEach((function(t){return t.update(e,b)}));var r=b.filter((function(t){return"sick"===t.state})).length,c=200-r;i.font="20px Inter",i.fillStyle="white",i.textAlign="left",i.beginPath(e),i.arc(35,42,8,0,2*Math.PI),i.fillStyle=m.sick,i.fill(),e.restore(),i.fillStyle=m.foreground,i.beginPath(e),i.arc(35,73,8,0,2*Math.PI),i.fillStyle=m.well,i.fill(),e.restore(),i.fillStyle=m.foreground,i.fillText("".concat(x.isEnglish?"Sick":"Enfermos",": ").concat(r),55,50),i.fillText("".concat(x.isEnglish?"Healthy":"Sanos",": ").concat(c),55,80),w.current=requestAnimationFrame(t)};return c.a.createElement("div",{style:{width:"100%"}},c.a.createElement("div",{ref:i,style:{width:"100%",height:"60vh",borderBottom:"1px solid ".concat(m.foreground)}},c.a.createElement("canvas",{ref:v,width:u,height:f}),c.a.createElement("canvas",{ref:g,width:u,height:150})))}}}]);
//# sourceMappingURL=41.a22b9997.chunk.js.map
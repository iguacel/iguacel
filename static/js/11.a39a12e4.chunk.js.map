{"version":3,"sources":["exp/Exp1.js","utils/browsers.js"],"names":["viewStyles","cursor","willChange","moonPhases","id","name","abr","name_es","abr_es","Moon","x","y","fraction","angle","wh","r","moonPhase","Math","trunc","backgroundColor","coverColor","revealColor","quarterFraction","parseFloat","toFixed","snakeEyeClosing","snakeEyeOpening","style","transform","fill","isSafari","mask","ry","rx","clip-path","Labels","textAnchor","opacity","FullLabels","fr","dy","useState","setFraction","dark","useContext","ThemeContext","isEnglish","LanguageContext","language","view","setView","changeView","useCallback","transitions","useTransition","v","from","enter","leave","useInterval","n","length","points","useMemo","radius","step","PI","map","i","cos","sin","xLabels","yLabels","genPoints","pages","g","d","className","key","fontFeatureSettings","fontVariantNumeric","display","justifyContent","alignItems","flexFlow","zIndex","width","height","background","border","onClick","overflow","maxWidth","viewBox","stroke","item","props","Page","undefined","window","safari"],"mappings":"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","file":"static/js/11.a39a12e4.chunk.js","sourcesContent":["import React, { useState, useCallback, useContext, useMemo } from \"react\";\nimport { useTransition, animated } from \"react-spring\";\nimport useInterval from \"../hooks/useInterval\";\nimport ThemeContext from \"../context/ThemeContext\";\nimport LanguageContext from \"../context/LanguageContext\";\n\nimport { isSafari } from \"../utils/browsers\";\n\nconst viewStyles = {\n  cursor: \"pointer\",\n  willChange: \"transform, opacity\",\n};\n\nconst moonPhases = [\n  { id: \"0\", name: \"New Moon\", abr: \"New\", name_es: \"Nueva\", abr_es: \"Nueva\" },\n  { id: \"1\", name: \"Waxing Crescent\", abr: \"\", name_es: \"Creciente\", abr_es: \"\" },\n  { id: \"2\", name: \"First quarter\", abr: \"First Quarter\", name_es: \"Cuarto creciente\", abr_es: \"Cuarto creciente\" },\n  { id: \"3\", name: \"Waxing Gibbous\", abr: \"\", name_es: \"Gibosa creciente\", abr_es: \"\" },\n  { id: \"4\", name: \"Full Moon\", abr: \"Full\", name_es: \"Llena\", abr_es: \"Llena\" },\n  { id: \"5\", name: \"Waning Gibbous\", abr: \"\", name_es: \"Gibosa menguante\", abr_es: \"\" },\n  { id: \"6\", name: \"Last Quarter\", abr: \"Last quarter\", name_es: \"Cuarto menguante\", abr_es: \"Cuarto menguante\" },\n  { id: \"7\", name: \"Waning Crescent\", abr: \"\", name_es: \"Menguante\", abr_es: \"\" },\n];\n\nconst Moon = ({ x, y, fraction, angle, wh = 80 }) => {\n  const light = \"#F5F0E6\";\n  const dark = \"gray\";\n  const r = wh / 2;\n  const moonPhase = Math.trunc(fraction * 4) % 4; // %4 so fraction === 1 results in phase === 0\n  const backgroundColor = moonPhase < 2 ? dark : light;\n  const coverColor = moonPhase === 0 || moonPhase === 3 ? dark : light;\n  const revealColor = moonPhase < 2 ? light : dark;\n  const quarterFraction = +parseFloat(fraction % 0.25).toFixed(2);\n  const snakeEyeClosing =\n    r * 4 * (moonPhase % 2 === 1 ? 0 : 1 / 4 - quarterFraction);\n  const snakeEyeOpening = r * 4 * (moonPhase % 2 === 0 ? 0 : quarterFraction);\n\n  // https://observablehq.com/@martien/moon-phases\n\n  return (\n    <g\n      style={{\n        transform: `translate3d(${x}px, ${y}px, 0) rotate(${\n          fraction * 360 - angle\n          }deg) scale(0.8)`,\n      }}\n    >\n      <circle fill={backgroundColor} r={r} />\n\n      {!isSafari && (\n        <g mask=\"url(#showRightHalf)\">\n          <circle fill={revealColor} r={r} />\n          <ellipse fill={coverColor} ry={r} rx={snakeEyeClosing} />\n        </g>\n      )}\n\n      {isSafari && (\n        <g clip-path=\"url(#showRightHalf)\">\n          <circle fill={revealColor} r={r} />\n          <ellipse fill={coverColor} ry={r} rx={snakeEyeClosing} />\n        </g>\n      )}\n\n      <ellipse fill={revealColor} ry={r} rx={snakeEyeOpening} />\n    </g>\n  );\n};\n\nconst Labels = ({ x, y, abr }) => {\n\n  return (\n    <text\n      x={x}\n      y={y}\n      style={{ textAnchor: \"middle\", opacity: 0.5 }}\n      fill=\"var(--foreground-color)\"\n    >\n      {abr}\n    </text>\n  );\n};\n\nconst FullLabels = ({ x, y, name, fr }) => {\n\n  return (\n    <text\n      x={x}\n      y={y - 40}\n      style={{ textAnchor: \"middle\", opacity: 0.5 }}\n      fill=\"var(--foreground-color)\"\n    >\n      {name}\n\n      <tspan x={x} y={y} dy={50}>\n        {fr !== 0 ? fr.toFixed(2) : \"0 - 1\"}\n      </tspan>\n    </text>\n  );\n};\n\nconst genPoints = (length, radius) => {\n  const step = (Math.PI * 2) / length;\n  return moonPhases.map((x, i) => {\n    return {\n      ...x,\n      x: -Math.cos(i * step) * radius,\n      y: +Math.sin(i * step) * radius,\n      xLabels: -Math.cos(i * step) * (radius - 80),\n      yLabels: +Math.sin(i * step) * (radius - 80),\n      fr: (1 / length) * i,\n      angle: (1 / length) * i * 360,\n    };\n  });\n};\n\nexport default () => {\n  const [fraction, setFraction] = useState(0);\n  const { dark } = useContext(ThemeContext);\n  const { language } = useContext(LanguageContext);\n  const isEnglish = language.isEnglish;\n\n  const [view, setView] = useState(0);\n  const changeView = useCallback(() => setView((view) => (view + 1) % 3), []);\n\n  const transitions = useTransition(view, (v) => v, {\n    from: { opacity: 0, transform: \"translate3d(100%,0,0)\" },\n    enter: { opacity: 1, transform: \"translate3d(0%,0,0)\" },\n    leave: { opacity: 0, transform: \"translate3d(-50%,0,0)\" },\n  });\n\n  useInterval(() => {\n    if (fraction >= 0.99) {\n      setFraction(0);\n      return;\n    }\n    setFraction(fraction + 0.006);\n  }, 60);\n\n  const n = moonPhases.length;\n  const r = 180;\n  const points = useMemo(() => genPoints(n, r), [n]);\n\n  const pages = [\n    ({ style }) => (\n      <animated.g style={{ ...style, ...viewStyles }}>\n        <>\n          <g\n            style={{\n              transform: `translate3d(calc(50% - 20px), calc(50% - 20px), 0)`,\n              opacity: 0.5,\n              cursor: \"pointer\",\n            }}\n          >\n            <path\n              id=\"click\"\n              fill=\"var(--foreground-color)\"\n              d=\"M27.8 22.5c.3-.3.7-.5 1.2-.5.4 0 .8.2 1.1.5.3.3.5.8.5 1.3V30c0 1.6-.3 2.9-.8 4s-1.4 1.9-2.5 2.4h-6.8c-1-.2-1.8-.6-2.4-1.4-.7-.7-1.4-1.8-2.1-3.2L11.7 24l.6-.6c.2-.2.4-.4.6-.5.3-.1.5-.2.8-.1.3 0 .6.1.9.3.3.2.6.4.9.8l1.7 2.3V13.9c0-.5.2-.9.5-1.2s.7-.5 1.2-.5.9.2 1.2.5c.3.3.5.7.5 1.2v7.3h.2c0-.4.1-.8.4-1.1.3-.3.6-.5 1.1-.5.4 0 .8.2 1.1.5s.5.7.5 1.1v1.3h.2c0-.5.2-.9.5-1.2s.7-.4 1.1-.4c.4 0 .8.1 1.1.4s.4.7.4 1.1v1.1h.2c0-.3.1-.7.4-1zM13.1 17c-.4-.9-.7-1.9-.7-3 0-3.9 3.2-7.1 7.1-7.1 3.9 0 7.1 3.2 7.1 7.1 0 1.1-.2 2.1-.7 3l2.8 2c.8-1.5 1.3-3.2 1.3-5 0-5.8-4.7-10.5-10.5-10.5C13.8 3.6 9.1 8.3 9.1 14c0 1.8.5 3.5 1.3 5l2.7-2z\"\n            />\n          </g>\n\n          <g\n            className=\"rotateAll\"\n            style={{\n              transform: `perspective(10px) translate3d(50%, 50%, 0) rotate(${\n                -fraction * 360\n                }deg)`,\n              cursor: \"pointer\",\n            }}\n          >\n            {points.map((x, i) => {\n              return (\n                <Moon\n                  key={`moon${x.id}`}\n                  x={x.x}\n                  y={x.y}\n                  fraction={x.fr + fraction}\n                  angle={x.angle}\n                />\n              );\n            })}\n          </g>\n\n          <g\n            style={{\n              transform: `translate3d(50%, 50%, 0)`,\n            }}\n          >\n            {points.map((x, i) => {\n              return (\n                <Labels\n                  key={`moonLabels${x.id}`}\n                  x={x.xLabels}\n                  y={x.yLabels}\n                  name={isEnglish ? x.name : x.name_es}\n                  abr={isEnglish ? x.abr : x.abr_es}\n                />\n              );\n            })}\n          </g>\n        </>\n      </animated.g>\n    ),\n    ({ style }) => (\n      <animated.g style={{ ...style, ...viewStyles }}>\n        <g\n          style={{\n            transform: `translate3d(50%, 50%, 0)`,\n          }}\n        >\n          <Moon wh={220} x={500 / 2} y={500 / 2} fraction={fraction} />\n          <text\n            x={0}\n            y={200}\n            style={{\n              textAnchor: \"middle\",\n              opacity: 0.5,\n              fontFeatureSettings: \"tnum\",\n              fontVariantNumeric: \"tabular-nums\",\n            }}\n            fill=\"var(--foreground-color)\"\n          >\n            <tspan x={0} y={160} dy={0}>\n              {isEnglish ? \"Fraction\" : \"Fracci√≥n\"}\n            </tspan>\n            <tspan x={0} y={160} dy={30}>\n              {\" \"}\n              {fraction.toFixed(2)}\n            </tspan>\n          </text>\n        </g>\n      </animated.g>\n    ),\n    ({ style }) => (\n      <animated.g style={{ ...style, ...viewStyles }}>\n        <g>\n          <g\n            style={{\n              transform: `translate3d(50%, 50%, 0)`,\n            }}\n          >\n            {points.map((x, i) => {\n              return (\n                <FullLabels\n                  key={`moonLabelsFull${x.id}`}\n                  x={x.x}\n                  y={x.y}\n                  name={isEnglish ? x.name : x.name_es}\n                  abr={isEnglish ? x.abr : x.abr_es}\n                  fr={x.fr}\n                />\n              );\n            })}\n\n            {points.map((x, i) => {\n              return (\n                <Moon\n                  key={`moonFull${x.id}`}\n                  x={x.x}\n                  y={x.y}\n                  fraction={x.fr}\n                  angle={x.angle}\n                  wh={60}\n                />\n              );\n            })}\n          </g>\n        </g>\n      </animated.g>\n    ),\n  ];\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexFlow: \"column\",\n        zIndex: 3,\n        width: \"100%\",\n        height: \"100vh\",\n        cursor: \"pointer\",\n        background: dark ? \"#0E1016\" : \"#77CCD2\",\n        border: `1px solid ${dark ? \"#0E1016\" : \"#77CCD2\"}`,\n      }}\n      onClick={changeView}\n    >\n      <svg\n        style={{\n          overflow: \"visible\",\n          maxWidth: \"600px\",\n        }}\n        viewBox={`0 40 ${500} ${500}`}\n      >\n        <defs>\n          {/* Chrome bug using clipPath*/}\n          {!isSafari && (\n            <mask id=\"showRightHalf\">\n              <rect\n                y={-r}\n                width=\"50%\"\n                height=\"100%\"\n                style={{ stroke: \"none\", fill: \"#ffffff\" }}\n              />\n            </mask>\n          )}\n\n          {isSafari && (\n            <clipPath id=\"showRightHalf\">\n              <rect\n                y={-r}\n                width=\"50%\"\n                height=\"100%\"\n                style={{ stroke: \"none\", fill: \"#ffffff\" }}\n              />\n            </clipPath>\n          )}\n        </defs>\n        <g>\n          {transitions.map(({ item, props, key }) => {\n            const Page = pages[item];\n            return <Page key={key} style={props}></Page>;\n          })}\n        </g>\n      </svg>\n    </div>\n  );\n};\n","export const isSafari = window.safari !== undefined;\n"],"sourceRoot":""}
{"version":3,"sources":["../node_modules/three/examples/jsm/controls/TrackballControls.js","../node_modules/lodash.pick/index.js","../node_modules/lodash.omit/index.js","../node_modules/three/examples/js/libs/stats.min.js","../node_modules/three/examples/jsm/controls/TransformControls.js","../node_modules/three/examples/jsm/controls/PointerLockControls.js","../node_modules/three/examples/jsm/loaders/DRACOLoader.js","../node_modules/three/examples/jsm/loaders/GLTFLoader.js","../node_modules/zustand/index.js","../node_modules/three/examples/jsm/objects/Reflector.js","../node_modules/three/examples/jsm/modifiers/SimplifyModifier.js","../node_modules/three/examples/jsm/modifiers/SubdivisionModifier.js","../node_modules/three/examples/jsm/modifiers/TessellateModifier.js","../node_modules/drei/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/three/examples/jsm/objects/Sky.js","../node_modules/drei/index.js"],"names":["TrackballControls","object","domElement","undefined","console","warn","document","error","_this","this","STATE","enabled","screen","left","top","width","height","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","keys","mouseButtons","LEFT","MOUSE","ROTATE","MIDDLE","ZOOM","RIGHT","PAN","target","Vector3","lastPosition","lastZoom","_state","_keyState","_eye","_movePrev","Vector2","_moveCurr","_lastAxis","_lastAngle","_zoomStart","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","target0","clone","position0","position","up0","up","zoom0","zoom","changeEvent","type","startEvent","endEvent","handleResize","box","getBoundingClientRect","d","ownerDocument","documentElement","window","pageXOffset","clientLeft","pageYOffset","clientTop","getMouseOnScreen","vector","pageX","pageY","set","getMouseOnCircle","keydown","event","removeEventListener","keyCode","keyup","addEventListener","mousedown","preventDefault","stopPropagation","button","state","copy","mousemove","mouseup","dispatchEvent","mousewheel","deltaMode","y","deltaY","touchstart","touches","length","dx","dy","Math","sqrt","x","touchmove","touchend","contextmenu","rotateCamera","angle","axis","quaternion","Quaternion","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","sub","normalize","crossVectors","setLength","add","setFromAxisAngle","applyQuaternion","zoomCamera","factor","isPerspectiveCamera","multiplyScalar","isOrthographicCamera","updateProjectionMatrix","panCamera","mouseChange","objectUp","pan","lengthSq","scale_x","right","clientWidth","scale_y","bottom","cross","subVectors","checkDistances","addVectors","update","lookAt","distanceToSquared","reset","dispose","prototype","Object","create","EventDispatcher","constructor","freeGlobal","global","freeSelf","self","root","Function","apply","func","thisArg","args","call","arrayPush","array","values","index","offset","objectProto","hasOwnProperty","objectToString","toString","Symbol","propertyIsEnumerable","spreadableSymbol","isConcatSpreadable","nativeMax","max","isFlattenable","value","isArray","isObjectLike","isLength","tag","isObject","isFunction","isArrayLike","isArrayLikeObject","isArguments","toKey","isSymbol","result","Array","start","pick","props","predicate","key","basePickBy","basePick","iteratee","arrayMap","baseFlatten","depth","isStrict","arguments","otherArgs","module","exports","reIsHostCtor","reIsUint","arrayIncludes","fromIndex","fromRight","baseFindIndex","baseIsNaN","baseIndexOf","arrayIncludesWith","comparator","cacheHas","cache","has","overArg","transform","arg","arrayProto","funcProto","coreJsData","maskSrcKey","uid","exec","IE_PROTO","funcToString","reIsNative","RegExp","replace","getPrototype","getPrototypeOf","splice","nativeGetSymbols","getOwnPropertySymbols","Map","getNative","nativeCreate","Hash","entries","clear","entry","ListCache","MapCache","SetCache","__data__","arrayLikeKeys","inherited","n","baseTimes","String","skipIndexes","isIndex","push","assocIndexOf","other","baseIsNative","e","isHostObject","test","toSource","baseKeysIn","nativeKeysIn","isProto","Ctor","proto","isPrototype","getAllKeysIn","keysFunc","symbolsFunc","baseGetAllKeys","keysIn","getSymbolsIn","getMapData","map","data","isKeyable","getValue","get","pop","getSymbols","stubArray","omit","includes","isCommon","valuesLength","outer","computed","valuesIndex","baseDifference","Stats","h","a","c","appendChild","dom","k","children","style","display","l","createElement","cssText","g","performance","Date","now","r","Panel","f","memory","t","REVISION","addPanel","showPanel","begin","end","usedJSHeapSize","jsHeapSizeLimit","setMode","round","devicePixelRatio","u","m","p","q","b","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","v","min","drawImage","TransformControls","camera","Object3D","visible","_gizmo","TransformControlsGizmo","_plane","TransformControlsPlane","scope","defineProperty","mouseDownEvent","mouseUpEvent","mode","objectChangeEvent","raycaster","Raycaster","intersectObjectWithRay","includeInvisible","allIntersections","intersectObject","i","_tempVector","_tempVector2","_tempQuaternion","_unit","X","Y","Z","pointStart","pointEnd","rotationAxis","startNorm","endNorm","rotationAngle","cameraPosition","cameraQuaternion","cameraScale","parentPosition","parentQuaternion","parentQuaternionInv","parentScale","worldPositionStart","worldQuaternionStart","worldScaleStart","worldPosition","worldQuaternion","worldQuaternionInv","worldScale","eye","positionStart","quaternionStart","scaleStart","propName","defaultValue","propValue","getPointer","pointerLockElement","pointer","changedTouches","rect","clientX","clientY","onPointerHover","pointerHover","onPointerDown","onPointerMove","pointerDown","pointerMove","onPointerUp","pointerUp","traverse","child","geometry","material","attach","detach","updateMatrixWorld","parent","matrixWorld","decompose","inverse","dragging","setFromCamera","intersect","picker","name","planeIntersect","space","snap","rotationSnap","rotation","z","scale","point","indexOf","divide","translationSnap","search","setFromMatrixPosition","dot","multiply","scaleSnap","ROTATION_SPEED","distanceTo","angleTo","getMode","setTranslationSnap","setRotationSnap","setScaleSnap","setSize","size","setSpace","assign","isTransformControls","gizmoMaterial","MeshBasicMaterial","depthTest","depthWrite","transparent","side","DoubleSide","fog","gizmoLineMaterial","LineBasicMaterial","linewidth","matInvisible","opacity","matHelper","matRed","color","matGreen","matBlue","matWhiteTransparent","matYellowTransparent","matCyanTransparent","matMagentaTransparent","matLineRed","matLineGreen","matLineBlue","matLineCyan","matLineMagenta","matLineYellow","matLineGray","matLineYellowTransparent","arrowGeometry","CylinderBufferGeometry","scaleHandleGeometry","BoxBufferGeometry","lineGeometry","BufferGeometry","setAttribute","Float32BufferAttribute","CircleGeometry","radius","arc","vertices","cos","PI","sin","gizmoTranslate","Mesh","Line","XYZ","OctahedronBufferGeometry","XY","PlaneBufferGeometry","YZ","XZ","pickerTranslate","helperTranslate","START","END","DELTA","TranslateHelperGeometry","gizmoRotate","E","XYZE","helperRotate","AXIS","pickerRotate","TorusBufferGeometry","SphereBufferGeometry","gizmoScale","XYZX","XYZY","XYZZ","pickerScale","helperScale","setupGizmo","gizmoMap","gizmo","updateMatrix","tempGeometry","applyMatrix4","matrix","renderOrder","tempVector","tempEuler","Euler","alignVector","zeroVector","lookAtMatrix","Matrix4","tempQuaternion","tempQuaternion2","identityQuaternion","unitX","unitY","unitZ","helper","handles","concat","handle","tan","fov","abs","setFromRotationMatrix","atan2","multiplyQuaternions","showX","showY","showZ","_opacity","_color","split","some","lerp","Color","setFromEuler","isTransformControlsGizmo","wireframe","dirVector","tempMatrix","isTransformControlsPlane","PointerLockControls","body","isLocked","lockEvent","unlockEvent","euler","PI_2","vec","onMouseMove","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","setFromQuaternion","onPointerlockChange","onPointerlockError","connect","disconnect","getObject","getDirection","direction","moveForward","distance","setFromMatrixColumn","addScaledVector","moveRight","lock","requestPointerLock","unlock","exitPointerLock","DRACOLoader","manager","Loader","decoderPath","decoderConfig","decoderBinary","decoderPending","workerLimit","workerPool","workerNextTaskID","workerSourceURL","defaultAttributeIDs","normal","uv","defaultAttributeTypes","setDecoderPath","path","setDecoderConfig","config","setWorkerLimit","setVerbosity","setDrawMode","setSkipDequantization","load","url","onLoad","onProgress","onError","loader","FileLoader","setPath","setResponseType","crossOrigin","setWithCredentials","buffer","taskConfig","attributeIDs","attributeTypes","useUniqueIDs","decodeGeometry","then","catch","decodeDracoFile","callback","attribute","BYTES_PER_ELEMENT","worker","taskKey","JSON","stringify","taskCache","cachedTask","promise","byteLength","Error","taskID","taskCost","geometryPending","_getWorker","_worker","Promise","resolve","reject","_callbacks","postMessage","id","message","_createGeometry","_releaseTask","geometryData","setIndex","BufferAttribute","attributes","itemSize","_loadLibrary","responseType","preload","_initDecoder","useJS","WebAssembly","librariesPending","all","libraries","jsContent","wasmBinary","fn","DRACOWorker","substring","lastIndexOf","join","URL","createObjectURL","Blob","Worker","_taskCosts","_taskLoad","onmessage","sort","debug","log","terminate","decodeAttribute","draco","decoder","dracoGeometry","attributeName","attributeType","dracoArray","numComponents","num_components","numValues","num_points","Float32Array","DracoFloat32Array","GetAttributeFloatForAllPoints","Int8Array","DracoInt8Array","GetAttributeInt8ForAllPoints","Int16Array","DracoInt16Array","GetAttributeInt16ForAllPoints","Int32Array","DracoInt32Array","GetAttributeInt32ForAllPoints","Uint8Array","DracoUInt8Array","GetAttributeUInt8ForAllPoints","Uint16Array","DracoUInt16Array","GetAttributeUInt16ForAllPoints","Uint32Array","DracoUInt32Array","GetAttributeUInt32ForAllPoints","GetValue","destroy","onModuleLoaded","DracoDecoderModule","Decoder","decoderBuffer","DecoderBuffer","Init","decodingStatus","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","DecodeBufferToMesh","POINT_CLOUD","PointCloud","DecodeBufferToPointCloud","ok","ptr","error_msg","attributeID","GetAttributeByUniqueId","GetAttributeId","GetAttribute","numFaces","num_faces","indexArray","GetFaceFromMesh","j","buffers","attr","WeakMap","releaseDecoderModule","getDecoderModule","GLTFLoader","dracoLoader","ddsLoader","GLTFRegistry","objects","remove","removeAll","resourcePath","LoaderUtils","extractUrlBase","itemStart","_onError","itemError","itemEnd","setRequestHeader","requestHeader","parse","gltf","setDRACOLoader","setDDSLoader","content","extensions","decodeText","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","asset","version","extensionsUsed","extensionName","extensionsRequired","KHR_LIGHTS_PUNCTUAL","GLTFLightsExtension","KHR_MATERIALS_CLEARCOAT","GLTFMaterialsClearcoatExtension","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","parser","GLTFParser","fileLoader","extension","lightDefs","lights","loadLight","lightIndex","lightNode","lightDef","fromArray","range","DirectionalLight","PointLight","SpotLight","spot","innerConeAngle","outerConeAngle","penumbra","decay","intensity","getMaterialType","extendParams","materialParams","materialDef","pending","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","MeshPhysicalMaterial","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","clearcoatNormalScale","BINARY_EXTENSION_CHUNK_TYPES","headerView","DataView","header","magic","slice","getUint32","chunkView","chunkIndex","chunkLength","chunkType","contentArray","byteOffset","GLTFMeshStandardSGMaterial","params","MeshStandardMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","uniforms","specular","setHex","glossiness","specularMap","glossinessMap","_extraUniforms","onBeforeCompile","shader","uniformName","fragmentShader","defineProperties","defines","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","metalness","roughness","metalnessMap","roughnessMap","setValues","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","TangentSpaceNormalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","Interpolant","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","ATTRIBUTES","toLowerCase","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","getDependency","extendTexture","texture","repeat","texCoord","needsUpdate","source","copySampleValue_","valueSize","beforeStart_","afterEnd_","interpolate_","i1","t0","t1","stride","stride2","stride3","td","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","m1","WEBGL_CONSTANTS","5120","5121","5122","5123","5125","5126","WEBGL_FILTERS","9728","NearestFilter","9729","LinearFilter","9984","NearestMipmapNearestFilter","9985","LinearMipmapNearestFilter","9986","NearestMipmapLinearFilter","9987","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","33071","ClampToEdgeWrapping","33648","MirroredRepeatWrapping","10497","RepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","LINEAR","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","MIME_TYPE_FORMATS","RGBAFormat","RGBFormat","resolveURL","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","updateMorphTargets","mesh","meshDef","il","morphTargetInfluences","targetNames","morphTargetDictionary","createPrimitiveKey","primitiveDef","dracoExtension","indices","createAttributesKey","attributesKey","options","associations","primitiveCache","textureLoader","TextureLoader","setCrossOrigin","addPrimitiveAttributes","assignAttributeAccessor","accessorIndex","accessor","gltfAttributeName","Box3","targets","maxDisplacement","setX","setY","setZ","expandByVector","boundingBox","sphere","Sphere","getCenter","center","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","morphPositions","morphNormals","morphAttributes","morphTargetsRelative","addMorphTargets","toTrianglesDrawMode","drawMode","getIndex","getAttribute","count","numberOfTriangles","newIndices","TriangleFanDrawMode","getX","newGeometry","markDefs","getDependencies","dependencies","scene","scenes","animations","cameras","nodeDefs","nodes","skinDefs","skins","meshDefs","meshes","meshReferences","meshUses","skinIndex","skinLength","joints","isBone","nodeIndex","nodeLength","nodeDef","skin","isSkinnedMesh","cacheKey","dependency","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadTexture","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","uri","bufferViewDef","bufferViews","sparse","pendingBufferViews","bufferAttribute","TypedArray","elementBytes","itemBytes","byteStride","ibSlice","floor","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setW","textureIndex","webkitURL","textureDef","textures","textureExtensions","sourceURI","images","isObjectURL","blob","mimeType","getHandler","revokeObjectURL","flipY","format","sampler","samplers","magFilter","minFilter","wrapS","wrapT","mapName","mapDef","isCompressedTexture","gltfReference","assignFinalMaterial","useVertexTangents","tangent","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","cachedMaterial","skinning","vertexTangents","vertexColors","flatShading","morphTargets","uv2","materialIndex","materialType","materials","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","alphaMode","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","clearcoatExtension","encoding","sRGBEncoding","loadGeometries","primitives","createDracoPrimitive","geometryPromise","cached","meshIndex","FrontSide","results","geometries","SkinnedMesh","skinWeight","normalizeSkinWeights","TriangleStripDrawMode","LineSegments","LineLoop","Points","group","Group","cameraIndex","cameraDef","PerspectiveCamera","MathUtils","radToDeg","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","node","input","parameters","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","matrixAutoUpdate","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","isMesh","outputArray","scaled","jl","track","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","instanceNum","o","light","Bone","PropertyBinding","sanitizeNodeName","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","mat","bind","Skeleton","sceneIndex","sceneDef","nodeIds","createState","listeners","Set","setState","partial","nextState","forEach","listener","getState","api","subscribe","selector","equalityFn","is","currentSlice","listenerToAdd","newStateSlice","delete","subscribeWithSelector","useIsoLayoutEffect","useEffect","useLayoutEffect","create$1","useStore","useReducer","forceUpdate","stateRef","useRef","selectorRef","equalityFnRef","erroredRef","currentSliceRef","current","hasNewStateSlice","stateBeforeSubscriptionRef","nextStateSlice","unsubscribe","iterator","Reflector","textureWidth","textureHeight","clipBias","ReflectorShader","LinearEncoding","reflectorPlane","Plane","reflectorWorldPosition","cameraWorldPosition","rotationMatrix","lookAtPosition","clipPlane","Vector4","view","textureMatrix","virtualCamera","stencilBuffer","renderTarget","WebGLRenderTarget","isPowerOfTwo","generateMipmaps","ShaderMaterial","UniformsUtils","vertexShader","onBeforeRender","renderer","extractRotation","reflect","negate","far","projectionMatrix","matrixWorldInverse","setFromNormalAndCoplanarPoint","constant","sign","elements","w","currentRenderTarget","getRenderTarget","currentXrEnabled","xr","currentShadowAutoUpdate","shadowMap","autoUpdate","setRenderTarget","setMask","autoClear","render","viewport","SimplifyModifier","cb","ab","removeFromArray","computeEdgeCollapseCost","face","sideFace","edgelength","curvature","sideFaces","faces","hasVertex","minCurvature","dotProd","computeEdgeCostAtVertex","neighbors","collapseNeighbor","collapseCost","minCost","totalCost","costCount","removeVertex","assert","removeFace","v1","v2","v3","vs","removeIfNonNeighbor","collapse","tmpVertices","replaceVertex","minimumCostEdge","least","Triangle","computeNormal","addUniqueNeighbor","Vertex","vA","vB","vC","oldv","newv","vertex","modify","isBufferGeometry","Geometry","fromBufferGeometry","mergeVertices","nextVertex","oldVertices","oldFaces","triangle","simplifiedGeometry","SubdivisionModifier","subdivisions","repeats","smooth","computeFaceNormals","computeVertexNormals","ABC","getEdge","processEdge","metaVertices","edge","vertexIndexA","vertexIndexB","newEdge","edges","newFace","newFaces","Face3","midpoint","newUv","newUvs","oldUvs","newVertices","sourceEdges","newEdgeVertices","newSourceVertices","tmp","newUVs","currentEdge","edgeVertexWeight","adjacentVertexWeight","connectedFaces","beta","sourceVertexWeight","connectingVertexWeight","connectingEdge","connectingEdges","oldVertex","newSourceVertex","hasUvs","faceVertexUvs","generateLookups","edge1","edge2","edge3","x0","x1","x2","sl","x3","x4","x5","TessellateModifier","maxEdgeLength","_defineProperty","obj","enumerable","configurable","writable","maxEdgeLengthSquared","va","vb","vc","dab","dbc","dac","triA","triB","vm","vertexNormals","vnm","vcm","uvs","uvA","uvB","uvC","uvM","uvsTriA","uvsTriB","Sky","SkyShader","BackSide","El","forwardRef","_ref","ref","_objectWithoutPropertiesLoose","React","_extends","useThree","gl","invalidate","controls","useMemo","TrackballControls$1","useFrame","DefaultLoadingManager","onStart","item","loaded","total","active","progress","errors","Ray","Sphere$1"],"mappings":"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","file":"static/js/18.85634df7.chunk.js","sourcesContent":["/**\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin \t/ http://mark-lundin.com\n * @author Simone Manini / http://daron1337.github.io\n * @author Luca Antiga \t/ http://lantiga.github.io\n */\n\nimport {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tVector2,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar TrackballControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.TrackballControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.TrackballControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tvar _this = this;\n\tvar STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\tthis.rotateSpeed = 1.0;\n\tthis.zoomSpeed = 1.2;\n\tthis.panSpeed = 0.3;\n\n\tthis.noRotate = false;\n\tthis.noZoom = false;\n\tthis.noPan = false;\n\n\tthis.staticMoving = false;\n\tthis.dynamicDampingFactor = 0.2;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\n\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.ZOOM, RIGHT: MOUSE.PAN };\n\n\t// internals\n\n\tthis.target = new Vector3();\n\n\tvar EPS = 0.000001;\n\n\tvar lastPosition = new Vector3();\n\tvar lastZoom = 1;\n\n\tvar _state = STATE.NONE,\n\t\t_keyState = STATE.NONE,\n\n\t\t_eye = new Vector3(),\n\n\t\t_movePrev = new Vector2(),\n\t\t_moveCurr = new Vector2(),\n\n\t\t_lastAxis = new Vector3(),\n\t\t_lastAngle = 0,\n\n\t\t_zoomStart = new Vector2(),\n\t\t_zoomEnd = new Vector2(),\n\n\t\t_touchZoomDistanceStart = 0,\n\t\t_touchZoomDistanceEnd = 0,\n\n\t\t_panStart = new Vector2(),\n\t\t_panEnd = new Vector2();\n\n\t// for reset\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.up0 = this.object.up.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t// events\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\n\t// methods\n\n\tthis.handleResize = function () {\n\n\t\tvar box = this.domElement.getBoundingClientRect();\n\t\t// adjustments come from similar code in the jquery offset() function\n\t\tvar d = this.domElement.ownerDocument.documentElement;\n\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\tthis.screen.width = box.width;\n\t\tthis.screen.height = box.height;\n\n\t};\n\n\tvar getMouseOnScreen = ( function () {\n\n\t\tvar vector = new Vector2();\n\n\t\treturn function getMouseOnScreen( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( pageX - _this.screen.left ) / _this.screen.width,\n\t\t\t\t( pageY - _this.screen.top ) / _this.screen.height\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tvar getMouseOnCircle = ( function () {\n\n\t\tvar vector = new Vector2();\n\n\t\treturn function getMouseOnCircle( pageX, pageY ) {\n\n\t\t\tvector.set(\n\t\t\t\t( ( pageX - _this.screen.width * 0.5 - _this.screen.left ) / ( _this.screen.width * 0.5 ) ),\n\t\t\t\t( ( _this.screen.height + 2 * ( _this.screen.top - pageY ) ) / _this.screen.width ) // screen.width intentional\n\t\t\t);\n\n\t\t\treturn vector;\n\n\t\t};\n\n\t}() );\n\n\tthis.rotateCamera = ( function () {\n\n\t\tvar axis = new Vector3(),\n\t\t\tquaternion = new Quaternion(),\n\t\t\teyeDirection = new Vector3(),\n\t\t\tobjectUpDirection = new Vector3(),\n\t\t\tobjectSidewaysDirection = new Vector3(),\n\t\t\tmoveDirection = new Vector3(),\n\t\t\tangle;\n\n\t\treturn function rotateCamera() {\n\n\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\n\t\t\tangle = moveDirection.length();\n\n\t\t\tif ( angle ) {\n\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\n\t\t\t\teyeDirection.copy( _eye ).normalize();\n\t\t\t\tobjectUpDirection.copy( _this.object.up ).normalize();\n\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\n\n\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\n\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\n\n\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\n\n\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\n\n\t\t\t\tangle *= _this.rotateSpeed;\n\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\n\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t_lastAxis.copy( axis );\n\t\t\t\t_lastAngle = angle;\n\n\t\t\t} else if ( ! _this.staticMoving && _lastAngle ) {\n\n\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - _this.dynamicDampingFactor );\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t}\n\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t};\n\n\t}() );\n\n\n\tthis.zoomCamera = function () {\n\n\t\tvar factor;\n\n\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\n\t\t\tif ( _this.object.isPerspectiveCamera ) {\n\n\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t} else if ( _this.object.isOrthographicCamera ) {\n\n\t\t\t\t_this.object.zoom *= factor;\n\t\t\t\t_this.object.updateProjectionMatrix();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * _this.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\tif ( _this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\t} else if ( _this.object.isOrthographicCamera ) {\n\n\t\t\t\t\t_this.object.zoom /= factor;\n\t\t\t\t\t_this.object.updateProjectionMatrix();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t} else {\n\n\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.panCamera = ( function () {\n\n\t\tvar mouseChange = new Vector2(),\n\t\t\tobjectUp = new Vector3(),\n\t\t\tpan = new Vector3();\n\n\t\treturn function panCamera() {\n\n\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\tif ( _this.object.isOrthographicCamera ) {\n\n\t\t\t\t\tvar scale_x = ( _this.object.right - _this.object.left ) / _this.object.zoom / _this.domElement.clientWidth;\n\t\t\t\t\tvar scale_y = ( _this.object.top - _this.object.bottom ) / _this.object.zoom / _this.domElement.clientWidth;\n\n\t\t\t\t\tmouseChange.x *= scale_x;\n\t\t\t\t\tmouseChange.y *= scale_y;\n\n\t\t\t\t}\n\n\t\t\t\tmouseChange.multiplyScalar( _eye.length() * _this.panSpeed );\n\n\t\t\t\tpan.copy( _eye ).cross( _this.object.up ).setLength( mouseChange.x );\n\t\t\t\tpan.add( objectUp.copy( _this.object.up ).setLength( mouseChange.y ) );\n\n\t\t\t\t_this.object.position.add( pan );\n\t\t\t\t_this.target.add( pan );\n\n\t\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( _this.dynamicDampingFactor ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.checkDistances = function () {\n\n\t\tif ( ! _this.noZoom || ! _this.noPan ) {\n\n\t\t\tif ( _eye.lengthSq() > _this.maxDistance * _this.maxDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.maxDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t\tif ( _eye.lengthSq() < _this.minDistance * _this.minDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.minDistance ) );\n\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.update = function () {\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\tif ( ! _this.noRotate ) {\n\n\t\t\t_this.rotateCamera();\n\n\t\t}\n\n\t\tif ( ! _this.noZoom ) {\n\n\t\t\t_this.zoomCamera();\n\n\t\t}\n\n\t\tif ( ! _this.noPan ) {\n\n\t\t\t_this.panCamera();\n\n\t\t}\n\n\t\t_this.object.position.addVectors( _this.target, _eye );\n\n\t\tif ( _this.object.isPerspectiveCamera ) {\n\n\t\t\t_this.checkDistances();\n\n\t\t\t_this.object.lookAt( _this.target );\n\n\t\t\tif ( lastPosition.distanceToSquared( _this.object.position ) > EPS ) {\n\n\t\t\t\t_this.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( _this.object.position );\n\n\t\t\t}\n\n\t\t} else if ( _this.object.isOrthographicCamera ) {\n\n\t\t\t_this.object.lookAt( _this.target );\n\n\t\t\tif ( lastPosition.distanceToSquared( _this.object.position ) > EPS || lastZoom !== _this.object.zoom ) {\n\n\t\t\t\t_this.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( _this.object.position );\n\t\t\t\tlastZoom = _this.object.zoom;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t}\n\n\t};\n\n\tthis.reset = function () {\n\n\t\t_state = STATE.NONE;\n\t\t_keyState = STATE.NONE;\n\n\t\t_this.target.copy( _this.target0 );\n\t\t_this.object.position.copy( _this.position0 );\n\t\t_this.object.up.copy( _this.up0 );\n\t\t_this.object.zoom = _this.zoom0;\n\n\t\t_this.object.updateProjectionMatrix();\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\t_this.object.lookAt( _this.target );\n\n\t\t_this.dispatchEvent( changeEvent );\n\n\t\tlastPosition.copy( _this.object.position );\n\t\tlastZoom = _this.object.zoom;\n\n\t};\n\n\t// listeners\n\n\tfunction keydown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\twindow.removeEventListener( 'keydown', keydown );\n\n\t\tif ( _keyState !== STATE.NONE ) {\n\n\t\t\treturn;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ROTATE ] && ! _this.noRotate ) {\n\n\t\t\t_keyState = STATE.ROTATE;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ZOOM ] && ! _this.noZoom ) {\n\n\t\t\t_keyState = STATE.ZOOM;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.PAN ] && ! _this.noPan ) {\n\n\t\t\t_keyState = STATE.PAN;\n\n\t\t}\n\n\t}\n\n\tfunction keyup() {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\t_keyState = STATE.NONE;\n\n\t\twindow.addEventListener( 'keydown', keydown, false );\n\n\t}\n\n\tfunction mousedown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.NONE ) {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase _this.mouseButtons.LEFT:\n\t\t\t\t\t_state = STATE.ROTATE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase _this.mouseButtons.MIDDLE:\n\t\t\t\t\t_state = STATE.ZOOM;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase _this.mouseButtons.RIGHT:\n\t\t\t\t\t_state = STATE.PAN;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t_state = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\tif ( state === STATE.ROTATE && ! _this.noRotate ) {\n\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t} else if ( state === STATE.ZOOM && ! _this.noZoom ) {\n\n\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_zoomEnd.copy( _zoomStart );\n\n\t\t} else if ( state === STATE.PAN && ! _this.noPan ) {\n\n\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t_panEnd.copy( _panStart );\n\n\t\t}\n\n\t\tdocument.addEventListener( 'mousemove', mousemove, false );\n\t\tdocument.addEventListener( 'mouseup', mouseup, false );\n\n\t\t_this.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction mousemove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\tif ( state === STATE.ROTATE && ! _this.noRotate ) {\n\n\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t} else if ( state === STATE.ZOOM && ! _this.noZoom ) {\n\n\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t} else if ( state === STATE.PAN && ! _this.noPan ) {\n\n\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t}\n\n\t}\n\n\tfunction mouseup( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t_state = STATE.NONE;\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove );\n\t\tdocument.removeEventListener( 'mouseup', mouseup );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction mousewheel( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tif ( _this.noZoom === true ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.deltaMode ) {\n\n\t\t\tcase 2:\n\t\t\t\t// Zoom in pages\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.025;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t// Zoom in lines\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.01;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// undefined, 0, assume pixels\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.00025;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( startEvent );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction touchstart( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t_panEnd.copy( _panStart );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( startEvent );\n\n\t}\n\n\tfunction touchmove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\tbreak;\n\n\t\t\tdefault: // 2 or more\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction touchend( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 0:\n\t\t\t\t_state = STATE.NONE;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction contextmenu( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\tthis.dispose = function () {\n\n\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\tthis.domElement.removeEventListener( 'mousedown', mousedown, false );\n\t\tthis.domElement.removeEventListener( 'wheel', mousewheel, false );\n\n\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\n\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove, false );\n\t\tdocument.removeEventListener( 'mouseup', mouseup, false );\n\n\t\twindow.removeEventListener( 'keydown', keydown, false );\n\t\twindow.removeEventListener( 'keyup', keyup, false );\n\n\t};\n\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\tthis.domElement.addEventListener( 'mousedown', mousedown, false );\n\tthis.domElement.addEventListener( 'wheel', mousewheel, false );\n\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\twindow.addEventListener( 'keydown', keydown, false );\n\twindow.addEventListener( 'keyup', keyup, false );\n\n\tthis.handleResize();\n\n\t// force an update at start\n\tthis.update();\n\n};\n\nTrackballControls.prototype = Object.create( EventDispatcher.prototype );\nTrackballControls.prototype.constructor = TrackballControls;\n\nexport { TrackballControls };\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, props) {\n  object = Object(object);\n  return basePickBy(object, props, function(value, key) {\n    return key in object;\n  });\n}\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick from.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, props, predicate) {\n  var index = -1,\n      length = props.length,\n      result = {};\n\n  while (++index < length) {\n    var key = props[index],\n        value = object[key];\n\n    if (predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [props] The property identifiers to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = baseRest(function(object, props) {\n  return object == null ? {} : basePick(object, arrayMap(baseFlatten(props, 1), toKey));\n});\n\nmodule.exports = pick;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array ? array.length : 0;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a cache value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeMax = Math.max;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, props) {\n  object = Object(object);\n  return basePickBy(object, props, function(value, key) {\n    return key in object;\n  });\n}\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick from.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, props, predicate) {\n  var index = -1,\n      length = props.length,\n      result = {};\n\n  while (++index < length) {\n    var key = props[index],\n        value = object[key];\n\n    if (predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Creates an array of the own and inherited enumerable symbol properties\n * of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable string keyed properties of `object` that are\n * not omitted.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [props] The property identifiers to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = baseRest(function(object, props) {\n  if (object == null) {\n    return {};\n  }\n  props = arrayMap(baseFlatten(props, 1), toKey);\n  return basePick(object, baseDifference(getAllKeysIn(object), props));\n});\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = omit;\n","// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){function h(a){c.appendChild(a.dom);return a}function k(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();k(++l%c.children.length)},!1);var g=(performance||Date).now(),e=g,a=0,r=h(new Stats.Panel(\"FPS\",\"#0ff\",\"#002\")),f=h(new Stats.Panel(\"MS\",\"#0f0\",\"#020\"));\nif(self.performance&&self.performance.memory)var t=h(new Stats.Panel(\"MB\",\"#f08\",\"#201\"));k(0);return{REVISION:16,dom:c,addPanel:h,showPanel:k,begin:function(){g=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();f.update(c-g,200);if(c>e+1E3&&(r.update(1E3*a/(c-e),100),e=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){g=this.end()},domElement:c,setMode:k}};\nStats.Panel=function(h,k,l){var c=Infinity,g=0,e=Math.round,a=e(window.devicePixelRatio||1),r=80*a,f=48*a,t=3*a,u=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=f;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,f);b.fillStyle=k;b.fillText(h,t,u);b.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(f,\nv){c=Math.min(c,f);g=Math.max(g,f);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=k;b.fillText(e(f)+\" \"+h+\" (\"+e(c)+\"-\"+e(g)+\")\",t,u);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,e((1-f/v)*p))}}};\"object\"===typeof module&&(module.exports=Stats);\n","/**\n * @author arodic / https://github.com/arodic\n */\n\nimport {\n\tBoxBufferGeometry,\n\tBufferGeometry,\n\tColor,\n\tCylinderBufferGeometry,\n\tDoubleSide,\n\tEuler,\n\tFloat32BufferAttribute,\n\tLine,\n\tLineBasicMaterial,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tOctahedronBufferGeometry,\n\tPlaneBufferGeometry,\n\tQuaternion,\n\tRaycaster,\n\tSphereBufferGeometry,\n\tTorusBufferGeometry,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar TransformControls = function ( camera, domElement ) {\n\n\tif ( domElement === undefined ) {\n\n\t\tconsole.warn( 'THREE.TransformControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tdomElement = document;\n\n\t}\n\n\tObject3D.call( this );\n\n\tthis.visible = false;\n\tthis.domElement = domElement;\n\n\tvar _gizmo = new TransformControlsGizmo();\n\tthis.add( _gizmo );\n\n\tvar _plane = new TransformControlsPlane();\n\tthis.add( _plane );\n\n\tvar scope = this;\n\n\t// Define properties with getters/setter\n\t// Setting the defined property will automatically trigger change event\n\t// Defined properties are passed down to gizmo and plane\n\n\tdefineProperty( \"camera\", camera );\n\tdefineProperty( \"object\", undefined );\n\tdefineProperty( \"enabled\", true );\n\tdefineProperty( \"axis\", null );\n\tdefineProperty( \"mode\", \"translate\" );\n\tdefineProperty( \"translationSnap\", null );\n\tdefineProperty( \"rotationSnap\", null );\n\tdefineProperty( \"scaleSnap\", null );\n\tdefineProperty( \"space\", \"world\" );\n\tdefineProperty( \"size\", 1 );\n\tdefineProperty( \"dragging\", false );\n\tdefineProperty( \"showX\", true );\n\tdefineProperty( \"showY\", true );\n\tdefineProperty( \"showZ\", true );\n\n\tvar changeEvent = { type: \"change\" };\n\tvar mouseDownEvent = { type: \"mouseDown\" };\n\tvar mouseUpEvent = { type: \"mouseUp\", mode: scope.mode };\n\tvar objectChangeEvent = { type: \"objectChange\" };\n\n\t// Reusable utility variables\n\n\tvar raycaster = new Raycaster();\n\n\tfunction intersectObjectWithRay( object, raycaster, includeInvisible ) {\n\n\t\tvar allIntersections = raycaster.intersectObject( object, true );\n\n\t\tfor ( var i = 0; i < allIntersections.length; i ++ ) {\n\n\t\t\tif ( allIntersections[ i ].object.visible || includeInvisible ) {\n\n\t\t\t\treturn allIntersections[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tvar _tempVector = new Vector3();\n\tvar _tempVector2 = new Vector3();\n\tvar _tempQuaternion = new Quaternion();\n\tvar _unit = {\n\t\tX: new Vector3( 1, 0, 0 ),\n\t\tY: new Vector3( 0, 1, 0 ),\n\t\tZ: new Vector3( 0, 0, 1 )\n\t};\n\n\tvar pointStart = new Vector3();\n\tvar pointEnd = new Vector3();\n\tvar offset = new Vector3();\n\tvar rotationAxis = new Vector3();\n\tvar startNorm = new Vector3();\n\tvar endNorm = new Vector3();\n\tvar rotationAngle = 0;\n\n\tvar cameraPosition = new Vector3();\n\tvar cameraQuaternion = new Quaternion();\n\tvar cameraScale = new Vector3();\n\n\tvar parentPosition = new Vector3();\n\tvar parentQuaternion = new Quaternion();\n\tvar parentQuaternionInv = new Quaternion();\n\tvar parentScale = new Vector3();\n\n\tvar worldPositionStart = new Vector3();\n\tvar worldQuaternionStart = new Quaternion();\n\tvar worldScaleStart = new Vector3();\n\n\tvar worldPosition = new Vector3();\n\tvar worldQuaternion = new Quaternion();\n\tvar worldQuaternionInv = new Quaternion();\n\tvar worldScale = new Vector3();\n\n\tvar eye = new Vector3();\n\n\tvar positionStart = new Vector3();\n\tvar quaternionStart = new Quaternion();\n\tvar scaleStart = new Vector3();\n\n\t// TODO: remove properties unused in plane and gizmo\n\n\tdefineProperty( \"worldPosition\", worldPosition );\n\tdefineProperty( \"worldPositionStart\", worldPositionStart );\n\tdefineProperty( \"worldQuaternion\", worldQuaternion );\n\tdefineProperty( \"worldQuaternionStart\", worldQuaternionStart );\n\tdefineProperty( \"cameraPosition\", cameraPosition );\n\tdefineProperty( \"cameraQuaternion\", cameraQuaternion );\n\tdefineProperty( \"pointStart\", pointStart );\n\tdefineProperty( \"pointEnd\", pointEnd );\n\tdefineProperty( \"rotationAxis\", rotationAxis );\n\tdefineProperty( \"rotationAngle\", rotationAngle );\n\tdefineProperty( \"eye\", eye );\n\n\t{\n\n\t\tdomElement.addEventListener( \"mousedown\", onPointerDown, false );\n\t\tdomElement.addEventListener( \"touchstart\", onPointerDown, false );\n\t\tdomElement.addEventListener( \"mousemove\", onPointerHover, false );\n\t\tdomElement.addEventListener( \"touchmove\", onPointerHover, false );\n\t\tdomElement.addEventListener( \"touchmove\", onPointerMove, false );\n\t\tdocument.addEventListener( \"mouseup\", onPointerUp, false );\n\t\tdomElement.addEventListener( \"touchend\", onPointerUp, false );\n\t\tdomElement.addEventListener( \"touchcancel\", onPointerUp, false );\n\t\tdomElement.addEventListener( \"touchleave\", onPointerUp, false );\n\n\t}\n\n\tthis.dispose = function () {\n\n\t\tdomElement.removeEventListener( \"mousedown\", onPointerDown );\n\t\tdomElement.removeEventListener( \"touchstart\", onPointerDown );\n\t\tdomElement.removeEventListener( \"mousemove\", onPointerHover );\n\t\tdocument.removeEventListener( \"mousemove\", onPointerMove );\n\t\tdomElement.removeEventListener( \"touchmove\", onPointerHover );\n\t\tdomElement.removeEventListener( \"touchmove\", onPointerMove );\n\t\tdocument.removeEventListener( \"mouseup\", onPointerUp );\n\t\tdomElement.removeEventListener( \"touchend\", onPointerUp );\n\t\tdomElement.removeEventListener( \"touchcancel\", onPointerUp );\n\t\tdomElement.removeEventListener( \"touchleave\", onPointerUp );\n\n\t\tthis.traverse( function ( child ) {\n\n\t\t\tif ( child.geometry ) child.geometry.dispose();\n\t\t\tif ( child.material ) child.material.dispose();\n\n\t\t} );\n\n\t};\n\n\t// Set current object\n\tthis.attach = function ( object ) {\n\n\t\tthis.object = object;\n\t\tthis.visible = true;\n\n\t\treturn this;\n\n\t};\n\n\t// Detatch from object\n\tthis.detach = function () {\n\n\t\tthis.object = undefined;\n\t\tthis.visible = false;\n\t\tthis.axis = null;\n\n\t\treturn this;\n\n\t};\n\n\t// Defined getter, setter and store for a property\n\tfunction defineProperty( propName, defaultValue ) {\n\n\t\tvar propValue = defaultValue;\n\n\t\tObject.defineProperty( scope, propName, {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn propValue !== undefined ? propValue : defaultValue;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tif ( propValue !== value ) {\n\n\t\t\t\t\tpropValue = value;\n\t\t\t\t\t_plane[ propName ] = value;\n\t\t\t\t\t_gizmo[ propName ] = value;\n\n\t\t\t\t\tscope.dispatchEvent( { type: propName + \"-changed\", value: value } );\n\t\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tscope[ propName ] = defaultValue;\n\t\t_plane[ propName ] = defaultValue;\n\t\t_gizmo[ propName ] = defaultValue;\n\n\t}\n\n\t// updateMatrixWorld  updates key transformation variables\n\tthis.updateMatrixWorld = function () {\n\n\t\tif ( this.object !== undefined ) {\n\n\t\t\tthis.object.updateMatrixWorld();\n\n\t\t\tif ( this.object.parent === null ) {\n\n\t\t\t\tconsole.error( 'TransformControls: The attached 3D object must be a part of the scene graph.' );\n\n\t\t\t} else {\n\n\t\t\t\tthis.object.parent.matrixWorld.decompose( parentPosition, parentQuaternion, parentScale );\n\n\t\t\t}\n\n\t\t\tthis.object.matrixWorld.decompose( worldPosition, worldQuaternion, worldScale );\n\n\t\t\tparentQuaternionInv.copy( parentQuaternion ).inverse();\n\t\t\tworldQuaternionInv.copy( worldQuaternion ).inverse();\n\n\t\t}\n\n\t\tthis.camera.updateMatrixWorld();\n\t\tthis.camera.matrixWorld.decompose( cameraPosition, cameraQuaternion, cameraScale );\n\n\t\teye.copy( cameraPosition ).sub( worldPosition ).normalize();\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this );\n\n\t};\n\n\tthis.pointerHover = function ( pointer ) {\n\n\t\tif ( this.object === undefined || this.dragging === true || ( pointer.button !== undefined && pointer.button !== 0 ) ) return;\n\n\t\traycaster.setFromCamera( pointer, this.camera );\n\n\t\tvar intersect = intersectObjectWithRay( _gizmo.picker[ this.mode ], raycaster );\n\n\t\tif ( intersect ) {\n\n\t\t\tthis.axis = intersect.object.name;\n\n\t\t} else {\n\n\t\t\tthis.axis = null;\n\n\t\t}\n\n\t};\n\n\tthis.pointerDown = function ( pointer ) {\n\n\t\tif ( this.object === undefined || this.dragging === true || ( pointer.button !== undefined && pointer.button !== 0 ) ) return;\n\n\t\tif ( ( pointer.button === 0 || pointer.button === undefined ) && this.axis !== null ) {\n\n\t\t\traycaster.setFromCamera( pointer, this.camera );\n\n\t\t\tvar planeIntersect = intersectObjectWithRay( _plane, raycaster, true );\n\n\t\t\tif ( planeIntersect ) {\n\n\t\t\t\tvar space = this.space;\n\n\t\t\t\tif ( this.mode === 'scale' ) {\n\n\t\t\t\t\tspace = 'local';\n\n\t\t\t\t} else if ( this.axis === 'E' || this.axis === 'XYZE' || this.axis === 'XYZ' ) {\n\n\t\t\t\t\tspace = 'world';\n\n\t\t\t\t}\n\n\t\t\t\tif ( space === 'local' && this.mode === 'rotate' ) {\n\n\t\t\t\t\tvar snap = this.rotationSnap;\n\n\t\t\t\t\tif ( this.axis === 'X' && snap ) this.object.rotation.x = Math.round( this.object.rotation.x / snap ) * snap;\n\t\t\t\t\tif ( this.axis === 'Y' && snap ) this.object.rotation.y = Math.round( this.object.rotation.y / snap ) * snap;\n\t\t\t\t\tif ( this.axis === 'Z' && snap ) this.object.rotation.z = Math.round( this.object.rotation.z / snap ) * snap;\n\n\t\t\t\t}\n\n\t\t\t\tthis.object.updateMatrixWorld();\n\t\t\t\tthis.object.parent.updateMatrixWorld();\n\n\t\t\t\tpositionStart.copy( this.object.position );\n\t\t\t\tquaternionStart.copy( this.object.quaternion );\n\t\t\t\tscaleStart.copy( this.object.scale );\n\n\t\t\t\tthis.object.matrixWorld.decompose( worldPositionStart, worldQuaternionStart, worldScaleStart );\n\n\t\t\t\tpointStart.copy( planeIntersect.point ).sub( worldPositionStart );\n\n\t\t\t}\n\n\t\t\tthis.dragging = true;\n\t\t\tmouseDownEvent.mode = this.mode;\n\t\t\tthis.dispatchEvent( mouseDownEvent );\n\n\t\t}\n\n\t};\n\n\tthis.pointerMove = function ( pointer ) {\n\n\t\tvar axis = this.axis;\n\t\tvar mode = this.mode;\n\t\tvar object = this.object;\n\t\tvar space = this.space;\n\n\t\tif ( mode === 'scale' ) {\n\n\t\t\tspace = 'local';\n\n\t\t} else if ( axis === 'E' || axis === 'XYZE' || axis === 'XYZ' ) {\n\n\t\t\tspace = 'world';\n\n\t\t}\n\n\t\tif ( object === undefined || axis === null || this.dragging === false || ( pointer.button !== undefined && pointer.button !== 0 ) ) return;\n\n\t\traycaster.setFromCamera( pointer, this.camera );\n\n\t\tvar planeIntersect = intersectObjectWithRay( _plane, raycaster, true );\n\n\t\tif ( ! planeIntersect ) return;\n\n\t\tpointEnd.copy( planeIntersect.point ).sub( worldPositionStart );\n\n\t\tif ( mode === 'translate' ) {\n\n\t\t\t// Apply translate\n\n\t\t\toffset.copy( pointEnd ).sub( pointStart );\n\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\n\n\t\t\t\toffset.applyQuaternion( worldQuaternionInv );\n\n\t\t\t}\n\n\t\t\tif ( axis.indexOf( 'X' ) === - 1 ) offset.x = 0;\n\t\t\tif ( axis.indexOf( 'Y' ) === - 1 ) offset.y = 0;\n\t\t\tif ( axis.indexOf( 'Z' ) === - 1 ) offset.z = 0;\n\n\t\t\tif ( space === 'local' && axis !== 'XYZ' ) {\n\n\t\t\t\toffset.applyQuaternion( quaternionStart ).divide( parentScale );\n\n\t\t\t} else {\n\n\t\t\t\toffset.applyQuaternion( parentQuaternionInv ).divide( parentScale );\n\n\t\t\t}\n\n\t\t\tobject.position.copy( offset ).add( positionStart );\n\n\t\t\t// Apply translation snap\n\n\t\t\tif ( this.translationSnap ) {\n\n\t\t\t\tif ( space === 'local' ) {\n\n\t\t\t\t\tobject.position.applyQuaternion( _tempQuaternion.copy( quaternionStart ).inverse() );\n\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.position.applyQuaternion( quaternionStart );\n\n\t\t\t\t}\n\n\t\t\t\tif ( space === 'world' ) {\n\n\t\t\t\t\tif ( object.parent ) {\n\n\t\t\t\t\t\tobject.position.add( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.x = Math.round( object.position.x / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.y = Math.round( object.position.y / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\t\tobject.position.z = Math.round( object.position.z / this.translationSnap ) * this.translationSnap;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( object.parent ) {\n\n\t\t\t\t\t\tobject.position.sub( _tempVector.setFromMatrixPosition( object.parent.matrixWorld ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( mode === 'scale' ) {\n\n\t\t\tif ( axis.search( 'XYZ' ) !== - 1 ) {\n\n\t\t\t\tvar d = pointEnd.length() / pointStart.length();\n\n\t\t\t\tif ( pointEnd.dot( pointStart ) < 0 ) d *= - 1;\n\n\t\t\t\t_tempVector2.set( d, d, d );\n\n\t\t\t} else {\n\n\t\t\t\t_tempVector.copy( pointStart );\n\t\t\t\t_tempVector2.copy( pointEnd );\n\n\t\t\t\t_tempVector.applyQuaternion( worldQuaternionInv );\n\t\t\t\t_tempVector2.applyQuaternion( worldQuaternionInv );\n\n\t\t\t\t_tempVector2.divide( _tempVector );\n\n\t\t\t\tif ( axis.search( 'X' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.x = 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Y' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.y = 1;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Z' ) === - 1 ) {\n\n\t\t\t\t\t_tempVector2.z = 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Apply scale\n\n\t\t\tobject.scale.copy( scaleStart ).multiply( _tempVector2 );\n\n\t\t\tif ( this.scaleSnap ) {\n\n\t\t\t\tif ( axis.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.x = Math.round( object.scale.x / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.y = Math.round( object.scale.y / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t\tif ( axis.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\tobject.scale.z = Math.round( object.scale.z / this.scaleSnap ) * this.scaleSnap || this.scaleSnap;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( mode === 'rotate' ) {\n\n\t\t\toffset.copy( pointEnd ).sub( pointStart );\n\n\t\t\tvar ROTATION_SPEED = 20 / worldPosition.distanceTo( _tempVector.setFromMatrixPosition( this.camera.matrixWorld ) );\n\n\t\t\tif ( axis === 'E' ) {\n\n\t\t\t\trotationAxis.copy( eye );\n\t\t\t\trotationAngle = pointEnd.angleTo( pointStart );\n\n\t\t\t\tstartNorm.copy( pointStart ).normalize();\n\t\t\t\tendNorm.copy( pointEnd ).normalize();\n\n\t\t\t\trotationAngle *= ( endNorm.cross( startNorm ).dot( eye ) < 0 ? 1 : - 1 );\n\n\t\t\t} else if ( axis === 'XYZE' ) {\n\n\t\t\t\trotationAxis.copy( offset ).cross( eye ).normalize();\n\t\t\t\trotationAngle = offset.dot( _tempVector.copy( rotationAxis ).cross( this.eye ) ) * ROTATION_SPEED;\n\n\t\t\t} else if ( axis === 'X' || axis === 'Y' || axis === 'Z' ) {\n\n\t\t\t\trotationAxis.copy( _unit[ axis ] );\n\n\t\t\t\t_tempVector.copy( _unit[ axis ] );\n\n\t\t\t\tif ( space === 'local' ) {\n\n\t\t\t\t\t_tempVector.applyQuaternion( worldQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\trotationAngle = offset.dot( _tempVector.cross( eye ).normalize() ) * ROTATION_SPEED;\n\n\t\t\t}\n\n\t\t\t// Apply rotation snap\n\n\t\t\tif ( this.rotationSnap ) rotationAngle = Math.round( rotationAngle / this.rotationSnap ) * this.rotationSnap;\n\n\t\t\tthis.rotationAngle = rotationAngle;\n\n\t\t\t// Apply rotate\n\t\t\tif ( space === 'local' && axis !== 'E' && axis !== 'XYZE' ) {\n\n\t\t\t\tobject.quaternion.copy( quaternionStart );\n\t\t\t\tobject.quaternion.multiply( _tempQuaternion.setFromAxisAngle( rotationAxis, rotationAngle ) ).normalize();\n\n\t\t\t} else {\n\n\t\t\t\trotationAxis.applyQuaternion( parentQuaternionInv );\n\t\t\t\tobject.quaternion.copy( _tempQuaternion.setFromAxisAngle( rotationAxis, rotationAngle ) );\n\t\t\t\tobject.quaternion.multiply( quaternionStart ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.dispatchEvent( changeEvent );\n\t\tthis.dispatchEvent( objectChangeEvent );\n\n\t};\n\n\tthis.pointerUp = function ( pointer ) {\n\n\t\tif ( pointer.button !== undefined && pointer.button !== 0 ) return;\n\n\t\tif ( this.dragging && ( this.axis !== null ) ) {\n\n\t\t\tmouseUpEvent.mode = this.mode;\n\t\t\tthis.dispatchEvent( mouseUpEvent );\n\n\t\t}\n\n\t\tthis.dragging = false;\n\n\t\tif ( pointer.button === undefined ) this.axis = null;\n\n\t};\n\n\t// normalize mouse / touch pointer and remap {x,y} to view space.\n\n\tfunction getPointer( event ) {\n\n\t\tif ( document.pointerLockElement ) {\n\n\t\t\treturn {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tbutton: event.button\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tvar pointer = event.changedTouches ? event.changedTouches[ 0 ] : event;\n\n\t\t\tvar rect = domElement.getBoundingClientRect();\n\n\t\t\treturn {\n\t\t\t\tx: ( pointer.clientX - rect.left ) / rect.width * 2 - 1,\n\t\t\t\ty: - ( pointer.clientY - rect.top ) / rect.height * 2 + 1,\n\t\t\t\tbutton: event.button\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// mouse / touch event handlers\n\n\tfunction onPointerHover( event ) {\n\n\t\tif ( ! scope.enabled ) return;\n\n\t\tscope.pointerHover( getPointer( event ) );\n\n\t}\n\n\tfunction onPointerDown( event ) {\n\n\t\tif ( ! scope.enabled ) return;\n\n\t\tdocument.addEventListener( \"mousemove\", onPointerMove, false );\n\n\t\tscope.pointerHover( getPointer( event ) );\n\t\tscope.pointerDown( getPointer( event ) );\n\n\t}\n\n\tfunction onPointerMove( event ) {\n\n\t\tif ( ! scope.enabled ) return;\n\n\t\tscope.pointerMove( getPointer( event ) );\n\n\t}\n\n\tfunction onPointerUp( event ) {\n\n\t\tif ( ! scope.enabled ) return;\n\n\t\tdocument.removeEventListener( \"mousemove\", onPointerMove, false );\n\n\t\tscope.pointerUp( getPointer( event ) );\n\n\t}\n\n\t// TODO: deprecate\n\n\tthis.getMode = function () {\n\n\t\treturn scope.mode;\n\n\t};\n\n\tthis.setMode = function ( mode ) {\n\n\t\tscope.mode = mode;\n\n\t};\n\n\tthis.setTranslationSnap = function ( translationSnap ) {\n\n\t\tscope.translationSnap = translationSnap;\n\n\t};\n\n\tthis.setRotationSnap = function ( rotationSnap ) {\n\n\t\tscope.rotationSnap = rotationSnap;\n\n\t};\n\n\tthis.setScaleSnap = function ( scaleSnap ) {\n\n\t\tscope.scaleSnap = scaleSnap;\n\n\t};\n\n\tthis.setSize = function ( size ) {\n\n\t\tscope.size = size;\n\n\t};\n\n\tthis.setSpace = function ( space ) {\n\n\t\tscope.space = space;\n\n\t};\n\n\tthis.update = function () {\n\n\t\tconsole.warn( 'THREE.TransformControls: update function has no more functionality and therefore has been deprecated.' );\n\n\t};\n\n};\n\nTransformControls.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: TransformControls,\n\n\tisTransformControls: true\n\n} );\n\n\nvar TransformControlsGizmo = function () {\n\n\t'use strict';\n\n\tObject3D.call( this );\n\n\tthis.type = 'TransformControlsGizmo';\n\n\t// shared materials\n\n\tvar gizmoMaterial = new MeshBasicMaterial( {\n\t\tdepthTest: false,\n\t\tdepthWrite: false,\n\t\ttransparent: true,\n\t\tside: DoubleSide,\n\t\tfog: false\n\t} );\n\n\tvar gizmoLineMaterial = new LineBasicMaterial( {\n\t\tdepthTest: false,\n\t\tdepthWrite: false,\n\t\ttransparent: true,\n\t\tlinewidth: 1,\n\t\tfog: false\n\t} );\n\n\t// Make unique material for each axis/color\n\n\tvar matInvisible = gizmoMaterial.clone();\n\tmatInvisible.opacity = 0.15;\n\n\tvar matHelper = gizmoMaterial.clone();\n\tmatHelper.opacity = 0.33;\n\n\tvar matRed = gizmoMaterial.clone();\n\tmatRed.color.set( 0xff0000 );\n\n\tvar matGreen = gizmoMaterial.clone();\n\tmatGreen.color.set( 0x00ff00 );\n\n\tvar matBlue = gizmoMaterial.clone();\n\tmatBlue.color.set( 0x0000ff );\n\n\tvar matWhiteTransparent = gizmoMaterial.clone();\n\tmatWhiteTransparent.opacity = 0.25;\n\n\tvar matYellowTransparent = matWhiteTransparent.clone();\n\tmatYellowTransparent.color.set( 0xffff00 );\n\n\tvar matCyanTransparent = matWhiteTransparent.clone();\n\tmatCyanTransparent.color.set( 0x00ffff );\n\n\tvar matMagentaTransparent = matWhiteTransparent.clone();\n\tmatMagentaTransparent.color.set( 0xff00ff );\n\n\tvar matYellow = gizmoMaterial.clone();\n\tmatYellow.color.set( 0xffff00 );\n\n\tvar matLineRed = gizmoLineMaterial.clone();\n\tmatLineRed.color.set( 0xff0000 );\n\n\tvar matLineGreen = gizmoLineMaterial.clone();\n\tmatLineGreen.color.set( 0x00ff00 );\n\n\tvar matLineBlue = gizmoLineMaterial.clone();\n\tmatLineBlue.color.set( 0x0000ff );\n\n\tvar matLineCyan = gizmoLineMaterial.clone();\n\tmatLineCyan.color.set( 0x00ffff );\n\n\tvar matLineMagenta = gizmoLineMaterial.clone();\n\tmatLineMagenta.color.set( 0xff00ff );\n\n\tvar matLineYellow = gizmoLineMaterial.clone();\n\tmatLineYellow.color.set( 0xffff00 );\n\n\tvar matLineGray = gizmoLineMaterial.clone();\n\tmatLineGray.color.set( 0x787878 );\n\n\tvar matLineYellowTransparent = matLineYellow.clone();\n\tmatLineYellowTransparent.opacity = 0.25;\n\n\t// reusable geometry\n\n\tvar arrowGeometry = new CylinderBufferGeometry( 0, 0.05, 0.2, 12, 1, false );\n\n\tvar scaleHandleGeometry = new BoxBufferGeometry( 0.125, 0.125, 0.125 );\n\n\tvar lineGeometry = new BufferGeometry( );\n\tlineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0,\t1, 0, 0 ], 3 ) );\n\n\tvar CircleGeometry = function ( radius, arc ) {\n\n\t\tvar geometry = new BufferGeometry( );\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i <= 64 * arc; ++ i ) {\n\n\t\t\tvertices.push( 0, Math.cos( i / 32 * Math.PI ) * radius, Math.sin( i / 32 * Math.PI ) * radius );\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\treturn geometry;\n\n\t};\n\n\t// Special geometry for transform helper. If scaled with position vector it spans from [0,0,0] to position\n\n\tvar TranslateHelperGeometry = function () {\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 1, 1, 1 ], 3 ) );\n\n\t\treturn geometry;\n\n\t};\n\n\t// Gizmo definitions - custom hierarchy definitions for setupGizmo() function\n\n\tvar gizmoTranslate = {\n\t\tX: [\n\t\t\t[ new Mesh( arrowGeometry, matRed ), [ 1, 0, 0 ], [ 0, 0, - Math.PI / 2 ], null, 'fwd' ],\n\t\t\t[ new Mesh( arrowGeometry, matRed ), [ 1, 0, 0 ], [ 0, 0, Math.PI / 2 ], null, 'bwd' ],\n\t\t\t[ new Line( lineGeometry, matLineRed ) ]\n\t\t],\n\t\tY: [\n\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, 1, 0 ], null, null, 'fwd' ],\n\t\t\t[ new Mesh( arrowGeometry, matGreen ), [ 0, 1, 0 ], [ Math.PI, 0, 0 ], null, 'bwd' ],\n\t\t\t[ new Line( lineGeometry, matLineGreen ), null, [ 0, 0, Math.PI / 2 ]]\n\t\t],\n\t\tZ: [\n\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, 1 ], [ Math.PI / 2, 0, 0 ], null, 'fwd' ],\n\t\t\t[ new Mesh( arrowGeometry, matBlue ), [ 0, 0, 1 ], [ - Math.PI / 2, 0, 0 ], null, 'bwd' ],\n\t\t\t[ new Line( lineGeometry, matLineBlue ), null, [ 0, - Math.PI / 2, 0 ]]\n\t\t],\n\t\tXYZ: [\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.1, 0 ), matWhiteTransparent.clone() ), [ 0, 0, 0 ], [ 0, 0, 0 ]]\n\t\t],\n\t\tXY: [\n\t\t\t[ new Mesh( new PlaneBufferGeometry( 0.295, 0.295 ), matYellowTransparent.clone() ), [ 0.15, 0.15, 0 ]],\n\t\t\t[ new Line( lineGeometry, matLineYellow ), [ 0.18, 0.3, 0 ], null, [ 0.125, 1, 1 ]],\n\t\t\t[ new Line( lineGeometry, matLineYellow ), [ 0.3, 0.18, 0 ], [ 0, 0, Math.PI / 2 ], [ 0.125, 1, 1 ]]\n\t\t],\n\t\tYZ: [\n\t\t\t[ new Mesh( new PlaneBufferGeometry( 0.295, 0.295 ), matCyanTransparent.clone() ), [ 0, 0.15, 0.15 ], [ 0, Math.PI / 2, 0 ]],\n\t\t\t[ new Line( lineGeometry, matLineCyan ), [ 0, 0.18, 0.3 ], [ 0, 0, Math.PI / 2 ], [ 0.125, 1, 1 ]],\n\t\t\t[ new Line( lineGeometry, matLineCyan ), [ 0, 0.3, 0.18 ], [ 0, - Math.PI / 2, 0 ], [ 0.125, 1, 1 ]]\n\t\t],\n\t\tXZ: [\n\t\t\t[ new Mesh( new PlaneBufferGeometry( 0.295, 0.295 ), matMagentaTransparent.clone() ), [ 0.15, 0, 0.15 ], [ - Math.PI / 2, 0, 0 ]],\n\t\t\t[ new Line( lineGeometry, matLineMagenta ), [ 0.18, 0, 0.3 ], null, [ 0.125, 1, 1 ]],\n\t\t\t[ new Line( lineGeometry, matLineMagenta ), [ 0.3, 0, 0.18 ], [ 0, - Math.PI / 2, 0 ], [ 0.125, 1, 1 ]]\n\t\t]\n\t};\n\n\tvar pickerTranslate = {\n\t\tX: [\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), matInvisible ), [ 0.6, 0, 0 ], [ 0, 0, - Math.PI / 2 ]]\n\t\t],\n\t\tY: [\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), matInvisible ), [ 0, 0.6, 0 ]]\n\t\t],\n\t\tZ: [\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 1, 4, 1, false ), matInvisible ), [ 0, 0, 0.6 ], [ Math.PI / 2, 0, 0 ]]\n\t\t],\n\t\tXYZ: [\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.2, 0 ), matInvisible ) ]\n\t\t],\n\t\tXY: [\n\t\t\t[ new Mesh( new PlaneBufferGeometry( 0.4, 0.4 ), matInvisible ), [ 0.2, 0.2, 0 ]]\n\t\t],\n\t\tYZ: [\n\t\t\t[ new Mesh( new PlaneBufferGeometry( 0.4, 0.4 ), matInvisible ), [ 0, 0.2, 0.2 ], [ 0, Math.PI / 2, 0 ]]\n\t\t],\n\t\tXZ: [\n\t\t\t[ new Mesh( new PlaneBufferGeometry( 0.4, 0.4 ), matInvisible ), [ 0.2, 0, 0.2 ], [ - Math.PI / 2, 0, 0 ]]\n\t\t]\n\t};\n\n\tvar helperTranslate = {\n\t\tSTART: [\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\n\t\t],\n\t\tEND: [\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.01, 2 ), matHelper ), null, null, null, 'helper' ]\n\t\t],\n\t\tDELTA: [\n\t\t\t[ new Line( TranslateHelperGeometry(), matHelper ), null, null, null, 'helper' ]\n\t\t],\n\t\tX: [\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t],\n\t\tY: [\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t],\n\t\tZ: [\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t]\n\t};\n\n\tvar gizmoRotate = {\n\t\tX: [\n\t\t\t[ new Line( CircleGeometry( 1, 0.5 ), matLineRed ) ],\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.04, 0 ), matRed ), [ 0, 0, 0.99 ], null, [ 1, 3, 1 ]],\n\t\t],\n\t\tY: [\n\t\t\t[ new Line( CircleGeometry( 1, 0.5 ), matLineGreen ), null, [ 0, 0, - Math.PI / 2 ]],\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.04, 0 ), matGreen ), [ 0, 0, 0.99 ], null, [ 3, 1, 1 ]],\n\t\t],\n\t\tZ: [\n\t\t\t[ new Line( CircleGeometry( 1, 0.5 ), matLineBlue ), null, [ 0, Math.PI / 2, 0 ]],\n\t\t\t[ new Mesh( new OctahedronBufferGeometry( 0.04, 0 ), matBlue ), [ 0.99, 0, 0 ], null, [ 1, 3, 1 ]],\n\t\t],\n\t\tE: [\n\t\t\t[ new Line( CircleGeometry( 1.25, 1 ), matLineYellowTransparent ), null, [ 0, Math.PI / 2, 0 ]],\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.03, 0, 0.15, 4, 1, false ), matLineYellowTransparent ), [ 1.17, 0, 0 ], [ 0, 0, - Math.PI / 2 ], [ 1, 1, 0.001 ]],\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.03, 0, 0.15, 4, 1, false ), matLineYellowTransparent ), [ - 1.17, 0, 0 ], [ 0, 0, Math.PI / 2 ], [ 1, 1, 0.001 ]],\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.03, 0, 0.15, 4, 1, false ), matLineYellowTransparent ), [ 0, - 1.17, 0 ], [ Math.PI, 0, 0 ], [ 1, 1, 0.001 ]],\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.03, 0, 0.15, 4, 1, false ), matLineYellowTransparent ), [ 0, 1.17, 0 ], [ 0, 0, 0 ], [ 1, 1, 0.001 ]],\n\t\t],\n\t\tXYZE: [\n\t\t\t[ new Line( CircleGeometry( 1, 1 ), matLineGray ), null, [ 0, Math.PI / 2, 0 ]]\n\t\t]\n\t};\n\n\tvar helperRotate = {\n\t\tAXIS: [\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t]\n\t};\n\n\tvar pickerRotate = {\n\t\tX: [\n\t\t\t[ new Mesh( new TorusBufferGeometry( 1, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, - Math.PI / 2, - Math.PI / 2 ]],\n\t\t],\n\t\tY: [\n\t\t\t[ new Mesh( new TorusBufferGeometry( 1, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ Math.PI / 2, 0, 0 ]],\n\t\t],\n\t\tZ: [\n\t\t\t[ new Mesh( new TorusBufferGeometry( 1, 0.1, 4, 24 ), matInvisible ), [ 0, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t],\n\t\tE: [\n\t\t\t[ new Mesh( new TorusBufferGeometry( 1.25, 0.1, 2, 24 ), matInvisible ) ]\n\t\t],\n\t\tXYZE: [\n\t\t\t[ new Mesh( new SphereBufferGeometry( 0.7, 10, 8 ), matInvisible ) ]\n\t\t]\n\t};\n\n\tvar gizmoScale = {\n\t\tX: [\n\t\t\t[ new Mesh( scaleHandleGeometry, matRed ), [ 0.8, 0, 0 ], [ 0, 0, - Math.PI / 2 ]],\n\t\t\t[ new Line( lineGeometry, matLineRed ), null, null, [ 0.8, 1, 1 ]]\n\t\t],\n\t\tY: [\n\t\t\t[ new Mesh( scaleHandleGeometry, matGreen ), [ 0, 0.8, 0 ]],\n\t\t\t[ new Line( lineGeometry, matLineGreen ), null, [ 0, 0, Math.PI / 2 ], [ 0.8, 1, 1 ]]\n\t\t],\n\t\tZ: [\n\t\t\t[ new Mesh( scaleHandleGeometry, matBlue ), [ 0, 0, 0.8 ], [ Math.PI / 2, 0, 0 ]],\n\t\t\t[ new Line( lineGeometry, matLineBlue ), null, [ 0, - Math.PI / 2, 0 ], [ 0.8, 1, 1 ]]\n\t\t],\n\t\tXY: [\n\t\t\t[ new Mesh( scaleHandleGeometry, matYellowTransparent ), [ 0.85, 0.85, 0 ], null, [ 2, 2, 0.2 ]],\n\t\t\t[ new Line( lineGeometry, matLineYellow ), [ 0.855, 0.98, 0 ], null, [ 0.125, 1, 1 ]],\n\t\t\t[ new Line( lineGeometry, matLineYellow ), [ 0.98, 0.855, 0 ], [ 0, 0, Math.PI / 2 ], [ 0.125, 1, 1 ]]\n\t\t],\n\t\tYZ: [\n\t\t\t[ new Mesh( scaleHandleGeometry, matCyanTransparent ), [ 0, 0.85, 0.85 ], null, [ 0.2, 2, 2 ]],\n\t\t\t[ new Line( lineGeometry, matLineCyan ), [ 0, 0.855, 0.98 ], [ 0, 0, Math.PI / 2 ], [ 0.125, 1, 1 ]],\n\t\t\t[ new Line( lineGeometry, matLineCyan ), [ 0, 0.98, 0.855 ], [ 0, - Math.PI / 2, 0 ], [ 0.125, 1, 1 ]]\n\t\t],\n\t\tXZ: [\n\t\t\t[ new Mesh( scaleHandleGeometry, matMagentaTransparent ), [ 0.85, 0, 0.85 ], null, [ 2, 0.2, 2 ]],\n\t\t\t[ new Line( lineGeometry, matLineMagenta ), [ 0.855, 0, 0.98 ], null, [ 0.125, 1, 1 ]],\n\t\t\t[ new Line( lineGeometry, matLineMagenta ), [ 0.98, 0, 0.855 ], [ 0, - Math.PI / 2, 0 ], [ 0.125, 1, 1 ]]\n\t\t],\n\t\tXYZX: [\n\t\t\t[ new Mesh( new BoxBufferGeometry( 0.125, 0.125, 0.125 ), matWhiteTransparent.clone() ), [ 1.1, 0, 0 ]],\n\t\t],\n\t\tXYZY: [\n\t\t\t[ new Mesh( new BoxBufferGeometry( 0.125, 0.125, 0.125 ), matWhiteTransparent.clone() ), [ 0, 1.1, 0 ]],\n\t\t],\n\t\tXYZZ: [\n\t\t\t[ new Mesh( new BoxBufferGeometry( 0.125, 0.125, 0.125 ), matWhiteTransparent.clone() ), [ 0, 0, 1.1 ]],\n\t\t]\n\t};\n\n\tvar pickerScale = {\n\t\tX: [\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 0.8, 4, 1, false ), matInvisible ), [ 0.5, 0, 0 ], [ 0, 0, - Math.PI / 2 ]]\n\t\t],\n\t\tY: [\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 0.8, 4, 1, false ), matInvisible ), [ 0, 0.5, 0 ]]\n\t\t],\n\t\tZ: [\n\t\t\t[ new Mesh( new CylinderBufferGeometry( 0.2, 0, 0.8, 4, 1, false ), matInvisible ), [ 0, 0, 0.5 ], [ Math.PI / 2, 0, 0 ]]\n\t\t],\n\t\tXY: [\n\t\t\t[ new Mesh( scaleHandleGeometry, matInvisible ), [ 0.85, 0.85, 0 ], null, [ 3, 3, 0.2 ]],\n\t\t],\n\t\tYZ: [\n\t\t\t[ new Mesh( scaleHandleGeometry, matInvisible ), [ 0, 0.85, 0.85 ], null, [ 0.2, 3, 3 ]],\n\t\t],\n\t\tXZ: [\n\t\t\t[ new Mesh( scaleHandleGeometry, matInvisible ), [ 0.85, 0, 0.85 ], null, [ 3, 0.2, 3 ]],\n\t\t],\n\t\tXYZX: [\n\t\t\t[ new Mesh( new BoxBufferGeometry( 0.2, 0.2, 0.2 ), matInvisible ), [ 1.1, 0, 0 ]],\n\t\t],\n\t\tXYZY: [\n\t\t\t[ new Mesh( new BoxBufferGeometry( 0.2, 0.2, 0.2 ), matInvisible ), [ 0, 1.1, 0 ]],\n\t\t],\n\t\tXYZZ: [\n\t\t\t[ new Mesh( new BoxBufferGeometry( 0.2, 0.2, 0.2 ), matInvisible ), [ 0, 0, 1.1 ]],\n\t\t]\n\t};\n\n\tvar helperScale = {\n\t\tX: [\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ - 1e3, 0, 0 ], null, [ 1e6, 1, 1 ], 'helper' ]\n\t\t],\n\t\tY: [\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, - 1e3, 0 ], [ 0, 0, Math.PI / 2 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t],\n\t\tZ: [\n\t\t\t[ new Line( lineGeometry, matHelper.clone() ), [ 0, 0, - 1e3 ], [ 0, - Math.PI / 2, 0 ], [ 1e6, 1, 1 ], 'helper' ]\n\t\t]\n\t};\n\n\t// Creates an Object3D with gizmos described in custom hierarchy definition.\n\n\tvar setupGizmo = function ( gizmoMap ) {\n\n\t\tvar gizmo = new Object3D();\n\n\t\tfor ( var name in gizmoMap ) {\n\n\t\t\tfor ( var i = gizmoMap[ name ].length; i --; ) {\n\n\t\t\t\tvar object = gizmoMap[ name ][ i ][ 0 ].clone();\n\t\t\t\tvar position = gizmoMap[ name ][ i ][ 1 ];\n\t\t\t\tvar rotation = gizmoMap[ name ][ i ][ 2 ];\n\t\t\t\tvar scale = gizmoMap[ name ][ i ][ 3 ];\n\t\t\t\tvar tag = gizmoMap[ name ][ i ][ 4 ];\n\n\t\t\t\t// name and tag properties are essential for picking and updating logic.\n\t\t\t\tobject.name = name;\n\t\t\t\tobject.tag = tag;\n\n\t\t\t\tif ( position ) {\n\n\t\t\t\t\tobject.position.set( position[ 0 ], position[ 1 ], position[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( rotation ) {\n\n\t\t\t\t\tobject.rotation.set( rotation[ 0 ], rotation[ 1 ], rotation[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scale ) {\n\n\t\t\t\t\tobject.scale.set( scale[ 0 ], scale[ 1 ], scale[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tobject.updateMatrix();\n\n\t\t\t\tvar tempGeometry = object.geometry.clone();\n\t\t\t\ttempGeometry.applyMatrix4( object.matrix );\n\t\t\t\tobject.geometry = tempGeometry;\n\t\t\t\tobject.renderOrder = Infinity;\n\n\t\t\t\tobject.position.set( 0, 0, 0 );\n\t\t\t\tobject.rotation.set( 0, 0, 0 );\n\t\t\t\tobject.scale.set( 1, 1, 1 );\n\n\t\t\t\tgizmo.add( object );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn gizmo;\n\n\t};\n\n\t// Reusable utility variables\n\n\tvar tempVector = new Vector3( 0, 0, 0 );\n\tvar tempEuler = new Euler();\n\tvar alignVector = new Vector3( 0, 1, 0 );\n\tvar zeroVector = new Vector3( 0, 0, 0 );\n\tvar lookAtMatrix = new Matrix4();\n\tvar tempQuaternion = new Quaternion();\n\tvar tempQuaternion2 = new Quaternion();\n\tvar identityQuaternion = new Quaternion();\n\n\tvar unitX = new Vector3( 1, 0, 0 );\n\tvar unitY = new Vector3( 0, 1, 0 );\n\tvar unitZ = new Vector3( 0, 0, 1 );\n\n\t// Gizmo creation\n\n\tthis.gizmo = {};\n\tthis.picker = {};\n\tthis.helper = {};\n\n\tthis.add( this.gizmo[ \"translate\" ] = setupGizmo( gizmoTranslate ) );\n\tthis.add( this.gizmo[ \"rotate\" ] = setupGizmo( gizmoRotate ) );\n\tthis.add( this.gizmo[ \"scale\" ] = setupGizmo( gizmoScale ) );\n\tthis.add( this.picker[ \"translate\" ] = setupGizmo( pickerTranslate ) );\n\tthis.add( this.picker[ \"rotate\" ] = setupGizmo( pickerRotate ) );\n\tthis.add( this.picker[ \"scale\" ] = setupGizmo( pickerScale ) );\n\tthis.add( this.helper[ \"translate\" ] = setupGizmo( helperTranslate ) );\n\tthis.add( this.helper[ \"rotate\" ] = setupGizmo( helperRotate ) );\n\tthis.add( this.helper[ \"scale\" ] = setupGizmo( helperScale ) );\n\n\t// Pickers should be hidden always\n\n\tthis.picker[ \"translate\" ].visible = false;\n\tthis.picker[ \"rotate\" ].visible = false;\n\tthis.picker[ \"scale\" ].visible = false;\n\n\t// updateMatrixWorld will update transformations and appearance of individual handles\n\n\tthis.updateMatrixWorld = function () {\n\n\t\tvar space = this.space;\n\n\t\tif ( this.mode === 'scale' ) space = 'local'; // scale always oriented to local rotation\n\n\t\tvar quaternion = space === \"local\" ? this.worldQuaternion : identityQuaternion;\n\n\t\t// Show only gizmos for current transform mode\n\n\t\tthis.gizmo[ \"translate\" ].visible = this.mode === \"translate\";\n\t\tthis.gizmo[ \"rotate\" ].visible = this.mode === \"rotate\";\n\t\tthis.gizmo[ \"scale\" ].visible = this.mode === \"scale\";\n\n\t\tthis.helper[ \"translate\" ].visible = this.mode === \"translate\";\n\t\tthis.helper[ \"rotate\" ].visible = this.mode === \"rotate\";\n\t\tthis.helper[ \"scale\" ].visible = this.mode === \"scale\";\n\n\n\t\tvar handles = [];\n\t\thandles = handles.concat( this.picker[ this.mode ].children );\n\t\thandles = handles.concat( this.gizmo[ this.mode ].children );\n\t\thandles = handles.concat( this.helper[ this.mode ].children );\n\n\t\tfor ( var i = 0; i < handles.length; i ++ ) {\n\n\t\t\tvar handle = handles[ i ];\n\n\t\t\t// hide aligned to camera\n\n\t\t\thandle.visible = true;\n\t\t\thandle.rotation.set( 0, 0, 0 );\n\t\t\thandle.position.copy( this.worldPosition );\n\n\t\t\tvar factor;\n\n\t\t\tif ( this.camera.isOrthographicCamera ) {\n\n\t\t\t\tfactor = ( this.camera.top - this.camera.bottom ) / this.camera.zoom;\n\n\t\t\t} else {\n\n\t\t\t\tfactor = this.worldPosition.distanceTo( this.cameraPosition ) * Math.min( 1.9 * Math.tan( Math.PI * this.camera.fov / 360 ) / this.camera.zoom, 7 );\n\n\t\t\t}\n\n\t\t\thandle.scale.set( 1, 1, 1 ).multiplyScalar( factor * this.size / 7 );\n\n\t\t\t// TODO: simplify helpers and consider decoupling from gizmo\n\n\t\t\tif ( handle.tag === 'helper' ) {\n\n\t\t\t\thandle.visible = false;\n\n\t\t\t\tif ( handle.name === 'AXIS' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\t\t\t\t\thandle.visible = !! this.axis;\n\n\t\t\t\t\tif ( this.axis === 'X' ) {\n\n\t\t\t\t\t\ttempQuaternion.setFromEuler( tempEuler.set( 0, 0, 0 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( alignVector.copy( unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'Y' ) {\n\n\t\t\t\t\t\ttempQuaternion.setFromEuler( tempEuler.set( 0, 0, Math.PI / 2 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( alignVector.copy( unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'Z' ) {\n\n\t\t\t\t\t\ttempQuaternion.setFromEuler( tempEuler.set( 0, Math.PI / 2, 0 ) );\n\t\t\t\t\t\thandle.quaternion.copy( quaternion ).multiply( tempQuaternion );\n\n\t\t\t\t\t\tif ( Math.abs( alignVector.copy( unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > 0.9 ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'XYZE' ) {\n\n\t\t\t\t\t\ttempQuaternion.setFromEuler( tempEuler.set( 0, Math.PI / 2, 0 ) );\n\t\t\t\t\t\talignVector.copy( this.rotationAxis );\n\t\t\t\t\t\thandle.quaternion.setFromRotationMatrix( lookAtMatrix.lookAt( zeroVector, alignVector, unitY ) );\n\t\t\t\t\t\thandle.quaternion.multiply( tempQuaternion );\n\t\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis === 'E' ) {\n\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else if ( handle.name === 'START' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else if ( handle.name === 'END' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPosition );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else if ( handle.name === 'DELTA' ) {\n\n\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\t\t\t\t\thandle.quaternion.copy( this.worldQuaternionStart );\n\t\t\t\t\ttempVector.set( 1e-10, 1e-10, 1e-10 ).add( this.worldPositionStart ).sub( this.worldPosition ).multiplyScalar( - 1 );\n\t\t\t\t\ttempVector.applyQuaternion( this.worldQuaternionStart.clone().inverse() );\n\t\t\t\t\thandle.scale.copy( tempVector );\n\t\t\t\t\thandle.visible = this.dragging;\n\n\t\t\t\t} else {\n\n\t\t\t\t\thandle.quaternion.copy( quaternion );\n\n\t\t\t\t\tif ( this.dragging ) {\n\n\t\t\t\t\t\thandle.position.copy( this.worldPositionStart );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\thandle.position.copy( this.worldPosition );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.axis ) {\n\n\t\t\t\t\t\thandle.visible = this.axis.search( handle.name ) !== - 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// If updating helper, skip rest of the loop\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// Align handles to current local or world rotation\n\n\t\t\thandle.quaternion.copy( quaternion );\n\n\t\t\tif ( this.mode === 'translate' || this.mode === 'scale' ) {\n\n\t\t\t\t// Hide translate and scale axis facing the camera\n\n\t\t\t\tvar AXIS_HIDE_TRESHOLD = 0.99;\n\t\t\t\tvar PLANE_HIDE_TRESHOLD = 0.2;\n\t\t\t\tvar AXIS_FLIP_TRESHOLD = 0.0;\n\n\n\t\t\t\tif ( handle.name === 'X' || handle.name === 'XYZX' ) {\n\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_TRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Y' || handle.name === 'XYZY' ) {\n\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_TRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Z' || handle.name === 'XYZZ' ) {\n\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) > AXIS_HIDE_TRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'XY' ) {\n\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitZ ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_TRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'YZ' ) {\n\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitX ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_TRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'XZ' ) {\n\n\t\t\t\t\tif ( Math.abs( alignVector.copy( unitY ).applyQuaternion( quaternion ).dot( this.eye ) ) < PLANE_HIDE_TRESHOLD ) {\n\n\t\t\t\t\t\thandle.scale.set( 1e-10, 1e-10, 1e-10 );\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Flip translate and scale axis ocluded behind another axis\n\n\t\t\t\tif ( handle.name.search( 'X' ) !== - 1 ) {\n\n\t\t\t\t\tif ( alignVector.copy( unitX ).applyQuaternion( quaternion ).dot( this.eye ) < AXIS_FLIP_TRESHOLD ) {\n\n\t\t\t\t\t\tif ( handle.tag === 'fwd' ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\thandle.scale.x *= - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( handle.tag === 'bwd' ) {\n\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name.search( 'Y' ) !== - 1 ) {\n\n\t\t\t\t\tif ( alignVector.copy( unitY ).applyQuaternion( quaternion ).dot( this.eye ) < AXIS_FLIP_TRESHOLD ) {\n\n\t\t\t\t\t\tif ( handle.tag === 'fwd' ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\thandle.scale.y *= - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( handle.tag === 'bwd' ) {\n\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name.search( 'Z' ) !== - 1 ) {\n\n\t\t\t\t\tif ( alignVector.copy( unitZ ).applyQuaternion( quaternion ).dot( this.eye ) < AXIS_FLIP_TRESHOLD ) {\n\n\t\t\t\t\t\tif ( handle.tag === 'fwd' ) {\n\n\t\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\thandle.scale.z *= - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( handle.tag === 'bwd' ) {\n\n\t\t\t\t\t\thandle.visible = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( this.mode === 'rotate' ) {\n\n\t\t\t\t// Align handles to current local or world rotation\n\n\t\t\t\ttempQuaternion2.copy( quaternion );\n\t\t\t\talignVector.copy( this.eye ).applyQuaternion( tempQuaternion.copy( quaternion ).inverse() );\n\n\t\t\t\tif ( handle.name.search( \"E\" ) !== - 1 ) {\n\n\t\t\t\t\thandle.quaternion.setFromRotationMatrix( lookAtMatrix.lookAt( this.eye, zeroVector, unitY ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'X' ) {\n\n\t\t\t\t\ttempQuaternion.setFromAxisAngle( unitX, Math.atan2( - alignVector.y, alignVector.z ) );\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion2, tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Y' ) {\n\n\t\t\t\t\ttempQuaternion.setFromAxisAngle( unitY, Math.atan2( alignVector.x, alignVector.z ) );\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion2, tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t\tif ( handle.name === 'Z' ) {\n\n\t\t\t\t\ttempQuaternion.setFromAxisAngle( unitZ, Math.atan2( alignVector.y, alignVector.x ) );\n\t\t\t\t\ttempQuaternion.multiplyQuaternions( tempQuaternion2, tempQuaternion );\n\t\t\t\t\thandle.quaternion.copy( tempQuaternion );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Hide disabled axes\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( \"X\" ) === - 1 || this.showX );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( \"Y\" ) === - 1 || this.showY );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( \"Z\" ) === - 1 || this.showZ );\n\t\t\thandle.visible = handle.visible && ( handle.name.indexOf( \"E\" ) === - 1 || ( this.showX && this.showY && this.showZ ) );\n\n\t\t\t// highlight selected axis\n\n\t\t\thandle.material._opacity = handle.material._opacity || handle.material.opacity;\n\t\t\thandle.material._color = handle.material._color || handle.material.color.clone();\n\n\t\t\thandle.material.color.copy( handle.material._color );\n\t\t\thandle.material.opacity = handle.material._opacity;\n\n\t\t\tif ( ! this.enabled ) {\n\n\t\t\t\thandle.material.opacity *= 0.5;\n\t\t\t\thandle.material.color.lerp( new Color( 1, 1, 1 ), 0.5 );\n\n\t\t\t} else if ( this.axis ) {\n\n\t\t\t\tif ( handle.name === this.axis ) {\n\n\t\t\t\t\thandle.material.opacity = 1.0;\n\t\t\t\t\thandle.material.color.lerp( new Color( 1, 1, 1 ), 0.5 );\n\n\t\t\t\t} else if ( this.axis.split( '' ).some( function ( a ) {\n\n\t\t\t\t\treturn handle.name === a;\n\n\t\t\t\t} ) ) {\n\n\t\t\t\t\thandle.material.opacity = 1.0;\n\t\t\t\t\thandle.material.color.lerp( new Color( 1, 1, 1 ), 0.5 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\thandle.material.opacity *= 0.25;\n\t\t\t\t\thandle.material.color.lerp( new Color( 1, 1, 1 ), 0.5 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this );\n\n\t};\n\n};\n\nTransformControlsGizmo.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: TransformControlsGizmo,\n\n\tisTransformControlsGizmo: true\n\n} );\n\n\nvar TransformControlsPlane = function () {\n\n\t'use strict';\n\n\tMesh.call( this,\n\t\tnew PlaneBufferGeometry( 100000, 100000, 2, 2 ),\n\t\tnew MeshBasicMaterial( { visible: false, wireframe: true, side: DoubleSide, transparent: true, opacity: 0.1 } )\n\t);\n\n\tthis.type = 'TransformControlsPlane';\n\n\tvar unitX = new Vector3( 1, 0, 0 );\n\tvar unitY = new Vector3( 0, 1, 0 );\n\tvar unitZ = new Vector3( 0, 0, 1 );\n\n\tvar tempVector = new Vector3();\n\tvar dirVector = new Vector3();\n\tvar alignVector = new Vector3();\n\tvar tempMatrix = new Matrix4();\n\tvar identityQuaternion = new Quaternion();\n\n\tthis.updateMatrixWorld = function () {\n\n\t\tvar space = this.space;\n\n\t\tthis.position.copy( this.worldPosition );\n\n\t\tif ( this.mode === 'scale' ) space = 'local'; // scale always oriented to local rotation\n\n\t\tunitX.set( 1, 0, 0 ).applyQuaternion( space === \"local\" ? this.worldQuaternion : identityQuaternion );\n\t\tunitY.set( 0, 1, 0 ).applyQuaternion( space === \"local\" ? this.worldQuaternion : identityQuaternion );\n\t\tunitZ.set( 0, 0, 1 ).applyQuaternion( space === \"local\" ? this.worldQuaternion : identityQuaternion );\n\n\t\t// Align the plane for current transform mode, axis and space.\n\n\t\talignVector.copy( unitY );\n\n\t\tswitch ( this.mode ) {\n\n\t\t\tcase 'translate':\n\t\t\tcase 'scale':\n\t\t\t\tswitch ( this.axis ) {\n\n\t\t\t\t\tcase 'X':\n\t\t\t\t\t\talignVector.copy( this.eye ).cross( unitX );\n\t\t\t\t\t\tdirVector.copy( unitX ).cross( alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Y':\n\t\t\t\t\t\talignVector.copy( this.eye ).cross( unitY );\n\t\t\t\t\t\tdirVector.copy( unitY ).cross( alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Z':\n\t\t\t\t\t\talignVector.copy( this.eye ).cross( unitZ );\n\t\t\t\t\t\tdirVector.copy( unitZ ).cross( alignVector );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XY':\n\t\t\t\t\t\tdirVector.copy( unitZ );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'YZ':\n\t\t\t\t\t\tdirVector.copy( unitX );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XZ':\n\t\t\t\t\t\talignVector.copy( unitZ );\n\t\t\t\t\t\tdirVector.copy( unitY );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'XYZ':\n\t\t\t\t\tcase 'E':\n\t\t\t\t\t\tdirVector.set( 0, 0, 0 );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'rotate':\n\t\t\tdefault:\n\t\t\t\t// special case for rotate\n\t\t\t\tdirVector.set( 0, 0, 0 );\n\n\t\t}\n\n\t\tif ( dirVector.length() === 0 ) {\n\n\t\t\t// If in rotate mode, make the plane parallel to camera\n\t\t\tthis.quaternion.copy( this.cameraQuaternion );\n\n\t\t} else {\n\n\t\t\ttempMatrix.lookAt( tempVector.set( 0, 0, 0 ), dirVector, alignVector );\n\n\t\t\tthis.quaternion.setFromRotationMatrix( tempMatrix );\n\n\t\t}\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this );\n\n\t};\n\n};\n\nTransformControlsPlane.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: TransformControlsPlane,\n\n\tisTransformControlsPlane: true\n\n} );\n\nexport { TransformControls, TransformControlsGizmo, TransformControlsPlane };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport {\n\tEuler,\n\tEventDispatcher,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar PointerLockControls = function ( camera, domElement ) {\n\n\tif ( domElement === undefined ) {\n\n\t\tconsole.warn( 'THREE.PointerLockControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tdomElement = document.body;\n\n\t}\n\n\tthis.domElement = domElement;\n\tthis.isLocked = false;\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar lockEvent = { type: 'lock' };\n\tvar unlockEvent = { type: 'unlock' };\n\n\tvar euler = new Euler( 0, 0, 0, 'YXZ' );\n\n\tvar PI_2 = Math.PI / 2;\n\n\tvar vec = new Vector3();\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.isLocked === false ) return;\n\n\t\tvar movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\n\t\tvar movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\n\n\t\teuler.setFromQuaternion( camera.quaternion );\n\n\t\teuler.y -= movementX * 0.002;\n\t\teuler.x -= movementY * 0.002;\n\n\t\teuler.x = Math.max( - PI_2, Math.min( PI_2, euler.x ) );\n\n\t\tcamera.quaternion.setFromEuler( euler );\n\n\t\tscope.dispatchEvent( changeEvent );\n\n\t}\n\n\tfunction onPointerlockChange() {\n\n\t\tif ( document.pointerLockElement === scope.domElement ) {\n\n\t\t\tscope.dispatchEvent( lockEvent );\n\n\t\t\tscope.isLocked = true;\n\n\t\t} else {\n\n\t\t\tscope.dispatchEvent( unlockEvent );\n\n\t\t\tscope.isLocked = false;\n\n\t\t}\n\n\t}\n\n\tfunction onPointerlockError() {\n\n\t\tconsole.error( 'THREE.PointerLockControls: Unable to use Pointer Lock API' );\n\n\t}\n\n\tthis.connect = function () {\n\n\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.addEventListener( 'pointerlockchange', onPointerlockChange, false );\n\t\tdocument.addEventListener( 'pointerlockerror', onPointerlockError, false );\n\n\t};\n\n\tthis.disconnect = function () {\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'pointerlockchange', onPointerlockChange, false );\n\t\tdocument.removeEventListener( 'pointerlockerror', onPointerlockError, false );\n\n\t};\n\n\tthis.dispose = function () {\n\n\t\tthis.disconnect();\n\n\t};\n\n\tthis.getObject = function () { // retaining this method for backward compatibility\n\n\t\treturn camera;\n\n\t};\n\n\tthis.getDirection = function () {\n\n\t\tvar direction = new Vector3( 0, 0, - 1 );\n\n\t\treturn function ( v ) {\n\n\t\t\treturn v.copy( direction ).applyQuaternion( camera.quaternion );\n\n\t\t};\n\n\t}();\n\n\tthis.moveForward = function ( distance ) {\n\n\t\t// move forward parallel to the xz-plane\n\t\t// assumes camera.up is y-up\n\n\t\tvec.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\tvec.crossVectors( camera.up, vec );\n\n\t\tcamera.position.addScaledVector( vec, distance );\n\n\t};\n\n\tthis.moveRight = function ( distance ) {\n\n\t\tvec.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\tcamera.position.addScaledVector( vec, distance );\n\n\t};\n\n\tthis.lock = function () {\n\n\t\tthis.domElement.requestPointerLock();\n\n\t};\n\n\tthis.unlock = function () {\n\n\t\tdocument.exitPointerLock();\n\n\t};\n\n\tthis.connect();\n\n};\n\nPointerLockControls.prototype = Object.create( EventDispatcher.prototype );\nPointerLockControls.prototype.constructor = PointerLockControls;\n\nexport { PointerLockControls };\n","/**\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nimport {\n\tBufferAttribute,\n\tBufferGeometry,\n\tFileLoader,\n\tLoader\n} from \"../../../build/three.module.js\";\n\nvar DRACOLoader = function ( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.decoderPath = '';\n\tthis.decoderConfig = {};\n\tthis.decoderBinary = null;\n\tthis.decoderPending = null;\n\n\tthis.workerLimit = 4;\n\tthis.workerPool = [];\n\tthis.workerNextTaskID = 1;\n\tthis.workerSourceURL = '';\n\n\tthis.defaultAttributeIDs = {\n\t\tposition: 'POSITION',\n\t\tnormal: 'NORMAL',\n\t\tcolor: 'COLOR',\n\t\tuv: 'TEX_COORD'\n\t};\n\tthis.defaultAttributeTypes = {\n\t\tposition: 'Float32Array',\n\t\tnormal: 'Float32Array',\n\t\tcolor: 'Float32Array',\n\t\tuv: 'Float32Array'\n\t};\n\n};\n\nDRACOLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DRACOLoader,\n\n\tsetDecoderPath: function ( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t},\n\n\tsetDecoderConfig: function ( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t},\n\n\tsetWorkerLimit: function ( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t},\n\n\t/** @deprecated */\n\tsetVerbosity: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setVerbosity() method has been removed.' );\n\n\t},\n\n\t/** @deprecated */\n\tsetDrawMode: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setDrawMode() method has been removed.' );\n\n\t},\n\n\t/** @deprecated */\n\tsetSkipDequantization: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setSkipDequantization() method has been removed.' );\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.crossOrigin === 'use-credentials' ) {\n\n\t\t\tloader.setWithCredentials( true );\n\n\t\t}\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tvar taskConfig = {\n\t\t\t\tattributeIDs: this.defaultAttributeIDs,\n\t\t\t\tattributeTypes: this.defaultAttributeTypes,\n\t\t\t\tuseUniqueIDs: false\n\t\t\t};\n\n\t\t\tthis.decodeGeometry( buffer, taskConfig )\n\t\t\t\t.then( onLoad )\n\t\t\t\t.catch( onError );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\t/** @deprecated Kept for backward-compatibility with previous DRACOLoader versions. */\n\tdecodeDracoFile: function ( buffer, callback, attributeIDs, attributeTypes ) {\n\n\t\tvar taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs\n\t\t};\n\n\t\tthis.decodeGeometry( buffer, taskConfig ).then( callback );\n\n\t},\n\n\tdecodeGeometry: function ( buffer, taskConfig ) {\n\n\t\t// TODO: For backward-compatibility, support 'attributeTypes' objects containing\n\t\t// references (rather than names) to typed array constructors. These must be\n\t\t// serialized before sending them to the worker.\n\t\tfor ( var attribute in taskConfig.attributeTypes ) {\n\n\t\t\tvar type = taskConfig.attributeTypes[ attribute ];\n\n\t\t\tif ( type.BYTES_PER_ELEMENT !== undefined ) {\n\n\t\t\t\ttaskConfig.attributeTypes[ attribute ] = type.name;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( DRACOLoader.taskCache.has( buffer ) ) {\n\n\t\t\tvar cachedTask = DRACOLoader.taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar worker;\n\t\tvar taskID = this.workerNextTaskID ++;\n\t\tvar taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tvar geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\tDRACOLoader.taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t},\n\n\t_createGeometry: function ( geometryData ) {\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tvar attribute = geometryData.attributes[ i ];\n\t\t\tvar name = attribute.name;\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tgeometry.setAttribute( name, new BufferAttribute( array, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\t_loadLibrary: function ( url, responseType ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t},\n\n\tpreload: function () {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t},\n\n\t_initDecoder: function () {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tvar useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tvar librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tvar jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tvar fn = DRACOLoader.DRACOWorker.toString();\n\n\t\t\t\tvar body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t},\n\n\t_getWorker: function ( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tvar worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tvar message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t},\n\n\t_releaseTask: function ( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t},\n\n\tdebug: function () {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t},\n\n\tdispose: function () {\n\n\t\tfor ( var i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/* WEB WORKER */\n\nDRACOLoader.DRACOWorker = function () {\n\n\tvar decoderConfig;\n\tvar decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tvar message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig );\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tvar buffer = message.buffer;\n\t\t\t\tvar taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tvar draco = module.draco;\n\t\t\t\t\tvar decoder = new draco.Decoder();\n\t\t\t\t\tvar decoderBuffer = new draco.DecoderBuffer();\n\t\t\t\t\tdecoderBuffer.Init( new Int8Array( buffer ), buffer.byteLength );\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tvar geometry = decodeGeometry( draco, decoder, decoderBuffer, taskConfig );\n\n\t\t\t\t\t\tvar buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoderBuffer );\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, decoderBuffer, taskConfig ) {\n\n\t\tvar attributeIDs = taskConfig.attributeIDs;\n\t\tvar attributeTypes = taskConfig.attributeTypes;\n\n\t\tvar dracoGeometry;\n\t\tvar decodingStatus;\n\n\t\tvar geometryType = decoder.GetEncodedGeometryType( decoderBuffer );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeBufferToMesh( decoderBuffer, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeBufferToPointCloud( decoderBuffer, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tvar geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( var attributeName in attributeIDs ) {\n\n\t\t\tvar attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tvar attribute;\n\t\t\tvar attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\t// Generate mesh faces.\n\t\t\tvar numFaces = dracoGeometry.num_faces();\n\t\t\tvar numIndices = numFaces * 3;\n\t\t\tvar index = new Uint32Array( numIndices );\n\t\t\tvar indexArray = new draco.DracoInt32Array();\n\n\t\t\tfor ( var i = 0; i < numFaces; ++ i ) {\n\n\t\t\t\tdecoder.GetFaceFromMesh( dracoGeometry, i, indexArray );\n\n\t\t\t\tfor ( var j = 0; j < 3; ++ j ) {\n\n\t\t\t\t\tindex[ i * 3 + j ] = indexArray.GetValue( j );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.index = { array: index, itemSize: 1 };\n\n\t\t\tdraco.destroy( indexArray );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tvar numComponents = attribute.num_components();\n\t\tvar numPoints = dracoGeometry.num_points();\n\t\tvar numValues = numPoints * numComponents;\n\t\tvar dracoArray;\n\n\t\tvar array;\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array:\n\t\t\t\tdracoArray = new draco.DracoFloat32Array();\n\t\t\t\tdecoder.GetAttributeFloatForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Float32Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tcase Int8Array:\n\t\t\t\tdracoArray = new draco.DracoInt8Array();\n\t\t\t\tdecoder.GetAttributeInt8ForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Int8Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tcase Int16Array:\n\t\t\t\tdracoArray = new draco.DracoInt16Array();\n\t\t\t\tdecoder.GetAttributeInt16ForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Int16Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tcase Int32Array:\n\t\t\t\tdracoArray = new draco.DracoInt32Array();\n\t\t\t\tdecoder.GetAttributeInt32ForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Int32Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tcase Uint8Array:\n\t\t\t\tdracoArray = new draco.DracoUInt8Array();\n\t\t\t\tdecoder.GetAttributeUInt8ForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Uint8Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tcase Uint16Array:\n\t\t\t\tdracoArray = new draco.DracoUInt16Array();\n\t\t\t\tdecoder.GetAttributeUInt16ForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Uint16Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tcase Uint32Array:\n\t\t\t\tdracoArray = new draco.DracoUInt32Array();\n\t\t\t\tdecoder.GetAttributeUInt32ForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Uint32Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected attribute type.' );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < numValues; i ++ ) {\n\n\t\t\tarray[ i ] = dracoArray.GetValue( i );\n\n\t\t}\n\n\t\tdraco.destroy( dracoArray );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n};\n\nDRACOLoader.taskCache = new WeakMap();\n\n/** Deprecated static methods */\n\n/** @deprecated */\nDRACOLoader.setDecoderPath = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.setDecoderConfig = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.releaseDecoderModule = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.getDecoderModule = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.' );\n\n};\n\nexport { DRACOLoader };\n","/**\n * @author Rich Tibbett / https://github.com/richtr\n * @author mrdoob / http://mrdoob.com/\n * @author Tony Parisi / http://www.tonyparisi.com/\n * @author Takahiro / https://github.com/takahirox\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nimport {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternionKeyframeTrack,\n\tRGBAFormat,\n\tRGBFormat,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTangentSpaceNormalMap,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from \"../../../build/three.module.js\";\n\nvar GLTFLoader = ( function () {\n\n\tfunction GLTFLoader( manager ) {\n\n\t\tLoader.call( this, manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ddsLoader = null;\n\n\t}\n\n\tGLTFLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\t\tconstructor: GLTFLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar resourcePath;\n\n\t\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\t\tresourcePath = this.resourcePath;\n\n\t\t\t} else if ( this.path !== '' ) {\n\n\t\t\t\tresourcePath = this.path;\n\n\t\t\t} else {\n\n\t\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t\t}\n\n\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tvar _onError = function ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t};\n\n\t\t\tvar loader = new FileLoader( scope.manager );\n\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.setRequestHeader( this.requestHeader );\n\n\t\t\tif ( scope.crossOrigin === 'use-credentials' ) {\n\n\t\t\t\tloader.setWithCredentials( true );\n\n\t\t\t}\n\n\t\t\tloader.load( url, function ( data ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t}, _onError );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t_onError( e );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, _onError );\n\n\t\t},\n\n\t\tsetDRACOLoader: function ( dracoLoader ) {\n\n\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetDDSLoader: function ( ddsLoader ) {\n\n\t\t\tthis.ddsLoader = ddsLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( data, path, onLoad, onError ) {\n\n\t\t\tvar content;\n\t\t\tvar extensions = {};\n\n\t\t\tif ( typeof data === 'string' ) {\n\n\t\t\t\tcontent = data;\n\n\t\t\t} else {\n\n\t\t\t\tvar magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar json = JSON.parse( content );\n\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed ) {\n\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_LIGHTS_PUNCTUAL:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFLightsExtension( json );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_CLEARCOAT:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsClearcoatExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureDDSExtension( this.ddsLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar parser = new GLTFParser( json, extensions, {\n\n\t\t\t\tpath: path || this.resourcePath || '',\n\t\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\t\tmanager: this.manager\n\n\t\t\t} );\n\n\t\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\t\t\tparser.parse( onLoad, onError );\n\n\t\t}\n\n\t} );\n\n\t/* GLTFREGISTRY */\n\n\tfunction GLTFRegistry() {\n\n\t\tvar objects = {};\n\n\t\treturn\t{\n\n\t\t\tget: function ( key ) {\n\n\t\t\t\treturn objects[ key ];\n\n\t\t\t},\n\n\t\t\tadd: function ( key, object ) {\n\n\t\t\t\tobjects[ key ] = object;\n\n\t\t\t},\n\n\t\t\tremove: function ( key ) {\n\n\t\t\t\tdelete objects[ key ];\n\n\t\t\t},\n\n\t\t\tremoveAll: function () {\n\n\t\t\t\tobjects = {};\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/*********************************/\n\t/********** EXTENSIONS ***********/\n\t/*********************************/\n\n\tvar EXTENSIONS = {\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\t\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\t\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\t\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\n\t};\n\n\t/**\n\t * DDS Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n\t *\n\t */\n\tfunction GLTFTextureDDSExtension( ddsLoader ) {\n\n\t\tif ( ! ddsLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n\t\tthis.ddsLoader = ddsLoader;\n\n\t}\n\n\t/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n\tfunction GLTFLightsExtension( json ) {\n\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\tvar extension = ( json.extensions && json.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ] ) || {};\n\t\tthis.lightDefs = extension.lights || [];\n\n\t}\n\n\tGLTFLightsExtension.prototype.loadLight = function ( lightIndex ) {\n\n\t\tvar lightDef = this.lightDefs[ lightIndex ];\n\t\tvar lightNode;\n\n\t\tvar color = new Color( 0xffffff );\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".' );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = lightDef.name || ( 'light_' + lightIndex );\n\n\t\treturn Promise.resolve( lightNode );\n\n\t};\n\n\t/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n\tfunction GLTFMaterialsUnlitExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n\t\treturn MeshBasicMaterial;\n\n\t};\n\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, materialDef, parser ) {\n\n\t\tvar pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Clearcoat Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n\t */\n\tfunction GLTFMaterialsClearcoatExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tGLTFMaterialsClearcoatExtension.prototype.getMaterialType = function () {\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsClearcoatExtension.prototype.extendParams = function ( materialParams, materialDef, parser ) {\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tvar scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/* BINARY EXTENSION */\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n\tfunction GLTFBinaryExtension( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tvar chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\n\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t */\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\n\n\t\tvar json = this.json;\n\t\tvar dracoLoader = this.dracoLoader;\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tvar threeAttributeMap = {};\n\t\tvar attributeNormalizedMap = {};\n\t\tvar attributeTypeMap = {};\n\n\t\tfor ( var attributeName in gltfAttributeMap ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( attributeName in primitive.attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Texture Transform Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t */\n\tfunction GLTFTextureTransformExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\tGLTFTextureTransformExtension.prototype.extendTexture = function ( texture, transform ) {\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t};\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\n\t/**\n\t * A sub class of StandardMaterial with some of the functionality\n\t * changed via the `onBeforeCompile` callback\n\t * @pailhead\n\t */\n\n\tfunction GLTFMeshStandardSGMaterial( params ) {\n\n\t\tMeshStandardMaterial.call( this );\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tvar specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb;',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor.rgb;',\n\t\t].join( '\\n' );\n\n\t\tvar uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\t// please see #14031 or #13198 for an alternate approach\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( var uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( 'uniform float roughness;', 'uniform vec3 specular;' );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( 'uniform float metalness;', 'uniform float glossiness;' );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\t/*eslint-disable*/\n\t\tObject.defineProperties(\n\t\t\tthis,\n\t\t\t{\n\t\t\t\tspecular: {\n\t\t\t\t\tget: function () { return uniforms.specular.value; },\n\t\t\t\t\tset: function ( v ) { uniforms.specular.value = v; }\n\t\t\t\t},\n\t\t\t\tspecularMap: {\n\t\t\t\t\tget: function () { return uniforms.specularMap.value; },\n\t\t\t\t\tset: function ( v ) { uniforms.specularMap.value = v; }\n\t\t\t\t},\n\t\t\t\tglossiness: {\n\t\t\t\t\tget: function () { return uniforms.glossiness.value; },\n\t\t\t\t\tset: function ( v ) { uniforms.glossiness.value = v; }\n\t\t\t\t},\n\t\t\t\tglossinessMap: {\n\t\t\t\t\tget: function () { return uniforms.glossinessMap.value; },\n\t\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\t\tuniforms.glossinessMap.value = v;\n\t\t\t\t\t\t//how about something like this - @pailhead\n\t\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\t\t// set USE_ROUGHNESSMAP to enable vUv\n\t\t\t\t\t\t\tthis.defines.USE_ROUGHNESSMAP = '';\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tdelete this.defines.USE_ROUGHNESSMAP;\n\t\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\t/*eslint-enable*/\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tGLTFMeshStandardSGMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\n\tGLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial;\n\n\tGLTFMeshStandardSGMaterial.prototype.copy = function ( source ) {\n\n\t\tMeshStandardMaterial.prototype.copy.call( this, source );\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t};\n\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\t\treturn {\n\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\t\tspecularGlossinessParams: [\n\t\t\t\t'color',\n\t\t\t\t'map',\n\t\t\t\t'lightMap',\n\t\t\t\t'lightMapIntensity',\n\t\t\t\t'aoMap',\n\t\t\t\t'aoMapIntensity',\n\t\t\t\t'emissive',\n\t\t\t\t'emissiveIntensity',\n\t\t\t\t'emissiveMap',\n\t\t\t\t'bumpMap',\n\t\t\t\t'bumpScale',\n\t\t\t\t'normalMap',\n\t\t\t\t'normalMapType',\n\t\t\t\t'displacementMap',\n\t\t\t\t'displacementScale',\n\t\t\t\t'displacementBias',\n\t\t\t\t'specularMap',\n\t\t\t\t'specular',\n\t\t\t\t'glossinessMap',\n\t\t\t\t'glossiness',\n\t\t\t\t'alphaMap',\n\t\t\t\t'envMap',\n\t\t\t\t'envMapIntensity',\n\t\t\t\t'refractionRatio',\n\t\t\t],\n\n\t\t\tgetMaterialType: function () {\n\n\t\t\t\treturn GLTFMeshStandardSGMaterial;\n\n\t\t\t},\n\n\t\t\textendParams: function ( materialParams, materialDef, parser ) {\n\n\t\t\t\tvar pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t\t\t}\n\n\t\t\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\t\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\t\t\tvar specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t},\n\n\t\t\tcreateMaterial: function ( materialParams ) {\n\n\t\t\t\tvar material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\t\t\tmaterial.fog = true;\n\n\t\t\t\tmaterial.color = materialParams.color;\n\n\t\t\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\t\t\tmaterial.lightMap = null;\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\t\tmaterial.emissive = materialParams.emissive;\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\t\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\t\t\tmaterial.bumpScale = 1;\n\n\t\t\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\t\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\t\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\t\t\tmaterial.displacementMap = null;\n\t\t\t\tmaterial.displacementScale = 1;\n\t\t\t\tmaterial.displacementBias = 0;\n\n\t\t\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\t\t\tmaterial.specular = materialParams.specular;\n\n\t\t\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\t\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\t\t\tmaterial.alphaMap = null;\n\n\t\t\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\t\treturn material;\n\n\t\t\t},\n\n\t\t};\n\n\t}\n\n\t/**\n\t * Mesh Quantization Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n\t */\n\tfunction GLTFMeshQuantizationExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n\t/*********************************/\n\t/********** INTERPOLATION ********/\n\t/*********************************/\n\n\t// Spline Interpolation\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tGLTFCubicSplineInterpolant.prototype = Object.create( Interpolant.prototype );\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function ( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( var i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer;\n\t\tvar values = this.sampleValues;\n\t\tvar stride = this.valueSize;\n\n\t\tvar stride2 = stride * 2;\n\t\tvar stride3 = stride * 3;\n\n\t\tvar td = t1 - t0;\n\n\t\tvar p = ( t - t0 ) / td;\n\t\tvar pp = p * p;\n\t\tvar ppp = pp * p;\n\n\t\tvar offset1 = i1 * stride3;\n\t\tvar offset0 = offset1 - stride3;\n\n\t\tvar s2 = - 2 * ppp + 3 * pp;\n\t\tvar s3 = ppp - pp;\n\t\tvar s0 = 1 - s2;\n\t\tvar s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\n\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\t/*********************************/\n\t/********** INTERNALS ************/\n\t/*********************************/\n\n\t/* CONSTANTS */\n\n\tvar WEBGL_CONSTANTS = {\n\t\tFLOAT: 5126,\n\t\t//FLOAT_MAT2: 35674,\n\t\tFLOAT_MAT3: 35675,\n\t\tFLOAT_MAT4: 35676,\n\t\tFLOAT_VEC2: 35664,\n\t\tFLOAT_VEC3: 35665,\n\t\tFLOAT_VEC4: 35666,\n\t\tLINEAR: 9729,\n\t\tREPEAT: 10497,\n\t\tSAMPLER_2D: 35678,\n\t\tPOINTS: 0,\n\t\tLINES: 1,\n\t\tLINE_LOOP: 2,\n\t\tLINE_STRIP: 3,\n\t\tTRIANGLES: 4,\n\t\tTRIANGLE_STRIP: 5,\n\t\tTRIANGLE_FAN: 6,\n\t\tUNSIGNED_BYTE: 5121,\n\t\tUNSIGNED_SHORT: 5123\n\t};\n\n\tvar WEBGL_COMPONENT_TYPES = {\n\t\t5120: Int8Array,\n\t\t5121: Uint8Array,\n\t\t5122: Int16Array,\n\t\t5123: Uint16Array,\n\t\t5125: Uint32Array,\n\t\t5126: Float32Array\n\t};\n\n\tvar WEBGL_FILTERS = {\n\t\t9728: NearestFilter,\n\t\t9729: LinearFilter,\n\t\t9984: NearestMipmapNearestFilter,\n\t\t9985: LinearMipmapNearestFilter,\n\t\t9986: NearestMipmapLinearFilter,\n\t\t9987: LinearMipmapLinearFilter\n\t};\n\n\tvar WEBGL_WRAPPINGS = {\n\t\t33071: ClampToEdgeWrapping,\n\t\t33648: MirroredRepeatWrapping,\n\t\t10497: RepeatWrapping\n\t};\n\n\tvar WEBGL_TYPE_SIZES = {\n\t\t'SCALAR': 1,\n\t\t'VEC2': 2,\n\t\t'VEC3': 3,\n\t\t'VEC4': 4,\n\t\t'MAT2': 4,\n\t\t'MAT3': 9,\n\t\t'MAT4': 16\n\t};\n\n\tvar ATTRIBUTES = {\n\t\tPOSITION: 'position',\n\t\tNORMAL: 'normal',\n\t\tTANGENT: 'tangent',\n\t\tTEXCOORD_0: 'uv',\n\t\tTEXCOORD_1: 'uv2',\n\t\tCOLOR_0: 'color',\n\t\tWEIGHTS_0: 'skinWeight',\n\t\tJOINTS_0: 'skinIndex',\n\t};\n\n\tvar PATH_PROPERTIES = {\n\t\tscale: 'scale',\n\t\ttranslation: 'position',\n\t\trotation: 'quaternion',\n\t\tweights: 'morphTargetInfluences'\n\t};\n\n\tvar INTERPOLATION = {\n\t\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\t\tLINEAR: InterpolateLinear,\n\t\tSTEP: InterpolateDiscrete\n\t};\n\n\tvar ALPHA_MODES = {\n\t\tOPAQUE: 'OPAQUE',\n\t\tMASK: 'MASK',\n\t\tBLEND: 'BLEND'\n\t};\n\n\tvar MIME_TYPE_FORMATS = {\n\t\t'image/png': RGBAFormat,\n\t\t'image/jpeg': RGBFormat\n\t};\n\n\t/* UTILITY FUNCTIONS */\n\n\tfunction resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n\tfunction createDefaultMaterial( cache ) {\n\n\t\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\temissive: 0x000000,\n\t\t\t\tmetalness: 1,\n\t\t\t\troughness: 1,\n\t\t\t\ttransparent: false,\n\t\t\t\tdepthTest: true,\n\t\t\t\tside: FrontSide\n\t\t\t} );\n\n\t\t}\n\n\t\treturn cache[ 'DefaultMaterial' ];\n\n\t}\n\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t\t// Add unknown glTF extensions to an object's userData.\n\n\t\tfor ( var name in objectDef.extensions ) {\n\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @param {Object3D|Material|BufferGeometry} object\n\t * @param {GLTF.definition} gltfDef\n\t */\n\tfunction assignExtrasToUserData( object, gltfDef ) {\n\n\t\tif ( gltfDef.extras !== undefined ) {\n\n\t\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addMorphTargets( geometry, targets, parser ) {\n\n\t\tvar hasMorphPosition = false;\n\t\tvar hasMorphNormal = false;\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t\t}\n\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\t\tvar pendingPositionAccessors = [];\n\t\tvar pendingNormalAccessors = [];\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( hasMorphPosition ) {\n\n\t\t\t\tvar pendingAccessor = target.POSITION !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t\t: geometry.attributes.position;\n\n\t\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t\tif ( hasMorphNormal ) {\n\n\t\t\t\tvar pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t\t: geometry.attributes.normal;\n\n\t\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( [\n\t\t\tPromise.all( pendingPositionAccessors ),\n\t\t\tPromise.all( pendingNormalAccessors )\n\t\t] ).then( function ( accessors ) {\n\n\t\t\tvar morphPositions = accessors[ 0 ];\n\t\t\tvar morphNormals = accessors[ 1 ];\n\n\t\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t\treturn geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n\tfunction updateMorphTargets( mesh, meshDef ) {\n\n\t\tmesh.updateMorphTargets();\n\n\t\tif ( meshDef.weights !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\t\tvar targetNames = meshDef.extras.targetNames;\n\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createPrimitiveKey( primitiveDef ) {\n\n\t\tvar dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\t\tvar geometryKey;\n\n\t\tif ( dracoExtension ) {\n\n\t\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t\t} else {\n\n\t\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t\t}\n\n\t\treturn geometryKey;\n\n\t}\n\n\tfunction createAttributesKey( attributes ) {\n\n\t\tvar attributesKey = '';\n\n\t\tvar keys = Object.keys( attributes ).sort();\n\n\t\tfor ( var i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t\t}\n\n\t\treturn attributesKey;\n\n\t}\n\n\t/* GLTF PARSER */\n\n\tfunction GLTFParser( json, extensions, options ) {\n\n\t\tthis.json = json || {};\n\t\tthis.extensions = extensions || {};\n\t\tthis.options = options || {};\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis.markDefs();\n\n\t\tPromise.all( [\n\n\t\t\tthis.getDependencies( 'scene' ),\n\t\t\tthis.getDependencies( 'animation' ),\n\t\t\tthis.getDependencies( 'camera' ),\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tonLoad( result );\n\n\t\t} ).catch( onError );\n\n\t};\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\tGLTFParser.prototype.markDefs = function () {\n\n\t\tvar nodeDefs = this.json.nodes || [];\n\t\tvar skinDefs = this.json.skins || [];\n\t\tvar meshDefs = this.json.meshes || [];\n\n\t\tvar meshReferences = {};\n\t\tvar meshUses = {};\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Meshes can (and should) be reused by multiple nodes in a glTF asset. To\n\t\t// avoid having more than one Mesh with the same name, count\n\t\t// references and rename instances below.\n\t\t//\n\t\t// Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tif ( meshReferences[ nodeDef.mesh ] === undefined ) {\n\n\t\t\t\t\tmeshReferences[ nodeDef.mesh ] = meshUses[ nodeDef.mesh ] = 0;\n\n\t\t\t\t}\n\n\t\t\t\tmeshReferences[ nodeDef.mesh ] ++;\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.json.meshReferences = meshReferences;\n\t\tthis.json.meshUses = meshUses;\n\n\t};\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\n\n\t\tvar cacheKey = type + ':' + index;\n\t\tvar dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this.loadMesh( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this.loadBufferView( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this.loadMaterial( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this.loadTexture( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'light':\n\t\t\t\t\tdependency = this.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].loadLight( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t};\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tGLTFParser.prototype.getDependencies = function ( type ) {\n\n\t\tvar dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tvar parser = this;\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\n\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\n\t\tvar loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\n\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tvar pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tvar bufferView = bufferViews[ 0 ];\n\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tvar itemBytes = elementBytes * itemSize;\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\n\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tvar normalized = accessorDef.normalized === true;\n\t\t\tvar array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tvar ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\t\tvar textureLoader = this.textureLoader;\n\n\t\tvar URL = self.URL || self.webkitURL;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar textureExtensions = textureDef.extensions || {};\n\n\t\tvar source;\n\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\n\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\n\n\t\t} else {\n\n\t\t\tsource = json.images[ textureDef.source ];\n\n\t\t}\n\n\t\tvar sourceURI = source.uri;\n\t\tvar isObjectURL = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\t// Load Texture resource.\n\n\t\t\tvar loader = options.manager.getHandler( sourceURI );\n\n\t\t\tif ( ! loader ) {\n\n\t\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\n\t\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\n\t\t\t\t\t: textureLoader;\n\n\t\t\t}\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), resolve, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\t// Ignore unknown mime types, like DDS files.\n\t\t\tif ( source.mimeType in MIME_TYPE_FORMATS ) {\n\n\t\t\t\ttexture.format = MIME_TYPE_FORMATS[ source.mimeType ];\n\n\t\t\t}\n\n\t\t\tvar samplers = json.samplers || {};\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, {\n\t\t\t\ttype: 'textures',\n\t\t\t\tindex: textureIndex\n\t\t\t} );\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise}\n\t */\n\tGLTFParser.prototype.assignTexture = function ( materialParams, mapName, mapDef ) {\n\n\t\tvar parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\tif ( ! texture.isCompressedTexture ) {\n\n\t\t\t\tswitch ( mapName ) {\n\n\t\t\t\t\tcase 'aoMap':\n\t\t\t\t\tcase 'emissiveMap':\n\t\t\t\t\tcase 'metalnessMap':\n\t\t\t\t\tcase 'normalMap':\n\t\t\t\t\tcase 'roughnessMap':\n\t\t\t\t\t\ttexture.format = RGBFormat;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tvar transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tvar gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accomodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tGLTFParser.prototype.assignFinalMaterial = function ( mesh ) {\n\n\t\tvar geometry = mesh.geometry;\n\t\tvar material = mesh.material;\n\n\t\tvar useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\tvar useSkinning = mesh.isSkinnedMesh === true;\n\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\n\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tvar pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tvar lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\n\n\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\n\t\t\tif ( useVertexTangents ) cacheKey += 'vertex-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\n\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\n\n\t\t\tvar cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\n\t\t\t\tif ( useVertexTangents ) cachedMaterial.vertexTangents = true;\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\n\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\tif ( material.normalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.normalScale.y = - material.normalScale.y;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.clearcoatNormalScale.y = - material.clearcoatNormalScale.y;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar materialDef = json.materials[ materialIndex ];\n\n\t\tvar materialType;\n\t\tvar materialParams = {};\n\t\tvar materialExtensions = materialDef.extensions || {};\n\n\t\tvar pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tmaterialType = MeshStandardMaterial;\n\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_CLEARCOAT ] ) {\n\n\t\t\tvar clearcoatExtension = extensions[ EXTENSIONS.KHR_MATERIALS_CLEARCOAT ];\n\t\t\tmaterialType = clearcoatExtension.getMaterialType();\n\t\t\tpending.push( clearcoatExtension.extendParams( materialParams, { extensions: materialExtensions }, parser ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tvar material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { type: 'materials', index: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t */\n\tfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar box = new Box3();\n\n\t\tif ( attributes.POSITION !== undefined ) {\n\n\t\t\tvar accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\t\tvar min = accessor.min;\n\t\t\tvar max = accessor.max;\n\n\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\tbox.set(\n\t\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar targets = primitiveDef.targets;\n\n\t\tif ( targets !== undefined ) {\n\n\t\t\tvar maxDisplacement = new Vector3();\n\t\t\tvar vector = new Vector3();\n\n\t\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\t\tvar accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\t\tvar min = accessor.min;\n\t\t\t\t\tvar max = accessor.max;\n\n\t\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\t\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\t\tbox.expandByVector( maxDisplacement );\n\n\t\t}\n\n\t\tgeometry.boundingBox = box;\n\n\t\tvar sphere = new Sphere();\n\n\t\tbox.getCenter( sphere.center );\n\t\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\t\tgeometry.boundingSphere = sphere;\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar pending = [];\n\n\t\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t\t.then( function ( accessor ) {\n\n\t\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tfor ( var gltfAttributeName in attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t\t}\n\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\t\tvar accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\t\tgeometry.setIndex( accessor );\n\n\t\t\t} );\n\n\t\t\tpending.push( accessor );\n\n\t\t}\n\n\t\tassignExtrasToUserData( geometry, primitiveDef );\n\n\t\tcomputeBounds( geometry, primitiveDef, parser );\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\treturn primitiveDef.targets !== undefined\n\t\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t\t: geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {Number} drawMode\n\t * @return {BufferGeometry}\n\t */\n\tfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\t\tvar index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tvar indices = [];\n\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar numberOfTriangles = index.count - 2;\n\t\tvar newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( var i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( var i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tvar newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\n\t\treturn newGeometry;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\n\n\t\tvar parser = this;\n\t\tvar extensions = this.extensions;\n\t\tvar cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar primitive = primitives[ i ];\n\t\t\tvar cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tvar cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tvar geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar meshDef = json.meshes[ meshIndex ];\n\t\tvar primitives = meshDef.primitives;\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tvar materials = results.slice( 0, results.length - 1 );\n\t\t\tvar geometries = results[ results.length - 1 ];\n\n\t\t\tvar meshes = [];\n\n\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometry = geometries[ i ];\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tvar material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See .markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = meshDef.name || ( 'mesh_' + meshIndex );\n\n\t\t\t\tif ( geometries.length > 1 ) mesh.name += '_' + i;\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tvar group = new Group();\n\n\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\n\n\t\tvar camera;\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\n\t\tvar params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = cameraDef.name;\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\n\n\t\tvar skinDef = this.json.skins[ skinIndex ];\n\n\t\tvar skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\n\n\t\tvar json = this.json;\n\n\t\tvar animationDef = json.animations[ animationIndex ];\n\n\t\tvar pendingNodes = [];\n\t\tvar pendingInputAccessors = [];\n\t\tvar pendingOutputAccessors = [];\n\t\tvar pendingSamplers = [];\n\t\tvar pendingTargets = [];\n\n\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tvar channel = animationDef.channels[ i ];\n\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tvar target = channel.target;\n\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar nodes = dependencies[ 0 ];\n\t\t\tvar inputAccessors = dependencies[ 1 ];\n\t\t\tvar outputAccessors = dependencies[ 2 ];\n\t\t\tvar samplers = dependencies[ 3 ];\n\t\t\tvar targets = dependencies[ 4 ];\n\n\t\t\tvar tracks = [];\n\n\t\t\tfor ( var i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tvar node = nodes[ i ];\n\t\t\t\tvar inputAccessor = inputAccessors[ i ];\n\t\t\t\tvar outputAccessor = outputAccessors[ i ];\n\t\t\t\tvar sampler = samplers[ i ];\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tvar targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tvar outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tvar scale;\n\n\t\t\t\t\tif ( outputArray.constructor === Int8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 127;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 255;\n\n\t\t\t\t\t} else if ( outputArray.constructor == Int16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 32767;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 65535;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported output accessor component type.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( var j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar parser = this;\n\n\t\tvar meshReferences = json.meshReferences;\n\t\tvar meshUses = json.meshUses;\n\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\n\t\treturn ( function () {\n\n\t\t\tvar pending = [];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\t\t\tvar node;\n\n\t\t\t\t\tif ( meshReferences[ nodeDef.mesh ] > 1 ) {\n\n\t\t\t\t\t\tvar instanceNum = meshUses[ nodeDef.mesh ] ++;\n\n\t\t\t\t\t\tnode = mesh.clone();\n\t\t\t\t\t\tnode.name += '_instance_' + instanceNum;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tnode = mesh;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\t\t\tfor ( var i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t&& nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ]\n\t\t\t\t&& nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'light', nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tvar node;\n\n\t\t\t// .isBone isn't in glTF spec. See .markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( var i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = PropertyBinding.sanitizeNodeName( nodeDef.name );\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tvar matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.associations.set( node, { type: 'nodes', index: nodeIndex } );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tGLTFParser.prototype.loadScene = function () {\n\n\t\t// scene node hierachy builder\n\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\n\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\n\n\t\t\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\t\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t\t\t// build skeleton here as well\n\n\t\t\t\tvar skinEntry;\n\n\t\t\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\t\t\tskinEntry = skin;\n\n\t\t\t\t\tvar pendingJoints = [];\n\n\t\t\t\t\tfor ( var i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.all( pendingJoints );\n\n\t\t\t\t} ).then( function ( jointNodes ) {\n\n\t\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar jointNode = jointNodes[ j ];\n\n\t\t\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\t\t\tvar mat = new Matrix4();\n\n\t\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} );\n\n\t\t\t} ).then( function ( node ) {\n\n\t\t\t\t// build node hierachy\n\n\t\t\t\tparentObject.add( node );\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( nodeDef.children ) {\n\n\t\t\t\t\tvar children = nodeDef.children;\n\n\t\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar child = children[ i ];\n\t\t\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn function loadScene( sceneIndex ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\n\t\t\tvar parser = this;\n\n\t\t\t// Loader returns Group, not Scene.\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\t\tvar scene = new Group();\n\t\t\tif ( sceneDef.name ) scene.name = sceneDef.name;\n\n\t\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\tvar pending = [];\n\n\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t\treturn scene;\n\n\t\t\t} );\n\n\t\t};\n\n\t}();\n\n\treturn GLTFLoader;\n\n} )();\n\nexport { GLTFLoader };\n","import { useReducer, useRef, useEffect, useLayoutEffect } from 'react';\n\nfunction create(createState) {\n  let state;\n  const listeners = new Set();\n\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === 'function' ? partial(state) : partial;\n\n    if (nextState !== state) {\n      state = replace ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach(listener => listener(state));\n    }\n  };\n\n  const getState = () => state;\n\n  const subscribeWithSelector = (listener, selector = getState, equalityFn = Object.is) => {\n    let currentSlice = selector(state);\n\n    function listenerToAdd() {\n      // Selector or equality function could throw but we don't want to stop\n      // the listener from being called.\n      // https://github.com/react-spring/zustand/pull/37\n      try {\n        const newStateSlice = selector(state);\n\n        if (!equalityFn(currentSlice, newStateSlice)) {\n          listener(currentSlice = newStateSlice);\n        }\n      } catch (error) {\n        listener(null, error);\n      }\n    }\n\n    listeners.add(listenerToAdd); // Unsubscribe\n\n    return () => listeners.delete(listenerToAdd);\n  };\n\n  const subscribe = (listener, selector, equalityFn) => {\n    if (selector || equalityFn) {\n      return subscribeWithSelector(listener, selector, equalityFn);\n    }\n\n    listeners.add(listener); // Unsubscribe\n\n    return () => listeners.delete(listener);\n  };\n\n  const destroy = () => listeners.clear();\n\n  const api = {\n    setState,\n    getState,\n    subscribe,\n    destroy\n  };\n  state = createState(setState, getState, api);\n  return api;\n}\n\nconst useIsoLayoutEffect = typeof window === 'undefined' ? useEffect : useLayoutEffect;\nfunction create$1(createState) {\n  const api = typeof createState === 'function' ? create(createState) : createState;\n\n  const useStore = (selector = api.getState, equalityFn = Object.is) => {\n    const [, forceUpdate] = useReducer(c => c + 1, 0);\n    const state = api.getState();\n    const stateRef = useRef(state);\n    const selectorRef = useRef(selector);\n    const equalityFnRef = useRef(equalityFn);\n    const erroredRef = useRef(false);\n    const currentSliceRef = useRef();\n\n    if (currentSliceRef.current === undefined) {\n      currentSliceRef.current = selector(state);\n    }\n\n    let newStateSlice;\n    let hasNewStateSlice = false; // The selector or equalityFn need to be called during the render phase if\n    // they change. We also want legitimate errors to be visible so we re-run\n    // them if they errored in the subscriber.\n\n    if (stateRef.current !== state || selectorRef.current !== selector || equalityFnRef.current !== equalityFn || erroredRef.current) {\n      // Using local variables to avoid mutations in the render phase.\n      newStateSlice = selector(state);\n      hasNewStateSlice = !equalityFn(currentSliceRef.current, newStateSlice);\n    } // Syncing changes in useEffect.\n\n\n    useIsoLayoutEffect(() => {\n      if (hasNewStateSlice) {\n        currentSliceRef.current = newStateSlice;\n      }\n\n      stateRef.current = state;\n      selectorRef.current = selector;\n      equalityFnRef.current = equalityFn;\n      erroredRef.current = false;\n    });\n    const stateBeforeSubscriptionRef = useRef(state);\n    useEffect(() => {\n      const listener = () => {\n        try {\n          const nextState = api.getState();\n          const nextStateSlice = selectorRef.current(nextState);\n\n          if (!equalityFnRef.current(currentSliceRef.current, nextStateSlice)) {\n            stateRef.current = nextState;\n            currentSliceRef.current = nextStateSlice;\n            forceUpdate();\n          }\n        } catch (error) {\n          erroredRef.current = true;\n          forceUpdate();\n        }\n      };\n\n      const unsubscribe = api.subscribe(listener);\n\n      if (api.getState() !== stateBeforeSubscriptionRef.current) {\n        listener(); // state has changed before subscription\n      }\n\n      return unsubscribe;\n    }, []);\n    return hasNewStateSlice ? newStateSlice : currentSliceRef.current;\n  };\n\n  Object.assign(useStore, api); // For backward compatibility (No TS types for this)\n\n  useStore[Symbol.iterator] = function* () {\n    console.warn('[useStore, api] = create() is deprecated and will be removed in v4');\n    yield useStore;\n    yield api;\n  };\n\n  return useStore;\n}\n\nexport default create$1;\n","/**\n * @author Slayvin / http://slayvin.net\n */\n\nimport {\n\tColor,\n\tLinearEncoding,\n\tLinearFilter,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tPerspectiveCamera,\n\tPlane,\n\tRGBFormat,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3,\n\tVector4,\n\tWebGLRenderTarget\n} from \"../../../build/three.module.js\";\n\nvar Reflector = function ( geometry, options ) {\n\n\tMesh.call( this, geometry );\n\n\tthis.type = 'Reflector';\n\n\tvar scope = this;\n\n\toptions = options || {};\n\n\tvar color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0x7F7F7F );\n\tvar textureWidth = options.textureWidth || 512;\n\tvar textureHeight = options.textureHeight || 512;\n\tvar clipBias = options.clipBias || 0;\n\tvar shader = options.shader || Reflector.ReflectorShader;\n\tvar encoding = options.encoding !== undefined ? options.encoding : LinearEncoding;\n\n\t//\n\n\tvar reflectorPlane = new Plane();\n\tvar normal = new Vector3();\n\tvar reflectorWorldPosition = new Vector3();\n\tvar cameraWorldPosition = new Vector3();\n\tvar rotationMatrix = new Matrix4();\n\tvar lookAtPosition = new Vector3( 0, 0, - 1 );\n\tvar clipPlane = new Vector4();\n\n\tvar view = new Vector3();\n\tvar target = new Vector3();\n\tvar q = new Vector4();\n\n\tvar textureMatrix = new Matrix4();\n\tvar virtualCamera = new PerspectiveCamera();\n\n\tvar parameters = {\n\t\tminFilter: LinearFilter,\n\t\tmagFilter: LinearFilter,\n\t\tformat: RGBFormat,\n\t\tstencilBuffer: false,\n\t\tencoding: encoding\n\t};\n\n\tvar renderTarget = new WebGLRenderTarget( textureWidth, textureHeight, parameters );\n\n\tif ( ! MathUtils.isPowerOfTwo( textureWidth ) || ! MathUtils.isPowerOfTwo( textureHeight ) ) {\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t}\n\n\tvar material = new ShaderMaterial( {\n\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\tfragmentShader: shader.fragmentShader,\n\t\tvertexShader: shader.vertexShader\n\t} );\n\n\tmaterial.uniforms[ \"tDiffuse\" ].value = renderTarget.texture;\n\tmaterial.uniforms[ \"color\" ].value = color;\n\tmaterial.uniforms[ \"textureMatrix\" ].value = textureMatrix;\n\n\tthis.material = material;\n\n\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\treflectorWorldPosition.setFromMatrixPosition( scope.matrixWorld );\n\t\tcameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\trotationMatrix.extractRotation( scope.matrixWorld );\n\n\t\tnormal.set( 0, 0, 1 );\n\t\tnormal.applyMatrix4( rotationMatrix );\n\n\t\tview.subVectors( reflectorWorldPosition, cameraWorldPosition );\n\n\t\t// Avoid rendering when reflector is facing away\n\n\t\tif ( view.dot( normal ) > 0 ) return;\n\n\t\tview.reflect( normal ).negate();\n\t\tview.add( reflectorWorldPosition );\n\n\t\trotationMatrix.extractRotation( camera.matrixWorld );\n\n\t\tlookAtPosition.set( 0, 0, - 1 );\n\t\tlookAtPosition.applyMatrix4( rotationMatrix );\n\t\tlookAtPosition.add( cameraWorldPosition );\n\n\t\ttarget.subVectors( reflectorWorldPosition, lookAtPosition );\n\t\ttarget.reflect( normal ).negate();\n\t\ttarget.add( reflectorWorldPosition );\n\n\t\tvirtualCamera.position.copy( view );\n\t\tvirtualCamera.up.set( 0, 1, 0 );\n\t\tvirtualCamera.up.applyMatrix4( rotationMatrix );\n\t\tvirtualCamera.up.reflect( normal );\n\t\tvirtualCamera.lookAt( target );\n\n\t\tvirtualCamera.far = camera.far; // Used in WebGLBackground\n\n\t\tvirtualCamera.updateMatrixWorld();\n\t\tvirtualCamera.projectionMatrix.copy( camera.projectionMatrix );\n\n\t\t// Update the texture matrix\n\t\ttextureMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\t\ttextureMatrix.multiply( virtualCamera.projectionMatrix );\n\t\ttextureMatrix.multiply( virtualCamera.matrixWorldInverse );\n\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t// Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n\t\t// Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\t\treflectorPlane.setFromNormalAndCoplanarPoint( normal, reflectorWorldPosition );\n\t\treflectorPlane.applyMatrix4( virtualCamera.matrixWorldInverse );\n\n\t\tclipPlane.set( reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant );\n\n\t\tvar projectionMatrix = virtualCamera.projectionMatrix;\n\n\t\tq.x = ( Math.sign( clipPlane.x ) + projectionMatrix.elements[ 8 ] ) / projectionMatrix.elements[ 0 ];\n\t\tq.y = ( Math.sign( clipPlane.y ) + projectionMatrix.elements[ 9 ] ) / projectionMatrix.elements[ 5 ];\n\t\tq.z = - 1.0;\n\t\tq.w = ( 1.0 + projectionMatrix.elements[ 10 ] ) / projectionMatrix.elements[ 14 ];\n\n\t\t// Calculate the scaled plane vector\n\t\tclipPlane.multiplyScalar( 2.0 / clipPlane.dot( q ) );\n\n\t\t// Replacing the third row of the projection matrix\n\t\tprojectionMatrix.elements[ 2 ] = clipPlane.x;\n\t\tprojectionMatrix.elements[ 6 ] = clipPlane.y;\n\t\tprojectionMatrix.elements[ 10 ] = clipPlane.z + 1.0 - clipBias;\n\t\tprojectionMatrix.elements[ 14 ] = clipPlane.w;\n\n\t\t// Render\n\n\t\tscope.visible = false;\n\n\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\n\t\tvar currentXrEnabled = renderer.xr.enabled;\n\t\tvar currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n\t\trenderer.xr.enabled = false; // Avoid camera modification\n\t\trenderer.shadowMap.autoUpdate = false; // Avoid re-computing shadows\n\n\t\trenderer.setRenderTarget( renderTarget );\n\n\t\trenderer.state.buffers.depth.setMask( true ); // make sure the depth buffer is writable so it can be properly cleared, see #18897\n\n\t\tif ( renderer.autoClear === false ) renderer.clear();\n\t\trenderer.render( scene, virtualCamera );\n\n\t\trenderer.xr.enabled = currentXrEnabled;\n\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t// Restore viewport\n\n\t\tvar viewport = camera.viewport;\n\n\t\tif ( viewport !== undefined ) {\n\n\t\t\trenderer.state.viewport( viewport );\n\n\t\t}\n\n\t\tscope.visible = true;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn renderTarget;\n\n\t};\n\n};\n\nReflector.prototype = Object.create( Mesh.prototype );\nReflector.prototype.constructor = Reflector;\n\nReflector.ReflectorShader = {\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tDiffuse': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\tvalue: null\n\t\t}\n\n\t},\n\n\tvertexShader: [\n\t\t'uniform mat4 textureMatrix;',\n\t\t'varying vec4 vUv;',\n\n\t\t'void main() {',\n\n\t\t'\tvUv = textureMatrix * vec4( position, 1.0 );',\n\n\t\t'\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n\n\t\t'}'\n\t].join( '\\n' ),\n\n\tfragmentShader: [\n\t\t'uniform vec3 color;',\n\t\t'uniform sampler2D tDiffuse;',\n\t\t'varying vec4 vUv;',\n\n\t\t'float blendOverlay( float base, float blend ) {',\n\n\t\t'\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );',\n\n\t\t'}',\n\n\t\t'vec3 blendOverlay( vec3 base, vec3 blend ) {',\n\n\t\t'\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );',\n\n\t\t'}',\n\n\t\t'void main() {',\n\n\t\t'\tvec4 base = texture2DProj( tDiffuse, vUv );',\n\t\t'\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );',\n\n\t\t'}'\n\t].join( '\\n' )\n};\n\nexport { Reflector };\n","/**\n *\t@author zz85 / http://twitter.com/blurspline / http://www.lab4games.net/zz85/blog\n *\n *\tSimplification Geometry Modifier\n *    - based on code and technique\n *\t  - by Stan Melax in 1998\n *\t  - Progressive Mesh type Polygon Reduction Algorithm\n *    - http://www.melax.com/polychop/\n */\n\nimport {\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tGeometry,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar SimplifyModifier = function () {};\n\n( function () {\n\n\tvar cb = new Vector3(), ab = new Vector3();\n\n\tfunction pushIfUnique( array, object ) {\n\n\t\tif ( array.indexOf( object ) === - 1 ) array.push( object );\n\n\t}\n\n\tfunction removeFromArray( array, object ) {\n\n\t\tvar k = array.indexOf( object );\n\t\tif ( k > - 1 ) array.splice( k, 1 );\n\n\t}\n\n\tfunction computeEdgeCollapseCost( u, v ) {\n\n\t\t// if we collapse edge uv by moving u to v then how\n\t\t// much different will the model change, i.e. the \"error\".\n\n\t\tvar edgelength = v.position.distanceTo( u.position );\n\t\tvar curvature = 0;\n\n\t\tvar sideFaces = [];\n\t\tvar i, il = u.faces.length, face, sideFace;\n\n\t\t// find the \"sides\" triangles that are on the edge uv\n\t\tfor ( i = 0; i < il; i ++ ) {\n\n\t\t\tface = u.faces[ i ];\n\n\t\t\tif ( face.hasVertex( v ) ) {\n\n\t\t\t\tsideFaces.push( face );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use the triangle facing most away from the sides\n\t\t// to determine our curvature term\n\t\tfor ( i = 0; i < il; i ++ ) {\n\n\t\t\tvar minCurvature = 1;\n\t\t\tface = u.faces[ i ];\n\n\t\t\tfor ( var j = 0; j < sideFaces.length; j ++ ) {\n\n\t\t\t\tsideFace = sideFaces[ j ];\n\t\t\t\t// use dot product of face normals.\n\t\t\t\tvar dotProd = face.normal.dot( sideFace.normal );\n\t\t\t\tminCurvature = Math.min( minCurvature, ( 1.001 - dotProd ) / 2 );\n\n\t\t\t}\n\n\t\t\tcurvature = Math.max( curvature, minCurvature );\n\n\t\t}\n\n\t\t// crude approach in attempt to preserve borders\n\t\t// though it seems not to be totally correct\n\t\tvar borders = 0;\n\t\tif ( sideFaces.length < 2 ) {\n\n\t\t\t// we add some arbitrary cost for borders,\n\t\t\t// borders += 10;\n\t\t\tcurvature = 1;\n\n\t\t}\n\n\t\tvar amt = edgelength * curvature + borders;\n\n\t\treturn amt;\n\n\t}\n\n\tfunction computeEdgeCostAtVertex( v ) {\n\n\t\t// compute the edge collapse cost for all edges that start\n\t\t// from vertex v.  Since we are only interested in reducing\n\t\t// the object by selecting the min cost edge at each step, we\n\t\t// only cache the cost of the least cost edge at this vertex\n\t\t// (in member variable collapse) as well as the value of the\n\t\t// cost (in member variable collapseCost).\n\n\t\tif ( v.neighbors.length === 0 ) {\n\n\t\t\t// collapse if no neighbors.\n\t\t\tv.collapseNeighbor = null;\n\t\t\tv.collapseCost = - 0.01;\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tv.collapseCost = 100000;\n\t\tv.collapseNeighbor = null;\n\n\t\t// search all neighboring edges for \"least cost\" edge\n\t\tfor ( var i = 0; i < v.neighbors.length; i ++ ) {\n\n\t\t\tvar collapseCost = computeEdgeCollapseCost( v, v.neighbors[ i ] );\n\n\t\t\tif ( ! v.collapseNeighbor ) {\n\n\t\t\t\tv.collapseNeighbor = v.neighbors[ i ];\n\t\t\t\tv.collapseCost = collapseCost;\n\t\t\t\tv.minCost = collapseCost;\n\t\t\t\tv.totalCost = 0;\n\t\t\t\tv.costCount = 0;\n\n\t\t\t}\n\n\t\t\tv.costCount ++;\n\t\t\tv.totalCost += collapseCost;\n\n\t\t\tif ( collapseCost < v.minCost ) {\n\n\t\t\t\tv.collapseNeighbor = v.neighbors[ i ];\n\t\t\t\tv.minCost = collapseCost;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// we average the cost of collapsing at this vertex\n\t\tv.collapseCost = v.totalCost / v.costCount;\n\t\t// v.collapseCost = v.minCost;\n\n\t}\n\n\tfunction removeVertex( v, vertices ) {\n\n\t\tconsole.assert( v.faces.length === 0 );\n\n\t\twhile ( v.neighbors.length ) {\n\n\t\t\tvar n = v.neighbors.pop();\n\t\t\tremoveFromArray( n.neighbors, v );\n\n\t\t}\n\n\t\tremoveFromArray( vertices, v );\n\n\t}\n\n\tfunction removeFace( f, faces ) {\n\n\t\tremoveFromArray( faces, f );\n\n\t\tif ( f.v1 ) removeFromArray( f.v1.faces, f );\n\t\tif ( f.v2 ) removeFromArray( f.v2.faces, f );\n\t\tif ( f.v3 ) removeFromArray( f.v3.faces, f );\n\n\t\t// TODO optimize this!\n\t\tvar vs = [ f.v1, f.v2, f.v3 ];\n\t\tvar v1, v2;\n\n\t\tfor ( var i = 0; i < 3; i ++ ) {\n\n\t\t\tv1 = vs[ i ];\n\t\t\tv2 = vs[ ( i + 1 ) % 3 ];\n\n\t\t\tif ( ! v1 || ! v2 ) continue;\n\n\t\t\tv1.removeIfNonNeighbor( v2 );\n\t\t\tv2.removeIfNonNeighbor( v1 );\n\n\t\t}\n\n\t}\n\n\tfunction collapse( vertices, faces, u, v ) { // u and v are pointers to vertices of an edge\n\n\t\t// Collapse the edge uv by moving vertex u onto v\n\n\t\tif ( ! v ) {\n\n\t\t\t// u is a vertex all by itself so just delete it..\n\t\t\tremoveVertex( u, vertices );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar i;\n\t\tvar tmpVertices = [];\n\n\t\tfor ( i = 0; i < u.neighbors.length; i ++ ) {\n\n\t\t\ttmpVertices.push( u.neighbors[ i ] );\n\n\t\t}\n\n\n\t\t// delete triangles on edge uv:\n\t\tfor ( i = u.faces.length - 1; i >= 0; i -- ) {\n\n\t\t\tif ( u.faces[ i ].hasVertex( v ) ) {\n\n\t\t\t\tremoveFace( u.faces[ i ], faces );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// update remaining triangles to have v instead of u\n\t\tfor ( i = u.faces.length - 1; i >= 0; i -- ) {\n\n\t\t\tu.faces[ i ].replaceVertex( u, v );\n\n\t\t}\n\n\n\t\tremoveVertex( u, vertices );\n\n\t\t// recompute the edge collapse costs in neighborhood\n\t\tfor ( i = 0; i < tmpVertices.length; i ++ ) {\n\n\t\t\tcomputeEdgeCostAtVertex( tmpVertices[ i ] );\n\n\t\t}\n\n\t}\n\n\n\n\tfunction minimumCostEdge( vertices ) {\n\n\t\t// O(n * n) approach. TODO optimize this\n\n\t\tvar least = vertices[ 0 ];\n\n\t\tfor ( var i = 0; i < vertices.length; i ++ ) {\n\n\t\t\tif ( vertices[ i ].collapseCost < least.collapseCost ) {\n\n\t\t\t\tleast = vertices[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn least;\n\n\t}\n\n\t// we use a triangle class to represent structure of face slightly differently\n\n\tfunction Triangle( v1, v2, v3, a, b, c ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t\tthis.normal = new Vector3();\n\n\t\tthis.computeNormal();\n\n\t\tv1.faces.push( this );\n\t\tv1.addUniqueNeighbor( v2 );\n\t\tv1.addUniqueNeighbor( v3 );\n\n\t\tv2.faces.push( this );\n\t\tv2.addUniqueNeighbor( v1 );\n\t\tv2.addUniqueNeighbor( v3 );\n\n\n\t\tv3.faces.push( this );\n\t\tv3.addUniqueNeighbor( v1 );\n\t\tv3.addUniqueNeighbor( v2 );\n\n\t}\n\n\tTriangle.prototype.computeNormal = function () {\n\n\t\tvar vA = this.v1.position;\n\t\tvar vB = this.v2.position;\n\t\tvar vC = this.v3.position;\n\n\t\tcb.subVectors( vC, vB );\n\t\tab.subVectors( vA, vB );\n\t\tcb.cross( ab ).normalize();\n\n\t\tthis.normal.copy( cb );\n\n\t};\n\n\tTriangle.prototype.hasVertex = function ( v ) {\n\n\t\treturn v === this.v1 || v === this.v2 || v === this.v3;\n\n\t};\n\n\tTriangle.prototype.replaceVertex = function ( oldv, newv ) {\n\n\t\tif ( oldv === this.v1 ) this.v1 = newv;\n\t\telse if ( oldv === this.v2 ) this.v2 = newv;\n\t\telse if ( oldv === this.v3 ) this.v3 = newv;\n\n\t\tremoveFromArray( oldv.faces, this );\n\t\tnewv.faces.push( this );\n\n\n\t\toldv.removeIfNonNeighbor( this.v1 );\n\t\tthis.v1.removeIfNonNeighbor( oldv );\n\n\t\toldv.removeIfNonNeighbor( this.v2 );\n\t\tthis.v2.removeIfNonNeighbor( oldv );\n\n\t\toldv.removeIfNonNeighbor( this.v3 );\n\t\tthis.v3.removeIfNonNeighbor( oldv );\n\n\t\tthis.v1.addUniqueNeighbor( this.v2 );\n\t\tthis.v1.addUniqueNeighbor( this.v3 );\n\n\t\tthis.v2.addUniqueNeighbor( this.v1 );\n\t\tthis.v2.addUniqueNeighbor( this.v3 );\n\n\t\tthis.v3.addUniqueNeighbor( this.v1 );\n\t\tthis.v3.addUniqueNeighbor( this.v2 );\n\n\t\tthis.computeNormal();\n\n\t};\n\n\tfunction Vertex( v, id ) {\n\n\t\tthis.position = v;\n\n\t\tthis.id = id; // old index id\n\n\t\tthis.faces = []; // faces vertex is connected\n\t\tthis.neighbors = []; // neighbouring vertices aka \"adjacentVertices\"\n\n\t\t// these will be computed in computeEdgeCostAtVertex()\n\t\tthis.collapseCost = 0; // cost of collapsing this vertex, the less the better. aka objdist\n\t\tthis.collapseNeighbor = null; // best candinate for collapsing\n\n\t}\n\n\tVertex.prototype.addUniqueNeighbor = function ( vertex ) {\n\n\t\tpushIfUnique( this.neighbors, vertex );\n\n\t};\n\n\tVertex.prototype.removeIfNonNeighbor = function ( n ) {\n\n\t\tvar neighbors = this.neighbors;\n\t\tvar faces = this.faces;\n\n\t\tvar offset = neighbors.indexOf( n );\n\t\tif ( offset === - 1 ) return;\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tif ( faces[ i ].hasVertex( n ) ) return;\n\n\t\t}\n\n\t\tneighbors.splice( offset, 1 );\n\n\t};\n\n\tSimplifyModifier.prototype.modify = function ( geometry, count ) {\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tgeometry = new Geometry().fromBufferGeometry( geometry );\n\n\t\t}\n\n\t\tgeometry.mergeVertices();\n\n\t\tvar oldVertices = geometry.vertices; // Three Position\n\t\tvar oldFaces = geometry.faces; // Three Face\n\n\t\t// conversion\n\t\tvar vertices = [];\n\t\tvar faces = [];\n\n\t\tvar i, il;\n\n\t\t//\n\t\t// put data of original geometry in different data structures\n\t\t//\n\n\t\t// add vertices\n\n\t\tfor ( i = 0, il = oldVertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = new Vertex( oldVertices[ i ], i );\n\t\t\tvertices.push( vertex );\n\n\t\t}\n\n\t\t// add faces\n\n\t\tfor ( i = 0, il = oldFaces.length; i < il; i ++ ) {\n\n\t\t\tvar face = oldFaces[ i ];\n\n\t\t\tvar a = face.a;\n\t\t\tvar b = face.b;\n\t\t\tvar c = face.c;\n\n\t\t\tvar triangle = new Triangle( vertices[ a ], vertices[ b ], vertices[ c ], a, b, c );\n\t\t\tfaces.push( triangle );\n\n\t\t}\n\n\t\t// compute all edge collapse costs\n\n\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tcomputeEdgeCostAtVertex( vertices[ i ] );\n\n\t\t}\n\n\t\tvar nextVertex;\n\n\t\tvar z = count;\n\n\t\twhile ( z -- ) {\n\n\t\t\tnextVertex = minimumCostEdge( vertices );\n\n\t\t\tif ( ! nextVertex ) {\n\n\t\t\t\tconsole.log( 'THREE.SimplifyModifier: No next vertex' );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tcollapse( vertices, faces, nextVertex, nextVertex.collapseNeighbor );\n\n\t\t}\n\n\t\t//\n\n\t\tvar simplifiedGeometry = new BufferGeometry();\n\t\tvar position = [];\n\t\tvar index = [];\n\n\t\t//\n\n\t\tfor ( i = 0; i < vertices.length; i ++ ) {\n\n\t\t\tvar vertex = vertices[ i ].position;\n\t\t\tposition.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\t//\n\n\t\tfor ( i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tvar a = vertices.indexOf( face.v1 );\n\t\t\tvar b = vertices.indexOf( face.v2 );\n\t\t\tvar c = vertices.indexOf( face.v3 );\n\n\t\t\tindex.push( a, b, c );\n\n\t\t}\n\n\t\t//\n\n\t\tsimplifiedGeometry.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\t\tsimplifiedGeometry.setIndex( index );\n\n\t\treturn simplifiedGeometry;\n\n\t};\n\n} )();\n\nexport { SimplifyModifier };\n","/**\n *\t@author zz85 / http://twitter.com/blurspline / http://www.lab4games.net/zz85/blog\n *\t@author centerionware / http://www.centerionware.com\n *\n *\tSubdivision Geometry Modifier\n *\t\tusing Loop Subdivision Scheme\n *\n *\tReferences:\n *\t\thttp://graphics.stanford.edu/~mdfisher/subdivision.html\n *\t\thttp://www.holmes3d.net/graphics/subdivision/\n *\t\thttp://www.cs.rutgers.edu/~decarlo/readings/subdiv-sg00c.pdf\n *\n *\tKnown Issues:\n *\t\t- currently doesn't handle \"Sharp Edges\"\n */\n\nimport {\n\tFace3,\n\tGeometry,\n\tVector2,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar SubdivisionModifier = function ( subdivisions ) {\n\n\tthis.subdivisions = ( subdivisions === undefined ) ? 1 : subdivisions;\n\n};\n\n// Applies the \"modify\" pattern\nSubdivisionModifier.prototype.modify = function ( geometry ) {\n\n\tif ( geometry.isBufferGeometry ) {\n\n\t\tgeometry = new Geometry().fromBufferGeometry( geometry );\n\n\t} else {\n\n\t\tgeometry = geometry.clone();\n\n\t}\n\n\tgeometry.mergeVertices();\n\n\tvar repeats = this.subdivisions;\n\n\twhile ( repeats -- > 0 ) {\n\n\t\tthis.smooth( geometry );\n\n\t}\n\n\tgeometry.computeFaceNormals();\n\tgeometry.computeVertexNormals();\n\n\treturn geometry;\n\n};\n\n( function () {\n\n\t// Some constants\n\tvar ABC = [ 'a', 'b', 'c' ];\n\n\n\tfunction getEdge( a, b, map ) {\n\n\t\tvar vertexIndexA = Math.min( a, b );\n\t\tvar vertexIndexB = Math.max( a, b );\n\n\t\tvar key = vertexIndexA + \"_\" + vertexIndexB;\n\n\t\treturn map[ key ];\n\n\t}\n\n\n\tfunction processEdge( a, b, vertices, map, face, metaVertices ) {\n\n\t\tvar vertexIndexA = Math.min( a, b );\n\t\tvar vertexIndexB = Math.max( a, b );\n\n\t\tvar key = vertexIndexA + \"_\" + vertexIndexB;\n\n\t\tvar edge;\n\n\t\tif ( key in map ) {\n\n\t\t\tedge = map[ key ];\n\n\t\t} else {\n\n\t\t\tvar vertexA = vertices[ vertexIndexA ];\n\t\t\tvar vertexB = vertices[ vertexIndexB ];\n\n\t\t\tedge = {\n\n\t\t\t\ta: vertexA, // pointer reference\n\t\t\t\tb: vertexB,\n\t\t\t\tnewEdge: null,\n\t\t\t\t// aIndex: a, // numbered reference\n\t\t\t\t// bIndex: b,\n\t\t\t\tfaces: [] // pointers to face\n\n\t\t\t};\n\n\t\t\tmap[ key ] = edge;\n\n\t\t}\n\n\t\tedge.faces.push( face );\n\n\t\tmetaVertices[ a ].edges.push( edge );\n\t\tmetaVertices[ b ].edges.push( edge );\n\n\n\t}\n\n\tfunction generateLookups( vertices, faces, metaVertices, edges ) {\n\n\t\tvar i, il, face;\n\n\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tmetaVertices[ i ] = { edges: [] };\n\n\t\t}\n\n\t\tfor ( i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tface = faces[ i ];\n\n\t\t\tprocessEdge( face.a, face.b, vertices, edges, face, metaVertices );\n\t\t\tprocessEdge( face.b, face.c, vertices, edges, face, metaVertices );\n\t\t\tprocessEdge( face.c, face.a, vertices, edges, face, metaVertices );\n\n\t\t}\n\n\t}\n\n\tfunction newFace( newFaces, a, b, c, materialIndex ) {\n\n\t\tnewFaces.push( new Face3( a, b, c, undefined, undefined, materialIndex ) );\n\n\t}\n\n\tfunction midpoint( a, b ) {\n\n\t\treturn ( Math.abs( b - a ) / 2 ) + Math.min( a, b );\n\n\t}\n\n\tfunction newUv( newUvs, a, b, c ) {\n\n\t\tnewUvs.push( [ a.clone(), b.clone(), c.clone() ] );\n\n\t}\n\n\t/////////////////////////////\n\n\t// Performs one iteration of Subdivision\n\tSubdivisionModifier.prototype.smooth = function ( geometry ) {\n\n\t\tvar tmp = new Vector3();\n\n\t\tvar oldVertices, oldFaces, oldUvs;\n\t\tvar newVertices, newFaces, newUVs = [];\n\n\t\tvar n, i, il, j, k;\n\t\tvar metaVertices, sourceEdges;\n\n\t\t// new stuff.\n\t\tvar sourceEdges, newEdgeVertices, newSourceVertices;\n\n\t\toldVertices = geometry.vertices; // { x, y, z}\n\t\toldFaces = geometry.faces; // { a: oldVertex1, b: oldVertex2, c: oldVertex3 }\n\t\toldUvs = geometry.faceVertexUvs;\n\n\t\tvar hasUvs = oldUvs[ 0 ] !== undefined && oldUvs[ 0 ].length > 0;\n\n\t\tif ( hasUvs ) {\n\n\t\t\tfor ( var j = 0; j < oldUvs.length; j ++ ) {\n\n\t\t\t\tnewUVs.push( [] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t/******************************************************\n\t\t *\n\t\t * Step 0: Preprocess Geometry to Generate edges Lookup\n\t\t *\n\t\t *******************************************************/\n\n\t\tmetaVertices = new Array( oldVertices.length );\n\t\tsourceEdges = {}; // Edge => { oldVertex1, oldVertex2, faces[]  }\n\n\t\tgenerateLookups( oldVertices, oldFaces, metaVertices, sourceEdges );\n\n\n\t\t/******************************************************\n\t\t *\n\t\t *\tStep 1.\n\t\t *\tFor each edge, create a new Edge Vertex,\n\t\t *\tthen position it.\n\t\t *\n\t\t *******************************************************/\n\n\t\tnewEdgeVertices = [];\n\t\tvar other, currentEdge, newEdge, face;\n\t\tvar edgeVertexWeight, adjacentVertexWeight, connectedFaces;\n\n\t\tfor ( i in sourceEdges ) {\n\n\t\t\tcurrentEdge = sourceEdges[ i ];\n\t\t\tnewEdge = new Vector3();\n\n\t\t\tedgeVertexWeight = 3 / 8;\n\t\t\tadjacentVertexWeight = 1 / 8;\n\n\t\t\tconnectedFaces = currentEdge.faces.length;\n\n\t\t\t// check how many linked faces. 2 should be correct.\n\t\t\tif ( connectedFaces != 2 ) {\n\n\t\t\t\t// if length is not 2, handle condition\n\t\t\t\tedgeVertexWeight = 0.5;\n\t\t\t\tadjacentVertexWeight = 0;\n\n\t\t\t\tif ( connectedFaces != 1 ) {\n\n\t\t\t\t\t// console.warn( 'Subdivision Modifier: Number of connected faces != 2, is: ', connectedFaces, currentEdge );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnewEdge.addVectors( currentEdge.a, currentEdge.b ).multiplyScalar( edgeVertexWeight );\n\n\t\t\ttmp.set( 0, 0, 0 );\n\n\t\t\tfor ( j = 0; j < connectedFaces; j ++ ) {\n\n\t\t\t\tface = currentEdge.faces[ j ];\n\n\t\t\t\tfor ( k = 0; k < 3; k ++ ) {\n\n\t\t\t\t\tother = oldVertices[ face[ ABC[ k ] ] ];\n\t\t\t\t\tif ( other !== currentEdge.a && other !== currentEdge.b ) break;\n\n\t\t\t\t}\n\n\t\t\t\ttmp.add( other );\n\n\t\t\t}\n\n\t\t\ttmp.multiplyScalar( adjacentVertexWeight );\n\t\t\tnewEdge.add( tmp );\n\n\t\t\tcurrentEdge.newEdge = newEdgeVertices.length;\n\t\t\tnewEdgeVertices.push( newEdge );\n\n\t\t\t// console.log(currentEdge, newEdge);\n\n\t\t}\n\n\t\t/******************************************************\n\t\t *\n\t\t *\tStep 2.\n\t\t *\tReposition each source vertices.\n\t\t *\n\t\t *******************************************************/\n\n\t\tvar beta, sourceVertexWeight, connectingVertexWeight;\n\t\tvar connectingEdge, connectingEdges, oldVertex, newSourceVertex;\n\t\tnewSourceVertices = [];\n\n\t\tfor ( i = 0, il = oldVertices.length; i < il; i ++ ) {\n\n\t\t\toldVertex = oldVertices[ i ];\n\n\t\t\t// find all connecting edges (using lookupTable)\n\t\t\tconnectingEdges = metaVertices[ i ].edges;\n\t\t\tn = connectingEdges.length;\n\n\t\t\tif ( n == 3 ) {\n\n\t\t\t\tbeta = 3 / 16;\n\n\t\t\t} else if ( n > 3 ) {\n\n\t\t\t\tbeta = 3 / ( 8 * n ); // Warren's modified formula\n\n\t\t\t}\n\n\t\t\t// Loop's original beta formula\n\t\t\t// beta = 1 / n * ( 5/8 - Math.pow( 3/8 + 1/4 * Math.cos( 2 * Math. PI / n ), 2) );\n\n\t\t\tsourceVertexWeight = 1 - n * beta;\n\t\t\tconnectingVertexWeight = beta;\n\n\t\t\tif ( n <= 2 ) {\n\n\t\t\t\t// crease and boundary rules\n\t\t\t\t// console.warn('crease and boundary rules');\n\n\t\t\t\tif ( n == 2 ) {\n\n\t\t\t\t\t// console.warn( '2 connecting edges', connectingEdges );\n\t\t\t\t\tsourceVertexWeight = 3 / 4;\n\t\t\t\t\tconnectingVertexWeight = 1 / 8;\n\n\t\t\t\t\t// sourceVertexWeight = 1;\n\t\t\t\t\t// connectingVertexWeight = 0;\n\n\t\t\t\t} else if ( n == 1 ) {\n\n\t\t\t\t\t// console.warn( 'only 1 connecting edge' );\n\n\t\t\t\t} else if ( n == 0 ) {\n\n\t\t\t\t\t// console.warn( '0 connecting edges' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnewSourceVertex = oldVertex.clone().multiplyScalar( sourceVertexWeight );\n\n\t\t\ttmp.set( 0, 0, 0 );\n\n\t\t\tfor ( j = 0; j < n; j ++ ) {\n\n\t\t\t\tconnectingEdge = connectingEdges[ j ];\n\t\t\t\tother = connectingEdge.a !== oldVertex ? connectingEdge.a : connectingEdge.b;\n\t\t\t\ttmp.add( other );\n\n\t\t\t}\n\n\t\t\ttmp.multiplyScalar( connectingVertexWeight );\n\t\t\tnewSourceVertex.add( tmp );\n\n\t\t\tnewSourceVertices.push( newSourceVertex );\n\n\t\t}\n\n\n\t\t/******************************************************\n\t\t *\n\t\t *\tStep 3.\n\t\t *\tGenerate Faces between source vertices\n\t\t *\tand edge vertices.\n\t\t *\n\t\t *******************************************************/\n\n\t\tnewVertices = newSourceVertices.concat( newEdgeVertices );\n\t\tvar sl = newSourceVertices.length, edge1, edge2, edge3;\n\t\tnewFaces = [];\n\n\t\tvar uv, x0, x1, x2;\n\t\tvar x3 = new Vector2();\n\t\tvar x4 = new Vector2();\n\t\tvar x5 = new Vector2();\n\n\t\tfor ( i = 0, il = oldFaces.length; i < il; i ++ ) {\n\n\t\t\tface = oldFaces[ i ];\n\n\t\t\t// find the 3 new edges vertex of each old face\n\n\t\t\tedge1 = getEdge( face.a, face.b, sourceEdges ).newEdge + sl;\n\t\t\tedge2 = getEdge( face.b, face.c, sourceEdges ).newEdge + sl;\n\t\t\tedge3 = getEdge( face.c, face.a, sourceEdges ).newEdge + sl;\n\n\t\t\t// create 4 faces.\n\n\t\t\tnewFace( newFaces, edge1, edge2, edge3, face.materialIndex );\n\t\t\tnewFace( newFaces, face.a, edge1, edge3, face.materialIndex );\n\t\t\tnewFace( newFaces, face.b, edge2, edge1, face.materialIndex );\n\t\t\tnewFace( newFaces, face.c, edge3, edge2, face.materialIndex );\n\n\t\t\t// create 4 new uv's\n\n\t\t\tif ( hasUvs ) {\n\n\t\t\t\tfor ( var j = 0; j < oldUvs.length; j ++ ) {\n\n\t\t\t\t\tuv = oldUvs[ j ][ i ];\n\n\t\t\t\t\tx0 = uv[ 0 ];\n\t\t\t\t\tx1 = uv[ 1 ];\n\t\t\t\t\tx2 = uv[ 2 ];\n\n\t\t\t\t\tx3.set( midpoint( x0.x, x1.x ), midpoint( x0.y, x1.y ) );\n\t\t\t\t\tx4.set( midpoint( x1.x, x2.x ), midpoint( x1.y, x2.y ) );\n\t\t\t\t\tx5.set( midpoint( x0.x, x2.x ), midpoint( x0.y, x2.y ) );\n\n\t\t\t\t\tnewUv( newUVs[ j ], x3, x4, x5 );\n\t\t\t\t\tnewUv( newUVs[ j ], x0, x3, x5 );\n\n\t\t\t\t\tnewUv( newUVs[ j ], x1, x4, x3 );\n\t\t\t\t\tnewUv( newUVs[ j ], x2, x5, x4 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Overwrite old arrays\n\t\tgeometry.vertices = newVertices;\n\t\tgeometry.faces = newFaces;\n\t\tif ( hasUvs ) geometry.faceVertexUvs = newUVs;\n\n\t\t// console.log('done');\n\n\t};\n\n} )();\n\nexport { SubdivisionModifier };\n","/**\n * Break faces with edges longer than maxEdgeLength\n * - not recursive\n *\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport {\n\tFace3\n} from \"../../../build/three.module.js\";\n\nvar TessellateModifier = function ( maxEdgeLength ) {\n\n\tthis.maxEdgeLength = maxEdgeLength;\n\n};\n\nTessellateModifier.prototype.modify = function ( geometry ) {\n\n\tvar edge;\n\n\tvar faces = [];\n\tvar faceVertexUvs = [];\n\tvar maxEdgeLengthSquared = this.maxEdgeLength * this.maxEdgeLength;\n\n\tfor ( var i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\tfaceVertexUvs[ i ] = [];\n\n\t}\n\n\tfor ( var i = 0, il = geometry.faces.length; i < il; i ++ ) {\n\n\t\tvar face = geometry.faces[ i ];\n\n\t\tif ( face instanceof Face3 ) {\n\n\t\t\tvar a = face.a;\n\t\t\tvar b = face.b;\n\t\t\tvar c = face.c;\n\n\t\t\tvar va = geometry.vertices[ a ];\n\t\t\tvar vb = geometry.vertices[ b ];\n\t\t\tvar vc = geometry.vertices[ c ];\n\n\t\t\tvar dab = va.distanceToSquared( vb );\n\t\t\tvar dbc = vb.distanceToSquared( vc );\n\t\t\tvar dac = va.distanceToSquared( vc );\n\n\t\t\tif ( dab > maxEdgeLengthSquared || dbc > maxEdgeLengthSquared || dac > maxEdgeLengthSquared ) {\n\n\t\t\t\tvar m = geometry.vertices.length;\n\n\t\t\t\tvar triA = face.clone();\n\t\t\t\tvar triB = face.clone();\n\n\t\t\t\tif ( dab >= dbc && dab >= dac ) {\n\n\t\t\t\t\tvar vm = va.clone();\n\t\t\t\t\tvm.lerp( vb, 0.5 );\n\n\t\t\t\t\ttriA.a = a;\n\t\t\t\t\ttriA.b = m;\n\t\t\t\t\ttriA.c = c;\n\n\t\t\t\t\ttriB.a = m;\n\t\t\t\t\ttriB.b = b;\n\t\t\t\t\ttriB.c = c;\n\n\t\t\t\t\tif ( face.vertexNormals.length === 3 ) {\n\n\t\t\t\t\t\tvar vnm = face.vertexNormals[ 0 ].clone();\n\t\t\t\t\t\tvnm.lerp( face.vertexNormals[ 1 ], 0.5 );\n\n\t\t\t\t\t\ttriA.vertexNormals[ 1 ].copy( vnm );\n\t\t\t\t\t\ttriB.vertexNormals[ 0 ].copy( vnm );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( face.vertexColors.length === 3 ) {\n\n\t\t\t\t\t\tvar vcm = face.vertexColors[ 0 ].clone();\n\t\t\t\t\t\tvcm.lerp( face.vertexColors[ 1 ], 0.5 );\n\n\t\t\t\t\t\ttriA.vertexColors[ 1 ].copy( vcm );\n\t\t\t\t\t\ttriB.vertexColors[ 0 ].copy( vcm );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tedge = 0;\n\n\t\t\t\t} else if ( dbc >= dab && dbc >= dac ) {\n\n\t\t\t\t\tvar vm = vb.clone();\n\t\t\t\t\tvm.lerp( vc, 0.5 );\n\n\t\t\t\t\ttriA.a = a;\n\t\t\t\t\ttriA.b = b;\n\t\t\t\t\ttriA.c = m;\n\n\t\t\t\t\ttriB.a = m;\n\t\t\t\t\ttriB.b = c;\n\t\t\t\t\ttriB.c = a;\n\n\t\t\t\t\tif ( face.vertexNormals.length === 3 ) {\n\n\t\t\t\t\t\tvar vnm = face.vertexNormals[ 1 ].clone();\n\t\t\t\t\t\tvnm.lerp( face.vertexNormals[ 2 ], 0.5 );\n\n\t\t\t\t\t\ttriA.vertexNormals[ 2 ].copy( vnm );\n\n\t\t\t\t\t\ttriB.vertexNormals[ 0 ].copy( vnm );\n\t\t\t\t\t\ttriB.vertexNormals[ 1 ].copy( face.vertexNormals[ 2 ] );\n\t\t\t\t\t\ttriB.vertexNormals[ 2 ].copy( face.vertexNormals[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( face.vertexColors.length === 3 ) {\n\n\t\t\t\t\t\tvar vcm = face.vertexColors[ 1 ].clone();\n\t\t\t\t\t\tvcm.lerp( face.vertexColors[ 2 ], 0.5 );\n\n\t\t\t\t\t\ttriA.vertexColors[ 2 ].copy( vcm );\n\n\t\t\t\t\t\ttriB.vertexColors[ 0 ].copy( vcm );\n\t\t\t\t\t\ttriB.vertexColors[ 1 ].copy( face.vertexColors[ 2 ] );\n\t\t\t\t\t\ttriB.vertexColors[ 2 ].copy( face.vertexColors[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tedge = 1;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar vm = va.clone();\n\t\t\t\t\tvm.lerp( vc, 0.5 );\n\n\t\t\t\t\ttriA.a = a;\n\t\t\t\t\ttriA.b = b;\n\t\t\t\t\ttriA.c = m;\n\n\t\t\t\t\ttriB.a = m;\n\t\t\t\t\ttriB.b = b;\n\t\t\t\t\ttriB.c = c;\n\n\t\t\t\t\tif ( face.vertexNormals.length === 3 ) {\n\n\t\t\t\t\t\tvar vnm = face.vertexNormals[ 0 ].clone();\n\t\t\t\t\t\tvnm.lerp( face.vertexNormals[ 2 ], 0.5 );\n\n\t\t\t\t\t\ttriA.vertexNormals[ 2 ].copy( vnm );\n\t\t\t\t\t\ttriB.vertexNormals[ 0 ].copy( vnm );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( face.vertexColors.length === 3 ) {\n\n\t\t\t\t\t\tvar vcm = face.vertexColors[ 0 ].clone();\n\t\t\t\t\t\tvcm.lerp( face.vertexColors[ 2 ], 0.5 );\n\n\t\t\t\t\t\ttriA.vertexColors[ 2 ].copy( vcm );\n\t\t\t\t\t\ttriB.vertexColors[ 0 ].copy( vcm );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tedge = 2;\n\n\t\t\t\t}\n\n\t\t\t\tfaces.push( triA, triB );\n\t\t\t\tgeometry.vertices.push( vm );\n\n\t\t\t\tfor ( var j = 0, jl = geometry.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\t\tif ( geometry.faceVertexUvs[ j ].length ) {\n\n\t\t\t\t\t\tvar uvs = geometry.faceVertexUvs[ j ][ i ];\n\n\t\t\t\t\t\tvar uvA = uvs[ 0 ];\n\t\t\t\t\t\tvar uvB = uvs[ 1 ];\n\t\t\t\t\t\tvar uvC = uvs[ 2 ];\n\n\t\t\t\t\t\t// AB\n\n\t\t\t\t\t\tif ( edge === 0 ) {\n\n\t\t\t\t\t\t\tvar uvM = uvA.clone();\n\t\t\t\t\t\t\tuvM.lerp( uvB, 0.5 );\n\n\t\t\t\t\t\t\tvar uvsTriA = [ uvA.clone(), uvM.clone(), uvC.clone() ];\n\t\t\t\t\t\t\tvar uvsTriB = [ uvM.clone(), uvB.clone(), uvC.clone() ];\n\n\t\t\t\t\t\t\t// BC\n\n\t\t\t\t\t\t} else if ( edge === 1 ) {\n\n\t\t\t\t\t\t\tvar uvM = uvB.clone();\n\t\t\t\t\t\t\tuvM.lerp( uvC, 0.5 );\n\n\t\t\t\t\t\t\tvar uvsTriA = [ uvA.clone(), uvB.clone(), uvM.clone() ];\n\t\t\t\t\t\t\tvar uvsTriB = [ uvM.clone(), uvC.clone(), uvA.clone() ];\n\n\t\t\t\t\t\t\t// AC\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar uvM = uvA.clone();\n\t\t\t\t\t\t\tuvM.lerp( uvC, 0.5 );\n\n\t\t\t\t\t\t\tvar uvsTriA = [ uvA.clone(), uvB.clone(), uvM.clone() ];\n\t\t\t\t\t\t\tvar uvsTriB = [ uvM.clone(), uvB.clone(), uvC.clone() ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfaceVertexUvs[ j ].push( uvsTriA, uvsTriB );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfaces.push( face );\n\n\t\t\t\tfor ( var j = 0, jl = geometry.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\t\tfaceVertexUvs[ j ].push( geometry.faceVertexUvs[ j ][ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tgeometry.faces = faces;\n\tgeometry.faceVertexUvs = faceVertexUvs;\n\n};\n\nexport { TessellateModifier };\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/**\n * @author zz85 / https://github.com/zz85\n *\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\n *\n * First implemented by Simon Wallner\n * http://www.simonwallner.at/projects/atmospheric-scattering\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n*/\n\nimport {\n\tBackSide,\n\tBoxBufferGeometry,\n\tMesh,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3\n} from \"../../../build/three.module.js\";\n\nvar Sky = function () {\n\n\tvar shader = Sky.SkyShader;\n\n\tvar material = new ShaderMaterial( {\n\t\tfragmentShader: shader.fragmentShader,\n\t\tvertexShader: shader.vertexShader,\n\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\tside: BackSide,\n\t\tdepthWrite: false\n\t} );\n\n\tMesh.call( this, new BoxBufferGeometry( 1, 1, 1 ), material );\n\n};\n\nSky.prototype = Object.create( Mesh.prototype );\n\nSky.SkyShader = {\n\n\tuniforms: {\n\t\t\"luminance\": { value: 1 },\n\t\t\"turbidity\": { value: 2 },\n\t\t\"rayleigh\": { value: 1 },\n\t\t\"mieCoefficient\": { value: 0.005 },\n\t\t\"mieDirectionalG\": { value: 0.8 },\n\t\t\"sunPosition\": { value: new Vector3() },\n\t\t\"up\": { value: new Vector3( 0, 1, 0 ) }\n\t},\n\n\tvertexShader: [\n\t\t'uniform vec3 sunPosition;',\n\t\t'uniform float rayleigh;',\n\t\t'uniform float turbidity;',\n\t\t'uniform float mieCoefficient;',\n\t\t'uniform vec3 up;',\n\n\t\t'varying vec3 vWorldPosition;',\n\t\t'varying vec3 vSunDirection;',\n\t\t'varying float vSunfade;',\n\t\t'varying vec3 vBetaR;',\n\t\t'varying vec3 vBetaM;',\n\t\t'varying float vSunE;',\n\n\t\t// constants for atmospheric scattering\n\t\t'const float e = 2.71828182845904523536028747135266249775724709369995957;',\n\t\t'const float pi = 3.141592653589793238462643383279502884197169;',\n\n\t\t// wavelength of used primaries, according to preetham\n\t\t'const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );',\n\t\t// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n\t\t// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n\t\t'const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );',\n\n\t\t// mie stuff\n\t\t// K coefficient for the primaries\n\t\t'const float v = 4.0;',\n\t\t'const vec3 K = vec3( 0.686, 0.678, 0.666 );',\n\t\t// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n\t\t'const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );',\n\n\t\t// earth shadow hack\n\t\t// cutoffAngle = pi / 1.95;\n\t\t'const float cutoffAngle = 1.6110731556870734;',\n\t\t'const float steepness = 1.5;',\n\t\t'const float EE = 1000.0;',\n\n\t\t'float sunIntensity( float zenithAngleCos ) {',\n\t\t'\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );',\n\t\t'\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );',\n\t\t'}',\n\n\t\t'vec3 totalMie( float T ) {',\n\t\t'\tfloat c = ( 0.2 * T ) * 10E-18;',\n\t\t'\treturn 0.434 * c * MieConst;',\n\t\t'}',\n\n\t\t'void main() {',\n\n\t\t'\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );',\n\t\t'\tvWorldPosition = worldPosition.xyz;',\n\n\t\t'\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n\t\t'\tgl_Position.z = gl_Position.w;', // set z to camera.far\n\n\t\t'\tvSunDirection = normalize( sunPosition );',\n\n\t\t'\tvSunE = sunIntensity( dot( vSunDirection, up ) );',\n\n\t\t'\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );',\n\n\t\t'\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );',\n\n\t\t// extinction (absorbtion + out scattering)\n\t\t// rayleigh coefficients\n\t\t'\tvBetaR = totalRayleigh * rayleighCoefficient;',\n\n\t\t// mie coefficients\n\t\t'\tvBetaM = totalMie( turbidity ) * mieCoefficient;',\n\n\t\t'}'\n\t].join( '\\n' ),\n\n\tfragmentShader: [\n\t\t'varying vec3 vWorldPosition;',\n\t\t'varying vec3 vSunDirection;',\n\t\t'varying float vSunfade;',\n\t\t'varying vec3 vBetaR;',\n\t\t'varying vec3 vBetaM;',\n\t\t'varying float vSunE;',\n\n\t\t'uniform float luminance;',\n\t\t'uniform float mieDirectionalG;',\n\t\t'uniform vec3 up;',\n\n\t\t'const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );',\n\n\t\t// constants for atmospheric scattering\n\t\t'const float pi = 3.141592653589793238462643383279502884197169;',\n\n\t\t'const float n = 1.0003;', // refractive index of air\n\t\t'const float N = 2.545E25;', // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n\t\t// optical length at zenith for molecules\n\t\t'const float rayleighZenithLength = 8.4E3;',\n\t\t'const float mieZenithLength = 1.25E3;',\n\t\t// 66 arc seconds -> degrees, and the cosine of that\n\t\t'const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;',\n\n\t\t// 3.0 / ( 16.0 * pi )\n\t\t'const float THREE_OVER_SIXTEENPI = 0.05968310365946075;',\n\t\t// 1.0 / ( 4.0 * pi )\n\t\t'const float ONE_OVER_FOURPI = 0.07957747154594767;',\n\n\t\t'float rayleighPhase( float cosTheta ) {',\n\t\t'\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );',\n\t\t'}',\n\n\t\t'float hgPhase( float cosTheta, float g ) {',\n\t\t'\tfloat g2 = pow( g, 2.0 );',\n\t\t'\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );',\n\t\t'\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );',\n\t\t'}',\n\n\t\t// Filmic ToneMapping http://filmicgames.com/archives/75\n\t\t'const float A = 0.15;',\n\t\t'const float B = 0.50;',\n\t\t'const float C = 0.10;',\n\t\t'const float D = 0.20;',\n\t\t'const float E = 0.02;',\n\t\t'const float F = 0.30;',\n\n\t\t'const float whiteScale = 1.0748724675633854;', // 1.0 / Uncharted2Tonemap(1000.0)\n\n\t\t'vec3 Uncharted2Tonemap( vec3 x ) {',\n\t\t'\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;',\n\t\t'}',\n\n\n\t\t'void main() {',\n\n\t\t'\tvec3 direction = normalize( vWorldPosition - cameraPos );',\n\n\t\t// optical length\n\t\t// cutoff angle at 90 to avoid singularity in next formula.\n\t\t'\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );',\n\t\t'\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );',\n\t\t'\tfloat sR = rayleighZenithLength * inverse;',\n\t\t'\tfloat sM = mieZenithLength * inverse;',\n\n\t\t// combined extinction factor\n\t\t'\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );',\n\n\t\t// in scattering\n\t\t'\tfloat cosTheta = dot( direction, vSunDirection );',\n\n\t\t'\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );',\n\t\t'\tvec3 betaRTheta = vBetaR * rPhase;',\n\n\t\t'\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );',\n\t\t'\tvec3 betaMTheta = vBetaM * mPhase;',\n\n\t\t'\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );',\n\t\t'\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );',\n\n\t\t// nightsky\n\t\t'\tfloat theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]',\n\t\t'\tfloat phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]',\n\t\t'\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );',\n\t\t'\tvec3 L0 = vec3( 0.1 ) * Fex;',\n\n\t\t// composition + solar disc\n\t\t'\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );',\n\t\t'\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;',\n\n\t\t'\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );',\n\n\t\t'\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );',\n\t\t'\tvec3 color = curr * whiteScale;',\n\n\t\t'\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );',\n\n\t\t'\tgl_FragColor = vec4( retColor, 1.0 );',\n\n\t\t'}'\n\t].join( '\\n' )\n\n};\n\nexport { Sky };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport React, { forwardRef, useRef, useState, useMemo, useEffect, useLayoutEffect, Children, createElement } from 'react';\nimport { useFrame, useUpdate, useThree, useLoader, addEffect, addAfterEffect, applyProps } from 'react-three-fiber';\nimport mergeRefs from 'react-merge-refs';\nimport { Vector2, AudioListener, AudioLoader, CubeTextureLoader, DefaultLoadingManager, TextureLoader, Vector3, PerspectiveCamera as PerspectiveCamera$1, OrthographicCamera as OrthographicCamera$1, Matrix4, Ray, Sphere as Sphere$1, Color, Raycaster, Camera, BufferGeometry, Geometry, MeshPhysicalMaterial, MeshStandardMaterial, ShaderMaterial, ShaderChunk, Spherical, AdditiveBlending, Shape, RepeatWrapping } from 'three';\nimport { LineGeometry } from 'three/examples/jsm/lines/LineGeometry';\nimport { LineMaterial } from 'three/examples/jsm/lines/LineMaterial';\nimport { Line2 } from 'three/examples/jsm/lines/Line2';\nimport { Text as Text$1 } from 'r3f-troika';\nimport { DeviceOrientationControls as DeviceOrientationControls$1 } from 'three/examples/jsm/controls/DeviceOrientationControls';\nimport { FlyControls as FlyControls$1 } from 'three/examples/jsm/controls/FlyControls';\nimport { MapControls as MapControls$1, OrbitControls as OrbitControls$1 } from 'three/examples/jsm/controls/OrbitControls';\nimport { TrackballControls as TrackballControls$1 } from 'three/examples/jsm/controls/TrackballControls';\nimport { TransformControls as TransformControls$1 } from 'three/examples/jsm/controls/TransformControls';\nimport pick from 'lodash.pick';\nimport omit from 'lodash.omit';\nimport { PointerLockControls as PointerLockControls$1 } from 'three/examples/jsm/controls/PointerLockControls';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport create$1 from 'zustand';\nimport ReactDOM from 'react-dom';\nimport { Reflector as Reflector$1 } from 'three/examples/jsm/objects/Reflector';\nimport * as StatsImpl from 'three/examples/js/libs/stats.min';\nimport { SimplifyModifier } from 'three/examples/jsm/modifiers/SimplifyModifier';\nimport { SubdivisionModifier } from 'three/examples/jsm/modifiers/SubdivisionModifier';\nimport { TessellateModifier } from 'three/examples/jsm/modifiers/TessellateModifier';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Sky as Sky$1 } from 'three/examples/jsm/objects/Sky';\nimport { useTransition, a } from '@react-spring/web';\n\nfunction create(type) {\n  const El = type + 'BufferGeometry';\n  return /*#__PURE__*/forwardRef((_ref, ref) => {\n    let {\n      args,\n      children\n    } = _ref,\n        props = _objectWithoutPropertiesLoose(_ref, [\"args\", \"children\"]);\n\n    return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n      ref: ref\n    }, props), /*#__PURE__*/React.createElement(El, {\n      attach: \"geometry\",\n      args: args\n    }), children);\n  });\n}\n\nconst Box = create('box');\nconst Circle = create('circle');\nconst Cone = create('cone');\nconst Cylinder = create('cylinder');\nconst Sphere = create('sphere');\nconst Plane = create('plane');\nconst Tube = create('tube');\nconst Torus = create('torus');\nconst TorusKnot = create('torusKnot');\nconst Tetrahedron = create('tetrahedron');\nconst Ring = create('ring');\nconst Polyhedron = create('polyhedron');\nconst Icosahedron = create('icosahedron');\nconst Octahedron = create('octahedron');\nconst Dodecahedron = create('dodecahedron');\nconst Extrude = create('extrude');\nconst Lathe = create('lathe');\nconst Parametric = create('parametric');\n\nconst Billboard = /*#__PURE__*/forwardRef(function Billboard(_ref, ref) {\n  let {\n    follow = true,\n    lockX = false,\n    lockY = false,\n    lockZ = false\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"follow\", \"lockX\", \"lockY\", \"lockZ\"]);\n\n  const localRef = useRef();\n  useFrame(({\n    camera\n  }) => {\n    if (!follow) return;\n\n    if (localRef.current) {\n      const prev = {\n        x: localRef.current.rotation.x,\n        y: localRef.current.rotation.y,\n        z: localRef.current.rotation.z\n      };\n      localRef.current.lookAt(camera.position); // readjust any axis that is locked\n\n      if (lockX) localRef.current.rotation.x = prev.x;\n      if (lockY) localRef.current.rotation.y = prev.y;\n      if (lockZ) localRef.current.rotation.z = prev.z;\n    }\n  });\n  return /*#__PURE__*/React.createElement(Plane, _extends({\n    ref: mergeRefs([localRef, ref])\n  }, props));\n});\n\nconst Detailed = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children,\n    distances\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"distances\"]);\n\n  const lod = useUpdate(lod => {\n    lod.levels.length = 0;\n    lod.children.forEach((object, index) => lod.levels.push({\n      object,\n      distance: distances[index]\n    }));\n  }, []);\n  useFrame(state => {\n    var _lod$current;\n\n    return (_lod$current = lod.current) == null ? void 0 : _lod$current.update(state.camera);\n  });\n  return /*#__PURE__*/React.createElement(\"lOD\", _extends({\n    ref: mergeRefs([lod, ref])\n  }, props), children);\n});\n\nconst Line = /*#__PURE__*/React.forwardRef(function Line(_ref, ref) {\n  let {\n    points,\n    color = 'black',\n    vertexColors,\n    lineWidth,\n    dashed\n  } = _ref,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"points\", \"color\", \"vertexColors\", \"lineWidth\", \"dashed\"]);\n\n  const [line2] = useState(() => new Line2());\n  const [lineGeometry] = useState(() => new LineGeometry());\n  const [lineMaterial] = useState(() => new LineMaterial());\n  const resolution = useMemo(() => new Vector2(512, 512), []);\n  useEffect(() => {\n    lineGeometry.setPositions(points.flat());\n    if (vertexColors) lineGeometry.setColors(vertexColors.flat());\n    line2.computeLineDistances();\n  }, [points, vertexColors, line2, lineGeometry]);\n  useLayoutEffect(() => {\n    if (dashed) {\n      lineMaterial.defines.USE_DASH = '';\n    } else {\n      // Setting lineMaterial.defines.USE_DASH to undefined is apparently not sufficient.\n      delete lineMaterial.defines.USE_DASH;\n    }\n\n    lineMaterial.needsUpdate = true;\n  }, [dashed, lineMaterial]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: line2,\n    ref: ref\n  }, rest), /*#__PURE__*/React.createElement(\"primitive\", {\n    dispose: null,\n    object: lineGeometry,\n    attach: \"geometry\"\n  }), /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: lineMaterial,\n    attach: \"material\",\n    color: color,\n    vertexColors: Boolean(vertexColors),\n    resolution: resolution,\n    linewidth: lineWidth,\n    dashed: dashed\n  }, rest)));\n});\n\nconst PositionalAudio = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    url,\n    distance = 1,\n    loop = true\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"url\", \"distance\", \"loop\"]);\n\n  const sound = useRef();\n  const {\n    camera\n  } = useThree();\n  const [listener] = useState(() => new AudioListener());\n  const buffer = useLoader(AudioLoader, url);\n  useEffect(() => {\n    const _sound = sound.current;\n\n    if (_sound) {\n      _sound.setBuffer(buffer);\n\n      _sound.setRefDistance(distance);\n\n      _sound.setLoop(loop);\n\n      _sound.play();\n    }\n\n    camera.add(listener);\n    return () => {\n      camera.remove(listener);\n\n      if (_sound) {\n        _sound.stop();\n\n        _sound.disconnect();\n      }\n    };\n  }, [buffer, camera, distance, listener, loop]);\n  return /*#__PURE__*/React.createElement(\"positionalAudio\", _extends({\n    ref: mergeRefs([sound, ref]),\n    args: [listener]\n  }, props));\n});\n\nconst Text = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    anchorX = 'center',\n    anchorY = 'middle',\n    children,\n    onSync\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"anchorX\", \"anchorY\", \"children\", \"onSync\"]);\n\n  const {\n    invalidate\n  } = useThree();\n  const [troikaMesh] = useState(() => new Text$1());\n  const [baseMtl, setBaseMtl] = useState();\n  const [nodes, text] = useMemo(() => {\n    let n = [];\n    let t = '';\n    Children.forEach(children, (child, index) => {\n      if (typeof child === 'string') {\n        t += child;\n      } else if (child && typeof child === 'object' && child.props.attach === 'material') {\n        // Instantiate the base material and grab a reference to it, but don't assign any\n        // props, and assign it as the `material`, which Troika will replace behind the scenes.\n        n.push( /*#__PURE__*/createElement(child.type, {\n          ref: setBaseMtl,\n          attach: 'material',\n          key: index\n        })); // Once the base material has been assigned, grab the resulting upgraded material,\n        // and apply the original material props to that.\n\n        if (baseMtl) {\n          n.push( /*#__PURE__*/React.createElement(\"primitive\", _extends({\n            dispose: null,\n            object: troikaMesh.material\n          }, child.props, {\n            key: \"baseMtl:\" + index,\n            attach: null\n          })));\n        }\n      } else {\n        n.push(child);\n      }\n    });\n    return [n, t];\n  }, [children, baseMtl, troikaMesh.material]);\n  useLayoutEffect(() => void troikaMesh.sync(() => {\n    invalidate();\n    if (onSync) onSync(troikaMesh);\n  }));\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: troikaMesh,\n    ref: ref,\n    text: text,\n    anchorX: anchorX,\n    anchorY: anchorY\n  }, props), nodes);\n});\n\nconst OrthographicCamera = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children,\n    makeDefault = false\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  const {\n    setDefaultCamera,\n    camera,\n    size\n  } = useThree();\n  const cameraRef = useUpdate(cam => cam.updateProjectionMatrix(), [size, props]);\n  useLayoutEffect(() => {\n    if (makeDefault && cameraRef.current) {\n      const oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return () => setDefaultCamera(oldCam);\n    }\n  }, [camera, cameraRef, makeDefault, setDefaultCamera]);\n  return /*#__PURE__*/React.createElement(\"orthographicCamera\", _extends({\n    left: size.width / -2,\n    right: size.width / 2,\n    top: size.height / 2,\n    bottom: size.height / -2,\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\n\nconst PerspectiveCamera = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    makeDefault = false\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"makeDefault\"]);\n\n  const {\n    setDefaultCamera,\n    camera,\n    size\n  } = useThree();\n  const cameraRef = useUpdate(cam => {\n    cam.aspect = size.width / size.height;\n    cam.updateProjectionMatrix();\n  }, [size, props]);\n  useLayoutEffect(() => {\n    if (makeDefault && cameraRef.current) {\n      const oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return () => setDefaultCamera(oldCam);\n    }\n  }, [camera, cameraRef, makeDefault, setDefaultCamera]);\n  return /*#__PURE__*/React.createElement(\"perspectiveCamera\", _extends({\n    ref: mergeRefs([cameraRef, ref])\n  }, props));\n});\n\nconst DeviceOrientationControls = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    camera,\n    invalidate\n  } = useThree();\n  const controls = useMemo(() => new DeviceOrientationControls$1(camera), [camera]);\n  useEffect(() => {\n    controls == null ? void 0 : controls.addEventListener == null ? void 0 : controls.addEventListener('change', invalidate);\n    return () => controls == null ? void 0 : controls.removeEventListener == null ? void 0 : controls.removeEventListener('change', invalidate);\n  }, [controls, invalidate]);\n  useFrame(() => controls.update());\n  useEffect(() => {\n    const current = controls;\n    current.connect();\n    return () => current.dispose();\n  }, [controls]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: controls,\n    ref: ref\n  }, props));\n});\n\nconst FlyControls = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  const controls = useMemo(() => new FlyControls$1(camera, gl.domElement), [camera, gl.domElement]);\n  useEffect(() => {\n    controls == null ? void 0 : controls.addEventListener == null ? void 0 : controls.addEventListener('change', invalidate);\n    return () => controls == null ? void 0 : controls.removeEventListener == null ? void 0 : controls.removeEventListener('change', invalidate);\n  }, [controls, invalidate]);\n  useFrame((_, delta) => controls.update(delta));\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: controls,\n    ref: ref\n  }, props));\n});\n\nconst MapControls = /*#__PURE__*/forwardRef((props = {\n  enableDamping: true\n}, ref) => {\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  const controls = useMemo(() => new MapControls$1(camera, gl.domElement), [camera, gl]);\n  useFrame(() => controls.update());\n  useEffect(() => {\n    controls == null ? void 0 : controls.addEventListener == null ? void 0 : controls.addEventListener('change', invalidate);\n    return () => controls == null ? void 0 : controls.removeEventListener == null ? void 0 : controls.removeEventListener('change', invalidate);\n  }, [controls, invalidate]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: controls,\n    ref: ref,\n    enableDamping: true\n  }, props));\n});\n\nconst OrbitControls = /*#__PURE__*/forwardRef((props = {\n  enableDamping: true\n}, ref) => {\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  const controls = useMemo(() => new OrbitControls$1(camera, gl.domElement), [camera, gl]);\n  useFrame(() => {\n    controls.update();\n  });\n  useEffect(() => {\n    controls == null ? void 0 : controls.addEventListener == null ? void 0 : controls.addEventListener('change', invalidate);\n    return () => controls == null ? void 0 : controls.removeEventListener == null ? void 0 : controls.removeEventListener('change', invalidate);\n  }, [controls, invalidate]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: controls,\n    ref: ref,\n    enableDamping: true\n  }, props));\n});\n\nconst TrackballControls = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  const controls = useMemo(() => new TrackballControls$1(camera, gl.domElement), [camera, gl]);\n  useFrame(() => controls.update());\n  useEffect(() => {\n    controls == null ? void 0 : controls.addEventListener == null ? void 0 : controls.addEventListener('change', invalidate);\n    return () => controls == null ? void 0 : controls.removeEventListener == null ? void 0 : controls.removeEventListener('change', invalidate);\n  }, [controls, invalidate]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: controls,\n    ref: ref\n  }, props));\n});\n\nconst TransformControls = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n  const transformOnlyPropNames = ['enabled', 'axis', 'mode', 'translationSnap', 'rotationSnap', 'scaleSnap', 'space', 'size', 'dragging', 'showX', 'showY', 'showZ'];\n  const transformProps = pick(props, transformOnlyPropNames);\n  const objectProps = omit(props, transformOnlyPropNames);\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  const controls = useMemo(() => new TransformControls$1(camera, gl.domElement), [camera, gl.domElement]);\n  const group = useRef();\n  useLayoutEffect(() => void controls.attach(group.current), [children, controls]);\n  useEffect(() => {\n    controls == null ? void 0 : controls.addEventListener == null ? void 0 : controls.addEventListener('change', invalidate);\n    return () => controls == null ? void 0 : controls.removeEventListener == null ? void 0 : controls.removeEventListener('change', invalidate);\n  }, [controls, invalidate]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: controls,\n    ref: ref\n  }, transformProps)), /*#__PURE__*/React.createElement(\"group\", _extends({\n    ref: group\n  }, objectProps), children));\n});\n\nconst PointerLockControls = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  const controls = useMemo(() => new PointerLockControls$1(camera, gl.domElement), [camera, gl.domElement]);\n  useEffect(() => {\n    controls == null ? void 0 : controls.addEventListener == null ? void 0 : controls.addEventListener('change', invalidate);\n    return () => controls == null ? void 0 : controls.removeEventListener == null ? void 0 : controls.removeEventListener('change', invalidate);\n  }, [controls, invalidate]);\n  useEffect(() => {\n    const handler = () => controls.lock();\n\n    document.addEventListener('click', handler);\n    return () => document.removeEventListener('click', handler);\n  }, [controls]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: controls,\n    ref: ref\n  }, props));\n});\n\nfunction draco(url = 'https://www.gstatic.com/draco/v1/decoders/') {\n  return loader => {\n    const dracoLoader = new DRACOLoader();\n    dracoLoader.setDecoderPath(url);\n    loader.setDRACOLoader(dracoLoader);\n  };\n}\n\nfunction useCubeTextureLoader(files, {\n  path\n}) {\n  // @ts-ignore\n  const [cubeTexture] = useLoader( // @ts-ignore\n  CubeTextureLoader, [files], loader => loader.setPath(path));\n  return cubeTexture;\n}\n\nfunction useGLTFLoader(path, useDraco) {\n  const gltf = useLoader(GLTFLoader, path, useDraco ? draco(typeof useDraco === 'string' ? useDraco : undefined) : undefined);\n  return gltf;\n}\n\nconst useProgress = create$1(set => {\n  DefaultLoadingManager.onStart = (item, loaded, total) => set({\n    active: true,\n    item,\n    loaded,\n    total,\n    progress: loaded / total * 100\n  });\n\n  DefaultLoadingManager.onLoad = () => set({\n    active: false\n  });\n\n  DefaultLoadingManager.onError = item => set(state => ({\n    errors: [...state.errors, item]\n  }));\n\n  DefaultLoadingManager.onProgress = (item, loaded, total) => set({\n    item,\n    loaded,\n    total,\n    progress: loaded / total * 100\n  });\n\n  return {\n    errors: [],\n    active: false,\n    progress: 0,\n    item: '',\n    loaded: 0,\n    total: 0\n  };\n});\n\nfunction useTextureLoader(url) {\n  return useLoader(TextureLoader, url);\n}\n\nconst v1 = new Vector3();\nconst v2 = new Vector3();\nconst v3 = new Vector3();\n\nfunction calculatePosition(el, camera, size) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  const widthHalf = size.width / 2;\n  const heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\n\nfunction isObjectBehindCamera(el, camera) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  const deltaCamObj = objectPos.sub(cameraPos);\n  const camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction objectScale(el, camera) {\n  if (camera instanceof PerspectiveCamera$1) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const vFOV = camera.fov * Math.PI / 180;\n    const dist = objectPos.distanceTo(cameraPos);\n    return 1 / (2 * Math.tan(vFOV / 2) * dist);\n  }\n\n  if (camera instanceof OrthographicCamera$1) return camera.zoom;\n  return 1;\n}\n\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof PerspectiveCamera$1 || camera instanceof OrthographicCamera$1) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const dist = objectPos.distanceTo(cameraPos);\n    const A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    const B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n\n  return undefined;\n}\n\nconst Html = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  var _portal$current;\n\n  let {\n    children,\n    eps = 0.001,\n    style,\n    className,\n    prepend,\n    center,\n    fullscreen,\n    portal,\n    scaleFactor,\n    zIndexRange = [16777271, 0]\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eps\", \"style\", \"className\", \"prepend\", \"center\", \"fullscreen\", \"portal\", \"scaleFactor\", \"zIndexRange\"]);\n\n  const {\n    gl,\n    scene,\n    camera,\n    size\n  } = useThree();\n  const [el] = useState(() => document.createElement('div'));\n  const group = useRef(null);\n  const old = useRef([0, 0]);\n  const target = (_portal$current = portal == null ? void 0 : portal.current) != null ? _portal$current : gl.domElement.parentNode;\n  useEffect(() => {\n    if (group.current) {\n      scene.updateMatrixWorld();\n      const vec = calculatePosition(group.current, camera, size);\n      el.style.cssText = \"position:absolute;top:0;left:0;transform:translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0);transform-origin:0 0;\";\n\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n\n      return () => {\n        if (target) target.removeChild(el);\n        ReactDOM.unmountComponentAtNode(el);\n      };\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [target]);\n  const styles = useMemo(() => _extends({\n    position: 'absolute',\n    transform: center ? 'translate3d(-50%,-50%,0)' : 'none'\n  }, fullscreen && {\n    top: -size.height / 2,\n    left: -size.width / 2,\n    width: size.width,\n    height: size.height\n  }, style), [style, center, fullscreen, size]);\n  useEffect(() => void ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    style: styles,\n    className: className,\n    children: children\n  }), el));\n  useFrame(() => {\n    if (group.current) {\n      const vec = calculatePosition(group.current, camera, size);\n\n      if (Math.abs(old.current[0] - vec[0]) > eps || Math.abs(old.current[1] - vec[1]) > eps) {\n        el.style.display = !isObjectBehindCamera(group.current, camera) ? 'block' : 'none';\n        const scale = scaleFactor === undefined ? 1 : objectScale(group.current, camera) * scaleFactor;\n        el.style.transform = \"translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0) scale(\" + scale + \")\";\n        el.style.zIndex = \"\" + objectZIndex(group.current, camera, zIndexRange);\n      }\n\n      old.current = vec;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({}, props, {\n    ref: group\n  }));\n});\nconst HTML = /*#__PURE__*/React.forwardRef((props, ref) => {\n  useEffect(() => void console.warn('The <HTML> component was renamed to <Html>'), []);\n  return /*#__PURE__*/React.createElement(Html, _extends({}, props, {\n    ref: ref\n  }));\n});\n\nlet _inverseMatrix = new Matrix4();\n\nlet _ray = new Ray();\n\nlet _sphere = new Sphere$1();\n\nlet _vA = new Vector3();\n\nfunction meshBounds(raycaster, intersects) {\n  let geometry = this.geometry;\n  let material = this.material;\n  let matrixWorld = this.matrixWorld;\n  if (material === undefined) return; // Checking boundingSphere distance to ray\n\n  if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n  _sphere.copy(geometry.boundingSphere);\n\n  _sphere.applyMatrix4(matrixWorld);\n\n  if (raycaster.ray.intersectsSphere(_sphere) === false) return;\n\n  _inverseMatrix.getInverse(matrixWorld);\n\n  _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix); // Check boundingBox before continuing\n\n\n  if (geometry.boundingBox !== null && _ray.intersectBox(geometry.boundingBox, _vA) === null) return;\n  intersects.push({\n    distance: _vA.distanceTo(raycaster.ray.origin),\n    point: _vA.clone(),\n    object: this\n  });\n}\n\nconst Reflector = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children,\n    color,\n    textureWidth,\n    textureHeight,\n    clipBias,\n    shader,\n    encoding\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"color\", \"textureWidth\", \"textureHeight\", \"clipBias\", \"shader\", \"encoding\"]);\n\n  const reflector = useMemo(() => new Reflector$1(undefined, {\n    color,\n    textureWidth,\n    textureHeight,\n    clipBias,\n    shader,\n    encoding\n  }), [clipBias, color, encoding, shader, textureHeight, textureWidth]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: reflector,\n    ref: ref\n  }, props), React.Children.only(children));\n});\n\nconst Shadow = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    fog = false,\n    colorStop = 0.0,\n    color = 'black',\n    opacity = 0.5\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"fog\", \"colorStop\", \"color\", \"opacity\"]);\n\n  const canvas = useMemo(() => {\n    let canvas = document.createElement('canvas');\n    canvas.width = 128;\n    canvas.height = 128;\n    let context = canvas.getContext('2d');\n    let gradient = context.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2);\n    gradient.addColorStop(colorStop, new Color(color).getStyle());\n    gradient.addColorStop(1, 'rgba(0,0,0,0)');\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    return canvas;\n  }, [color, colorStop]);\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref\n  }, props), /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [1, 1]\n  }), /*#__PURE__*/React.createElement(\"meshBasicMaterial\", {\n    attach: \"material\",\n    transparent: true,\n    opacity: opacity,\n    fog: fog\n  }, /*#__PURE__*/React.createElement(\"canvasTexture\", {\n    attach: \"map\",\n    args: [canvas]\n  })));\n});\n\nfunction Stats({\n  showPanel = 0,\n  className,\n  parent\n}) {\n  const [stats] = useState(() => new StatsImpl());\n  useEffect(() => {\n    const node = parent && parent.current || document.body;\n    stats.showPanel(showPanel);\n    node == null ? void 0 : node.appendChild(stats.dom);\n    if (className) stats.dom.classList.add(className);\n    const begin = addEffect(() => stats.begin());\n    const end = addAfterEffect(() => stats.end());\n    return () => {\n      node == null ? void 0 : node.removeChild(stats.dom);\n      begin();\n      end();\n    };\n  }, [parent]);\n  return null;\n}\n\nfunction useAspect(type, width, height, factor = 1) {\n  const {\n    viewport: v,\n    aspect\n  } = useThree();\n  const adaptedHeight = height * (aspect > width / height ? v.width / width : v.height / height);\n  const adaptedWidth = width * (aspect > width / height ? v.width / width : v.height / height);\n  return [adaptedWidth * factor, adaptedHeight * factor, 1];\n}\n\nfunction useCamera(camera, props) {\n  const {\n    mouse\n  } = useThree();\n  const [raycast] = useState(() => {\n    let raycaster = new Raycaster();\n    if (props) applyProps(raycaster, props, {});\n    return function (_, intersects) {\n      raycaster.setFromCamera(mouse, camera instanceof Camera ? camera : camera.current);\n      const rc = this.constructor.prototype.raycast.bind(this);\n      if (rc) rc(raycaster, intersects);\n    };\n  });\n  return raycast;\n}\n\nfunction useHelper(object3D, proto, ...args) {\n  const helper = React.useRef();\n  const {\n    scene\n  } = useThree();\n  useEffect(() => {\n    if (proto && object3D.current) {\n      helper.current = new proto(object3D.current, ...args);\n\n      if (helper.current) {\n        scene.add(helper.current);\n      }\n    }\n\n    return () => {\n      if (helper.current) {\n        scene.remove(helper.current);\n      }\n    };\n  }, [scene, proto, object3D, args]);\n  useFrame(() => {\n    if (helper.current) {\n      helper.current.update();\n    }\n  });\n  return helper;\n}\n\nfunction useSimplification(simplePercent) {\n  const ref = useRef();\n  const original = useRef();\n  const modifier = useRef();\n  useEffect(() => {\n    if (!original.current) {\n      original.current = ref.current.geometry.clone();\n      modifier.current = new SimplifyModifier();\n    }\n  }, []);\n  useEffect(() => {\n    if (original.current && ref.current) {\n      let geometry = new BufferGeometry();\n\n      if (original.current instanceof BufferGeometry) {\n        geometry = original.current.clone();\n      } else {\n        geometry = geometry.fromGeometry(original.current);\n      }\n\n      const count = Math.floor(geometry.attributes.position.count * simplePercent); // number of vertices to remove\n\n      ref.current.geometry = modifier.current.modify(geometry, count);\n    }\n  }, [simplePercent]);\n  return ref;\n}\n\nfunction useSubdivision(subdivisions) {\n  const ref = useRef();\n  const original = useRef();\n  const modifier = useRef();\n  useEffect(() => {\n    if (!original.current) {\n      original.current = ref.current.geometry.clone();\n      modifier.current = new SubdivisionModifier(parseInt(subdivisions));\n    }\n  }, [subdivisions]);\n  useEffect(() => {\n    modifier.current.subdivisions = subdivisions;\n  }, [subdivisions]);\n  useEffect(() => {\n    if (original.current && ref.current) {\n      const bufferGeometry = new BufferGeometry();\n      const subdivided = bufferGeometry.fromGeometry(modifier.current.modify(original.current));\n      ref.current.geometry = subdivided;\n    }\n  }, [subdivisions]);\n  return ref;\n}\n\nfunction useTessellation(passes = 3, maxEdgeLength) {\n  const ref = useRef();\n  const original = useRef();\n  const modifier = useRef();\n  useEffect(() => {\n    if (!original.current) {\n      original.current = ref.current.geometry.clone();\n      modifier.current = new TessellateModifier(parseInt(maxEdgeLength));\n    }\n  }, [maxEdgeLength]);\n  useEffect(() => {\n    modifier.current.maxEdgeLength = maxEdgeLength;\n  }, [maxEdgeLength]);\n  useEffect(() => {\n    if (original.current && ref.current) {\n      let geometry = new Geometry();\n\n      if (original.current instanceof BufferGeometry) {\n        geometry.fromBufferGeometry(original.current);\n      } else {\n        geometry = original.current.clone();\n      }\n\n      const bufferGeometry = new BufferGeometry();\n\n      for (let i = 0; i < passes; i++) {\n        modifier.current.modify(geometry);\n      }\n\n      const tessellated = bufferGeometry.fromGeometry(geometry);\n      ref.current.geometry = tessellated;\n    }\n  }, [maxEdgeLength, passes]);\n  return ref;\n}\n\nvar distort = \"#define GLSLIFY 1\\nvec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}\"; // eslint-disable-line\n\nclass DistortMaterialImpl extends MeshPhysicalMaterial {\n  constructor(parameters = {}) {\n    super(parameters);\n\n    _defineProperty(this, \"_time\", void 0);\n\n    _defineProperty(this, \"_distort\", void 0);\n\n    _defineProperty(this, \"_radius\", void 0);\n\n    this.setValues(parameters);\n    this._time = {\n      value: 0\n    };\n    this._distort = {\n      value: 0.4\n    };\n    this._radius = {\n      value: 1\n    };\n  }\n\n  onBeforeCompile(shader) {\n    shader.uniforms.time = this._time;\n    shader.uniforms.radius = this._radius;\n    shader.uniforms.distort = this._distort;\n    shader.vertexShader = \"\\n      uniform float time;\\n      uniform float radius;\\n      uniform float distort;\\n      \" + distort + \"\\n      \" + shader.vertexShader + \"\\n    \";\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"\\n        float updateTime = time / 50.0;\\n        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));\\n        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));\\n        \");\n  }\n\n  get time() {\n    return this._time.value;\n  }\n\n  set time(v) {\n    this._time.value = v;\n  }\n\n  get distort() {\n    return this._distort.value;\n  }\n\n  set distort(v) {\n    this._distort.value = v;\n  }\n\n  get radius() {\n    return this._radius.value;\n  }\n\n  set radius(v) {\n    this._radius.value = v;\n  }\n\n}\n\nconst MeshDistortMaterial = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  let {\n    speed = 1\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"speed\"]);\n\n  const material = useMemo(() => new DistortMaterialImpl(), []);\n  useFrame(state => material && (material.time = state.clock.getElapsedTime() * speed));\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: material,\n    ref: ref,\n    attach: \"material\"\n  }, props));\n});\n\nclass WobbleMaterialImpl extends MeshStandardMaterial {\n  constructor(parameters = {}) {\n    super(parameters);\n\n    _defineProperty(this, \"_time\", void 0);\n\n    _defineProperty(this, \"_factor\", void 0);\n\n    this.setValues(parameters);\n    this._time = {\n      value: 0\n    };\n    this._factor = {\n      value: 1\n    };\n  }\n\n  onBeforeCompile(shader) {\n    shader.uniforms.time = this._time;\n    shader.uniforms.factor = this._factor;\n    shader.vertexShader = \"\\n      uniform float time;\\n      uniform float factor;\\n      \" + shader.vertexShader + \"\\n    \";\n    shader.vertexShader = shader.vertexShader.replace('#include <begin_vertex>', \"float theta = sin( time + position.y ) / 2.0 * factor;\\n        float c = cos( theta );\\n        float s = sin( theta );\\n        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );\\n        vec3 transformed = vec3( position ) * m;\\n        vNormal = vNormal * m;\");\n  }\n\n  get time() {\n    return this._time.value;\n  }\n\n  set time(v) {\n    this._time.value = v;\n  }\n\n  get factor() {\n    return this._factor.value;\n  }\n\n  set factor(v) {\n    this._factor.value = v;\n  }\n\n}\n\nconst MeshWobbleMaterial = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  let {\n    speed = 1\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"speed\"]);\n\n  const material = useMemo(() => new WobbleMaterialImpl(), []);\n  useFrame(state => material && (material.time = state.clock.getElapsedTime() * speed));\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    dispose: null,\n    object: material,\n    ref: ref,\n    attach: \"material\"\n  }, props));\n});\n\nfunction shaderMaterial(uniforms, vertexShader, fragmentShader, onInit) {\n  return class extends ShaderMaterial {\n    constructor() {\n      const entries = Object.entries(uniforms); // Create unforms and shaders\n\n      super({\n        uniforms: entries.reduce((acc, [name, value]) => _extends({}, acc, {\n          [name]: {\n            value\n          }\n        }), {}),\n        vertexShader,\n        fragmentShader\n      }); // Create getter/setters\n\n      entries.forEach(([name]) => Object.defineProperty(this, name, {\n        get: () => this.uniforms[name].value,\n        set: v => this.uniforms[name].value = v\n      }));\n      if (onInit) onInit(this);\n    }\n\n  };\n}\n\nconst Sky = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    distance = 100,\n    mieCoefficient = 0.005,\n    mieDirectionalG = 0.8,\n    rayleigh = 1,\n    turbidity = 2,\n    sunPosition = [0, Math.PI, 0]\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"distance\", \"mieCoefficient\", \"mieDirectionalG\", \"rayleigh\", \"turbidity\", \"sunPosition\"]);\n\n  const scale = useMemo(() => new Vector3().setScalar(distance), [distance]);\n  const sky = useMemo(() => new Sky$1(), []);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    object: sky,\n    ref: ref,\n    \"material-uniforms-mieCoefficient-value\": mieCoefficient,\n    \"material-uniforms-mieDirectionalG-value\": mieDirectionalG,\n    \"material-uniforms-rayleigh-value\": rayleigh,\n    \"material-uniforms-sunPosition-value\": sunPosition,\n    \"material-uniforms-turbidity-value\": turbidity,\n    scale: scale\n  }, props));\n});\n\nconst pcss = ({\n  frustrum = 3.75,\n  size = 0.005,\n  near = 9.5,\n  samples = 17,\n  rings = 11\n} = {}) => \"#define LIGHT_WORLD_SIZE \" + size + \"\\n#define LIGHT_FRUSTUM_WIDTH \" + frustrum + \"\\n#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\\n#define NEAR_PLANE \" + near + \"\\n\\n#define NUM_SAMPLES \" + samples + \"\\n#define NUM_RINGS \" + rings + \"\\n#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES\\n#define PCF_NUM_SAMPLES NUM_SAMPLES\\n\\nvec2 poissonDisk[NUM_SAMPLES];\\n\\nvoid initPoissonSamples(const in vec2 randomSeed) {\\n\\tfloat ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);\\n\\tfloat INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\\n\\tfloat angle = rand(randomSeed) * PI2;\\n\\tfloat radius = INV_NUM_SAMPLES;\\n\\tfloat radiusStep = radius;\\n\\tfor (int i = 0; i < NUM_SAMPLES; i++) {\\n\\t\\tpoissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);\\n\\t\\tradius += radiusStep;\\n\\t\\tangle += ANGLE_STEP;\\n\\t}\\n}\\n\\nfloat penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation\\n\\treturn (zReceiver - zBlocker) / zBlocker;\\n}\\n\\nfloat findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {\\n\\tfloat searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;\\n\\tfloat blockerDepthSum = 0.0;\\n\\tint numBlockers = 0;\\n\\tfor (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {\\n\\t\\tfloat shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\\n\\t\\tif (shadowMapDepth < zReceiver) {\\n\\t\\t\\tblockerDepthSum += shadowMapDepth;\\n\\t\\t\\tnumBlockers++;\\n\\t\\t}\\n\\t}\\n\\tif (numBlockers == 0) return -1.0;\\n\\treturn blockerDepthSum / float(numBlockers);\\n}\\n\\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {\\n\\tfloat sum = 0.0;\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\treturn sum / (2.0 * float(PCF_NUM_SAMPLES));\\n}\\n\\nfloat PCSS(sampler2D shadowMap, vec4 coords) {\\n\\tvec2 uv = coords.xy;\\n\\tfloat zReceiver = coords.z; // Assumed to be eye-space z in this code\\n\\tinitPoissonSamples(uv);\\n\\tfloat avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);\\n\\tif (avgBlockerDepth == -1.0) return 1.0;\\n\\tfloat penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\\n\\tfloat filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;\\n\\treturn PCF_Filter(shadowMap, uv, zReceiver, filterRadius);\\n}\";\n\nlet deployed = false;\nconst softShadows = props => {\n  // Avoid adding the effect twice, which may happen in HMR scenarios\n  if (!deployed) {\n    deployed = true;\n    let shader = ShaderChunk.shadowmap_pars_fragment;\n    shader = shader.replace('#ifdef USE_SHADOWMAP', '#ifdef USE_SHADOWMAP\\n' + pcss(_extends({}, props)));\n    shader = shader.replace('#if defined( SHADOWMAP_TYPE_PCF )', '\\nreturn PCSS(shadowMap, shadowCoord);\\n#if defined( SHADOWMAP_TYPE_PCF )');\n    ShaderChunk.shadowmap_pars_fragment = shader;\n  }\n};\n\nclass StarfieldMaterial extends ShaderMaterial {\n  constructor() {\n    super({\n      uniforms: {\n        time: {\n          value: 0.0\n        },\n        fade: {\n          value: 1.0\n        }\n      },\n      vertexShader: \"uniform float time;\\n      attribute float size;\\n      varying vec3 vColor;\\n      void main() {\\n        vColor = color;\\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\\n        gl_Position = projectionMatrix * mvPosition;\\n      }\",\n      fragmentShader: \"uniform sampler2D pointTexture;\\n      uniform float fade;\\n      varying vec3 vColor;\\n      void main() {\\n        float opacity = 1.0;\\n        if (fade == 1.0) {\\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\\n        }\\n        gl_FragColor = vec4(vColor, opacity);\\n      }\"\n    });\n  }\n\n}\n\nconst genStar = r => {\n  return new Vector3().setFromSpherical(new Spherical(r, Math.acos(1 - Math.random() * 2), Math.random() * 2 * Math.PI));\n};\n\nconst Stars = /*#__PURE__*/forwardRef(({\n  radius = 100,\n  depth = 50,\n  count = 5000,\n  saturation = 0,\n  factor = 4,\n  fade = false\n}, ref) => {\n  const material = useRef();\n  const [position, color, size] = useMemo(() => {\n    const positions = [];\n    const colors = [];\n    const sizes = Array.from({\n      length: count\n    }, () => (0.5 + 0.5 * Math.random()) * factor);\n    const color = new Color();\n    let r = radius + depth;\n    const increment = depth / count;\n\n    for (let i = 0; i < count; i++) {\n      r -= increment * Math.random();\n      positions.push(...genStar(r).toArray());\n      color.setHSL(i / count, saturation, 0.9);\n      colors.push(color.r, color.g, color.b);\n    }\n\n    return [new Float32Array(positions), new Float32Array(colors), new Float32Array(sizes)];\n  }, [count, depth, factor, radius, saturation]);\n  useFrame(state => material.current && (material.current.uniforms.time.value = state.clock.getElapsedTime()));\n  const starfieldMaterial = useMemo(() => new StarfieldMaterial(), []);\n  return /*#__PURE__*/React.createElement(\"points\", {\n    ref: ref\n  }, /*#__PURE__*/React.createElement(\"bufferGeometry\", {\n    attach: \"geometry\"\n  }, /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'position'],\n    args: [position, 3]\n  }), /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'color'],\n    args: [color, 3]\n  }), /*#__PURE__*/React.createElement(\"bufferAttribute\", {\n    attachObject: ['attributes', 'size'],\n    args: [size, 1]\n  })), /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: material,\n    object: starfieldMaterial,\n    attach: \"material\",\n    blending: AdditiveBlending,\n    \"uniforms-fade-value\": fade,\n    transparent: true,\n    vertexColors: true\n  }));\n});\n\nconst eps = 0.00001;\n\nfunction createShape(width, height, radius0) {\n  const shape = new Shape();\n  const radius = radius0 - eps;\n  shape.absarc(eps, eps, eps, -Math.PI / 2, -Math.PI, true);\n  shape.absarc(eps, height - radius * 2, eps, Math.PI, Math.PI / 2, true);\n  shape.absarc(width - radius * 2, height - radius * 2, eps, Math.PI / 2, 0, true);\n  shape.absarc(width - radius * 2, eps, eps, 0, -Math.PI / 2, true);\n  return shape;\n}\n\nconst RoundedBox = /*#__PURE__*/forwardRef(function RoundedBox(_ref, ref) {\n  let {\n    args: [width = 1, height = 1, depth = 1] = [],\n    radius = 0.05,\n    smoothness = 4,\n    children\n  } = _ref,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"args\", \"radius\", \"smoothness\", \"children\"]);\n\n  const shape = useMemo(() => createShape(width, height, radius), [width, height, radius]);\n  const params = useMemo(() => ({\n    depth: depth - radius * 2,\n    bevelEnabled: true,\n    bevelSegments: smoothness * 2,\n    steps: 1,\n    bevelSize: radius - eps,\n    bevelThickness: radius,\n    curveSegments: smoothness\n  }), [depth, radius, smoothness]);\n  const geomRef = useUpdate(geometry => void geometry.center(), [shape, params]);\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref\n  }, rest), /*#__PURE__*/React.createElement(\"extrudeBufferGeometry\", {\n    attach: \"geometry\",\n    ref: geomRef,\n    args: [shape, params]\n  }), children);\n});\n\nconst styles = {\n  container: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    background: '#171717',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 1000\n  },\n  inner: {\n    width: 100,\n    height: 3,\n    background: '#272727'\n  },\n  bar: {\n    height: 3,\n    background: 'white'\n  },\n  data: {\n    display: 'inline-block',\n    position: 'relative',\n    fontVariantNumeric: 'tabular-nums',\n    marginTop: '0.8em',\n    color: '#f0f0f0',\n    fontSize: '0.6em',\n    fontFamily: \"-apple-system, BlinkMacSystemFont, \\\"Inter\\\", \\\"Segoe UI\\\", \\\"Helvetica Neue\\\", Helvetica, Arial, Roboto, Ubuntu, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\",\n    whiteSpace: 'nowrap'\n  }\n};\nfunction Loader({\n  containerStyles,\n  innerStyles,\n  barStyles,\n  dataStyles,\n  dataInterpolation = p => \"Loading \" + p.toFixed(2) + \"%\",\n  initialState = active => active\n}) {\n  const {\n    active,\n    progress\n  } = useProgress();\n  const transition = useTransition(initialState(active), {\n    from: {\n      opacity: 1,\n      progress: 0\n    },\n    leave: {\n      opacity: 0\n    },\n    update: {\n      progress\n    }\n  });\n  return transition(({\n    progress,\n    opacity\n  }, active) => active && /*#__PURE__*/React.createElement(a.div, {\n    style: _extends({}, styles.container, {\n      opacity\n    }, containerStyles)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: _extends({}, styles.inner, innerStyles)\n  }, /*#__PURE__*/React.createElement(a.div, {\n    style: _extends({}, styles.bar, {\n      width: progress\n    }, barStyles)\n  }, /*#__PURE__*/React.createElement(a.span, {\n    style: _extends({}, styles.data, dataStyles)\n  }, progress.to(dataInterpolation))))));\n}\n\nvar matcapList = {\n  \"0\": \"0404E8_0404B5_0404CB_3333FC\",\n  \"1\": \"045C5C_0DBDBD_049393_04A4A4\",\n  \"2\": \"046363_0CC3C3_049B9B_04ACAC\",\n  \"3\": \"0489C5_0DDDF9_04C3EE_04AFE1\",\n  \"4\": \"04989A_0CE3E4_04D2D5_04C7C8\",\n  \"5\": \"04C455_0EFABC_04F097_04E17A\",\n  \"6\": \"04CC77_0CF7CA_04E9A7_04AB54\",\n  \"7\": \"04E804_04B504_04CB04_33FC33\",\n  \"8\": \"04E8E8_04B5B5_04CCCC_33FCFC\",\n  \"9\": \"050505_747474_4C4C4C_333333\",\n  \"10\": \"070B0C_B2C7CE_728FA3_5B748B\",\n  \"11\": \"090909_9C9C9C_555555_7C7C7C\",\n  \"12\": \"0A0A0A_A9A9A9_525252_747474\",\n  \"13\": \"0C0CC3_04049F_040483_04045C\",\n  \"14\": \"0C430C_257D25_439A43_3C683C\",\n  \"15\": \"0D0DBD_040497_04047B_040455\",\n  \"16\": \"0D0DE3_040486_0404AF_0404CF\",\n  \"17\": \"0DBD0D_049704_047B04_045504\",\n  \"18\": \"0F0F0F_4B4B4B_1C1C1C_2C2C2C\",\n  \"19\": \"0F990F_047B04_044604_046704\",\n  \"20\": \"15100F_241D1B_292424_2C2C27\",\n  \"21\": \"161B1F_C7E0EC_90A5B3_7B8C9B\",\n  \"22\": \"167E76_36D6D2_23B2AC_27C1BE\",\n  \"23\": \"17395A_7EBCC7_4D8B9F_65A1B5\",\n  \"24\": \"181F1F_475057_616566_525C62\",\n  \"25\": \"191514_6D5145_4E3324_3B564D\",\n  \"26\": \"1A2461_3D70DB_2C3C8F_2C6CAC\",\n  \"27\": \"1B1B1B_515151_7E7E7E_6C6C6C\",\n  \"28\": \"1B1B1B_999999_575757_747474\",\n  \"29\": \"1B1C19_5F615D_4B4E4C_3F403D\",\n  \"30\": \"1C1810_352F23_2B2C1C_2B2C24\",\n  \"31\": \"1C70C6_09294C_0F3F73_52B3F6\",\n  \"32\": \"1D2424_565F66_4E555A_646C6E\",\n  \"33\": \"1D2A21_43443B_655B54_545C54\",\n  \"34\": \"1D3FCC_051B5F_81A0F2_5579E9\",\n  \"35\": \"221917_928380_5F504D_7C746C\",\n  \"36\": \"232014_908B78_5E5743_747460\",\n  \"37\": \"242733_333A4D_3E4554_3C3B43\",\n  \"38\": \"245642_3D8168_3D6858_417364\",\n  \"39\": \"253C3C_528181_406C6C_385F5F\",\n  \"40\": \"254FB0_99AFF0_6587D8_1D3279\",\n  \"41\": \"27222B_677491_484F6A_5D657A\",\n  \"42\": \"281813_604233_4B3426_442B22\",\n  \"43\": \"28292A_D3DAE5_A3ACB8_818183\",\n  \"44\": \"291912_473531_3C2C25_3A2424\",\n  \"45\": \"293534_B2BFC5_738289_8A9AA7\",\n  \"46\": \"293D21_ABC692_73B255_667C5C\",\n  \"47\": \"2A2A2A_B3B3B3_6D6D6D_848C8C\",\n  \"48\": \"2A2A2A_DBDBDB_6A6A6A_949494\",\n  \"49\": \"2A2D21_555742_898974_6C745B\",\n  \"50\": \"2A4BA7_1B2D44_1F3768_233C81\",\n  \"51\": \"2A6276_041218_739BA6_042941\",\n  \"52\": \"2B2828_7B796F_534F4A_616464\",\n  \"53\": \"2B2B22_3C3C30_464538_121210\",\n  \"54\": \"2D2D2A_74716E_8F8C8C_92958E\",\n  \"55\": \"2D2D2F_C6C2C5_727176_94949B\",\n  \"56\": \"2D8753_5CD6A5_45BB82_4CC494\",\n  \"57\": \"2E2E2D_7D7C76_A3A39F_949C94\",\n  \"58\": \"2E763A_78A0B7_B3D1CF_14F209\",\n  \"59\": \"2EAC9E_61EBE3_4DDDD1_43D1C6\",\n  \"60\": \"2F2FAA_1E1E87_10104E_1C1C70\",\n  \"61\": \"2F3747_6A7C9E_54637F_62748B\",\n  \"62\": \"300706_888576_822821_876E79\",\n  \"63\": \"302721_CAC1BB_7A706A_91959B\",\n  \"64\": \"304FB1_69A1EF_5081DF_5C8CE6\",\n  \"65\": \"312C34_A2AAB3_61656A_808494\",\n  \"66\": \"312D20_80675C_8B8C8B_85848C\",\n  \"67\": \"313131_BBBBBB_878787_A3A4A4\",\n  \"68\": \"320455_720DBE_560496_47047B\",\n  \"69\": \"32201D_613C3C_563533_8C655F\",\n  \"70\": \"32302B_4C4842_121211_1C1C14\",\n  \"71\": \"323C4D_B79039_7C6A44_605C48\",\n  \"72\": \"326666_66CBC9_C0B8AE_52B3B4\",\n  \"73\": \"331A0B_B17038_7D4E28_5B351A\",\n  \"74\": \"336EB3_152578_A4C5E2_74AED9\",\n  \"75\": \"34352A_718184_50605E_6E6761\",\n  \"76\": \"346088_6ABED7_56A0C5_4E91B8\",\n  \"77\": \"34A09C_6EE5E3_5CD7D3_4EC9C6\",\n  \"78\": \"34AB94_36DFC1_19F9EB_6C6E62\",\n  \"79\": \"353535_CFCFCF_828282_A4A4A4\",\n  \"80\": \"36220C_C6C391_8C844A_8B7B4C\",\n  \"81\": \"36312E_726461_59504D_645C5C\",\n  \"82\": \"365123_C6E5A3_A8D18D_8EB16C\",\n  \"83\": \"36C8FA_176ACB_24A7EF_1D93EC\",\n  \"84\": \"37C337_279F27_186018_248824\",\n  \"85\": \"385264_A1D3E2_86ADC1_6E94A8\",\n  \"86\": \"385862_6D8B8D_647B80_1A2E2F\",\n  \"87\": \"386169_A9CFDB_153C23_7CA3AC\",\n  \"88\": \"38925D_142B23_1D4835_2A6449\",\n  \"89\": \"392307_B3AE7D_6D5618_847C42\",\n  \"90\": \"39433A_65866E_86BF8B_BFF8D8\",\n  \"91\": \"394641_B1A67E_75BEBE_7D7256\",\n  \"92\": \"3A2412_A78B5F_705434_836C47\",\n  \"93\": \"3A3329_C9B090_928069_A9957A\",\n  \"94\": \"3A3D37_7E7F75_BCBFB6_9C9C94\",\n  \"95\": \"3B3B3B_C7C7C7_878787_A4A4A4\",\n  \"96\": \"3B3C3F_DAD9D5_929290_ABACA8\",\n  \"97\": \"3B4235_7B9395_5B716C_70847B\",\n  \"98\": \"3B6E10_E3F2C3_88AC2E_99CE51\",\n  \"99\": \"3D1F12_653821_070404_22130B\",\n  \"100\": \"3E2335_D36A1B_8E4A2E_2842A5\",\n  \"101\": \"3E3D39_D6CEAF_91BAC1_897966\",\n  \"102\": \"3E3E36_72726D_63645D_0E0F0C\",\n  \"103\": \"3E3E3E_AEAEAE_848484_777777\",\n  \"104\": \"3E95CC_65D9F1_A2E2F6_679BD4\",\n  \"105\": \"3F3A2F_91D0A5_7D876A_94977B\",\n  \"106\": \"3F3D52_CCCED9_AFB0C6_8D8CAC\",\n  \"107\": \"3F4441_D1D7D6_888F87_A2ADA1\",\n  \"108\": \"403A34_B0936E_7F979C_7E6956\",\n  \"109\": \"415325_83A24E_678239_748C3C\",\n  \"110\": \"416BA7_A5B8D0_0D2549_65ABEB\",\n  \"111\": \"422509_C89536_824512_0A0604\",\n  \"112\": \"422A1E_716767_685D59_5E4F4A\",\n  \"113\": \"424244_BDBBBE_8A898E_A3A4A9\",\n  \"114\": \"425F84_1C2939_2A3F57_24344C\",\n  \"115\": \"430404_BD9295_7E1E21_94544C\",\n  \"116\": \"432322_5E3839_170C0B_543433\",\n  \"117\": \"433D3F_A58D7D_786760_8C7C6D\",\n  \"118\": \"434240_D3D3CF_898784_A4A49F\",\n  \"119\": \"434343_9E9E9E_8C8C8C_848484\",\n  \"120\": \"434C32_62704C_546244_2F3220\",\n  \"121\": \"442C27_A79E90_847066_8D837C\",\n  \"122\": \"447072_8ACACB_65A4A5_74B3B3\",\n  \"123\": \"45432C_808361_B8C8BC_A5A27A\",\n  \"124\": \"454447_908E9A_181716_7C7C7B\",\n  \"125\": \"456A73_779B9E_173A46_154C5D\",\n  \"126\": \"463F37_ACCFBB_818B78_91A494\",\n  \"127\": \"464445_D2D0CB_919196_A8ADB0\",\n  \"128\": \"464543_D1CFC1_8E8C83_A4AC9C\",\n  \"129\": \"46804D_CBE9AC_90B57C_95D38F\",\n  \"130\": \"468126_C1DDB5_8AC460_A1D07C\",\n  \"131\": \"47392E_997E69_7C6553_8B745F\",\n  \"132\": \"474444_7B7575_9E9899_8C8C8B\",\n  \"133\": \"474643_696F7D_A9ABB8_8B8C93\",\n  \"134\": \"474843_CECEC4_898883_A3A3A4\",\n  \"135\": \"48270F_C4723B_9B5728_7B431B\",\n  \"136\": \"482908_894E0D_FBDB52_CA7420\",\n  \"137\": \"487FC9_A8E7F8_88CCF2_70AFDE\",\n  \"138\": \"489B7A_A0E7D9_6DC5AC_87DAC7\",\n  \"139\": \"48C381_226640_369F64_3CAC74\",\n  \"140\": \"49200B_C6926C_9C642B_A45C26\",\n  \"141\": \"495CA6_CCD2E6_A5B1D8_1E2852\",\n  \"142\": \"495E48_0D100D_9D9C87_9ECC9C\",\n  \"143\": \"496DBA_94C9F2_72A7E2_84B4EC\",\n  \"144\": \"4A6442_D0AB75_81CD94_181B12\",\n  \"145\": \"4B362C_715A4F_211913_644C44\",\n  \"146\": \"4B4A3A_94A3A4_68766F_988475\",\n  \"147\": \"4B5455_BBBFC4_97A0A6_838C90\",\n  \"148\": \"4C240E_A5613B_895134_734C44\",\n  \"149\": \"4C342A_7B584B_271912_6B4C44\",\n  \"150\": \"4C462E_6D876C_9AAC8F_9AABA6\",\n  \"151\": \"4C4C4C_D2D2D2_8F8F8F_ACACAC\",\n  \"152\": \"4D595E_858D87_596F84_748480\",\n  \"153\": \"4E4C42_B8C4C5_898E89_A3ACA4\",\n  \"154\": \"4E4D40_979786_AEAEA1_878678\",\n  \"155\": \"4E5150_9FA3A3_848C8A_82848C\",\n  \"156\": \"4F251B_381710_43241B_602F23\",\n  \"157\": \"4F439F_A28BE5_8570D6_7765C9\",\n  \"158\": \"4F4742_B7B1AA_847E79_969294\",\n  \"159\": \"4F4C45_A7AEAA_7A8575_9D97A2\",\n  \"160\": \"4F4F4F_9C9C9C_121212_7C7C7C\",\n  \"161\": \"4F4F4F_A1A1A1_8C8C8C_848484\",\n  \"162\": \"4F5246_8C8D84_7B7C74_131611\",\n  \"163\": \"4FE34F_2BB02B_3CD03C_1C861C\",\n  \"164\": \"50332C_D98D79_955F52_AA7C6C\",\n  \"165\": \"503522_C38254_9F6B45_845838\",\n  \"166\": \"504D3C_979C9D_81837D_9C998A\",\n  \"167\": \"513A11_CDBEB5_C8811C_9A733F\",\n  \"168\": \"51462B_DFCA7E_948050_A49874\",\n  \"169\": \"515151_DCDCDC_B7B7B7_9B9B9B\",\n  \"170\": \"515341_9A9C86_16180D_838474\",\n  \"171\": \"517919_659623_34460C_3E5813\",\n  \"172\": \"519C8D_83DAC7_9DEDE0_2B5B4C\",\n  \"173\": \"522221_91343B_7F6F6B_744960\",\n  \"174\": \"522A1A_94543A_C3896F_AB7D66\",\n  \"175\": \"525050_D4D3D3_959393_ACACAC\",\n  \"176\": \"533B33_AF9998_866965_9C7E7B\",\n  \"177\": \"535A2F_CDCA91_91915B_A4AC6F\",\n  \"178\": \"535F6B_A6BDC8_8FA3B4_7F91A2\",\n  \"179\": \"537387_75BBB9_152E5B_0E85E8\",\n  \"180\": \"54584E_B1BAC5_818B91_A7ACA3\",\n  \"181\": \"545B4D_D8DDC8_A0A792_B2C1A3\",\n  \"182\": \"54C104_BBFA0F_97EF04_7AE104\",\n  \"183\": \"55382F_78554E_271A16_6C4C44\",\n  \"184\": \"555555_C8C8C8_8B8B8B_A4A4A4\",\n  \"185\": \"556F42_112817_81927F_223E24\",\n  \"186\": \"55C404_BCFA0E_97F004_7AE104\",\n  \"187\": \"562D2A_2E1615_7E4945_703C3C\",\n  \"188\": \"56352F_1E110F_311C19_3C231C\",\n  \"189\": \"57553F_C6C3AF_8C8768_868C8C\",\n  \"190\": \"57583E_969788_292920_848474\",\n  \"191\": \"579241_B5D25D_0E1D2D_97C284\",\n  \"192\": \"582410_83381A_1F0C04_30140A\",\n  \"193\": \"583629_2E1810_765648_3C1C14\",\n  \"194\": \"584F3A_BEC3BD_C5A57D_A39073\",\n  \"195\": \"586A51_CCD5AA_8C9675_8DBBB7\",\n  \"196\": \"593E2C_E5D8A9_BC9F79_9F8A68\",\n  \"197\": \"595356_CDBFC6_AA9DA3_BBB3BC\",\n  \"198\": \"59554F_171716_847C74_2C2C24\",\n  \"199\": \"596773_B3C6CE_98AFB9_879AA8\",\n  \"200\": \"597C3F_254319_6C9668_7C9B53\",\n  \"201\": \"5A492B_DEC583_987D4D_AC9C74\",\n  \"202\": \"5A643B_454D2C_393F25_202315\",\n  \"203\": \"5B4CBC_B59AF2_9B84EB_8F78E4\",\n  \"204\": \"5B5428_C5A052_A28B46_ADA752\",\n  \"205\": \"5B574E_586967_807C6F_6A746C\",\n  \"206\": \"5C045C_BD0DBD_930493_A404A4\",\n  \"207\": \"5C2E0C_C36924_9F4F14_834114\",\n  \"208\": \"5C4E41_CCCDD6_9B979B_B1AFB0\",\n  \"209\": \"5C5743_262418_393727_342C20\",\n  \"210\": \"5C5C04_BDBD0D_939304_A4A404\",\n  \"211\": \"5C5C5C_A2A2A2_8C8C8C_848484\",\n  \"212\": \"5D5854_1A1714_373330_2C2424\",\n  \"213\": \"5D5D5D_CDCDCD_232323_ACACAC\",\n  \"214\": \"5D5E5A_A1A29B_2A2927_8B948C\",\n  \"215\": \"5E423A_8C6E69_382416_745D64\",\n  \"216\": \"5E5049_CDC2BE_9C8E88_B7ACA4\",\n  \"217\": \"5E5855_C6C4CD_C89B67_8F8E98\",\n  \"218\": \"5E5F62_A7B2BE_211C17_939CA3\",\n  \"219\": \"5ECBA4_BCFAE7_92EED0_A1F4DC\",\n  \"220\": \"5F1827_9B4A60_1F0404_340406\",\n  \"221\": \"5F4C4B_A07C7D_A8AFBF_868185\",\n  \"222\": \"5F4F50_A18E8E_8C7C7B_211A1A\",\n  \"223\": \"5F5F5F_BDBDBD_A4A4A4_9C9C9C\",\n  \"224\": \"604A30_DC9065_212C14_AC9C92\",\n  \"225\": \"60534A_211813_9B948E_8E837D\",\n  \"226\": \"605352_E9CCC5_C7A8A3_A89291\",\n  \"227\": \"606857_9BA894_8C9C83_8C9483\",\n  \"228\": \"613F04_D68C04_A45F04_1F0F04\",\n  \"229\": \"61583E_252314_928972_342C1C\",\n  \"230\": \"617586_23304C_1B1E30_4988CF\",\n  \"231\": \"622F19_885934_9A7748_94603A\",\n  \"232\": \"623622_A1756F_986353_89645B\",\n  \"233\": \"624541_FCD0C6_E4A19A_FCBCB4\",\n  \"234\": \"626262_9E9E9E_848484_262626\",\n  \"235\": \"626262_A8A8A8_949494_1F1F1F\",\n  \"236\": \"626A57_3B3F33_7D8973_444C3C\",\n  \"237\": \"626D5C_B8C2BB_1B230F_A4ACA3\",\n  \"238\": \"627D72_A6CAAA_202C28_B4D4B4\",\n  \"239\": \"630463_C30CC3_9B049B_AC04AC\",\n  \"240\": \"63533B_AA9472_1C1108_9B8C68\",\n  \"241\": \"63584B_E6E0D6_A8A092_BFB6A8\",\n  \"242\": \"635D52_A9BCC0_B1AEA0_819598\",\n  \"243\": \"636363_AAAAAA_949494_252525\",\n  \"244\": \"636D6C_D4E7ED_ABBCC4_9BA4A8\",\n  \"245\": \"637598_B7C4D3_22293A_9BACBF\",\n  \"246\": \"64554D_D1C9C1_ABADA0_0E0C0A\",\n  \"247\": \"64686F_BDC0C4_161718_A4A7AB\",\n  \"248\": \"647171_1F3349_2A475C_87A5AD\",\n  \"249\": \"647686_23292E_333C44_404B55\",\n  \"250\": \"656662_9B9B99_393B31_8B8C8C\",\n  \"251\": \"657274_2A2F30_A0A7B0_363C44\",\n  \"252\": \"65A0BA_C3E4F1_A7D5E6_97CADF\",\n  \"253\": \"65A0C7_C3E4F8_A7D5EF_97CAE9\",\n  \"254\": \"660505_F2B090_DD4D37_AA1914\",\n  \"255\": \"66605E_939198_2E261F_3C332A\",\n  \"256\": \"666864_B3B4AB_2F2F2C_9CA49B\",\n  \"257\": \"673B2A_99735C_99593A_3A160E\",\n  \"258\": \"677E93_36444D_99A9BA_435464\",\n  \"259\": \"678E67_C4D9C4_ACC8AC_98B898\",\n  \"260\": \"68049F_C90DE6_A404CF_B304DC\",\n  \"261\": \"683F2D_9F736D_431D06_966152\",\n  \"262\": \"68493E_B2AAA9_978C8C_130907\",\n  \"263\": \"684C40_776E69_9B7765_758D96\",\n  \"264\": \"685B57_BEB1B1_9B99A4_1E1D1D\",\n  \"265\": \"686464_CCCAC7_A4A19F_BCB4B4\",\n  \"266\": \"686B73_2A2B2D_D5D9DD_B0B3BC\",\n  \"267\": \"686E55_353C2F_869B7F_444434\",\n  \"268\": \"696347_98B0A2_28261E_362B22\",\n  \"269\": \"696969_A0A0A0_949494_8C8C8C\",\n  \"270\": \"6A3C15_EFC898_D59D59_B38346\",\n  \"271\": \"6A5338_1C120B_C5975F_96886C\",\n  \"272\": \"6A8287_405153_839EBE_424C5C\",\n  \"273\": \"6B3822_A65D48_824E48_401E0C\",\n  \"274\": \"6BBD6B_C8F3C8_A3E2A3_B4ECB4\",\n  \"275\": \"6C52AA_C9A6EA_A681D6_B494E2\",\n  \"276\": \"6C5DC3_352D66_5C4CAB_544CA5\",\n  \"277\": \"6C6F76_CBD1D7_B2BDC7_A6B0BF\",\n  \"278\": \"6C8996_14223F_B9DEDD_2E445C\",\n  \"279\": \"6D1616_E6CDBA_DE2B24_230F0F\",\n  \"280\": \"6D3B1C_895638_502A0D_844C31\",\n  \"281\": \"6D6050_C8C2B9_A2998E_B4AA9F\",\n  \"282\": \"6D6D6D_3E3E3E_C0C0C0_949494\",\n  \"283\": \"6E2E36_D3A1A0_BD7175_C78C8B\",\n  \"284\": \"6E5137_E8CA90_271912_B99C74\",\n  \"285\": \"6E524D_8496C5_AF6624_100B11\",\n  \"286\": \"6E6D69_D0ECE9_AAC7C6_200C0C\",\n  \"287\": \"6E7181_D1CFDF_ABAFC7_B4BCCE\",\n  \"288\": \"6E8C48_B8CDA7_344018_A8BC94\",\n  \"289\": \"6EC66E_C9F8C9_A3E8A3_B4F1B4\",\n  \"290\": \"6F503E_D59A70_221812_B0A899\",\n  \"291\": \"705B4B_312821_AF927B_44342C\",\n  \"292\": \"706962_24211E_BCB6AF_ACA494\",\n  \"293\": \"713A28_A87661_3A160D_9B6454\",\n  \"294\": \"714C30_EAD7C5_CC9265_E2B48F\",\n  \"295\": \"716049_D1C8B9_3F160C_BAA6A9\",\n  \"296\": \"71623B_ECDE8C_30250A_ABA69A\",\n  \"297\": \"72625B_F0DFD0_D9BAA5_C3A595\",\n  \"298\": \"726F5B_A09C88_8B8C7B_94907C\",\n  \"299\": \"727167_2F2F2B_A3A6A2_44443C\",\n  \"300\": \"728473_534C40_7BCEC8_7BB9B6\",\n  \"301\": \"736655_D9D8D5_2F281F_B1AEAB\",\n  \"302\": \"745359_BFAEA8_9B8384_AC9392\",\n  \"303\": \"746761_291C19_AB9385_3C2B27\",\n  \"304\": \"747A6F_292E2A_ACA79F_45453B\",\n  \"305\": \"74A192_041B0D_194C33_235B4C\",\n  \"306\": \"75322B_96463F_51201A_3D1814\",\n  \"307\": \"75723E_C0C3A0_2A1E0E_AFAE77\",\n  \"308\": \"75746F_333330_A2A1A9_444444\",\n  \"309\": \"758391_BAC2CA_435263_A1ACBC\",\n  \"310\": \"763B28_D0BDB8_ADA39E_1E1D1D\",\n  \"311\": \"763C39_431510_210504_55241C\",\n  \"312\": \"764739_D0917B_2A1611_B37C68\",\n  \"313\": \"765938_1F1009_A59C7C_C9A382\",\n  \"314\": \"766554_C1BEBB_2A1A0E_B4ABAC\",\n  \"315\": \"76787C_2F3031_A5A9B8_444446\",\n  \"316\": \"767989_323437_B6C4EE_343C44\",\n  \"317\": \"771A1F_D2939E_B6595D_9D4B54\",\n  \"318\": \"773012_AE5124_4D1908_340F04\",\n  \"319\": \"776045_D2CCC3_281910_BBB5AA\",\n  \"320\": \"776A5C_BA9A89_302C26_443C34\",\n  \"321\": \"776C62_292622_474039_3C342C\",\n  \"322\": \"777C61_333727_BABFA1_A5AC8C\",\n  \"323\": \"777D7D_BDCAD2_3E3C2E_B1B8B6\",\n  \"324\": \"787165_DAD9CD_9DC0CE_36302A\",\n  \"325\": \"7877EE_D87FC5_75D9C7_1C78C0\",\n  \"326\": \"794E40_361612_4C2A21_441B1B\",\n  \"327\": \"795038_C2856B_533320_AC7C61\",\n  \"328\": \"796D6B_DED3CB_C6BAB1_ADA09B\",\n  \"329\": \"796F52_36413A_C9B48C_B6A77F\",\n  \"330\": \"797367_302E29_ABA3A0_443C35\",\n  \"331\": \"7A6959_2D271D_C1B5A9_B4A393\",\n  \"332\": \"7A736F_463F33_575046_4B463D\",\n  \"333\": \"7A7A7A_D0D0D0_BCBCBC_B4B4B4\",\n  \"334\": \"7A7A7A_D9D9D9_BCBCBC_B4B4B4\",\n  \"335\": \"7A7C63_625531_665B3F_5B4B29\",\n  \"336\": \"7A9196_485C64_425459_C1E4E7\",\n  \"337\": \"7B5254_E9DCC7_B19986_C8AC91\",\n  \"338\": \"7B6857_383028_BCA38F_4C3C34\",\n  \"339\": \"7B6E5B_C5CACC_B1B2AE_322415\",\n  \"340\": \"7B7E82_343536_A0B1C8_44444C\",\n  \"341\": \"7C584C_27140D_B3765C_3D2318\",\n  \"342\": \"7C7C71_353630_ADAFAF_444444\",\n  \"343\": \"7D6651_F8E3BF_CEA987_E7C29C\",\n  \"344\": \"7D7673_353230_AEA7B0_4C4444\",\n  \"345\": \"7DA1BA_A4CCE8_5D7A8B_5E7C94\",\n  \"346\": \"7E5344_22120E_CCAB9C_8D919D\",\n  \"347\": \"7E5E57_AD9794_612D1D_C9997D\",\n  \"348\": \"7E8174_39444D_CECAA7_B3B49B\",\n  \"349\": \"7F5134_22120A_452110_9F7D5F\",\n  \"350\": \"7F8896_3B3936_BBCFE9_4B4B4D\",\n  \"351\": \"803537_310F10_C35A5D_D89093\",\n  \"352\": \"807068_C3B0AB_443E3B_AC9C94\",\n  \"353\": \"80726C_DCDBD7_9AA6C2_B7BFCA\",\n  \"354\": \"808A5B_E0E1D4_2C4304_C5C7B0\",\n  \"355\": \"80A6B4_D5E9EF_B2D0D9_C1DCE4\",\n  \"356\": \"80CA23_B7EE37_D5FA4C_A3E434\",\n  \"357\": \"812828_521818_C94141_AB3737\",\n  \"358\": \"812E39_551C24_381117_9E3C49\",\n  \"359\": \"815C41_F6C99A_D39F77_BB9474\",\n  \"360\": \"815F54_DECBC6_301813_C5A8A0\",\n  \"361\": \"8194AB_D6DFEB_C0CEDE_B0BFD1\",\n  \"362\": \"81ADB3_D6ECEE_BFDEE1_AFD1D7\",\n  \"363\": \"81BABA_D5F3F3_BBE4E4_ABDCDC\",\n  \"364\": \"825C4D_A08175_97746C_613B2F\",\n  \"365\": \"826A59_E0C9B9_CBAD99_3D2615\",\n  \"366\": \"827C87_4F3937_605457_534C4E\",\n  \"367\": \"834741_4C281D_BE8F8C_AE6A65\",\n  \"368\": \"835984_39273A_4C334C_593D5A\",\n  \"369\": \"837667_DCD4C8_C5BAAC_3C2E22\",\n  \"370\": \"846556_503E33_61493D_5C4434\",\n  \"371\": \"848679_363630_AABBB7_4B4B44\",\n  \"372\": \"855D08_DAC31B_BF9B0C_AF860C\",\n  \"373\": \"85694C_D1A67A_3C2F22_EBBF8F\",\n  \"374\": \"857B61_ACE5D4_593D28_5B4334\",\n  \"375\": \"858362_9F9F80_9C9673_70714B\",\n  \"376\": \"85B9D3_C9EAF9_417277_528789\",\n  \"377\": \"866C5B_544237_B29B8C_AC8F7C\",\n  \"378\": \"872F2D_AB403E_682421_581F1C\",\n  \"379\": \"877B70_34302B_CBB3A4_524C44\",\n  \"380\": \"877C72_B6ACBB_36322D_4C443B\",\n  \"381\": \"878787_4C4C4C_646464_5C5C5C\",\n  \"382\": \"887153_E5C188_433729_C1A484\",\n  \"383\": \"888D8F_515454_646A6C_6C6C6D\",\n  \"384\": \"89204B_17080D_DA4377_F780B5\",\n  \"385\": \"8955D0_744CC4_EA4AEF_954DA4\",\n  \"386\": \"8A3B3D_DA5F62_461F20_BC7F81\",\n  \"387\": \"8A3DA1_D77CE4_C263D4_B75AC9\",\n  \"388\": \"8A5B34_F3BD7C_DA9758_BE7E45\",\n  \"389\": \"8A6565_2E214D_D48A5F_ADA59C\",\n  \"390\": \"8A7666_3C332C_C6AEA2_54443C\",\n  \"391\": \"8A7968_3C342D_C6B3A5_54443B\",\n  \"392\": \"8B7469_443E39_C7A797_544443\",\n  \"393\": \"8B795F_291504_EFE5D4_4A3518\",\n  \"394\": \"8B892C_D4E856_475E2D_47360A\",\n  \"395\": \"8C5945_D4C0B6_C3A49C_430504\",\n  \"396\": \"8CAEBC_3A4443_506463_DAEFEF\",\n  \"397\": \"8D553D_3C2419_5D3727_AA766C\",\n  \"398\": \"8D8D8D_DDDDDD_CCCCCC_B7B7B7\",\n  \"399\": \"8E6767_D9C4C4_C8ACAC_B89898\",\n  \"400\": \"8E7C67_E2C6A5_3B332A_C3AB94\",\n  \"401\": \"8E907C_B1B5A7_D7DBD0_CCCFBA\",\n  \"402\": \"8F4277_361530_BF538E_52274C\",\n  \"403\": \"8F4E20_E8B06B_391A08_CC8944\",\n  \"404\": \"8F5D3C_5B3B26_382416_70482E\",\n  \"405\": \"8F7B61_D6B892_4E4436_C3AC86\",\n  \"406\": \"8F894E_DAD79B_C9C384_C4BE7B\",\n  \"407\": \"903B2A_EC9888_D96747_58190D\",\n  \"408\": \"906867_C7B6BC_5D2E26_BEA4A3\",\n  \"409\": \"908887_3C3229_C7C6D0_554A45\",\n  \"410\": \"908E8E_292828_454444_595757\",\n  \"411\": \"909473_555D4B_C2CCA2_645B3C\",\n  \"412\": \"910E5A_E127C3_CF1CA3_C1158F\",\n  \"413\": \"926B48_4C2D0D_5F3913_AA8874\",\n  \"414\": \"927253_EECEA7_D8B792_C7A883\",\n  \"415\": \"935555_F6DAD9_D39393_593333\",\n  \"416\": \"936451_C29A8F_5F3A2B_361D14\",\n  \"417\": \"938C8D_403731_CECED8_554C4C\",\n  \"418\": \"942967_D292B5_C76E9E_551A4C\",\n  \"419\": \"945D43_E5AAA0_351F14_CC8B78\",\n  \"420\": \"94615B_DACED1_C3B9A4_CCABAA\",\n  \"421\": \"94624F_573529_24110C_733424\",\n  \"422\": \"9650CA_46236A_7239A6_633492\",\n  \"423\": \"965146_2B191D_DF7A5C_BFD6E1\",\n  \"424\": \"96785D_B8A398_63452C_6C5435\",\n  \"425\": \"975337_EEBE98_4B211C_D88659\",\n  \"426\": \"977970_E1D9D8_DAC8C1_C4B2AD\",\n  \"427\": \"98332E_4A100D_691A16_A85A5B\",\n  \"428\": \"989784_665542_BFECE5_6D644C\",\n  \"429\": \"9A5A55_31110D_582A24_703C34\",\n  \"430\": \"9A7467_D2C2BF_662D22_CCB2A5\",\n  \"431\": \"9AA8B6_313133_4E5055_D7EBF8\",\n  \"432\": \"9B4816_E8A138_CC7421_DC8827\",\n  \"433\": \"9B9994_E1E0DB_474643_544C4C\",\n  \"434\": \"9B9B9B_1E1E1E_5C5C5C_444444\",\n  \"435\": \"9C5B3B_49200A_E9C8AB_DDAB7D\",\n  \"436\": \"9CC338_4E671A_799F27_8CAC2C\",\n  \"437\": \"9D282A_38191D_DFC6CD_D6495A\",\n  \"438\": \"9D4343_E38989_D37474_CE6C6C\",\n  \"439\": \"9D602E_E4C363_D5A64F_C38A44\",\n  \"440\": \"9D7F6E_C6DAD4_6D4C4B_C6BBBC\",\n  \"441\": \"9D8F84_5D4544_D9D3C9_62555A\",\n  \"442\": \"9D9D9D_4E4E4E_646464_6C6C6C\",\n  \"443\": \"9E7C7E_DDCBD0_351D20_683B38\",\n  \"444\": \"9E9C77_6E6F4E_7C7C54_C7BF96\",\n  \"445\": \"9F1A27_F1AF7F_CD5845_D08441\",\n  \"446\": \"9F4738_CE958D_4F0C0A_C0837C\",\n  \"447\": \"9F7D30_B69F75_B9B7BE_CB9C4D\",\n  \"448\": \"9F886D_362F25_E8C9A4_5C4C3C\",\n  \"449\": \"9F9F9F_E4E4E4_D4D4D4_CCCCCC\",\n  \"450\": \"A05F31_D5C2BC_D9996F_42230E\",\n  \"451\": \"A0A8B0_424336_E7E9EF_545C5C\",\n  \"452\": \"A1824F_4A2A06_F7E29F_B3A598\",\n  \"453\": \"A27216_E9D036_D0AB24_DCB927\",\n  \"454\": \"A28766_E4D6C3_D6C4AA_CAB598\",\n  \"455\": \"A3B2A4_3B3E3D_676F6A_535C57\",\n  \"456\": \"A48DA4_E8DDE8_C9B7C9_D4C2D4\",\n  \"457\": \"A49994_695244_C4C2CF_76645C\",\n  \"458\": \"A67362_36150C_5E2E1E_F6C3BF\",\n  \"459\": \"A84337_611D18_3F110F_7C2A22\",\n  \"460\": \"A88C77_DAD2C7_623532_956229\",\n  \"461\": \"A95E4D_57261A_6E3223_773C24\",\n  \"462\": \"A971A9_E8CBE8_D4A8D4_DCB3DC\",\n  \"463\": \"A98D6A_F2D3AB_FBE6BE_695332\",\n  \"464\": \"A9A2A0_2F211C_544440_6D5E5A\",\n  \"465\": \"AA526C_EAA6C9_DC88AF_D17BA0\",\n  \"466\": \"AB2C2C_EBB4B3_561212_DE8484\",\n  \"467\": \"AB2D08_C35E5A_C75522_C56C70\",\n  \"468\": \"AB54A8_EBAAE9_DF8FDD_D37ED0\",\n  \"469\": \"AC171C_FA8593_E84854_D3464E\",\n  \"470\": \"AC725C_2E1610_663E31_E78F6B\",\n  \"471\": \"AC7F84_78463A_C4AABB_885454\",\n  \"472\": \"AC8942_432D19_6E4D27_5F3B1C\",\n  \"473\": \"AC8961_EBDAC3_D1B791_DCC2A0\",\n  \"474\": \"AD9E81_F1E5CE_6B5C3E_5A492A\",\n  \"475\": \"ADC2CD_DFF7FA_C9E6F5_C1DBEC\",\n  \"476\": \"AE9D99_29303B_585F70_875C33\",\n  \"477\": \"AF986F_CDB489_9C7C5B_7E6C4D\",\n  \"478\": \"AF987A_2F2416_523F27_6B5331\",\n  \"479\": \"AF9A72_504718_74652B_E2C2A2\",\n  \"480\": \"B06932_451B09_7B3E16_150804\",\n  \"481\": \"B09273_7A573D_C7AF97_84644C\",\n  \"482\": \"B0A2A8_866A63_E8E9F2_614C4F\",\n  \"483\": \"B0B0B0_6E6E6E_848484_8C8C8C\",\n  \"484\": \"B1A395_EFE6E1_635A47_786D5D\",\n  \"485\": \"B2674B_552913_7C442F_733919\",\n  \"486\": \"B26F52_4B2E2B_79493A_663B32\",\n  \"487\": \"B27744_5A2804_F6C488_EBB27D\",\n  \"488\": \"B38B76_40251D_745042_5F3A30\",\n  \"489\": \"B3AA93_F4EFD7_E1DDC2_DCD3BB\",\n  \"490\": \"B47A5B_301E14_704A31_633C23\",\n  \"491\": \"B4B29D_442D0D_604E2A_736542\",\n  \"492\": \"B5987E_F8E4DC_6F5939_E9CCBA\",\n  \"493\": \"B5BBB5_3B4026_6E745D_5C6147\",\n  \"494\": \"B62D33_E4868B_7E2D34_DD6469\",\n  \"495\": \"B66D59_F0C9B2_E5B49C_DAA084\",\n  \"496\": \"B67F6B_4B2E2A_6C3A34_F3DBC6\",\n  \"497\": \"B6B8B1_994A24_315C81_927963\",\n  \"498\": \"B76E5E_7F3A2F_EE938C_F8A5A1\",\n  \"499\": \"B7A763_E6E1CC_554A1E_6C6428\",\n  \"500\": \"B86137_FBCA6F_6F3C37_040404\",\n  \"501\": \"B9896A_5B341B_F4CAA3_6C4C2D\",\n  \"502\": \"B98A6D_7B4F38_D1A68F_8C5B43\",\n  \"503\": \"B9B37A_F1EED0_E5E4BA_DAD6A8\",\n  \"504\": \"B9CDD2_775339_958272_7F6A5E\",\n  \"505\": \"BA472D_CA6E67_C76150_CA6C59\",\n  \"506\": \"BA5DBA_F2BEF2_E69BE6_DC8CDC\",\n  \"507\": \"BA864A_5D381E_644422_FBE97A\",\n  \"508\": \"BA8979_DDCBCA_9A4726_892407\",\n  \"509\": \"BAADA8_ECE6E7_9A8378_E3DCD3\",\n  \"510\": \"BC5B43_95170B_EEAC92_DB8C7C\",\n  \"511\": \"BC928D_F9E2D6_654445_835A51\",\n  \"512\": \"BD0D0D_970404_7B0404_550404\",\n  \"513\": \"BD5345_460F11_732622_EDB7B1\",\n  \"514\": \"BDB466_F3EDC3_E3DD9F_ECE3AA\",\n  \"515\": \"BE5F5F_F4BDBD_ECA4A4_E29191\",\n  \"516\": \"BEE2E9_7E6A53_9AA09C_87837E\",\n  \"517\": \"BF7051_994C2D_E99A7B_DE8C74\",\n  \"518\": \"BF7745_F5D08E_E5AE6B_ECBC7C\",\n  \"519\": \"BF8E78_E5CCBF_753E32_4A261E\",\n  \"520\": \"BFAA83_F5EAD6_E1D0B1_EBDDC0\",\n  \"521\": \"BFB5A4_DEDCCB_D7D4CC_DCD3C2\",\n  \"522\": \"C05429_ED6129_94492A_834729\",\n  \"523\": \"C09E5C_DAD2B9_654429_81582D\",\n  \"524\": \"C1AA92_AD6E29_737889_CED1D7\",\n  \"525\": \"C1B3A1_F6EEE5_E1D7C7_ECE4D3\",\n  \"526\": \"C21338_920C24_E71C54_F34A7D\",\n  \"527\": \"C28E4E_845119_0B0805_713C0C\",\n  \"528\": \"C2A391_523728_785741_694836\",\n  \"529\": \"C2A584_363B41_71665B_8C7367\",\n  \"530\": \"C2AB7D_4A412E_7A6B4E_F9EDBE\",\n  \"531\": \"C30C0C_9F0404_830404_5C0404\",\n  \"532\": \"C33829_48171A_752523_942923\",\n  \"533\": \"C345EC_5F1DAA_9F31DB_872CCD\",\n  \"534\": \"C35C04_F9C30C_EE9F04_E08304\",\n  \"535\": \"C3CCD4_5F3B23_948A7B_A9A49A\",\n  \"536\": \"C47004_F9D00C_EDAF04_E09704\",\n  \"537\": \"C4A591_635448_F2D9D5_856D5B\",\n  \"538\": \"C4C6C6_4D5756_646463_7A8080\",\n  \"539\": \"C4DEDE_97B5B5_EAF9F9_ABC4C4\",\n  \"540\": \"C5A292_635247_F2D7D6_846A5B\",\n  \"541\": \"C5BBB6_F8F4F1_E2DAD6_ECE3DF\",\n  \"542\": \"C75F55_F8BDA9_EB9484_F4A494\",\n  \"543\": \"C7938D_E0DBE1_D1BBBC_D5CCCB\",\n  \"544\": \"C7B9A1_F8F1E4_EEE4D2_E4D8C4\",\n  \"545\": \"C7C0AC_2E181B_543B30_6B6270\",\n  \"546\": \"C7C7D7_4C4E5A_818393_6C6C74\",\n  \"547\": \"C87157_F8CBAE_E9A582_F2B394\",\n  \"548\": \"C88467_5B3333_875C5A_7A3822\",\n  \"549\": \"C8AF84_F9ECD7_EFDEBF_E6D1AF\",\n  \"550\": \"C8C8C8_3F3F3F_787878_5C5C5C\",\n  \"551\": \"C8D1DC_575B62_818892_6E747B\",\n  \"552\": \"C98D7F_3B0B0B_A97667_94433F\",\n  \"553\": \"C99A8B_491B0E_6E4136_8A4D28\",\n  \"554\": \"C9C7BE_55514B_888279_7B6E5F\",\n  \"555\": \"CA4FE1_6B2398_A337C7_9334BC\",\n  \"556\": \"CA8892_F9D7DC_EBB8C0_F3C4CC\",\n  \"557\": \"CAA094_875343_956255_EADEDC\",\n  \"558\": \"CAA78A_F9E7D7_EAD0B9_F3DCC3\",\n  \"559\": \"CAAC80_FAEBD5_F2DEBF_EAD1AF\",\n  \"560\": \"CAB094_F9ECDD_EFDEC8_E8D4BD\",\n  \"561\": \"CAB79D_F9F1E3_F1E5D1_E9DAC6\",\n  \"562\": \"CAE24E_6C9A23_A3C737_B3D43C\",\n  \"563\": \"CB4934_FB9971_F07554_F68464\",\n  \"564\": \"CB4E88_F99AD6_F384C3_ED75B9\",\n  \"565\": \"CB5E3B_FABC7A_EF965E_F4A46C\",\n  \"566\": \"CB7146_551D0F_7C270D_E5AB9C\",\n  \"567\": \"CB7846_753C22_AB5C32_B46C3C\",\n  \"568\": \"CB919B_F9DDE1_ECC0C8_F4CCD4\",\n  \"569\": \"CBCBCB_595959_8C8C8C_747474\",\n  \"570\": \"CC7C5F_A15436_B26346_AF5C3C\",\n  \"571\": \"CC9A7E_8A5249_C06A3E_DADADA\",\n  \"572\": \"CCC5C9_3B2B2B_67585B_7F7375\",\n  \"573\": \"CCF6FA_9DD9EB_82C5D9_ACD4E4\",\n  \"574\": \"CDC3B8_5A3F3C_67545A_8D7769\",\n  \"575\": \"CDCBC8_444342_696765_81807E\",\n  \"576\": \"CE8C15_EAC79B_DDAB57_F9C962\",\n  \"577\": \"CE8F3D_F0D2B0_F3C77D_E6B278\",\n  \"578\": \"CEB299_6B5C4C_887564_746355\",\n  \"579\": \"D04444_AF2F2F_8B2424_9B2C2C\",\n  \"580\": \"D07E3F_FBBD1F_8D2840_24120C\",\n  \"581\": \"D0CCCB_524D50_928891_727581\",\n  \"582\": \"D0D3BE_816854_998366_685146\",\n  \"583\": \"D1AC04_F8E50A_EDD004_B38D04\",\n  \"584\": \"D3CAAB_8C866E_C0B89A_AEA68A\",\n  \"585\": \"D4855F_92512D_AE6742_A75C2C\",\n  \"586\": \"D54C2B_5F1105_F39382_F08375\",\n  \"587\": \"D5B5B4_9E6C6F_F5E9EF_A57986\",\n  \"588\": \"D5D5D5_929292_ACACAC_B4B4B4\",\n  \"589\": \"D64480_E27497_EA9BB1_CD156F\",\n  \"590\": \"D7D7C3_AAAA92_F5F5EA_BCBCA4\",\n  \"591\": \"D7DFDB_AAB5AF_F5FAF7_BCC4C4\",\n  \"592\": \"D8388B_230A14_FCC8FC_FC71E1\",\n  \"593\": \"D8C949_F5F19E_6B7855_9A9858\",\n  \"594\": \"D8D8E5_9D9DAF_B4B4C4_B4B4CC\",\n  \"595\": \"DA5788_DE94BD_E078A3_DD83B4\",\n  \"596\": \"DBDBBB_F7F7E4_AFAF89_C4C49C\",\n  \"597\": \"DC3E04_B52604_FC7D20_F85F04\",\n  \"598\": \"DE9261_86361E_A85A37_944C2C\",\n  \"599\": \"DEDEC4_B5B597_F9F9EA_C4C4AB\",\n  \"600\": \"DEE3E8_A6AEB5_BCC4CC_BCC4C4\",\n  \"601\": \"DEE8DE_A6B5A6_BCCCBC_BCC4BC\",\n  \"602\": \"DEE8E8_A6B5B5_BCCCCC_BAC4C4\",\n  \"603\": \"DFD9C2_B5AE92_F9F7EA_C4C4A4\",\n  \"604\": \"DFDBB7_F9F8E3_B5AF86_BCBC8C\",\n  \"605\": \"DFDFCA_4D2D07_6B5224_857145\",\n  \"606\": \"DFDFD6_58544E_81766A_989288\",\n  \"607\": \"E1E1D4_777C7B_9FA19A_898F8D\",\n  \"608\": \"E1E1E0_363636_989897_747472\",\n  \"609\": \"E2D3BC_867255_B39E7F_96836C\",\n  \"610\": \"E2E2E7_AEAEB5_C4C4CC_C4C4C4\",\n  \"611\": \"E42E12_F35132_F86949_B71B0A\",\n  \"612\": \"E5DED7_AFA69D_C4BCB4_C3BAAB\",\n  \"613\": \"E6BF3C_5A4719_977726_FCFC82\",\n  \"614\": \"E6E3E3_B5AFAF_CCC4C4_C4C4C4\",\n  \"615\": \"E6E6E6_AAAAAA_C4C4C4_CCCCCC\",\n  \"616\": \"E7632F_FBA06B_BB2905_FB865E\",\n  \"617\": \"E7E2D8_B1AA9D_C9C2B3_BCB4AC\",\n  \"618\": \"E80404_B50404_CB0404_FC3333\",\n  \"619\": \"E804E8_B504B5_CC04CC_FC33FC\",\n  \"620\": \"E8DEE1_B5A6AA_CCBCC1_C4BBBC\",\n  \"621\": \"E8E5DE_B5AFA6_CCC5BC_C4C4BB\",\n  \"622\": \"E8E8DE_B5B5A6_CCCCBC_C4C4BA\",\n  \"623\": \"E9CCA1_A63106_DF8C3B_621304\",\n  \"624\": \"EA783E_6D4830_905837_FCDC6C\",\n  \"625\": \"EAD8D6_B59A97_CCB4B0_C9ABAB\",\n  \"626\": \"EAEAEA_B5B5B5_CCCCCC_D4D4D4\",\n  \"627\": \"EAEAEA_B6B6B6_CCCCCC_C4C4C4\",\n  \"628\": \"ED4630_791A0E_A42716_501009\",\n  \"629\": \"ED5087_FAC3D0_1C0B0C_FC84CC\",\n  \"630\": \"ED7F04_FCD60E_7E2D04_B73E04\",\n  \"631\": \"EDED06_B5B504_CCCC04_D4D404\",\n  \"632\": \"EE4128_FC8E82_9A0704_BF0F05\",\n  \"633\": \"EEECFB_BFB6D5_D0C8EB_CCC4DC\",\n  \"634\": \"F0D504_FBFAD3_B98609_CDA204\",\n  \"635\": \"F75F0B_461604_9A3004_FB9D2F\",\n  \"636\": \"F77777_FBE1E1_FAB2B2_FBC4C4\",\n  \"637\": \"F79686_FCCBD4_E76644_E76B56\",\n  \"638\": \"F9E6C7_FCF7DF_EDD3AA_F1D4B4\",\n  \"639\": \"FBB43F_FBE993_FB552E_FCDD65\",\n  \"640\": \"FBB82D_FBEDBF_FBDE7D_FB7E05\"\n};\n\nfunction getFormatString(format) {\n  switch (format) {\n    case 64:\n      return '-64px';\n\n    case 128:\n      return '-128px';\n\n    case 256:\n      return '-256px';\n\n    case 512:\n      return '-512px';\n\n    default:\n      return '';\n  }\n}\n\nconst MATCAP_ROOT = 'https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d';\nconst DEFAULT_MATCAP = matcapList[0];\nfunction useMatcapTexture(id = 0, format = 1024) {\n  const numTot = useMemo(() => Object.keys(matcapList).length, []);\n  const fileHash = useMemo(() => {\n    if (typeof id === 'string') {\n      return id;\n    } else if (typeof id === 'number') {\n      return matcapList[id];\n    }\n\n    return null;\n  }, [id]);\n  const fileName = \"\" + (fileHash || DEFAULT_MATCAP) + getFormatString(format) + \".png\";\n  const url = MATCAP_ROOT + \"/\" + format + \"/\" + fileName;\n  const matcapTexture = useTextureLoader(url);\n  return [matcapTexture, url, numTot];\n}\n\nvar normalsList = {\n  \"0\": \"151_norm.JPG\",\n  \"1\": \"152_norm.JPG\",\n  \"2\": \"153_norm.JPG\",\n  \"3\": \"154_norm.JPG\",\n  \"4\": \"155_norm.JPG\",\n  \"5\": \"156_norm.JPG\",\n  \"6\": \"157_norm.JPG\",\n  \"7\": \"158_norm.JPG\",\n  \"8\": \"159_norm.JPG\",\n  \"9\": \"160_norm.JPG\",\n  \"10\": \"161_norm.JPG\",\n  \"11\": \"162_norm.JPG\",\n  \"12\": \"163_norm.JPG\",\n  \"13\": \"164_norm.JPG\",\n  \"14\": \"165_norm.JPG\",\n  \"15\": \"166_norm.JPG\",\n  \"16\": \"167_norm.JPG\",\n  \"17\": \"168_norm.JPG\",\n  \"18\": \"169_norm.JPG\",\n  \"19\": \"170_norm.JPG\",\n  \"20\": \"171_norm.JPG\",\n  \"21\": \"172_norm.JPG\",\n  \"22\": \"173_norm.JPG\",\n  \"23\": \"174_norm.jpg\",\n  \"24\": \"175_norm.JPG\",\n  \"25\": \"176_norm.JPG\",\n  \"26\": \"177_norm.JPG\",\n  \"27\": \"178_norm.JPG\",\n  \"28\": \"179_norm.JPG\",\n  \"29\": \"180_norm.JPG\",\n  \"30\": \"181_norm.JPG\",\n  \"31\": \"182_norm.JPG\",\n  \"32\": \"183_norm.JPG\",\n  \"33\": \"184_norm.JPG\",\n  \"34\": \"185_norm.JPG\",\n  \"35\": \"186_norm.JPG\",\n  \"36\": \"187_norm.JPG\",\n  \"37\": \"188_norm.JPG\",\n  \"38\": \"189_norm.JPG\",\n  \"39\": \"190_norm.JPG\",\n  \"40\": \"191_norm.JPG\",\n  \"41\": \"192_norm.JPG\",\n  \"42\": \"193_norm.JPG\",\n  \"43\": \"194_norm.JPG\",\n  \"44\": \"195_norm.JPG\",\n  \"45\": \"196_norm.JPG\",\n  \"46\": \"197_norm.JPG\",\n  \"47\": \"198_norm.JPG\",\n  \"48\": \"199_norm.JPG\",\n  \"49\": \"200_norm.JPG\",\n  \"50\": \"201_norm.jpg\",\n  \"51\": \"202_norm.jpg\",\n  \"52\": \"203_norm.jpg\",\n  \"53\": \"204_norm.jpg\",\n  \"54\": \"205_norm.jpg\",\n  \"55\": \"206_norm.jpg\",\n  \"56\": \"207_norm.jpg\",\n  \"57\": \"208_norm.jpg\",\n  \"58\": \"209_norm.jpg\",\n  \"59\": \"210_norm.jpg\",\n  \"60\": \"211_norm.jpg\",\n  \"61\": \"212_norm.jpg\",\n  \"62\": \"213_norm.jpg\",\n  \"63\": \"214_norm.jpg\",\n  \"64\": \"215_norm.jpg\",\n  \"65\": \"216_norm.jpg\",\n  \"66\": \"217_norm.jpg\",\n  \"67\": \"218_norm.jpg\",\n  \"68\": \"219_norm.jpg\",\n  \"69\": \"220_norm.jpg\",\n  \"70\": \"221_norm.jpg\",\n  \"71\": \"222_norm.jpg\",\n  \"72\": \"223_norm.jpg\",\n  \"73\": \"224_norm.jpg\",\n  \"74\": \"225_norm.jpg\",\n  \"75\": \"226_norm.jpg\"\n};\n\nconst NORMAL_ROOT = 'https://rawcdn.githack.com/emmelleppi/normal-maps/f24c810fc1d86b5b1e5dfea914b668f70b5f2923';\nconst DEFAULT_NORMAL = normalsList[0];\nfunction useNormalTexture(id = 0, {\n  repeat = [1, 1],\n  anisotropy = 1,\n  offset = [0, 0]\n}) {\n  const numTot = useMemo(() => Object.keys(normalsList).length, []);\n  const imageName = normalsList[id] || DEFAULT_NORMAL;\n  const url = NORMAL_ROOT + \"/normals/\" + imageName; // @ts-expect-error\n\n  const normalTexture = useTextureLoader(url);\n  useEffect(() => {\n    if (!normalTexture) return;\n    normalTexture.wrapS = normalTexture.wrapT = RepeatWrapping;\n    normalTexture.repeat = new Vector2(repeat[0], repeat[1]);\n    normalTexture.offset = new Vector2(offset[0], offset[1]);\n    normalTexture.anisotropy = anisotropy;\n  }, [normalTexture, anisotropy, repeat, offset]);\n  return [normalTexture, url, numTot];\n}\n\nexport { Billboard, Box, Circle, Cone, Cylinder, Detailed, DeviceOrientationControls, Dodecahedron, Extrude, FlyControls, HTML, Html, Icosahedron, Lathe, Line, Loader, MapControls, MeshDistortMaterial, MeshWobbleMaterial, Octahedron, OrbitControls, OrthographicCamera, Parametric, PerspectiveCamera, Plane, PointerLockControls, Polyhedron, PositionalAudio, Reflector, Ring, RoundedBox, Shadow, Sky, Sphere, Stars, Stats, Tetrahedron, Text, Torus, TorusKnot, TrackballControls, TransformControls, Tube, draco, meshBounds, shaderMaterial, softShadows, useAspect, useCamera, useCubeTextureLoader, useGLTFLoader, useHelper, useMatcapTexture, useNormalTexture, useProgress, useSimplification, useSubdivision, useTessellation, useTextureLoader };\n"],"sourceRoot":""}